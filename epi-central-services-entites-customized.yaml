openapi: 3.1.0
info:
  title: EPI Central Services API
  version: 0.1.0-20250306
  contact:
    name: EPI Company
    url: https://epicompany.eu
    email: info@epicompany.eu
  license:
    name: Proprietary
    identifier: Proprietary
servers:
- url: https://hom-api.ca-ps.group.gca/epi/central-services
  description: Homologation
- url: https://api.ca-ps.group.gca/epi/central-services
  description: Production
tags:
- name: acceptors
  description: An acceptor PSP can register and manage acceptors. An acceptor PSP
    can manage the creation, registration, activation, and deactivation of their associated
    acceptors and shops.  An acceptor PSP can only manage the acceptors that it registered.
  x-displayName: acceptors
- name: acceptor-shops
  description: An acceptor PSP can register and manage shops for an acceptor. An acceptor
    PSP can only manage the acceptors that it registered.
  x-displayName: acceptor-shops
- name: activities
  description: |-
    Activities represent a chronological list of consumer-related events and transactions. This includes P2P payments, P2P requests, e-commerce payments, as well as management events like wallet provisioning, proxy transfers or payment source changes.
    Note: This API is UNSTABLE. Be the first to implement this API and actively shape the design of the activity endpoints by providing feedback and questions to the EPI team!
  x-displayName: activities
- name: asset-manager
  description: Actors in the EPI system can manage all their assets through the asset
    manager. Assets can either be images (for instance logos / icons) or documents.
    They are meant to be shared, either publicly or privately with other actors in
    the EPI system.
  x-displayName: asset-manager
- name: authentication
  description: Authentication of consumers and of EPI scheme members
  x-displayName: authentication
- name: bank-selector
  description: With the bank selector, consumers can select their bank and app to
    complete an action, like enrolling or decoding a QR code. The service contains
    data about the brands, banks, and apps that consumer PSPs can use to present to
    their consumers.
  x-displayName: bank-selector
- name: billing-reports
  description: Monthly aggregated billing report to allow a member the reconciliation
    of a received bill or the allocation of the bill to multiple associate members.
  x-displayName: billing-reports
- name: consents
  description: To request a consumer to consent to a payment plan, the acceptor creates
    a Consent resource through an endpoint call.  The acceptor makes this call through
    an acceptor PSP (or through a technical service provider, such as a payment gateway).
    EPI central services route the Consent resource to a Wero digital wallet that
    is owned by the consumer. In the wallet, the consumer can consent to the payment
    plan in the Consent resource. The acceptor can read the consent token from the
    Consent resource and, with the token, request payment from the consumer PSP.
  x-displayName: consents
- name: consumers
  description: A consumer is a person who uses EPI central services to make payments
    and to receive payments. A consumer is represented by a Consumer resource.
  x-displayName: consumers
- name: consumer-psp-profiles
  description: A consumer psp profile represents the consumer's personal data known
    to a specific consumer PSP. The consumer PSP is the owner of this resource.
  x-displayName: consumer-psp-profiles
- name: consumer-psps
  description: In EPI central services, each consumer PSP is represented by a Consumer
    PSP resource.
  x-displayName: consumer-psps
- name: consumer-psp-events
  description: The consumer PSP Events resource enables EPI central services to be
    notified of certain events that happen on the consumer PSP side. These events
    are related to processing of payment capture requests and payment settlement.
    Future versions of this resource might notify EPI central services of additional
    event types.
  x-displayName: consumer-psp-events
- name: contact-items
  description: |2-

    A contact item is a phone number or email address. Each consumer has a contact item list, which contains that consumer’s own contact items. The addition of a contact item to the contact item list effectively creates the contact item in the system (that is, it creates a Contact Item resource). When a phone number or email address is added to the list, it can be verified by the consumer through a one-time password. A verified contact item on the list can be added to a payment instrument profile and thereby become a proxy for the IBAN of the payment instrument.
  x-displayName: contact-items
- name: disputes
  description: The dispute service allows the consumer, the acceptor and both PSPs
    to manage disputes.
  x-displayName: disputes
- name: easy-checkout-profiles
  description: |-
    An easy-checkout profile contains the shipping and billing address of a consumer as well as the consumer's phone number and email address. Consumers can read, create, update, or delete those profiles with their wallets. Consumers can use easy-checkout profiles to fill in their shipping, billing address, and contact information into the consent request so that the merchant can use it.
    >❗️ Currently, this feature is available only for the Dutch market.
  x-displayName: easy-checkout-profiles
- name: fraudulent-transactions
  description: Consumer PSPs are required to report to EPI each fraudulent transaction
    that was made through the EPI payment scheme and where they acted as the payer
    PSP, including the type of fraud that is being reported within the EPI fraud taxonomy.
    EPI will then forward the transaction information to affected payee PSPs, as well
    as to its external fraud service provider. This applies to transactions for both
    the P2P and e-commerce context.
  x-displayName: fraudulent-transactions
- name: merger
  description: A merger is a process through which a TSP can migrate all consumer
    and payment source resources from one consumer PSP, known as the _source consumer
    PSP_ to another consumer PSP, known as the _target consumer PSP_.
  x-displayName: merger
- name: p2p-payments
  description: One consumer (the payer) can send money to another consumer (the payee)
    through a person-to-person (P2P) payment. The payer creates a P2P payment, including
    details like the amount, the payee and a message. In the standalone Wero digital
    wallet app, the payer approves the P2P payment with a signed consent token, which
    the payer PSP can verify to initiate the money transfer.
  x-displayName: p2p-payments
- name: p2p-requests
  description: One consumer (the payee) can request money from another consumer (the
    payer) through a person-to-person (P2P) request. The payee creates a P2P request,
    including details like the amount, the payer and a message. In the standalone
    Wero digital wallet app, the payer approves the P2P request, which creates a P2P
    payment. This P2P payment follows the same flow as if it were created by the payer
    without a request from the payee.
  x-displayName: p2p-requests
- name: p2p-open-requests
  description: One consumer (the payee) can request money from one or multiple consumers
    (the payers) through a person-to-person (P2P) open request.  With an open request,
    a payee can create a request without specifying the amount or the details of the
    payers.
  x-displayName: p2p-open-requests
- name: payment-means
  description: A means of payment in a wallet is a digital representation of one of
    the consumer's payment sources. Like the wallet itself, a means of payment includes
    a key pair. The private key is stored securely in the wallet and used to sign
    the consumer's consent to payments. The public key is stored by EPI central services
    and the consumer PSP and used to verify consent tokens.
  x-displayName: payment-means
- name: payment-requests
  description: After a consumer approves a consent request, the acceptor PSP can request
    payment from the consumer PSP through EPI central services. First, the acceptor
    PSP asks EPI central services to create a Payment Request resource. The payment
    request includes the consent token.
  x-displayName: payment-requests
- name: payment-sources
  description: Payment sources are where the funds come from when consumers pay for
    purchases or send money to other people. Examples include bank accounts, digital
    euro wallets and vouchers. Consumers can also receive money in their payment sources.
    A payment source can be digitally represented by one or more means of payment
    contained in Wero digital wallets.
  x-displayName: payment-sources
- name: payment-source-profiles
  description: A payment source profile represents consumer-provided information about
    one of the consumer's payment sources. This information includes, for example,
    the IBAN proxies for the payment source. A payment source can have only one payment
    source profile and initially has none.
  x-displayName: payment-source-profiles
- name: proxies
  description: The Wero digital wallet can retrieve detailed information about a specific
    proxy.
  x-displayName: proxies
- name: proxy-indicators
  description: 'The Wero digital wallet can indicate to the consumer which contacts
    in the consumer''s contact list also have Wero digital wallets. The process to
    indicate these contacts includes the following steps: 1. The wallet creates proxy
    hashes of the phone numbers and of the email addresses from the contact list.
    2. The wallet sends the proxy hashes in a batch to the EPI proxy look-up service.
    3. The look-up service responds by indicating which proxy hashes from the batch
    are registered (that is, are eligible to be used for sending money to or requesting
    money from contacts).'
  x-displayName: proxy-indicators
- name: reconciliation-reports
  description: Reconciliation reports is a file containing all transactions related
    to a PSP for a specific day. PSPs can retrieve their reconciliation report calling
    the API that returns a URL pointing to the report.
  x-displayName: reconciliation-reports
- name: rsm
  description: The rail selection mechanism (RSM) is a feature in the NL migration
    project to help with routing users between iDEAL and EPI platform.
  x-displayName: rsm
- name: service-providers
  description: |-
    Service providers are entities that provide payment services to consumers and acceptors, or technical services to other service providers. This is represented by three roles in the EPI system: consumer payment service providers (consumer PSPs), acceptor payment service providers (acceptor PSPs) and technical service providers (TSPs).  Banks or other companies can hold multiple of the above roles in respect to different customers. Accordingly one service provider can have multiple roles in the EPI system.
    PSPs are owners of resources and inherently are able to access some of their customers resources. PSPs can grant access to their resources (and transiently their customer's resources) to TSPs. Additionally, TSPs are able to create and manage new PSP entities.
  x-displayName: service-providers
- name: share-url
  description: EPI Wallets can create a shareable URL representation for defined actions,  like
    requesting money or sharing their contact details.
  x-displayName: share-url
- name: transactions
  description: EPI Wallets can retrieve their transaction history.
  x-displayName: transactions
- name: wallets
  description: A Wero digital wallet on a consumer’s mobile device can hold one or
    more means of payment that are owned by the consumer. Wallets are represented
    technically by private/public key pairs for authenticating consumers and signing
    consent to payments.
  x-displayName: wallets
- name: wallet-provisionings
  description: A wallet provisioning is the process of creating a Wero digital wallet
    on a consumer’s mobile device. The wallet provisioning process includes creating
    a key pair for the wallet and registering the public key with EPI central services
    and the consumer PSP. The wallet provisioning process also includes creating a
    wallet ID, which is a unique identifier for the wallet.
  x-displayName: wallet-provisionings
- name: qr-code
  description: "Generation of QR Code"
  x-displayName: qr-code
paths:
  /api/consumers:
    post:
      operationId: post-consumers
      summary: Create a consumer [Consumer PSP]
      description: |-
        A consumer entity is a technical entity that EPI central services use internally to compile, associate and manage all assets and information that relate to a consumer. For more information, see [Consumer](doc:consumer-entity-and-profile).

        Consumer PSPs can use this endpoint call to create a consumer.
        ## Scope
        This endpoint call requires the `wallet:provisioning` scope.
      tags:
      - consumers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateConsumerRequest'
            examples:
              Example 1:
                value:
                  externalId: abcd1234
                  consumerName:
                    firstName: John
                    lastName: Doe
                  dateOfBirth: '1990-01-01'
              Example 2:
                value:
                  externalId: abcd1234
                  pspObfuscatedConsumerName:
                    firstName: John
                    pspObfuscatedLastName: D**
                  dateOfBirth: '1990-01-01'
      responses:
        '201':
          description: Consumer created
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ConsumerResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '409':
          description: Conflict -  The consumer already exists because the externalId
            is already in use.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                UniquenessConstraintViolation:
                  value:
                    type: /problem/uniqueness-constraint-violation
                    title: Conflict
                    status: 409
                    detail: Constraint must be unique
                    callId: 00000000000000000000000000000000-0000000000000000
        '422':
          description: Unprocessable Entity - The request was well formed but was
            not followed due to semantic errors.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                consumerPspIsBeingMerged:
                  $ref: '#/components/examples/ConsumerPSPIsBeingMergedProblem'
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
    get:
      operationId: get-consumers
      summary: Retrieve a consumer by external ID [Consumer PSP]
      description: |-
        Consumer PSPs can call this endpoint to retrieve a list that contains information about a consumer through its external ID.
        ## Scope
        This endpoint call does not require a scope.
      tags:
      - consumers
      parameters:
      - name: filterBy
        in: query
        description: The property key to filter by.
        required: true
        schema:
          type: string
          enum:
          - externalId
      - name: externalId
        description: External ID of a consumer, provided by the consumer PSP. Uniquely
          identifies a consumer outside of the EPI context.
        in: query
        required: true
        schema:
          type: string
      responses:
        '200':
          description: A collection of consumers.
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ConsumersCollectionResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '401':
          $ref: '#/components/responses/errorResponse401'
    parameters:
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
  /api/consumers/{consumerId}:
    parameters:
    - $ref: '#/components/parameters/consumerId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      summary: Retrieve a consumer by consumer ID [Wallet]
      description: |-
        Use this endpoint call to retrieve a consumer by their consumer ID. This endpoint is called during the Wero digital standalone app workflow. For more information, see the [standalone app documentation](doc:standalone-epi-digital-wallet-app).
        ## Scope
        This endpoint call does not require a scope.
      tags:
      - consumers
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ConsumerResource'
        '404':
          $ref: '#/components/responses/errorResponse404'
      operationId: get-api-consumers-consumerId
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
    delete:
      summary: Remove a consumer [Wallet or Consumer PSP]
      description: |-
        A consumer PSP or a wallet can make this endpoint call to remove a consumer entity from the Wero payment system.

        If a consumer has, for example, wallets that contain means of payment from two banks, two consumer entities exist for that consumer — one for each bank. If the consumer requests to be completely removed from the system for one bank, one consumer entity is removed. The other consumer entity is not affected. The consumer remains in the system with means of payment from the remaining bank.

        For more information, see [Removed consumer](doc:consumer-entity-and-profile#removed-consumer).
        ## Scope
        This endpoint call does not require a scope.
      tags:
      - consumers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveConsumerRequest'
            examples:
              RemovingAConsumerAfterTerminationOfContract:
                value:
                  reason: ContractTerminated
      responses:
        '204':
          description: No Content
        '400':
          $ref: '#/components/responses/errorResponse400'
        '401':
          $ref: '#/components/responses/errorResponse401'
        '403':
          $ref: '#/components/responses/errorResponse403'
        '404':
          $ref: '#/components/responses/errorResponse404'
        '409':
          $ref: '#/components/responses/ConsumerWriteConflictProblem'
        '422':
          description: Unprocessable Entity - The request was well formed but was
            not followed due to semantic errors.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                consumerPspIsBeingMerged:
                  $ref: '#/components/examples/ConsumerPSPIsBeingMergedProblem'
      operationId: delete-api-consumers-consumerId
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
    put:
      summary: Update a consumer [Consumer PSP or Wallet]
      operationId: put-consumers-consumerId
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ConsumerResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          $ref: '#/components/responses/errorResponse403'
        '404':
          description: Not Found -  The consumer ID was not found.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          $ref: '#/components/responses/ConsumerWriteConflictProblem'
      description: |-
        Use this endpoint call to update a consumer. This endpoint call performs a full overwrite of the existing consumer information.  If a field is not provided, it will be set to null. Existing information will not be retained.

        ## Wero digital standalone wallet considerations
        For consumers that are associated with a Wero digital standalone app-initiated wallet, the following anti-money laundering parameters are required:
          * `birthCountry`
          * `nationality`
          * `residenceCountry`
          * `residenceCity`

        ## Scope
        This endpoint call requires the `wallet:provisioning` scope.
      tags:
      - consumers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateConsumerRequest'
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
  /api/consumers/{consumerId}/block:
    parameters:
    - $ref: '#/components/parameters/consumerId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    put:
      summary: Block a consumer by consumer ID [Consumer PSP]
      description: |-
        A consumer PSP can request to block a consumer from accessing EPI services. The consumer might appear on a blocklist or a consumer PSP might suspect or have confirmation of fraudulent activity related to the consumer.

        A consumer that is blocked cannot perform any of the following activities:

          - Creating a new wallet
          - Sending or receiving PSP payments
          - Creating, approving, declining, or cancelling P2P payments
          - Adding or removing means of payment
          - Adding or removing proxies


        A consumer that is blocked only can use their wallet to access transaction history, see existing payment plans, and other functionality that is available in read-only view. Other consumers can no longer find a blocked consumer because share IDs and proxies cannot be retrieved. You can unblock a consumer using the [Unblock a consumer](ref:unblock-consumer-source-by-id) endpoint.
        ## Scope

          This endpoint call does not require a scope.
      tags:
      - consumers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BlockConsumerRequest'
            examples:
              RemovingAConsumerAfterTerminationOfContract:
                value:
                  reason: ConfirmedFraudster
      responses:
        '202':
          description: No Content
        '400':
          $ref: '#/components/responses/errorResponse400'
        '401':
          $ref: '#/components/responses/errorResponse401'
        '403':
          $ref: '#/components/responses/errorResponse403'
        '404':
          $ref: '#/components/responses/errorResponse404'
        '409':
          $ref: '#/components/responses/ConsumerWriteConflictProblem'
      operationId: block-api-consumers-consumerId
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
    delete:
      operationId: unblock-consumer-source-by-id
      summary: Unblock a consumer [Consumer PSP]
      description: |-
        Remove the blocked status from a consumer so that the consumer is active again. Other consumers can discover and interact with their proxies.
        ## Scope
        This endpoint call does not require a scope.
      tags:
      - consumers
      responses:
        '204':
          description: No content No response body.
        '400':
          $ref: '#/components/responses/errorResponse400'
        '401':
          $ref: '#/components/responses/errorResponse401'
        '403':
          $ref: '#/components/responses/errorResponse403'
        '404':
          description: Not Found - The consumer with this ID does not exist.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '409':
          $ref: '#/components/responses/ConsumerWriteConflictProblem'
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
  /api/consumers/{consumerId}/contact-items:
    parameters:
    - $ref: '#/components/parameters/consumerId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      operationId: get-consumers-consumerId-contact-items-get
      summary: List contact items [Wallet]
      description: |-
        Use this endpoint call to retrieve the consumer's contact item list.
        ## Scope
        This endpoint call does not require a scope.
      responses:
        '200':
          description: |-
            200 - OK

            The response can contain contact items in different states:

                Unverified contact items
                Verified contact items
                Contact items that are proxies

            For the response paths, see the endpoints for adding contact items.
          content:
            application/hal+json; charset=UTF-8:
              schema:
                type: object
                required:
                - _embedded
                - _links
                properties:
                  _links:
                    type: object
                    required:
                    - self
                    properties:
                      self:
                        $ref: '#/components/schemas/link'
                  _embedded:
                    type: object
                    required:
                    - contactItems
                    properties:
                      contactItems:
                        type: array
                        items:
                          $ref: '#/components/schemas/ContactItem'
              examples:
                Example 1:
                  value:
                    _links:
                      self:
                        href: http://example.com
                    _embedded:
                      contactItems:
                      - contactItemId: be9ee0b3-f5e7-4142-bab0-412ded39ebff
                        type: PhoneNumber
                        value: '+423423456'
                        createdAt: '2023-05-03T10:39:09.742283565Z'
                        verified: true
                        verifiedAt: '2023-05-03T10:39:09.779658812Z'
                        nextChallengeNotBefore: '2023-05-03T10:39:29.699035547Z'
                        linkedPaymentSourceId: 61a1b6da-cf9a-4da8-81c0-e7e43129cf0d
                        _links:
                          self:
                            href: https://spi.int.epi.engineering/api/consumers/3363f931-fa51-4e52-af91-a3f15dd39656/contact-items/c3148e62-3e49-4055-98b0-8559d9fa90f1
                          paymentSourceProfile:
                            href: https://spi.int.epi.engineering/api/consumers/3363f931-fa51-4e52-af91-a3f15dd39656/payment-source-profiles/61a1b6da-cf9a-4da8-81c0-e7e43129cf0d
        '404':
          description: Not Found - The resource does not exist. For example, the resource
            might never have existed or might have been deleted.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Consumer not found
                    callId: 00000000000000000000000000000000-0000000000000000
      tags:
      - contact-items
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/consumers/{consumerId}/verified-contact-items:
    parameters:
    - $ref: '#/components/parameters/consumerId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    post:
      summary: Add a verified contact item to the contact item list [Consumer PSP]
      tags:
      - contact-items
      responses:
        '200':
          description: OK - Contact Item already on list. Optionally, response includes
            links for concluding the verification or to a linked payment source profile.
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ContactItem'
              examples:
                PhoneNumber is already verified:
                  value:
                    type: PhoneNumber
                    value: '+4915123456789'
                    contactItemId: d87246d0-6be9-495e-b8bc-a8fe2f628882
                    createdAt: '2023-05-03T10:39:09.529960724Z'
                    verified: true
                    verifiedAt: '2023-05-03T10:39:09.529960724Z'
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/contact-items/d87246d0-6be9-495e-b8bc-a8fe2f628882
                EmailAddress is already a proxy:
                  value:
                    type: EmailAddress
                    value: someEmail73140990-8c8a-4138-95d7-304cf07b247a@example.com
                    contactItemId: 98a716c3-85e9-4345-b64b-679f844d45e3
                    createdAt: '2023-05-03T10:39:09.600493868Z'
                    verified: true
                    verifiedAt: '2023-05-03T10:39:09.600493868Z'
                    linkedPaymentSourceId: 15dfde97-a8a4-422d-ab72-a4c47f947b8d
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/contact-items/98a716c3-85e9-4345-b64b-679f844d45e3
                      paymentSourceProfile:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/15dfde97-a8a4-422d-ab72-a4c47f947b8d
        '201':
          description: Created
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ContactItem'
              examples:
                Email is new and was not previously created for this consumer:
                  value:
                    type: EmailAddress
                    value: someEmail73140990-8c8a-4138-95d7-304cf07b247a@example.com
                    contactItemId: 8d0d533e-1f27-430e-9b72-30443af0c858
                    createdAt: '2023-05-31T20:02:59.536193560Z'
                    verified: true
                    verifiedAt: '2023-05-31T20:02:59.536193560Z'
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/consumers/5d4eab5b-b47c-4894-a6d5-052e57e91541/contact-items/8d0d533e-1f27-430e-9b72-30443af0c858
                Phone Number is new and was not previously created for this consumer:
                  value:
                    type: PhoneNumber
                    value: '+33612345678'
                    contactItemId: a7f3cff1-aadf-4b1b-8de2-6cbc9c956c57
                    createdAt: '2023-05-03T10:39:09.408272969Z'
                    verified: true
                    verifiedAt: '2023-05-03T10:39:09.408272969Z'
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/contact-items/a7f3cff1-aadf-4b1b-8de2-6cbc9c956c57
        '400':
          description: Bad Request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                NotMobilePhoneNumber:
                  value:
                    type: /problem/phone-number/not-mobile
                    status: 400
                    title: Bad Request
                    detail: Phone number (+33101234567) is not a mobile phone number
                    callId: 00000000000000000000000000000000-0000000000000000
        '404':
          description: Not Found - The resource does not exist. For example, the resource
            might never have existed or might have been deleted.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Consumer not found
                    callId: 00000000000000000000000000000000-0000000000000000
        '409':
          description: Conflict - The request could not be completed due to a conflict
            with the current state of the resource.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      operationId: get-consumers-consumerId-verified-contact-items-post
      security:
      - BearerAccessToken: [
          ]
      description: |-
        Consumer PSPs can add contact items that they have verified on the consumer PSP-side to the consumer's list of contact items.

        With this endpoint call, the verification process for contact items is skipped. Consumer PSPs can assign the contact items as proxies for payment sources without further verification.

        ## Different responses

        When a consumer PSP attempts to add a new contact item to the contact item list, the response depends on whether the item is already on the list and whether it is already a proxy.


        | Item already on list |  Item already a proxy | Response code | Response includes                                   |
        | :------------------- | :-------------------- | :------------ | :-------------------------------------------------- |
        | No                   | No                    | 201           | Details of new item                                 |
        | Yes                  | No                    | 200           | Item details                                        |
        | Yes                  | Yes                   | 200           | Item details and link to the payment source profile |

        > 📘 Phone numbers of overseas France and of Monaco
        If the contact item is an alias of a phone number of overseas France or of Monaco, starting with the `+33` international phone prefix code, the phone number with the international prefix of the corresponding territory is used instead. The original French phone number is stored as the `aliasValue`.
        For more information, see [Phone numbers of overseas France and of Monaco](doc:french-overseas-phone-numbers)


        ## Scope

        This endpoint does not require a scope.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - type
              - value
              properties:
                type:
                  type: string
                  enum:
                  - PhoneNumber
                  - EmailAddress
                  description: 'Type of the contact item: phone number or email address'
                  example: PhoneNumber
                value:
                  oneOf:
                  - $ref: '#/components/schemas/phoneNumber'
                  - $ref: '#/components/schemas/email'
            examples:
              Phone Number:
                value:
                  type: PhoneNumber
                  value: '+33612345678'
              EmailAddress:
                value:
                  type: EmailAddress
                  value: user@example.com
        description: Type and value of the contact item.
      parameters: [
        ]
  /api/consumers/{consumerId}/contact-items/{contactItemId}:
    parameters:
    - $ref: '#/components/parameters/consumerId'
    - $ref: '#/components/parameters/contactItemId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      summary: Retrieve a contact item [Wallet]
      tags:
      - contact-items
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ContactItem'
              examples:
                Example 1:
                  value:
                    type: EmailAddress
                    value: abc@def.gh
                    contactItemId: 98a716c3-85e9-4345-b64b-679f844d45e3
                    createdAt: '2023-05-03T10:39:09.654755117Z'
                    verified: true
                    verifiedAt: '2023-05-03T10:39:09.654761218Z'
                    linkedPaymentSourceId: 15dfde97-a8a4-422d-ab72-a4c47f947b8d
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/contact-items/98a716c3-85e9-4345-b64b-679f844d45e3
                      paymentSourceProfile:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/15dfde97-a8a4-422d-ab72-a4c47f947b8d
        '404':
          description: Not Found - The resource does not exist. For example, the resource
            might never have existed or might have been deleted.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ContactItemNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Contact item not found
                    callId: 00000000000000000000000000000000-0000000000000000
                ConsumerNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Consumer not found
                    callId: 00000000000000000000000000000000-0000000000000000
      operationId: get-consumers-consumerId-contact-items-contactItemId
      description: |-
        Use this endpoint call to retrieve details of a contact item.
        ## Scope
        This endpoint call does not require a scope.
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
    delete:
      summary: Delete a contact item from the contact item list [Wallet, Consumer
        PSP]
      description: |-
        Use this endpoint call to delete a contact item. If the contact item was linked as a proxy to a payment source profile, that link no longer exists.
        ## Scope
        This endpoint does not require a scope.
      operationId: delete-consumers-consumerId-contact-items-contactItemId
      tags:
      - contact-items
      responses:
        '204':
          description: No Content
        '403':
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerNotActive:
                  value:
                    type: /problem/consumers/not-active
                    status: 403
                    title: Operation requires active consumer
                    detail: Consumer eec9e824-f4a7-4a99-aaae-21754ff792a0 not active
                    callId: 00000000000000000000000000000000-0000000000000000
        '404':
          description: Not Found - The resource does not exist. For example, the resource
            might never have existed or might have been deleted.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ContactItemNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Contact item not found
                    callId: 00000000000000000000000000000000-0000000000000000
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
  /api/consumers/{consumerId}/payment-source-profiles:
    parameters:
    - $ref: '#/components/parameters/consumerId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    post:
      summary: Create a payment source profile [Wallet]
      tags:
      - payment-source-profiles
      responses:
        '201':
          description: Created
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentSourceProfileResource'
        '208':
          description: Already Reported - The profile of the given payment source
            already exists.
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentSourceProfileResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          description: Not Found - The resource does not exist. For example, the resource
            might never have existed or might have been deleted.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Consumer not found
                    callId: 00000000000000000000000000000000-0000000000000000
        '409':
          $ref: '#/components/responses/ConsumerWriteConflictProblem'
        '422':
          description: Unprocessable Entity - The payment source profile could not
            be created.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                PaymentSourceNotProvisioned:
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    detail: Payment source profile cannot be created as payment source
                      does not exist
                    callId: 00000000000000000000000000000000-0000000000000000
                ConsumerPpsIsBeingMerged:
                  $ref: '#/components/examples/ConsumerPSPIsBeingMergedProblem'
      operationId: post-consumers-consumerId-payment-source-profiles
      security:
      - BearerAccessToken: [
          ]
      description: |-
        ## Payment source profiles
        A payment source profile contains information about one of the consumer's payment sources. This information includes the full or masked consumer name and links to the payment source proxies. A payment source can have only one payment source profile for each consumer and initially has none.
        Use this endpoint call to create a payment source profile.
        ## Scope
        This endpoint call does not require a scope.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              allOf:
              - type: object
                properties:
                  paymentSourceId:
                    type: string
                    format: uuid
                    description: ID of the payment source.
                    example: 6c82d39e-f243-4ad3-8d96-1a86b6fa1382
                required:
                - paymentSourceId
              - $ref: '#/components/schemas/PaymentSourceProfileRequest'
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/consumers/{consumerId}/payment-source-profiles/{paymentSourceProfileId}:
    parameters:
    - $ref: '#/components/parameters/consumerId'
    - $ref: '#/components/parameters/paymentSourceProfileId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      summary: Retrieve a payment source profile [Wallet]
      tags:
      - payment-source-profiles
      responses:
        '200':
          description: OK - Payment source profile or default profile
          content:
            application/hal+json; charset=UTF-8:
              examples:
                Example 1:
                  value:
                    paymentSourceId: 6c82d39e-f243-4ad3-8d96-1a86b6fa1382
                    displayName: Some d**********
                    isDisplayNameObfuscated: true
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/6c82d39e-f243-4ad3-8d96-1a86b6fa1382
                      proxies:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/6c82d39e-f243-4ad3-8d96-1a86b6fa1382/proxies
                    _embedded:
                      paymentSourceProxies:
                      - type: PhoneNumber
                        id: 38d66026-5d47-4ef7-99fc-24711f364ced
                        value: '+4915123456789'
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/6c82d39e-f243-4ad3-8d96-1a86b6fa1382/proxies/38d66026-5d47-4ef7-99fc-24711f364ced
              schema:
                $ref: '#/components/schemas/PaymentSourceProfileResource'
        '404':
          description: Not Found - The consumer ID or payment source profile ID was
            not found.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not found
                    detail: Consumer not found
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentSourceProfileNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not found
                    detail: Payment source profile not found
                    callId: 00000000000000000000000000000000-0000000000000000
      operationId: get-consumers-consumerId-payment-source-profiles-paymentSourceId
      security:
      - BearerAccessToken: [
          ]
      description: |2-

        The Wero digital wallet can retrieve a payment source profile by providing the ID of the profile. Contact items (mobile telephone numbers and email addresses) that are linked as proxies to the profile are embedded in the response.

        ## Scope
        This endpoint call does not require a scope.
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
    put:
      summary: Update a payment source profile [Wallet]
      operationId: put-consumers-consumerId-payment-source-profiles-paymentSourceId
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentSourceProfileResource'
              examples:
                Example 1:
                  value:
                    paymentSourceId: 6c82d39e-f243-4ad3-8d96-1a86b6fa1382
                    displayName: Some displayName
                    isDisplayNameObfuscated: false
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/6c82d39e-f243-4ad3-8d96-1a86b6fa1382
                      proxies:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/6c82d39e-f243-4ad3-8d96-1a86b6fa1382/proxies
                    _embedded:
                      paymentSourceProxies: [
                        ]
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          description: Not Found - The consumer ID or payment source profile ID was
            not found.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not found
                    detail: Consumer not found
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentSourceProfileNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not found
                    detail: Payment source profile not found
                    callId: 00000000000000000000000000000000-0000000000000000
        '409':
          $ref: '#/components/responses/ConsumerWriteConflictProblem'
      description: |-
        The Wero digital wallet can update the information that is contained in a payment source profile.
        > ❗️ The `obfuscateConsumerName` field is required for all consumers. If the field is not provided, the request will fail.
        ## Scope
        This end point does not require a scope.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentSourceProfileRequest'
      security:
      - BearerAccessToken: [
          ]
      tags:
      - payment-source-profiles
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/consumers/{consumerId}/payment-source-profiles/{paymentSourceProfileId}/proxies:
    parameters:
    - $ref: '#/components/parameters/consumerId'
    - $ref: '#/components/parameters/paymentSourceProfileId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    post:
      summary: Link a proxy to a payment source profile [Wallet, Consumer PSP]
      operationId: post-consumers-consumerId-payment-source-profiles-paymentSourceId-proxies
      responses:
        '201':
          description: Created
          content:
            application/hal+json; charset=UTF-8:
              examples:
                PhoneNumber:
                  value:
                    type: PhoneNumber
                    id: 8d5410b2-b0f0-4ec5-9f9d-949d1bc6a241
                    value: '+31612345678'
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/8907ab6e-fa36-43f7-993b-7505f9e46593/proxies/8d5410b2-b0f0-4ec5-9f9d-949d1bc6a241
              schema:
                $ref: '#/components/schemas/ProxyResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          description: Not Found - Consumer ID or payment source profile ID was not
            found.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Consumer not found
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentSourceProfileNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Payment source profile not found
                    callId: 00000000000000000000000000000000-0000000000000000
        '409':
          description: 'Conflict - The request could not be completed due to a conflict
            with the current state of the resource. **Cause**: Although multiple consumers
            can verify the same contact item, only one consumer can link the contact
            item (as a proxy) to one payment source profile.'
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProxyProblem'
              examples:
                ProxyAlreadyInUseProblem:
                  value:
                    type: /problem/payment-source-profiles/proxy-already-in-use
                    status: 409
                    title: Conflict
                    detail: Contact item is already linked (as a proxy) to another
                      consumer's payment source.
                    callId: 00000000000000000000000000000000-0000000000000000
                ProxyTransferConfirmationNeededProblem:
                  value:
                    type: /problem/payment-source-profiles/proxy-transfer-confirmation-needed
                    status: 409
                    title: Conflict
                    detail: Contact item is already linked (as a proxy) to another
                      of the consumer's payment sources. The consumer must confirm
                      that they want to transfer the proxy from one payment source
                      to the other.
                    callId: 00000000000000000000000000000000-0000000000000000
                    currentLinkedPaymentSource:
                      type: PaymentAccount
                      paymentSourceId: e369792d-ce10-4fb3-afbf-6a9632cb5156
        '422':
          description: Unprocessable Entity
          content:
            application/problem+json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/Problem'
              examples:
                ContactItemNotFound:
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    detail: Contact item does not exist
                    callId: 00000000000000000000000000000000-0000000000000000
                ContactItemUnverified:
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    detail: Contact item is unverified
                    callId: 00000000000000000000000000000000-0000000000000000
                NotPreferredBank:
                  value:
                    type: /problem/consumers/not-preferred-bank
                    status: 422
                    title: Consumer has set another bank as preferred
                    detail: Consumer 74c33568-a444-4edc-87e7-eb39c185f18f has indicated
                      another bank as preferred
                    callId: 00000000000000000000000000000000-0000000000000000
      requestBody:
        content:
          application/json:
            examples:
              Normal call:
                value:
                  contactItemId: 8d5410b2-b0f0-4ec5-9f9d-949d1bc6a241
              Call with a proxy transfer confirmation:
                value:
                  contactItemId: 8d5410b2-b0f0-4ec5-9f9d-949d1bc6a241
                  proxyTransferConfirmation: true
            schema:
              type: object
              properties:
                contactItemId:
                  type: string
                  description: ID of the contact item to be linked.
                  example: 8d5410b2-b0f0-4ec5-9f9d-949d1bc6a241
                proxyTransferConfirmation:
                  type: boolean
                  default: false
                  description: |-
                    If the proxy is already linked to another payment source profile, this parameter indicates whether the consumer who is attempting to link a proxy has confirmed that they want to _move_ the proxy from that other profile. Such confirmation will have been requested of the consumer after a previous call to this endpoint failed with a `409 Conflict` in one of the following cases:
                     - The consumerId associated with both payment source profiles are the same.
                     - The payment source profiles are associated with consumer IDs that are linked through a standalone Wero digital wallet app.


                    If the value of this parameter is `true` (in the repeat call to this endpoint), the contact item can be transferred to the payment source profile that is specified in the request path.
              required:
              - contactItemId
      description: |-
        After a contact item is added to the consumer’s contact item list and verified, the wallet or consumer PSP can link the contact item to a payment source profile. This link causes the contact item to become a payment source proxy,  which means that the consumer can share the contact item with other consumers instead of sharing an IBAN. The link itself is a resource and is called the proxy resource.
        ## Scope
        This endpoint call does not require a scope.
      security:
      - BearerAccessToken: [
          ]
      tags:
      - payment-source-profiles
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
  /api/consumers/{consumerId}/payment-source-profiles/{paymentSourceProfileId}/proxies/{proxyId}:
    parameters:
    - $ref: '#/components/parameters/consumerId'
    - $ref: '#/components/parameters/paymentSourceProfileId'
    - $ref: '#/components/parameters/proxyId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      summary: Retrieve the Proxy resource of a payment source profile [Wallet]
      tags:
      - payment-source-profiles
      responses:
        '200':
          description: Proxy resource
          content:
            application/hal+json; charset=UTF-8:
              examples:
                PhoneNumber:
                  value:
                    type: PhoneNumber
                    id: 8d5410b2-b0f0-4ec5-9f9d-949d1bc6a241
                    value: '+31612345678'
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/8907ab6e-fa36-43f7-993b-7505f9e46593/proxies/8d5410b2-b0f0-4ec5-9f9d-949d1bc6a241
              schema:
                $ref: '#/components/schemas/ProxyResource'
        '404':
          description: Not Found - The consumer ID, proxy ID or payment source profile
            ID was not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Consumer not found
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentSourceProfileNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    detail: Payment source profile not found
                    callId: 00000000000000000000000000000000-0000000000000000
                ProxyNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not found
                    detail: Proxy not found.
                    callId: 00000000000000000000000000000000-0000000000000000
      operationId: get-consumers-consumerId-payment-source-profiles-paymentSourceId-proxies-proxyId
      security:
      - BearerAccessToken: [
          ]
      description: |-
        The wallet can call this endpoint to retrieve (read) the proxy resource of a payment source profile. The proxy resource represents the link between the contact item (proxy) and the payment source profile.
        ## Scope
        This endpoint call does not require a scope.
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
    delete:
      summary: Delete a proxy link from a payment source profile [Wallet]
      tags:
      - payment-source-profiles
      responses:
        '204':
          description: Proxy resource (link) deleted.
        '404':
          description: Not Found - The consumer ID, proxy ID or payment source profile
            ID was not found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not found
                    detail: Consumer not found
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentSourceProfileNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not found
                    detail: Payment source profile not found
                    callId: 00000000000000000000000000000000-0000000000000000
                ProxyNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not found
                    detail: Proxy not found.
                    callId: 00000000000000000000000000000000-0000000000000000
        '409':
          $ref: '#/components/responses/ConsumerWriteConflictProblem'
      operationId: delete-consumers-consumerId-payment-source-profiles-paymentSourceId-proxies-proxyId
      security:
      - BearerAccessToken: [
          ]
      description: |-
        When a contact item is a payment source proxy (that is, when a consumer can share the contact item instead of sharing their IBAN), the contact item is linked to the payment source profile. The link is a resource called the _Proxy resource_. The wallet can delete this link so that the contact item is no longer a proxy. However, the Contact Item resource is not deleted; the contact item remains in the consumer’s contact item list.
        ## Scope
        This endpoint call does not require a scope.
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/consumers/wallet-less-p2p-receiver:
    post:
      tags:
      - consumers
      operationId: post-walletless-p2p-receiver
      summary: Create a wallet-less consumer that can receive P2P payments [Consumer
        PSP]
      description: |-
        Along with creating a consumer, this endpoint call creates the following resources for the new consumer:
          - payment source
          - payment source profile
          - contact item
          - proxy


        This simplifies the creation of consumers in a bulk-registration context where a consumer PSP might want to bulk-migrate consumers to EPI central services.   A consumer created with this endpoint call remains wallet-less. Their proxy is discoverable by other consumers and they can receive P2P payments, but they cannot send P2P payments.
        ## Scope
        This endpoint call does not require a scope.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWalletLessP2PReceiverRequest'
            examples:
              Create a wallet-less consumer with a verified phone number:
                value:
                  consumer:
                    externalId: external-id
                    consumerName:
                      firstName: first-name
                      lastName: last-name
                    dateOfBirth: '1970-01-02'
                  paymentSource:
                    type: PaymentAccount
                    externalId: external-id
                    currency: EUR
                    accountIdentifier:
                      type: IBAN
                      iban: DE00238630710302960602235014302116
                    pro: false
                  paymentSourceProfile:
                    obfuscateConsumerName: false
                  verifiedContactItem:
                    type: PhoneNumber
                    value: '+4915123456789'
      responses:
        '201':
          description: Created
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/CreateWalletLessP2PReceiverResponse'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '401':
          $ref: '#/components/responses/errorResponse401'
        '403':
          $ref: '#/components/responses/errorResponse403'
        '409':
          description: Conflict
          content:
            application/problem+json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/Problem'
              examples:
                ProxyAlreadyInUseProblem:
                  value:
                    type: /problem/payment-source-profiles/proxy-already-in-use
                    status: 409
                    title: Contact item already use.
                    detail: Contact item is already linked (as a proxy) to another
                      consumer's payment source.
                    callId: 00000000000000000000000000000000-0000000000000000
                NotUniqueProblem:
                  value:
                    type: /problem/uniqueness-constraint-violation
                    title: Conflict
                    status: 409
                    detail: PaymentSource with external id 00000000-00000000-00000000-00000000
                      and pspId 00000000-00000000-00000000-00000000 already exists
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentSourceConflict:
                  value:
                    type: /problem/consumers/payment-source-conflict
                    title: Payment Source Conflict
                    status: 409
                    detail: The payment source is not identical to the already existing
                      payment source with the same account identifier and external
                      id.
                    callId: 00000000-00000000-00000000-00000000
        '422':
          description: Unprocessable Entity
          content:
            application/problem+json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/Problem'
              examples:
                NotPreferredBank:
                  value:
                    type: /problem/consumers/not-preferred-bank
                    status: 422
                    title: Consumer has set another bank as preferred
                    callId: 00000000000000000000000000000000-0000000000000000
                ConsumerPspIsBeingMerged:
                  value:
                    type: /problem/consumer-psp/consumer-psp-is-being-merged
                    status: 422
                    title: Consumer PSP is in the process of being merged
                    detail: PSP with ID 00000000-00000000-00000000-00000000 is currently
                      being merged with another PSP.
                    callId: 00000000000000000000000000000000-0000000000000000
        '429':
          $ref: '#/components/responses/errorResponse429'
        '500':
          $ref: '#/components/responses/errorResponse500'
        '503':
          $ref: '#/components/responses/errorResponse503'
      parameters: [
        ]
    parameters:
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
  /api/consumer-psp-events:
    post:
      tags:
      - consumer-psp-events
      operationId: post-consumer-psp-events
      parameters: [
        ]
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
              - $ref: '#/components/schemas/CaptureStatusChangedRequest'
              - $ref: '#/components/schemas/RefundStatusChangedRequest'
              - $ref: '#/components/schemas/MoneyTransferStatusChangedRequest'
              - $ref: '#/components/schemas/AccountClosedRequest'
              - $ref: '#/components/schemas/AuthorizedPersonNameChangedRequest'
              - $ref: '#/components/schemas/AccountAuthorizedPersonAccessRevokedRequest'
              - $ref: '#/components/schemas/AccountHolderChangedRequest'
              discriminator:
                propertyName: name
                mapping:
                  CaptureStatusChanged: '#/components/schemas/CaptureStatusChangedRequest'
                  RefundStatusChanged: '#/components/schemas/RefundStatusChangedRequest'
                  MoneyTransferStatusChanged: '#/components/schemas/MoneyTransferStatusChangedRequest'
                  AccountClosed: '#/components/schemas/AccountClosedRequest'
                  AuthorizedPersonNameChanged: '#/components/schemas/AuthorizedPersonNameChangedRequest'
                  AccountAuthorizedPersonAccessRevoked: '#/components/schemas/AccountAuthorizedPersonAccessRevokedRequest'
                  AccountHolderChanged: '#/components/schemas/AccountHolderChangedRequest'
        description: ''
      responses:
        '202':
          description: Accepted
        '400':
          $ref: '#/components/responses/errorResponse400'
      description: |-
        The consumer PSP events resource enables EPI central services to receive notifications about certain events that happen on the consumer PSP side. These events relate to the processing of payment capture requests, payment settlements, and changes to payment source data. For more information, see [Activities monitored in the EPI Central Services](doc:settlement-monitoring#4111-activities-monitored-in-the-epi-central-services). Future versions of this resource might notify EPI central services of additional event types.

        The consumer PSP can change only the resources that belong to them. However, authentication is handled asynchronously, so all valid request bodies return a 202 response.

        The consumer PSP must implement a mechanism to ensure that EPI receives the message successfully, for example, calling the endpoint repeatedly until EPI returns with a `202 - Accepted` response.
        ### Capture status change
        EPI central services must receive notifications of capture status transitions, for example, `Accepted` -> `Settled`, `Accepted` -> `Rejected`, or `Accepted` -> `Pending` -> `Settled`. For more information about captures and capture status, see the [Payment capture flow](doc:consent-model-technical-description#payment-capture-flow) and [Retrieve capture status](ref:get-consumer-psp-capture) in the consumer PSP API documentation.
        ### Money-transfer status change
        EPI central services must receive notifications about money-transfer status transitions, for example, `Accepted` -> `Settled`. For more information, see [Settlement monitoring](doc:settlement-monitoring).

        For information about the money-transfer status `Failure` in the SCT Inst settlement layer, see [SCT Inst failures and P2P payments](doc:sct-inst-failure-handling). Failures on the consumer PSP side that are unrelated to the SCT Inst settlement layer must use the following values:

          - `failureCode` = `NARR`
          - `failureReason` = `Issue on consumer PSP side`


        ### Account data change
        EPI central services must receive notification about payment source data changes. For example:

         - When the authorized person changes
         - When a person's authorization is revoked
         - When the account holder changes

        ### Account Authorized Person Access Revoked
        EPI Central Services must be notified when a payment source is to be removed from a specific consumer. This action will delete both the payment source profile and the associated proxy. This endpoint is particularly necessary when a joint account owner is removed from a joint account.

        > ❗️ Account Closed parameter is deprecated
        The parameter in the request to indicate that an account is closed is deprecated and will be removed on 31 Dec 2024. You can notify EPI central services that an account is closed by making the endpoint call _'remove a payment source'_. For more information, see [Remove a payment source](ref:remove-payment-source-by-id).

        > ❗️ Authorized Person Name Changed parameter is deprecated
        The parameter in the request to indicate a name change of an authorised person is deprecated and will be removed on 31 March 2025. You can notify EPI central services that the authorised person's name has changed by making the _'update a consumer'_ endpoint call.  For more information, see [Update a consumer](ref:put-consumers-consumerid).
        > ❗️ Notification of consumer PSP part of a bank merger
        EPI central service might not be able to process the events `Account Closed`, `Authorized Person Name Changed`, `Account Authorized Person Access Revoked` and `Account Holder Changed`, when  the calling consumer PSP is currently the source consumer PSP of a bank merger. The account could already be migrated to the new consumer PSP.  EPI advises that TSP to wait until the merger is completed before sending the events, and to use the identity of the target consumer PSP.

        ## Scope
        This endpoint call does not require a scope.
      summary: Notify EPI of an event [Consumer PSP]
      security:
      - BearerAccessToken: [
          ]
    parameters:
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
  /api/p2p-payments:
    post:
      summary: Create a P2P payment [Consumer PSP or Wallet]
      operationId: post-p2p-payments
      parameters:
      - $ref: '#/components/parameters/Idempotency-Key'
      - $ref: '#/components/parameters/ConsumerIdOpt'
      responses:
        '201':
          description: |-
            201 - Created

            Note: The payee's proxy hash is retrievable only by the payer’s wallet, not the payee’s.
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
          content:
            application/hal+json; charset=UTF-8:
              schema:
                oneOf:
                - $ref: '#/components/schemas/P2PPaymentPayerSchema'
                - $ref: '#/components/schemas/P2PPaymentBaseSchema'
                discriminator:
                  propertyName: viewerType
                  mapping:
                    Payer: '#/components/schemas/P2PPaymentPayerSchema'
                    Unknown: '#/components/schemas/P2PPaymentBaseSchema'
              examples:
                Example 1:
                  value:
                    id: 83511ef8-efd8-45b0-ac3c-de7c21f930bd
                    amount:
                      euroCents: 4900
                    title: 🧳🌄💶
                    message: For our weekend trip 🙏.
                    payerPaymentMeansId: 45f2b62f-f7ee-4db4-be77-380e10f90f1e
                    payeeProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
                    created: '2023-05-03T10:39:16.425084691Z'
                    updatedAt: '2023-05-03T10:39:16.425084691Z'
                    status: Initial
                    _embedded:
                      paymentRules:
                        paymentRules:
                        - type: Fixed
                          constraint:
                            type: Single
                            maxAmount:
                              euroCents: 4900
                          startOffset: PT-5S
                          windowDuration: PT5M
                      payeeContact:
                        displayName: Payee Display Name
                        proxyValue: '+431809876543210'
                        pro: false
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-payments/83511ef8-efd8-45b0-ac3c-de7c21f930bd
                      approval:
                        href: https://api.epi-services.eu/api/p2p-payments/83511ef8-efd8-45b0-ac3c-de7c21f930bd/approval
                      cancellation:
                        href: https://api.epi-services.eu/api/p2p-payments/83511ef8-efd8-45b0-ac3c-de7c21f930bd/cancellation
                    viewerType: Payer
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          $ref: '#/components/responses/errorResponse403'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ShareIdNotFound:
                  value:
                    type: /problem/payment-source-profile/share-id/not-found
                    status: 404
                    title: Not Found
                    callId: 00000000000000000000000000000000-0000000000000000
        '422':
          $ref: '#/components/responses/UnprocessableContentForPaymentCreation'
        '429':
          $ref: '#/components/responses/errorResponse429'
        '502':
          description: Bad Gateway - An upstream service could not be reached or did
            not respond in time.
          content:
            application/problem+json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/Problem'
                discriminator:
                  propertyName: type
                  mapping:
                    about:blank: '#/components/schemas/Problem'
                    /problem/payment-service-provider/unavailable: '#/components/schemas/Problem'
                    /problem/paylib-api/unavailable: '#/components/schemas/Problem'
              examples:
                /problem/payment-service-provider/unavailable:
                  value:
                    type: /problem/payment-service-provider/unavailable
                    status: 502
                    title: Payment validation failed
                    callId: 00000000000000000000000000000000-0000000000000000
                /problem/paylib-api/unavailable:
                  value:
                    type: /problem/paylib-api/unavailable
                    status: 502
                    title: Paylib API failed
                    callId: 00000000000000000000000000000000-0000000000000000
      description: |-
        ## Person-to-person payments

        One consumer (the payer) can send money to another consumer (the payee)
        through a person-to-person (P2P) payment.


        The payer creates a P2P payment, including details like the amount, the
        payee and a message. In the standalone Wero digital wallet app, the payer
        approves the P2P payment with a signed consent token, which the payer PSP
        can verify to initiate the money transfer.


        ### Create a P2P payment

        With the following API request, a consumer can initiate a P2P payment.


        Currently, P2P payments are limited to 10,000,000 euro cents (€100,000).

        In addition, a payer currently has a limit of creating 100 P2P payments per week.

        This request can benefit from clients setting the Idempotency-Key header.
        For more information, see [Idempotency](ref:idempotency).

        The `p2p:transferMoney` scope is required to access this route.
      security:
      - BearerAccessToken: [
          ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              examples:
              - amount:
                  euroCents: 4900
                title: 🧳🌄💶
                message: For our weekend trip 🙏.
                payerPaymentMeansId: 45f2b62f-f7ee-4db4-be77-380e10f90f1e
                payeeProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
              properties:
                amount:
                  allOf:
                  - $ref: '#/components/schemas/Money'
                  - type: object
                    properties:
                      euroCents:
                        type: integer
                        minimum: 1
                        maximum: 100000
                title:
                  type: string
                  description: Large message title sent to the payee. Limited to 3
                    graphemes.
                  example: 🎂🍽️💶
                message:
                  type: string
                  description: Message that is sent to the payee. Limited to 250 graphemes.
                paymentReference:
                  $ref: '#/components/schemas/PaymentReference'
                payerPaymentMeansId:
                  type: string
                  description: The means of payment that is used to make the payment.
                  format: uuid
                payeeShareId:
                  type: string
                  description: The share id of the payment target.
                payeeProxyHash:
                  $ref: '#/components/schemas/proxyHash'
                consumerDeviceTelemetry:
                  $ref: '#/components/schemas/InboundConsumerDeviceTelemetry'
                flowType:
                  $ref: '#/components/schemas/FlowType'
              oneOf:
              - required:
                - payeeProxyHash
                - amount
                - payerPaymentMeansId
                title: CreatePaymentViaProxyHash
              - required:
                - payeeShareId
                - amount
                - payerPaymentMeansId
                title: CreatePaymentViaShareId
            examples:
              p2p-payment-with-consumer-device-telemetry:
                value:
                  amount:
                    euroCents: 4900
                  title: 🧳🌄💶
                  message: For our weekend trip 🙏.
                  payerPaymentMeansId: 45f2b62f-f7ee-4db4-be77-380e10f90f1e
                  payeeProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
                  consumerDeviceTelemetry:
                    deviceUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 13_3 like
                      Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.5
                      Mobile/15E148 Safari/604.1
                    deviceIpAddress: 192.0.2.123
                    deviceId: 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
                    deviceModel: iPhone11
                    deviceScreenResolution: 828x1792
                    deviceLanguage: en_US
                    deviceLocation: 37.7749,-122.4194
                    deviceCellularProvider: Vodafone, Telekom
                    deviceOperatingSystem: iOS
                    deviceTimeZone: Europe/Berlin
                    deviceTime: '2020-01-01T12:00:00.000Z'
                    additionalPropertyExample: some value
                  flowType: Standard
              p2p-payment-with-share-id:
                value:
                  amount:
                    euroCents: 4900
                  title: 🧳🌄💶
                  message: For our weekend trip 🙏.
                  payerPaymentMeansId: 45f2b62f-f7ee-4db4-be77-380e10f90f1e
                  payeeShareId: gLG
                  flowType: StandardAsync
      tags:
      - p2p-payments
    parameters:
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
  /api/p2p-payments/{p2pPaymentId}:
    parameters:
    - $ref: '#/components/parameters/p2pPaymentId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      summary: Retrieve a P2P Payment resource [Consumer PSP or Wallet]
      tags:
      - p2p-payments
      responses:
        '200':
          description: 200 - OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/P2PPaymentSchema'
              examples:
                Consumer-PSP retrieving a P2P Payment stemming from a P2P Request:
                  value:
                    id: 67cbadfb-3e2f-4985-abfa-264ca973901e
                    amount:
                      euroCents: 4900
                    message: For our weekend trip 🧳 🌄.
                    created: '2024-01-24T14:20:40.396088013Z'
                    updatedAt: '2024-01-24T14:20:40.396088013Z'
                    status: Initial
                    _embedded:
                      paymentRules:
                        paymentRules:
                        - type: Fixed
                          constraint:
                            type: Single
                            maxAmount:
                              euroCents: 4900
                          startOffset: PT-5S
                          windowDuration: PT5M
                      p2pRequest:
                        id: a2c91342-f523-4192-99e7-d0c8b52f82a7
                        amount:
                          euroCents: 4900
                        message: For our weekend trip 🧳 🌄.
                        status:
                          value: Approved
                        created: '2024-01-24T14:20:39.692Z'
                        updatedAt: '2024-01-24T14:20:39.692Z'
                        expiresAt: '2024-02-23T14:20:39.692Z'
                        _embedded: {
                          }
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/p2p-requests/a2c91342-f523-4192-99e7-d0c8b52f82a7
                      paymentDataset:
                        originatorAccountIdentifier:
                          type: IBAN
                          iban: DE00112233000000000004
                        originatorName: Payer Display Name
                        originatorReference: 67cbadfb3e2f4985abfa264ca973901e
                        beneficiaryAccountIdentifier:
                          type: IBAN
                          iban: DE00112233000000000003
                        beneficiaryName: Payee Display Name
                        originatorUnmodifiedName: Payer Display Name
                        beneficiaryUnmodifiedName: Payee Display Name
                        amount:
                          euroCents: 4900
                        categoryPurpose: EPI
                        purpose: MP2P
                        remittanceInfo: For our weekend trip.
                        isOriginatedFromP2PRequest: true
                        paymentOrigin:
                          type: P2PRequest
                          id: a2c91342-f523-4192-99e7-d0c8b52f82a7
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/p2p-payments/67cbadfb-3e2f-4985-abfa-264ca973901e/payment-dataset
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-payments/67cbadfb-3e2f-4985-abfa-264ca973901e
                      fraudRiskInformation:
                        href: https://api.epi-services.eu/api/p2p-payments/67cbadfb-3e2f-4985-abfa-264ca973901e/fraud-risk-information
                    viewerType: Unknown
                Payers’ wallet retrieving a P2P Payment:
                  value:
                    id: e372ea2a-21b9-448c-aebe-4aaeb164ea51
                    amount:
                      euroCents: 4900
                    message: For our weekend trip 🧳 🌄.
                    payerPaymentMeansId: 45f2b62f-f7ee-4db4-be77-380e10f90f1e
                    payeeProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
                    created: '2023-05-03T10:39:16.535830155Z'
                    updatedAt: '2023-05-03T10:39:16.535830155Z'
                    status: Initial
                    _embedded:
                      paymentRules:
                        paymentRules:
                        - type: Fixed
                          constraint:
                            type: Single
                            maxAmount:
                              euroCents: 4900
                          startOffset: PT-5S
                          windowDuration: PT5M
                      payeeContact:
                        displayName: Payee Display Name
                        proxyValue: '+431809876543210'
                        pro: false
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-payments/e372ea2a-21b9-448c-aebe-4aaeb164ea51
                      approval:
                        href: https://api.epi-services.eu/api/p2p-payments/e372ea2a-21b9-448c-aebe-4aaeb164ea51/approval
                      cancellation:
                        href: https://api.epi-services.eu/api/p2p-payments/e372ea2a-21b9-448c-aebe-4aaeb164ea51/cancellation
                    viewerType: Payer
                Payees’ wallets retrieving a P2P Payment:
                  value:
                    id: 7070ed36-dde4-47f1-b5f9-2eec230723fd
                    amount:
                      euroCents: 4900
                    message: For our weekend trip 🧳 🌄.
                    created: '2023-05-03T10:39:16.595496590Z'
                    updatedAt: '2023-05-03T10:39:16.595496590Z'
                    status: Initial
                    _embedded:
                      paymentRules:
                        paymentRules:
                        - type: Fixed
                          constraint:
                            type: Single
                            maxAmount:
                              euroCents: 4900
                          startOffset: PT-5S
                          windowDuration: PT5M
                      payerContact:
                        displayName: Payer Display Name
                        pro: false
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-payments/7070ed36-dde4-47f1-b5f9-2eec230723fd
                      blockContact:
                        href: https://api.epi-services.eu/api/p2p-payments/7070ed36-dde4-47f1-b5f9-2eec230723fd/block-contact
                    viewerType: Payee
        '404':
          $ref: '#/components/responses/errorResponse404'
        '422':
          $ref: '#/components/responses/UnprocessableContentForPaymentRetrieval'
      operationId: get-p2p-payments-p2pPaymentId
      description: |-
        Payers’ wallets or the consumer PSP that represents the payer can retrieve P2P Payment resources that they created.

        Payees’ wallets or the consumer PSP that represents the payees can retrieve P2P Payment resources that correspond to P2P
        payments that the payees received and that have a `Settled` status.

        The `p2p:transferMoney` scope is required to access this route.
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
  /api/p2p-payments/{p2pPaymentId}/payment-dataset:
    parameters:
    - $ref: '#/components/parameters/p2pPaymentId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      operationId: get-api-p2p-payments-p2pPaymentId-payment-dataset
      summary: Retrieve dataset required for initiating an SCT Inst [Consumer PSP]
      description: |-
        Retrieve the dataset required for initiating an SCT Inst for a P2P payment.
        The `p2p:transferMoney` scope is required to access this route.
        > ❗️ `fraudScore` field has been replaced.
        The `fraudScore` field used to exist in the response, but has been replaced by the [Fraud Risk Information endpoint](ref:post-api-p2p-payments-p2ppaymentid-fraud-risk-information) instead  as this provides a much more detailed view of all fraud scores across both the originator and beneficiary.
      tags:
      - p2p-payments
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/MoneyTransferDatasetResource'
              examples:
                Example1:
                  value:
                    originatorAccountIdentifier:
                      type: IBAN
                      iban: DE89370400440532013000
                    originatorName: John Doe
                    originatorReference: f3ff5086757f45d98a8c6ae7ab188ea6
                    beneficiaryAccountIdentifier:
                      type: IBAN
                      iban: DE89370400440532013000
                    beneficiaryName: Jane Doe
                    originatorUnmodifiedName: John Doe
                    beneficiaryUnmodifiedName: Jane Doe
                    amount:
                      euroCents: 100
                    categoryPurpose: EPI
                    purpose: MP2P
                    remittanceInfo: EPI
                    isOriginatedFromP2PRequest: true
                    paymentOrigin:
                      type: P2PRequest
                      id: a2c91342-f523-4192-99e7-d0c8b52f82a7
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-payments/1a2b3c4d5e6f7g8h9i0j/payment-dataset
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          $ref: '#/components/responses/errorResponse403'
        '422':
          $ref: '#/components/responses/UnprocessableContentForPaymentDatasetRetrieval'
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
  /api/p2p-payments/{p2pPaymentId}/payment-details.pdf:
    parameters:
    - $ref: '#/components/parameters/p2pPaymentId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      summary: Retrieve a P2P payment details PDF [Wallet]
      parameters:
      - in: query
        name: timezone
        schema:
          type: string
        required: true
        description: IANA zone identifier. The timezone is used to localise the timestamps.
        example: Europe/Amsterdam
      - in: query
        name: language
        schema:
          type: string
        required: false
        description: ISO 639-1 language code. The language code is used to localise
          the PDF document. Defaults to `en` if not provided or unsupported.
        example: fr
      - in: query
        name: country
        schema:
          type: string
        required: false
        description: ISO 3166-1 alpha-2 country code. The country code is used to
          localise the PDF document. Defaults to `gb` if not provided.
        example: BE
      - $ref: '#/components/parameters/ConsumerIdReq'
      tags:
      - p2p-payments
      responses:
        '200':
          description: OK
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          $ref: '#/components/responses/errorResponse404'
      operationId: get-p2p-payments-p2pPaymentId-payment-details-pdf
      description: |-
        This endpoint retrieves a PDF document containing the details of a settled P2P payment.

        It is available to both the payer and the payee of the P2P payment if the payee is Pro (P2Pro).

        The PDF document contains the following information:

          - amount
          - settlement date
          - payer name
          - payer bank name
          - payer masked IBAN
          - payee name
          - payment method
          - payment status
          - payment reference
          - payment identifier

        The PDF document is localised with the locale (language + country) and timezone provided as query parameters.

        Currently only the following languages are supported: `de`, `en`, `fr`, `nl`.

        ## Scope

        The `p2p:transferMoney scope` is required to access this route.
      security:
      - BearerAccessToken: [
          ]
  /api/p2p-requests:
    post:
      summary: Create a P2P request [Wallet]
      tags:
      - p2p-requests
      responses:
        '201':
          description: Created
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/P2PRequestPayeeSchema'
              examples:
                Example 1:
                  value:
                    id: 0e1acec0-57ed-4094-94db-cdcfee5ae7b6
                    amount:
                      euroCents: 4900
                    title: 🧳🌄💶
                    message: For our weekend trip 🙏.
                    status:
                      value: Pending
                      at: '2023-05-04T10:39:18.238726038Z'
                    created: '2023-05-03T10:39:18.238726038Z'
                    updatedAt: '2023-05-04T10:39:18.238726038Z'
                    expiresAt: '2023-06-02T10:39:18.238726038Z'
                    payeePaymentMeansId: c28d282a-ac77-4bee-a5c1-bc4d7ed426c3
                    payerProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
                    _embedded:
                      payerContact:
                        displayName: Payer Display Name
                        proxyValue: '+431809876543210'
                        pro: false
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-requests/0e1acec0-57ed-4094-94db-cdcfee5ae7b6
                      cancellation:
                        href: https://api.epi-services.eu/api/p2p-requests/0e1acec0-57ed-4094-94db-cdcfee5ae7b6/cancellation
                    viewerType: Payee
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
            Location:
              schema:
                type: string
                format: uri
              description: URL that points to the location of the new p2p-request
                resource. For more information about this response header, see [MDN
                web documentation](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Location).
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ShareIdNotFound:
                  value:
                    type: /problem/payment-source-profile/share-id/not-found
                    status: 404
                    title: Not Found
                    callId: 00000000000000000000000000000000-0000000000000000
        '422':
          $ref: '#/components/responses/UnprocessableContentForRequestCreation'
        '429':
          $ref: '#/components/responses/errorResponse429'
      operationId: post-p2p-requests
      parameters:
      - $ref: '#/components/parameters/Idempotency-Key'
      - $ref: '#/components/parameters/ConsumerIdReq'
      description: |-
        ## Person-to-person requests
        One consumer (the payee) can request money from another consumer (the payer) through a person-to-person (P2P) request.

        The payee creates a P2P request, including details like the amount, the payer and a message. In the standalone Wero digital wallet app, the payer approves the P2P request, which creates a P2P payment. This P2P payment follows the same flow as if it were created by the payer without a request from the payee.

        ### Create a P2P request
        With the following API request, the payee can create the P2P request. The payer is notified about the P2P request.
        Currently, P2P payments are limited to 10,000,000 euro cents (€100,000).
        In addition, a payee currently has a limit of creating 100 P2P requests per week.
        This request can benefit from clients setting the Idempotency-Key header. For more information, see [Idempotency](ref:idempotency).
        The `p2p:transferMoney` scope is required to access this route.
        ### Payer identification
        The request payer is identified by either `payerProxyHash` or `payerShareId`. This is done during the creation of the P2P request.
        The criteria that is used to initially identify the payer is not updated during the lifetime of the request, even if the payer proxy is removed or reassigned to another consumer: the request still points to the consumer that is initially linked to the proxy.
        For instance:
          - Consumer A creates a P2P request with `payerProxyHash` pointing to Consumer B.
          - Consumer B removes the proxy.
          - Consumer C is assigned the proxy.
          - Consumer A's P2P request still points to Consumer B.
      security:
      - BearerAccessToken: [
          ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              examples:
              - title: 🧳🌄💶
                message: For our weekend trip 🙏.
                amount:
                  euroCents: 4900
                payeePaymentMeansId: c28d282a-ac77-4bee-a5c1-bc4d7ed426c3
                payerProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
              properties:
                title:
                  type: string
                  description: Large message title sent to the payer. Limited to 3
                    graphemes.
                  example: 🎂🍽️💶
                message:
                  type: string
                  description: Message that is sent to the payer. Limited to 250 graphemes.
                paymentReference:
                  $ref: '#/components/schemas/PaymentReference'
                amount:
                  allOf:
                  - $ref: '#/components/schemas/Money'
                  - type: object
                    properties:
                      euroCents:
                        type: integer
                        minimum: 1
                        maximum: 100000
                payeePaymentMeansId:
                  type: string
                  description: The means of payment that is used to receive the payment.
                payerProxyHash:
                  $ref: '#/components/schemas/proxyHash'
                payerShareId:
                  type: string
                  description: The share ID of the payer's payment source.
                consumerDeviceTelemetry:
                  $ref: '#/components/schemas/InboundConsumerDeviceTelemetry'
              oneOf:
              - required:
                - amount
                - payeePaymentMeansId
                - payerProxyHash
                title: CreateRequestViaProxyHash
              - required:
                - amount
                - payeePaymentMeansId
                - payerShareId
                title: CreateRequestViaShareId
            examples:
              p2p-request-with-consumer-device-telemetry:
                value:
                  title: 🧳🌄💶
                  message: For our weekend trip 🙏.
                  amount:
                    euroCents: 4900
                  payeePaymentMeansId: c28d282a-ac77-4bee-a5c1-bc4d7ed426c3
                  payerProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
                  consumerDeviceTelemetry:
                    deviceUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 13_3 like
                      Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.5
                      Mobile/15E148 Safari/604.1
                    deviceIpAddress: 192.0.2.123
                    deviceId: 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
                    deviceModel: iPhone11
                    deviceScreenResolution: 828x1792
                    deviceLanguage: en_US
                    deviceLocation: 37.7749,-122.4194
                    deviceCellularProvider: Vodafone, Telekom
                    deviceOperatingSystem: iOS
                    deviceTimeZone: Europe/Berlin
                    deviceTime: '2020-01-01T12:00:00.000Z'
                    additionalPropertyExample: some value
        description: ''
    get:
      summary: List P2P requests [Wallet]
      tags:
      - p2p-requests
      parameters:
      - name: page
        in: query
        description: The requested page number.
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
      - name: size
        in: query
        description: The requested page size. The data is split into pages of this
          size, and the numbering depends on this page size.
        required: false
        schema:
          type: integer
          minimum: 10
          maximum: 100
          default: 10
      - name: sort
        in: query
        description: The sorting order. Sort either by creation date `created:(asc|desc)`,
          updated date `updatedAt:(asc|desc)` or by status `status:(asc|desc)` .
        required: false
        schema:
          type: string
          default: created:desc
        example: created:desc,status:asc
      - name: status
        in: query
        description: Filter by the status of the P2P request.
        required: false
        schema:
          type: string
        examples:
          singleValue:
            value: Accepted
            summary: A single valid value
          allValues:
            $ref: '#/components/examples/allRequestStatuses'
      - name: closed
        in: query
        description: Filter only closed (`closed=true`) or unresolved (`closed=false`)
          P2P requests. Closed P2P requests refer to P2P requests in status `Canceled`,
          `Rejected`, `Expired` or `Approved` with a payment settled. Unresolved P2P
          requests refer to P2P requests in status `Pending` or `Approved` but with
          no settled P2P payment.
        required: false
        schema:
          type: boolean
      - name: direction
        in: query
        description: Filter by whether the P2P request was sent or received.
        required: false
        schema:
          type: string
          enum:
          - Received
          - Sent
      - name: payerPaymentSourceId
        in: query
        description: Filter by the payment source ID of the payer.
        required: false
        schema:
          type: string
          format: uuid
      - name: payeePaymentMeansId
        in: query
        description: Filter by the payment means ID of the payee.
        required: false
        schema:
          type: string
          format: uuid
      - name: payerProxyHash
        in: query
        description: Filter by the proxy hash of the payer.
        required: false
        schema:
          $ref: '#/components/schemas/proxyHash'
      - name: updatedSince
        in: query
        description: Filter by the `updatedAt` value. This excludes any payments that
          occur before the specified timestamp.
        required: false
        schema:
          type: string
          format: date-time
          example: '2023-05-03T10:39:16.425084691Z'
      - $ref: '#/components/parameters/ConsumerIdReq'
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                type: object
                examples:
                - _links:
                    self:
                      href: https://api.epi-services.eu/api/p2p-requests?page=0&size=10&sort=created%3Adesc
                    first:
                      href: https://api.epi-services.eu/api/p2p-requests?page=0&size=10&sort=created%3Adesc
                    last:
                      href: https://api.epi-services.eu/api/p2p-requests?page=0&size=10&sort=created%3Adesc
                  _embedded:
                    p2pRequests:
                    - id: 03cfdaa2-8d64-410f-918b-447527d02299
                      amount:
                        euroCents: 1399
                      title: 🍕🍕😊
                      message: Please pay me for the pizza 🍕.
                      status:
                        value: Pending
                        at: '2023-05-03T10:39:18.474001237Z'
                      created: '2023-05-03T10:39:18.474001237Z'
                      updatedAt: '2023-05-04T10:39:18.474001237Z'
                      expiresAt: '2023-06-02T10:39:18.474001237Z'
                      payeePaymentMeansId: c28d282a-ac77-4bee-a5c1-bc4d7ed426c3
                      payerProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
                      _embedded:
                        payerContact:
                          displayName: Payer Display Name
                          proxyValue: '+431809876543210'
                          pro: false
                      _links:
                        self:
                          href: https://api.epi-services.eu/api/p2p-requests/03cfdaa2-8d64-410f-918b-447527d02299
                        cancellation:
                          href: https://api.epi-services.eu/api/p2p-requests/03cfdaa2-8d64-410f-918b-447527d02299/cancellation
                      viewerType: Payee
                  page:
                    size: 1
                    totalElements: 1
                    totalPages: 1
                    number: 0
                    requestedPageSize: 10
                    limitReached: false
                properties:
                  _embedded:
                    type: object
                    properties:
                      p2pRequests:
                        type: array
                        items:
                          $ref: '#/components/schemas/P2PRequestSchema'
                  _links:
                    $ref: '#/components/schemas/PagedCollectionResourceLinks'
                  page:
                    $ref: '#/components/schemas/page'
                required:
                - _embedded
                - _links
                - page
              examples:
                Example 1:
                  value:
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-requests?page=0&size=10&sort=created%3Adesc
                      first:
                        href: https://api.epi-services.eu/api/p2p-requests?page=0&size=10&sort=created%3Adesc
                      last:
                        href: https://api.epi-services.eu/api/p2p-requests?page=0&size=10&sort=created%3Adesc
                    _embedded:
                      p2pRequests:
                      - id: 03cfdaa2-8d64-410f-918b-447527d02299
                        amount:
                          euroCents: 1399
                        title: 🍕🍕😊
                        message: Please pay me for the pizza 🍕.
                        status:
                          value: Pending
                          at: '2023-05-04T10:39:18.474001237Z'
                        created: '2023-05-03T10:39:18.474001237Z'
                        updatedAt: '2023-05-04T10:39:18.474001237Z'
                        expiresAt: '2023-06-02T10:39:18.474001237Z'
                        payeePaymentMeansId: c28d282a-ac77-4bee-a5c1-bc4d7ed426c3
                        payerProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
                        _embedded:
                          payerContact:
                            displayName: Payer Display Name
                            proxyValue: '+431809876543210'
                            pro: false
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/p2p-requests/03cfdaa2-8d64-410f-918b-447527d02299
                          cancellation:
                            href: https://api.epi-services.eu/api/p2p-requests/03cfdaa2-8d64-410f-918b-447527d02299/cancellation
                        viewerType: Payee
                    page:
                      size: 1
                      totalElements: 1
                      totalPages: 1
                      number: 0
                      requestedPageSize: 10
                      limitReached: false
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          $ref: '#/components/responses/errorResponse404'
      operationId: get-p2p-requests
      security:
      - BearerAccessToken: [
          ]
      description: |-
        Consumers can retrieve all P2P requests that they have made or received.


        The list is paginated. Retrieving the full list might require multiple API calls
        when `page.totalPages` is greater than 1. For more information, see [Pagination](ref:pagination).


        Note that the `p2pPayment` embedded object is always returned for the payer but only when the payment is settled for the payee.
    parameters:
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
  /api/p2p-requests/{p2pRequestId}:
    parameters:
    - $ref: '#/components/parameters/p2pRequestId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      summary: Retrieve a P2P request [Wallet]
      tags:
      - p2p-requests
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/P2PRequestSchema'
              examples:
                Retrieve a P2P request as a payer:
                  value:
                    id: 473a38fa-f6c1-4a98-b21e-22685275d23d
                    amount:
                      euroCents: 4900
                    message: For our weekend trip 🧳 🌄.
                    status:
                      value: Pending
                      at: '2023-05-04T10:39:18.238726038Z'
                    created: '2023-05-03T10:39:18.296926055Z'
                    updatedAt: '2023-05-04T10:39:18.238726038Z'
                    expiresAt: '2023-06-02T10:39:18.296926055Z'
                    _embedded:
                      payeeContact:
                        displayName: Payee Display Name
                        pro: false
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-requests/473a38fa-f6c1-4a98-b21e-22685275d23d
                      approval:
                        href: https://api.epi-services.eu/api/p2p-requests/473a38fa-f6c1-4a98-b21e-22685275d23d/approval
                      blockContact:
                        href: https://api.epi-services.eu/api/p2p-requests/473a38fa-f6c1-4a98-b21e-22685275d23d/block-contact
                      rejection:
                        href: https://api.epi-services.eu/api/p2p-requests/473a38fa-f6c1-4a98-b21e-22685275d23d/rejection
                      retryPayment:
                        href: https://api.epi-services.eu/api/p2p-requests/473a38fa-f6c1-4a98-b21e-22685275d23d/retry-payment
                    viewerType: Payer
                Retrieve a P2P request as a payee:
                  value:
                    id: 3ad256fa-3ed9-4d7d-bba0-c7047aff0f00
                    amount:
                      euroCents: 4900
                    message: For our weekend trip 🧳 🌄.
                    status:
                      value: Pending
                      at: '2023-05-04T10:39:18.336570743Z'
                    created: '2023-05-03T10:39:18.336570743Z'
                    updatedAt: '2023-05-04T10:39:18.336570743Z'
                    expiresAt: '2023-06-02T10:39:18.336570743Z'
                    payeePaymentMeansId: c28d282a-ac77-4bee-a5c1-bc4d7ed426c3
                    payerProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
                    _embedded:
                      payerContact:
                        displayName: Payer Display Name
                        proxyValue: '+431809876543210'
                        pro: false
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-requests/3ad256fa-3ed9-4d7d-bba0-c7047aff0f00
                      cancellation:
                        href: https://api.epi-services.eu/api/p2p-requests/3ad256fa-3ed9-4d7d-bba0-c7047aff0f00/cancellation
                    viewerType: Payee
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          $ref: '#/components/responses/errorResponse404'
      operationId: get-p2p-requests-p2pRequestId
      description: |-
        Payers can retrieve P2P requests that they received.

        Payees can retrieve P2P requests that they created. They will only see the embedded P2P Payment resource if it has a `Settled` status.

        ### Scope
        The `p2p:transferMoney` scope is required to access this route.
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/p2p-requests/{p2pRequestId}/approval:
    parameters:
    - $ref: '#/components/parameters/p2pRequestId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    post:
      summary: Approve a P2P request [Wallet]
      tags:
      - p2p-requests
      responses:
        '201':
          description: Created
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/P2PRequestPayerSchema'
              examples:
                Example 1:
                  value:
                    id: 2da7418f-aa7a-4248-b235-878fe9706651
                    amount:
                      euroCents: 4900
                    title: 💶4✈️
                    message: For our weekend trip 🧳 🌄.
                    status:
                      value: Approved
                      at: '2023-05-03T10:39:18.372074781Z'
                    created: '2023-05-03T10:39:18.372074781Z'
                    updatedAt: '2023-05-03T10:39:18.372074781Z'
                    expiresAt: '2023-06-02T10:39:18.372074781Z'
                    _embedded:
                      payeeContact:
                        displayName: Payee Display Name
                        pro: false
                      p2pPayment:
                        id: b9c36b8b-5874-4218-99ad-23104b7b5f74
                        amount:
                          euroCents: 4900
                        title: 💶4✈️
                        message: For our weekend trip 🧳 🌄.
                        payerPaymentMeansId: 6356dbcb-ccc9-4a1e-991b-9a186e21c5f4
                        created: '2023-05-03T10:39:18.372229583Z'
                        updatedAt: '2023-05-03T10:39:18.372229583Z'
                        status: Initial
                        _embedded:
                          paymentRules:
                            paymentRules:
                            - type: Fixed
                              constraint:
                                type: Single
                                maxAmount:
                                  euroCents: 4900
                              startOffset: PT-5S
                              windowDuration: PT5M
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/p2p-payments/b9c36b8b-5874-4218-99ad-23104b7b5f74
                          approval:
                            href: https://api.epi-services.eu/api/p2p-payments/b9c36b8b-5874-4218-99ad-23104b7b5f74/approval
                        viewerType: Payer
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-requests/2da7418f-aa7a-4248-b235-878fe9706651
                      approval:
                        href: https://api.epi-services.eu/api/p2p-requests/2da7418f-aa7a-4248-b235-878fe9706651/approval
                      blockContact:
                        href: https://api.epi-services.eu/api/p2p-requests/2da7418f-aa7a-4248-b235-878fe9706651/block-contact
                      rejection:
                        href: https://api.epi-services.eu/api/p2p-requests/2da7418f-aa7a-4248-b235-878fe9706651/rejection
                    viewerType: Payer
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          description: Forbidden - The specified resource does not belong to the authenticated
            consumer
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                Example 1:
                  value:
                    type: about:blank
                    status: 403
                    title: Forbidden
                    callId: 00000000000000000000000000000000-0000000000000000
        '404':
          $ref: '#/components/responses/errorResponse404'
        '409':
          description: Conflict
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                default:
                  value:
                    type: about:blank
                    status: 409
                    title: Conflict
                    callId: 00000000000000000000000000000000-0000000000000000
                RequestAlreadyApproved:
                  value:
                    type: /problem/p2p-request/approved
                    status: 409
                    title: P2P request approved
                    detail: 'Invalid payment request target status: from: Approved
                      to: Approved'
                    callId: 00000000000000000000000000000000-0000000000000000
                RequestAlreadyCanceled:
                  value:
                    type: /problem/p2p-request/canceled
                    status: 409
                    title: P2P request canceled
                    detail: 'Invalid payment request target status: from: Canceled
                      to: Approved'
                    callId: 00000000000000000000000000000000-0000000000000000
                RequestAlreadyDeclined:
                  value:
                    type: /problem/p2p-request/declined
                    status: 409
                    title: P2P request declined
                    detail: 'Invalid payment request target status: from: Declined
                      to: Approved'
                    callId: 00000000000000000000000000000000-0000000000000000
        '410':
          $ref: '#/components/responses/P2PRequestExpired'
        '422':
          $ref: '#/components/responses/UnprocessableContentForRequestApproval'
      operationId: post-p2p-requests-p2pRequestId-approval
      parameters:
      - $ref: '#/components/parameters/Idempotency-Key'
      - $ref: '#/components/parameters/ConsumerIdReq'
      security:
      - BearerAccessToken: [
          ]
      description: |-
        While approving a P2P request, the payer can add a message for the payee.
        In the response body of the payer's approval of the request, EPI central services embeds the new P2P payment resource.
        Note: The next step will be for the payer to approve the P2P payment, thereby triggering a money transfer.

        This request can benefit from clients setting the Idempotency-Key header. For more information, see [Idempotency](ref:idempotency).

        The `p2p:transferMoney` scope is required to access this route.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              examples:
              - title: 💶4✈️
                message: It was a nice trip 🧳 🌄.
                payerPaymentMeansId: 6356dbcb-ccc9-4a1e-991b-9a186e21c5f4
              properties:
                title:
                  type: string
                  description: Large message title sent to the payee. Limited to 3
                    graphemes.
                message:
                  type: string
                  description: Message that is sent to the payee. Limited to 250 graphemes.
                payerPaymentMeansId:
                  type: string
                  description: The means of payment that is used to make the payment.
                  format: uuid
                consumerDeviceTelemetry:
                  $ref: '#/components/schemas/InboundConsumerDeviceTelemetry'
                flowType:
                  $ref: '#/components/schemas/FlowType'
              required:
              - payerPaymentMeansId
            examples:
              approval-request-with-consumer-device-telemetry:
                value:
                  title: 💶4✈️
                  message: It was a nice trip 🧳 🌄.
                  payerPaymentMeansId: 6356dbcb-ccc9-4a1e-991b-9a186e21c5f4
                  consumerDeviceTelemetry:
                    deviceUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 13_3 like
                      Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.5
                      Mobile/15E148 Safari/604.1
                    deviceIpAddress: 192.0.2.123
                    deviceId: 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
                    deviceModel: iPhone11
                    deviceScreenResolution: 828x1792
                    deviceLanguage: en_US
                    deviceLocation: 37.7749,-122.4194
                    deviceCellularProvider: Vodafone, Telekom
                    deviceOperatingSystem: iOS
                    deviceTimeZone: Europe/Berlin
                    deviceTime: '2020-01-01T12:00:00.000Z'
                    additionalPropertyExample: some value
                  flowType: Standard
        description: ''
  /api/p2p-requests/{p2pRequestId}/cancellation:
    parameters:
    - $ref: '#/components/parameters/p2pRequestId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    put:
      summary: Cancel a P2P request [Wallet]
      tags:
      - p2p-requests
      responses:
        '204':
          description: 204 - No Content
        '404':
          $ref: '#/components/responses/errorResponse404'
        '409':
          description: Conflict
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                InvalidPaymentRequestStatus:
                  value:
                    type: about:blank
                    status: 409
                    title: Unprocessable Entity
                    detail: 'Invalid payment request target status: from: Rejected
                      to: Expired'
                    callId: 00000000000000000000000000000000-0000000000000000
                RequestAlreadyApproved:
                  value:
                    type: /problem/p2p-request/approved
                    status: 409
                    title: P2P request approved
                    detail: 'Invalid payment request target status: from: Approved
                      to: Canceled'
                    callId: 00000000000000000000000000000000-0000000000000000
                RequestAlreadyDeclined:
                  value:
                    type: /problem/p2p-request/declined
                    status: 409
                    title: P2P request declined
                    detail: 'Invalid payment request target status: from: Declined
                      to: Canceled'
                    callId: 00000000000000000000000000000000-0000000000000000
        '410':
          $ref: '#/components/responses/P2PRequestExpired'
      operationId: post-p2p-requests-p2pRequestId-cancellation
      description: |-
        Payees can cancel P2P requests that they created. The payer is not notified of the cancellation. However, the payer can no longer approve the request.
        The `p2p:transferMoney` scope is required to access this route.
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/p2p-requests/{p2pRequestId}/rejection:
    parameters:
    - $ref: '#/components/parameters/p2pRequestId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    put:
      summary: Decline a P2P request [Wallet]
      tags:
      - p2p-requests
      responses:
        '204':
          description: 204 - No Content
        '404':
          $ref: '#/components/responses/errorResponse404'
        '409':
          description: Conflict
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                InvalidPaymentRequestStatus:
                  value:
                    type: about:blank
                    status: 409
                    title: Unprocessable Entity
                    detail: 'Invalid payment request target status: from: Rejected
                      to: Expired'
                    callId: 00000000000000000000000000000000-0000000000000000
                RequestAlreadyApproved:
                  value:
                    type: /problem/p2p-request/approved
                    status: 409
                    title: P2P request approved
                    detail: 'Invalid payment request target status: from: Approved
                      to: Declined'
                    callId: 00000000000000000000000000000000-0000000000000000
                RequestAlreadyCanceled:
                  value:
                    type: /problem/p2p-request/canceled
                    status: 409
                    title: P2P request canceled
                    detail: 'Invalid payment request target status: from: Canceled
                      to: Declined'
                    callId: 00000000000000000000000000000000-0000000000000000
        '410':
          $ref: '#/components/responses/P2PRequestExpired'
      operationId: put-p2p-requests-p2pRequestId-rejection
      security:
      - BearerAccessToken: [
          ]
      description: |-
        Payers can decline P2P requests that they receive. The payee is notified that the request has been declined.
        The `p2p:transferMoney` scope is required to access this route.
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/p2p-requests/{p2pRequestId}/retry-payment:
    parameters:
    - $ref: '#/components/parameters/p2pRequestId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    post:
      summary: Retry a new P2P Payment [Wallet]
      tags:
      - p2p-requests
      responses:
        '201':
          description: Created
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/P2PRequestPayerSchema'
              examples:
                Example 1:
                  value:
                    id: 2da7418f-aa7a-4248-b235-878fe9706651
                    amount:
                      euroCents: 4900
                    title: 💶4✈️
                    message: For our weekend trip 🧳 🌄.
                    status:
                      value: Approved
                      at: '2023-05-03T10:39:18.372074781Z'
                    created: '2023-05-03T10:39:18.372074781Z'
                    updatedAt: '2023-05-03T10:39:18.372074781Z'
                    expiresAt: '2023-06-02T10:39:18.372074781Z'
                    _embedded:
                      payeeContact:
                        displayName: Payee Display Name
                        pro: false
                      p2pPayment:
                        id: b9c36b8b-5874-4218-99ad-23104b7b5f74
                        amount:
                          euroCents: 4900
                        title: 💶4✈️
                        message: For our weekend trip 🧳 🌄.
                        payerPaymentMeansId: 6356dbcb-ccc9-4a1e-991b-9a186e21c5f4
                        created: '2023-05-03T10:39:18.372229583Z'
                        updatedAt: '2023-05-03T10:39:18.372229583Z'
                        status: Initial
                        _embedded:
                          paymentRules:
                            paymentRules:
                            - type: Fixed
                              constraint:
                                type: Single
                                maxAmount:
                                  euroCents: 4900
                              startOffset: PT-5S
                              windowDuration: PT5M
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/p2p-payments/b9c36b8b-5874-4218-99ad-23104b7b5f74
                          approval:
                            href: https://api.epi-services.eu/api/p2p-payments/b9c36b8b-5874-4218-99ad-23104b7b5f74/approval
                        viewerType: Payer
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/p2p-requests/2da7418f-aa7a-4248-b235-878fe9706651
                      approval:
                        href: https://api.epi-services.eu/api/p2p-requests/2da7418f-aa7a-4248-b235-878fe9706651/approval
                      blockContact:
                        href: https://api.epi-services.eu/api/p2p-requests/2da7418f-aa7a-4248-b235-878fe9706651/block-contact
                      rejection:
                        href: https://api.epi-services.eu/api/p2p-requests/2da7418f-aa7a-4248-b235-878fe9706651/rejection
                    viewerType: Payer
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          description: Forbidden - The specified resource does not belong to the authenticated
            consumer
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                Example 1:
                  value:
                    type: about:blank
                    status: 403
                    title: Forbidden
                    callId: 00000000000000000000000000000000-0000000000000000
        '404':
          $ref: '#/components/responses/errorResponse404'
        '410':
          $ref: '#/components/responses/P2PRequestExpired'
        '422':
          description: Unprocessable Entity
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                default:
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    callId: 00000000000000000000000000000000-0000000000000000
                InvalidP2PRequestStatus:
                  value:
                    type: /problem/p2p-request/retry-payment-failed
                    status: 422
                    title: Retry payment failed
                    detail: 'Cannot retry P2P Payment: P2P request should be approved'
                    callId: 00000000000000000000000000000000-0000000000000000
                NoAssociatedP2PPayment:
                  value:
                    type: /problem/p2p-request/retry-payment-failed
                    status: 422
                    title: Retry payment failed
                    detail: 'Cannot retry P2P Payment: no associated P2P payment'
                    callId: 00000000000000000000000000000000-0000000000000000
                InvalidP2PPaymentStatus:
                  value:
                    type: /problem/p2p-request/retry-payment-failed
                    status: 422
                    title: Retry payment failed
                    detail: 'Cannot retry P2P Payment: associated P2P Payment should
                      be in error'
                    callId: 00000000000000000000000000000000-0000000000000000
      operationId: post-p2p-requests-p2pRequestId-retry-payment
      parameters:
      - $ref: '#/components/parameters/Idempotency-Key'
      - $ref: '#/components/parameters/ConsumerIdReq'
      security:
      - BearerAccessToken: [
          ]
      description: |-
        While retrying a P2P payment for a P2P request, the payer can add a message for the payee. In the response body of the payer's new attempt, EPI central services embeds the new P2P payment resource.  Note: The next step will be for the payer to approve the P2P payment, thereby triggering a money transfer.
        This request can benefit from clients setting the Idempotency-Key header. For more information, see [Idempotency](ref:idempotency).
        The `p2p:transferMoney` scope is required to access this route.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              examples:
              - title: 💶4✈️
                message: It was a nice trip 🧳 🌄.
                payerPaymentMeansId: 6356dbcb-ccc9-4a1e-991b-9a186e21c5f4
              properties:
                title:
                  type: string
                  description: Large message title sent to the payee. Limited to 3
                    graphemes.
                message:
                  type: string
                  description: Message that is sent to the payee. Limited to 250 graphemes.
                payerPaymentMeansId:
                  type: string
                  description: The means of payment that is used to make the payment.
                  format: uuid
                consumerDeviceTelemetry:
                  $ref: '#/components/schemas/InboundConsumerDeviceTelemetry'
                flowType:
                  $ref: '#/components/schemas/FlowType'
              required:
              - payerPaymentMeansId
            examples:
              approval-request-with-consumer-device-telemetry:
                value:
                  title: 💶4✈️
                  message: It was a nice trip 🧳 🌄.
                  payerPaymentMeansId: 6356dbcb-ccc9-4a1e-991b-9a186e21c5f4
                  consumerDeviceTelemetry:
                    deviceUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 13_3 like
                      Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.5
                      Mobile/15E148 Safari/604.1
                    deviceIpAddress: 192.0.2.123
                    deviceId: 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
                    deviceModel: iPhone11
                    deviceScreenResolution: 828x1792
                    deviceLanguage: en_US
                    deviceLocation: 37.7749,-122.4194
                    deviceCellularProvider: Vodafone, Telekom
                    deviceOperatingSystem: iOS
                    deviceTimeZone: Europe/Berlin
                    deviceTime: '2020-01-01T12:00:00.000Z'
                    additionalPropertyExample: some value
                  flowType: Standard
        description: ''
  /api/proxies/{proxyHash}:
    parameters:
    - $ref: '#/components/parameters/proxyHash'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      summary: Retrieve proxy details by sending a proxy hash [Wallet]
      tags:
      - proxies
      responses:
        '200':
          description: OK
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
          content:
            application/hal+json; charset=UTF-8:
              schema:
                type: object
                properties:
                  proxyValue:
                    type: string
                    description: Proxy value that is associated with the proxy hash.
                  displayName:
                    type: string
                    description: The consumer's name in full (as provided by the consumer
                      PSP) or obfuscated (pseudonymised/masked), depending on whether
                      the consumer chose to obfuscate the name to be displayed to
                      other consumers in P2P transactions.
                  canBePayer:
                    type: boolean
                    description: Indicates whether the consumer linked to the proxy
                      hash can act as a payer and respond to payment requests.
                  pro:
                    type: boolean
                    default: false
                    description: Indicates whether the payment source linked to the
                      proxy hash is a business account (P2Pro).
                  _links:
                    type: object
                    description: HAL links to related resources.
                    properties:
                      self:
                        $ref: '#/components/schemas/link'
                required:
                - proxyValue
                - displayName
                - canBePayer
                - pro
                - _links
              examples:
                Example 1:
                  value:
                    proxyValue: €Linacash
                    displayName: Lina
                    canBePayer: true
                    pro: false
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/proxies/uT1CLsQ1AZPd_fUu1MS07IddzTQ4VpNGg08FcADOWrw=
        '404':
          $ref: '#/components/responses/errorResponse404'
        '429':
          $ref: '#/components/responses/errorResponse429'
      operationId: get-proxies-proxyHash
      description: |-
        The Wero digital wallet can send a proxy hash to the EPI proxy look-up service to retrieve the following information about the proxy, as registered in the service:
         - The value of the proxy
         - The corresponding consumer's name in full (as provided by the consumer PSP) or obfuscated (pseudonymised/masked)


        Whether the full or obfuscated name is returned depends on  whether the consumer chose to obfuscate the name to be displayed to other consumers in P2P transactions.   For more information, see [proxy hashes](doc:proxy-hashes). This endpoint call is rate-limited and permits the look-up of 100 unique proxies for each principal `consumerId` in a seven-day period.

        > 📘 Phone numbers of overseas France and of Monaco
        Phone numbers of Monaco and of most of overseas France can take the international prefix of the territory concerned or the international prefix of metropolitan France (that is, `+33`). The number returns the same proxy, regardless of which of the two prefixes are used; only the proxy value differs, in that the prefix returned is the one that was used as the input. For more information, see [Phone numbers of overseas France and of Monaco](doc:french-overseas-phone-numbers)
        ## Scope
        The `p2p:transferMoney scope` is required to access this route.
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/proxy-indicators:
    post:
      summary: List eligible proxy hashes [Consumer PSP or Wallet]
      tags:
      - proxy-indicators
      responses:
        '200':
          description: OK
          headers:
            X-RateLimit-Remaining:
              $ref: '#/components/headers/RateLimitRemaining'
            X-RateLimit-Reset:
              $ref: '#/components/headers/RateLimitReset'
          content:
            application/hal+json; charset=UTF-8:
              schema:
                oneOf:
                - $ref: '#/components/schemas/ProxyIndicators'
                - $ref: '#/components/schemas/ProxyIndicatorsTruncated'
        '400':
          description: Bad Request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                MissingExternalConsumerId:
                  value:
                    type: /problem/proxy-indicator/psp-missing-external-consumer-id-query-parameter
                    status: 400
                    title: Missing required `externalConsumerId` query parameter for
                      the ConsumerPSP access
                    callId: 00000000000000000000000000000000-0000000000000000
        '429':
          $ref: '#/components/responses/errorResponse429'
      operationId: post-proxy-indicators
      description: |-
        This endpoint call can serve different functions between wallet and consumer PSP workflows.
        ### Using proxy indicators for contact-list discovery [wallet]
        Consumers can discover which contacts in their Wero digital wallet contact list also have Wero digital wallets.

        The process to discover these contacts includes the following steps:
        1. The wallet creates proxy hashes of the phone numbers and of the email addresses from the contact list.
        2. The wallet sends the proxy hashes in a batch to EPI central service's proxy look-up service.
        3. The look-up service responds by indicating which proxy hashes from the batch are eligible to be used for sending money to or requesting money from contacts.
        ### Using proxy indicators for proxy-name pre-checks [consumer PSP]
        Consumer PSPs can use this service as a pre-check to determine if a proxy has already been registered before a consumer or wallet entity is created. Displaying this information to the consumer during the enrolment process provides a better user experience than having the enrolment flow fail at the end.
        ### Proxy indicators retrieval eligibility
        The response returns only registered proxy hashes.  Proxy hashes that are sent in the request but are not registered in the EPI proxy look-up database are omitted from the response.

        For security reasons, the number of proxy hashes in a single request is limited.  If the list of requested proxy hashes exceeds the limit, the server will consider only those proxy hashes up to the limit, truncating the rest. The Wero digital wallet can use the `truncated` and `truncatedAfter` properties to inform subsequent calls to the endpoint to check the eligibility of the remaining proxy hashes.
        ### Rate limiting
        This endpoint call is rate limited and permits the look-up of 10,000 unique proxies per year. For consumer PSPs who have authenticated using the consumer PSP authentication method, the `externalConsumerId` query parameter is used for rate-limiting. If there are more than 5000 proxy hashes in the request, the response will contain `truncated=true`, `truncatedAfter=5000` to let the apps know.
        > 📘 Phone numbers of overseas France and of Monaco
        Aliases of phone numbers of overseas France and of Monaco, which start with the `+33` international prefix of metropolitan France, are supported by the proxy look-up service. The same proxy is retrieved regardless of whether the alias is looked up or the phone number with the international prefix of the territory concerned is looked up. For more information, see [Phone numbers of overseas France and of Monaco](doc:french-overseas-phone-numbers)
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - in: query
        name: externalConsumerId
        schema:
          type: string
        required: false
        description: External ID of a consumer, provided by the consumer PSP. Uniquely
          identifies a consumer outside of the EPI context. While validation for this
          parameter is set to `optional`, consumer PSPs onboarding consumers to EPI
          must provide their own unique identifier for each consumer.
      - $ref: '#/components/parameters/ConsumerIdOpt'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              examples:
              - proxies:
                - proxyHash: uT1CLsQ1AZPd_fUu1MS07IddzTQ4VpNGg08FcADOWrw=
                - proxyHash: uqf-OQv4EPgDjX7iKDfdj5JfJHvSxB3BQgVLz8QVhe4=
                - proxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
              properties:
                proxies:
                  type: array
                  description: List of proxy hash strings of contacts in the contact
                    list.
                  items:
                    type: object
                    properties:
                      proxyHash:
                        $ref: '#/components/schemas/proxyHash'
            examples:
              Example 1:
                value:
                  proxies:
                  - proxyHash: uT1CLsQ1AZPd_fUu1MS07IddzTQ4VpNGg08FcADOWrw=
                  - proxyHash: uqf-OQv4EPgDjX7iKDfdj5JfJHvSxB3BQgVLz8QVhe4=
                  - proxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
    parameters:
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
  /api/wallets:
    get:
      tags:
      - wallets
      operationId: list-wallet-by-consumer-psp
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
      responses:
        '200':
          description: '200'
          content:
            application/hal+json; charset=UTF-8:
              schema:
                type: object
                required:
                - _links
                - _embedded
                - page
                properties:
                  _links:
                    $ref: '#/components/schemas/PagedCollectionResourceLinks'
                  _embedded:
                    type: object
                    required:
                    - wallets
                    properties:
                      wallets:
                        type: array
                        items:
                          $ref: '#/components/schemas/WalletSchema'
                  page:
                    $ref: '#/components/schemas/page'
              examples:
                Example 1:
                  value:
                    page:
                      size: 1
                      totalElements: 1
                      totalPages: 1
                      number: 0
                      requestedPageSize: 10
                      limitReached: false
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets
                      first:
                        href: https://api.epi-services.eu/api/wallets
                      last:
                        href: https://api.epi-services.eu/api/wallets?page=5
                    _embedded:
                      wallets:
                      - id: 1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9
                        walletName: Some Wallet
                        consumerId: 83202f2e-907a-4c78-9d7e-feaccf3fb8a6
                        host:
                          type: Mobile
                          device:
                            id: 58c56856-e7c6-403a-9594-3e8ca1ceff0e
                            name: Johnnys iPhone
                            model: iPhone 14
                          app:
                            id: de.epicompany.wallet
                            name: EPI Wallet
                        walletPublicKey:
                          kty: RSA
                          use: sig
                          alg: RS256
                          kid: D4Fu6PAlz08woGwMOz2g1ZC6uOD_HR8BZzxEGraXadw
                          n: utxN0wOR9cSSHdFjjrs6ZUspXmamxPeQd6ZjkR0Fc0C1hryzhUp6C3pk0lTcpH9N3xsZU_5j9NP3xIyzq4KXpQic5nAkFaanOoPWb_0UdfXTmE4V65I6RSbHAC_Awx-qMhdOh2vww9_JC76_UAdhB950BXDUyQ_ycWtkFCQDUS8wql9HbdaXpUwa22rILpJif6s_8QLSzARPOaQlapM-L4a63lmPoiG5ye9MUbmuzufvQc5Sb8kgW9AvpVVD22A-TrpppcDQCWtUcrQUfru-byXun5VQ5TqTGKbLolBfJ5l8rlpir5OHNpTafq7m04c38ucIvWD0fmAXSICzlutX8Q
                          e: AQAB
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9
                          provisionings:
                            href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provisionings
                          paymentMeans:
                            href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provision-payment-means
                        _embedded:
                          paymentMeans: [
                            ]
                list-wallet-by-consumer-psp:
                  value:
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets?page=0&size=100&sort=%3Adesc
                      first:
                        href: https://api.epi-services.eu/api/wallets?page=0&size=100&sort=%3Adesc
                      last:
                        href: https://api.epi-services.eu/api/wallets?page=0&size=100&sort=%3Adesc
                    _embedded:
                      wallets:
                      - id: 989f9b50-141c-4b5a-9aac-bcd8bdf4a885
                        walletName: Some Wallet
                        consumerId: af85b240-3727-4264-9e2e-2f9ab5984cc3
                        host:
                          type: Mobile
                          device:
                            id: 58c56856-e7c6-403a-9594-3e8ca1ceff0e
                            name: Johnnys iPhone
                            model: iPhone 14
                          app:
                            id: de.epicompany.wallet
                            name: EPI Wallet
                        walletPublicKey:
                          kty: RSA
                          use: sig
                          alg: RS256
                          kid: 74cf2532-c6c2-4586-acb3-6fce198acc5b
                          n: vZl9LV2lmdaSn1CTfrpbIbkhuJZ4C-mb33JTSXGB9q7GuSW_eiFz5SUOK2p5JIXznabbazaywpYhyMBpw7tbnKSzBuQxRKQHPD-Li1hhV4abjr570hGmc0UyftpBWZz4_53-q6lp0hupi8getzDyfPiiDZvgyKIGHytYSvZCGeVHXzJQy6DNf2xyZxG8WwgKvpIcOi0FvlVDJgdlIQn3HGrW3xK1IJpHLzh_ucYDIhs4L864hdV2QzUZA7d_agbk7dbq7ZStZNF4J_KmbruouQ_edglZurKeh6xmiRcOqGfWqN-4gJXAT4gN6w_eslfkPAKRDOcyh4ig8GopQ6CD9w
                          e: AQAB
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885
                          provisionings:
                            href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885/provisionings
                          paymentMeans:
                            href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885/provision-payment-means
                          notification:
                            href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885/notification
                        _embedded:
                          paymentMeans: [
                            ]
                    page:
                      size: 1
                      totalElements: 1
                      totalPages: 1
                      number: 0
                      requestedPageSize: 100
                      limitReached: false
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          $ref: '#/components/responses/errorResponse403'
      description: |-
        Consumer PSPs and consumers can retrieve a list of all wallets that they have provisioned.

        The list is paginated. Retrieving the full list might require multiple API calls when `page.totalPages` is greater than `0`. For more information, see [Pagination](/platform/reference/pagination).
        ## Scope
        This endpoint call does not require a scope.
      security:
      - BearerAccessToken: [
          ]
      summary: List provisioned wallets [Consumer PSP and Wallet]
    post:
      tags:
      - wallets
      operationId: post-wallet
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWalletRequest'
            examples:
              post-wallet:
                value:
                  host:
                    type: Mobile
                    device:
                      id: 4c4256ad-4e32-4543-ac52-ea63d7e26cdb
                      name: Johnnys Phone
                      model: Pixel 7a
                      os: Android
                    app:
                      id: de.epicompany.wallet
                      name: EPI Wallet
                  walletPublicKey:
                    kty: RSA
                    use: sig
                    alg: RS256
                    kid: c41387b5-1d0b-4ba5-9cfa-2e1c64ece728
                    n: 9luZkzZ4zd04KSdmQmullBw4x8ZxNWfBTaADGgbpkjEW1-7nl1l8yHzdD0IaDOEil_kXuPV7j0zxrVO98YAnukW3BCPV_3LKvvlgBBqUnDODGFCla_SdMcS7wzXkHCWGSVEeex5SjrHgbCkmb_ypMJGzUoRztnw9b7ZXXxyZvakU00Gizgx3yiOOncIMuzd8bzQLLBNqzvINNAg21UdwQFsrw7y9-hdqDRlyNMT-zZ9MlXmKbNRYMl_FKi0NLoQRI-F6k5E3EsWcPMnZxSSyacPmsvhXPU5LXwSpG5qoWuH9-wxQXQdGCyqzgDcebylnK37fP2uadDbXKHy8TuV_eQ
                    e: AQAB
      responses:
        '201':
          description: Created
          headers:
            Location:
              description: URL that points to the location of the new wallet resource.
                For more information about this response header, see [MDN web documentation](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Location).
              schema:
                type: string
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/WalletSchema'
              examples:
                post-wallet:
                  value:
                    id: 0fc3130f-5640-4453-8f27-129e860c8727
                    walletName: Some Wallet
                    host:
                      type: Mobile
                      device:
                        id: 58c56856-e7c6-403a-9594-3e8ca1ceff0e
                        name: Johnnys iPhone
                        model: iPhone 14
                      app:
                        id: de.epicompany.wallet
                        name: EPI Wallet
                    walletPublicKey:
                      kty: RSA
                      use: sig
                      alg: RS256
                      kid: 74cf2532-c6c2-4586-acb3-6fce198acc5b
                      n: vZl9LV2lmdaSn1CTfrpbIbkhuJZ4C-mb33JTSXGB9q7GuSW_eiFz5SUOK2p5JIXznabbazaywpYhyMBpw7tbnKSzBuQxRKQHPD-Li1hhV4abjr570hGmc0UyftpBWZz4_53-q6lp0hupi8getzDyfPiiDZvgyKIGHytYSvZCGeVHXzJQy6DNf2xyZxG8WwgKvpIcOi0FvlVDJgdlIQn3HGrW3xK1IJpHLzh_ucYDIhs4L864hdV2QzUZA7d_agbk7dbq7ZStZNF4J_KmbruouQ_edglZurKeh6xmiRcOqGfWqN-4gJXAT4gN6w_eslfkPAKRDOcyh4ig8GopQ6CD9w
                      e: AQAB
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets/0fc3130f-5640-4453-8f27-129e860c8727
                      provisionings:
                        href: https://api.epi-services.eu/api/wallets/0fc3130f-5640-4453-8f27-129e860c8727/provisionings
                      paymentMeans:
                        href: https://api.epi-services.eu/api/wallets/0fc3130f-5640-4453-8f27-129e860c8727/provision-payment-means
                      notification:
                        href: https://api.epi-services.eu/api/wallets/0fc3130f-5640-4453-8f27-129e860c8727/notification
                    _embedded:
                      paymentMeans: [
                        ]
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          $ref: '#/components/responses/errorResponse404'
        '422':
          description: Unprocessable Entity - The request was well formed but was
            not followed due to semantic errors.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerPspIsBeingMerged:
                  $ref: '#/components/examples/ConsumerPSPIsBeingMergedProblem'
      security:
      - BearerAccessToken: [
          ]
      summary: Create a wallet resource [Wallet]
      description: |-
        ## Wallets
        A Wero digital wallet on a consumer’s mobile device can hold one or more means of payment that are owned by the consumer. Wallets are represented technically by private/public key pairs for authenticating consumers.

        ### Create a wallet resource
        Wero digital wallet apps can register themselves with EPI central services by creating a Wallet resource through the following API request.
        No two wallets can have the same ID. If the wallet creation call is triggered twice for the same device ID but with different public keys, two wallets are created with different wallet IDs. Every time the app is reinstalled even on the same device, the ID must change.
        ## Scope
        This endpoint call does not require a scope.
    parameters:
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
  /api/wallets/psp-registration:
    post:
      summary: Create a wallet resource [Consumer PSP]
      tags:
      - wallets
      responses:
        '201':
          description: Created
          content:
            application/hal+json; charset=UTF-8:
              examples:
                Example 1:
                  value:
                    id: e35febbe-3926-44af-9ee2-26bcc088878a
                    walletName: Some Wallet
                    consumerId: 040c5372-1a19-4059-bc93-57b71bcb74c3
                    host:
                      type: Mobile
                      device:
                        id: 58c56856-e7c6-403a-9594-3e8ca1ceff0e
                        name: Johnnys iPhone
                        model: iPhone 14
                      app:
                        id: de.epicompany.wallet
                        name: EPI Wallet
                    walletPublicKey:
                      kty: RSA
                      use: sig
                      alg: RS256
                      kid: 363104b6-2ea0-4de0-9b30-4716971d7a0d
                      n: tp6Mbbnragj0IAqCL0PVbpRZELzoRaI_J4Fi1yUZhXDHsNg5E8l6ht0iYZj1m4QCyTXYJS1NLS5E4I4qnbXX7TD1oa8DiwEp_Djyg55MSbwe4thKGPS-Xfgl6VQzn-e_5qYPXpnDfm4wov6_pk25HKt38In9rbZKguh0uWfGMm1aoieTXtEXLzvuD-JrosmQOdSNoH68N_U8wV8YOwk97_Dzp3FE0ZbPUhk2_9z2j5ujKUjHeD1-LdbVmFHbDn2jO6mK23ie49G70RNznYAPiinigqpYGB4ZCX48mi0df_5fFnbzJy6uxw0e_ddImyW4gzpAtwZetZgbS9gCrb4dpQ
                      e: AQAB
                    _links:
                      self:
                        href: https://spi.int.epi.engineering/api/wallets/e35febbe-3926-44af-9ee2-26bcc088878a
                      paymentMeans:
                        href: https://spi.int.epi.engineering/api/wallets/e35febbe-3926-44af-9ee2-26bcc088878a/payment-means
                      notification:
                        href: https://spi.int.epi.engineering/api/wallets/e35febbe-3926-44af-9ee2-26bcc088878a/notification
                    _embedded:
                      paymentMeans:
                      - id: 12fafa7c-772c-4e6a-9345-6bd52e5a84aa
                        paymentSourceId: 19a25c37-7528-44a1-80ed-563adb68759e
                        consumerId: 040c5372-1a19-4059-bc93-57b71bcb74c3
                        publicKey:
                          kty: RSA
                          use: sig
                          alg: RS256
                          kid: f24bda37-5a67-412a-9855-41974d0e98b1
                          n: 3KZgUhWs1iC5uSBqwuI8_GTwsEbv_Fq_bP-UE9a03-NyXu_ZAv9VLnpbu96boZMZpSZMS99tXHtho1J_s69LbpS7aka1_9uy9JtPw7YjgZbCD6fq-pliIaIxuz6NYeP4ifHYnNUNvfCPXnI15reu7iDfgXXV6iDq-wPidIQOUZ0LPepGbPWfrToF-paLWicIdyquoQbY_DDTTasjZ-51nyt1u5vKSYXgAo2SqYQhntEhyectUcXeUgzwL-q19OidalweqVFyOunAejCzFG3M4v09C09kz9jiox6_fqgPYeOCefOODZHiLH5EE2edMGUL17xf-TLmnh3N7zgnCDRSKQ
                          e: AQAB
                        _embedded:
                          paymentSource:
                            type: PaymentAccount
                            id: 2344f149-4a29-4191-bda8-ade602a460a0
                            consumerPspId: 00000000-0000-0000-0000-000000009002
                            externalId: 96a66fbe-79e3-41b1-ab4f-265a832f49c4
                            displayDigits: DE00xxxxxxxxxxxxxx9457
                            accountIdentifier:
                              type: IBAN
                              iban: DE00112233000009769457
                            pro: false
                            currency: EUR
                            status: Active
                            _links:
                              self:
                                href: https://spi.int.epi.engineering/api/payment-sources/2344f149-4a29-4191-bda8-ade602a460a0
                        _links:
                          self:
                            href: https://spi.int.epi.engineering/api/wallets/e35febbe-3926-44af-9ee2-26bcc088878a/payment-means/12fafa7c-772c-4e6a-9345-6bd52e5a84aa
              schema:
                type: object
                required:
                - id
                - walletName
                - consumerId
                - host
                - _links
                properties:
                  id:
                    type: string
                    format: uuid
                    description: Unique ID of the wallet.
                  walletName:
                    type: string
                    description: Wallet name (inferred).
                  consumerId:
                    type: string
                    format: uuid
                    description: ID of the consumer who owns the wallet.
                  host:
                    $ref: '#/components/schemas/WalletHostSchema'
                  walletPublicKey:
                    $ref: '#/components/schemas/WalletPublicKey'
                  _links:
                    type: object
                    properties:
                      self:
                        $ref: '#/components/schemas/link'
                      paymentMeans:
                        $ref: '#/components/schemas/link'
                      notification:
                        $ref: '#/components/schemas/link'
                  _embedded:
                    type: object
                    properties:
                      paymentMeans:
                        type: array
                        items:
                          $ref: '#/components/schemas/PaymentMeansResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '409':
          description: Conflict - The submitted public key for the wallet is already
            in use.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '422':
          description: Unprocessable Entity - The request was well formed but was
            not followed due to semantic errors.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                Consumer not found:
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    callId: 00000000000000000000000000000000-0000000000000000
                    detail: Consumer with id 1d52e9ef-80ab-4ae2-a03c-144415b11857
                      not found
                PaymentSource not found:
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    callId: 00000000000000000000000000000000-0000000000000000
                    detail: Payment source with id 704f9ea8-4e99-4d38-a706-1ed1182f329c
                      not found
                ConsumerPspIsBeingMerged:
                  $ref: '#/components/examples/ConsumerPSPIsBeingMergedProblem'
                Consumer blocked:
                  description: The consumer is currently blocked and cannot be provisioned.
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    detail: The consumer was not found or is not active.
                    callId: 00000000000000000000000000000000-0000000000000000
      operationId: post-api-wallets-psp-registration
      description: |-
        Consumer PSPs can use this endpoint call to create a wallet resource.
        ## Scope
        This endpoint call does not require a scope.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateConsumerPspInitiatedWalletRequest'
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
    parameters:
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
  /api/wallets/{walletId}:
    parameters:
    - $ref: '#/components/parameters/walletId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      tags:
      - wallets
      operationId: get-wallet
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/WalletSchema'
              examples:
                get-wallet:
                  value:
                    id: 989f9b50-141c-4b5a-9aac-bcd8bdf4a885
                    walletName: Some Wallet
                    consumerId: af85b240-3727-4264-9e2e-2f9ab5984cc3
                    host:
                      type: Mobile
                      device:
                        id: 58c56856-e7c6-403a-9594-3e8ca1ceff0e
                        name: Johnnys iPhone
                        model: iPhone 14
                      app:
                        id: de.epicompany.wallet
                        name: EPI Wallet
                    walletPublicKey:
                      kty: RSA
                      use: sig
                      alg: RS256
                      kid: 74cf2532-c6c2-4586-acb3-6fce198acc5b
                      n: vZl9LV2lmdaSn1CTfrpbIbkhuJZ4C-mb33JTSXGB9q7GuSW_eiFz5SUOK2p5JIXznabbazaywpYhyMBpw7tbnKSzBuQxRKQHPD-Li1hhV4abjr570hGmc0UyftpBWZz4_53-q6lp0hupi8getzDyfPiiDZvgyKIGHytYSvZCGeVHXzJQy6DNf2xyZxG8WwgKvpIcOi0FvlVDJgdlIQn3HGrW3xK1IJpHLzh_ucYDIhs4L864hdV2QzUZA7d_agbk7dbq7ZStZNF4J_KmbruouQ_edglZurKeh6xmiRcOqGfWqN-4gJXAT4gN6w_eslfkPAKRDOcyh4ig8GopQ6CD9w
                      e: AQAB
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885
                      provisionings:
                        href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885/provisionings
                      paymentMeans:
                        href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885/provision-payment-means
                      notification:
                        href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885/notification
                    _embedded:
                      paymentMeans:
                      - id: 4be909a5-c4f7-4613-b2b9-f4ad62bca4ac
                        paymentSourceId: cbc8b802-41f8-5335-ba12-241f8095b56c
                        consumerPspId: 00000000-0000-0000-0000-000000001080
                        publicKey:
                          kty: RSA
                          use: sig
                          alg: RS256
                          kid: 4cc7293d-f442-4632-943e-8926e17505cd
                          n: woyxvts-1ozv9Jjbkjy4ZWqB5DRnrC1bCD7f0sMpGjksqjm2be0hBzn4waycizuLly5M1vNV4uSDQ7PJRrA-XcMLU5lkUUkbdsM9bV_vMs0I5nsDDeDW755DMYhS5taO2aLTxV_BVmzynMC1hrxd4SjA58QksN8-OtjFtaRy_VeGAzlCCsZBahr3wQrpw0wdB0_5i5VtFr4IEyNyvTT6g18EKwelhvDsakJ23QLr5I_ZoOcDdZpgQJTYDZlYppoS21u9cFd4FoqZy0PntubBJAI6o2gIPFisc4X1RTecYuXSKo649NSm5Wjgo8YAZ9FVx31pHxVSE8Ne1vcUyCHoIQ
                          e: AQAB
                        consumerInformation:
                          consumerId: af85b240-3727-4264-9e2e-2f9ab5984cc3
                          status: Active
                        _embedded:
                          consumerPsp:
                            id: 00000000-0000-0000-0000-000000001080
                            name: Known Bank XY
                            countryCodeList:
                            - DE
                            apps: [
                              ]
                            _embedded: {
                              }
                          paymentSourceProfile:
                            id: cbc8b802-41f8-5335-ba12-241f8095b56c
                            isDisplayNameObfuscated: true
                            displayName: Some Payment Source P******
                            paymentSourceProxies:
                            - type: PhoneNumber
                              id: 7ea45a57-9108-470e-bdd8-7930489fc50f
                              value: '+4915123456789'
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885/provision-payment-means/4be909a5-c4f7-4613-b2b9-f4ad62bca4ac
        '404':
          $ref: '#/components/responses/errorResponse404'
      description: |-
        Wallets and consumer PSPs can use this endpoint call to retrieve a wallet resource from EPI central service using the wallet ID.
        ## Scope
        This endpoint requires the `wallet:provisioning` scope.
      summary: Retrieve a wallet resource [Consumer PSP or Wallet]
      security:
      - BearerAccessToken: [
          ]
    delete:
      tags:
      - wallets
      operationId: delete-wallet-id
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveWalletRequest'
      responses:
        '204':
          description: No Content
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          $ref: '#/components/responses/errorResponse403'
        '404':
          $ref: '#/components/responses/errorResponse404'
        '409':
          description: Conflict - Another operation is already in progress for this
            wallet.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                WalletWriteConflict:
                  description: Another write operation is already in progress for
                    this wallet.
                  value:
                    type: /problem/wallet/write-conflict
                    status: 409
                    title: Conflict
                    detail: Another operation is in progress on this wallet. Please
                      try again later.
                    callId: 00000000000000000000000000000000-0000000000000000
      description: |-
        Consumers can request the removal of their Wero digital wallet from a mobile banking app or standalone app. They might, for example, no longer want to use Wero services from that app. This endpoint call removes the wallet from the app and changes the status of the corresponding Wallet resource at EPI central services to `removed`.

        For more information, see [Removed wallet status](doc:wallet-resource#removed-wallet).
        ## Scope
        This endpoint call does not require a scope.
      summary: Remove a wallet [Consumer PSP or Wallet]
      security:
      - BearerAccessToken: [
          ]
  /api/wallets/{walletId}/payment-means:
    parameters:
    - $ref: '#/components/parameters/walletId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    post:
      operationId: create-single-payment-means
      description: |-
        Use this endpoint call to create a single means of payment and add it to a wallet.
        ## Scope
        This endpoint requires the `wallet:provisioning` scope.
      tags:
      - payment-means
      summary: Create one means of payment and add it to a wallet [Consumer PSP]
      requestBody:
        description: The means of payment to be created.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSinglePaymentMeansRequest'
      responses:
        '201':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentMeansResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          description: Forbidden - The payment source with this ID does not belong
            to this consumer PSP.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                TenantIdAlreadyInUse:
                  description: This payment source has been submitted already and
                    does not match the existing payment source.
                  value:
                    type: about:blank
                    status: 403
                    title: Forbidden
                    detail: Payment source with ID 00000000-0000-0000-0000-000000000000
                      does not belong to the PSP with ID 00000000-0000-0000-0000-000000000000.
                    callId: 00000000000000000000000000000000-0000000000000000
        '404':
          description: Not Found - A wallet with this ID does not exist.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                WalletNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    callId: 00000000000000000000000000000000-0000000000000000
        '409':
          description: Conflict - The submitted payment source is already provisioned
            for this wallet.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                PaymentSourceAlreadyProvisioned:
                  description: The submitted payment source is already provisioned
                    for this wallet.
                  value:
                    type: about:blank
                    status: 409
                    title: Conflict
                    detail: Payment source is already provisioned for this wallet.
                    callId: 00000000000000000000000000000000-0000000000000000
        '410':
          description: Gone - The payment source with this ID has been closed.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ProvisioningCompleted:
                  description: The provisioning has been completed. Start a new provisioning
                    to create a new means of payment.
                  value:
                    type: about:blank
                    status: 410
                    title: Gone
                    detail: Provisioning is not active.
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentSourceRemoved:
                  description: The payment source has been closed and therefore cannot
                    be represented by a means of payment.
                  value:
                    type: /problem/payment-source/closed
                    status: 410
                    title: Gone
                    detail: The payment source with this ID has been removed
                    callId: 00000000000000000000000000000000-0000000000000000
        '422':
          description: Unprocessable Entity - The request was well formed but was
            not followed due to semantic errors.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                PaymentSourceNotFound:
                  description: This payment source could not be found.
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    detail: Payment source with ID 00000000-0000-0000-0000-000000000000
                      does not exist.
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentSourceBlocked:
                  description: This payment source is blocked.
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    detail: Payment source with ID 00000000-0000-0000-0000-000000000000
                      is blocked.
                    callId: 00000000000000000000000000000000-0000000000000000
                ConsumerPspIsBeingMerged:
                  $ref: '#/components/examples/ConsumerPSPIsBeingMergedProblem'
                Consumer blocked:
                  description: The consumer is currently blocked and cannot be provisioned.
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    detail: The consumer was not found or is not active.
                    callId: 00000000000000000000000000000000-0000000000000000
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
  /api/wallets/{walletId}/payment-means/{paymentMeansId}:
    parameters:
    - $ref: '#/components/parameters/walletId'
    - $ref: '#/components/parameters/paymentMeansId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      operationId: get-wallet-payment-means-id
      description: |-
        Use this endpoint call to retrieve details of a payment means.
        ## Scope
        This endpoint call does not require a scope.
      parameters:
      - name: embed
        in: query
        description: list of resources to embed. empty by default
        required: false
        explode: true
        schema:
          type: string
          enum:
          - paymentSource
      tags:
      - payment-means
      responses:
        '200':
          description: '200'
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentMeansResource'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                WalletNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentMeansNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    callId: 00000000000000000000000000000000-0000000000000000
      summary: Retrieve details of a means of payment [Consumer PSP]
    delete:
      operationId: delete-wallet-payment-means-id
      description: |-
        Delete a means of payment from a wallet.
        ## Scope
        This endpoint call does not require a scope.
      tags:
      - payment-means
      responses:
        '204':
          description: '204'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                WalletNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentMeansNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    callId: 00000000000000000000000000000000-0000000000000000
        '409':
          description: Conflict - Another operation is already in progress for this
            payment means.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                WalletWriteConflict:
                  description: Another write operation is already in progress for
                    this payment means.
                  value:
                    type: /problem/wallet/payment-means/write-conflict
                    status: 409
                    title: Conflict
                    detail: Another operation is in progress on this payment means.
                      Please try again later.
                    callId: 00000000000000000000000000000000-0000000000000000
      summary: Delete a means of payment from a wallet [Consumer PSP]
      parameters: [
        ]
  /api/wallets/{walletId}/provision-payment-means:
    parameters:
    - $ref: '#/components/parameters/walletId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      tags:
      - payment-means
      operationId: list-wallet-payment-means-by-provisioning-id
      parameters:
      - $ref: '#/components/parameters/query'
      - $ref: '#/components/parameters/provisioningIDQuery'
      responses:
        '200':
          description: '200'
          content:
            application/hal+json; charset=UTF-8:
              schema:
                type: object
                required:
                - _links
                - _embedded
                properties:
                  _links:
                    type: object
                    required:
                    - self
                    properties:
                      self:
                        $ref: '#/components/schemas/link'
                  _embedded:
                    type: object
                    required:
                    - paymentMeans
                    properties:
                      paymentMeans:
                        type: array
                        minItems: 1
                        items:
                          $ref: '#/components/schemas/PaymentMeansSchema'
              examples:
                Example 1:
                  value:
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885/provision-payment-means?query=byProvisioningId&provisioningId=c3e61ddd-eb4c-458f-b779-e21f35fa6395
                    _embedded:
                      paymentMeans:
                      - id: 4be909a5-c4f7-4613-b2b9-f4ad62bca4ac
                        paymentSourceId: cbc8b802-41f8-5335-ba12-241f8095b56c
                        consumerPspId: 00000000-0000-0000-0000-000000001080
                        publicKey:
                          kty: RSA
                          use: sig
                          alg: RS256
                          kid: 4cc7293d-f442-4632-943e-8926e17505cd
                          n: woyxvts-1ozv9Jjbkjy4ZWqB5DRnrC1bCD7f0sMpGjksqjm2be0hBzn4waycizuLly5M1vNV4uSDQ7PJRrA-XcMLU5lkUUkbdsM9bV_vMs0I5nsDDeDW755DMYhS5taO2aLTxV_BVmzynMC1hrxd4SjA58QksN8-OtjFtaRy_VeGAzlCCsZBahr3wQrpw0wdB0_5i5VtFr4IEyNyvTT6g18EKwelhvDsakJ23QLr5I_ZoOcDdZpgQJTYDZlYppoS21u9cFd4FoqZy0PntubBJAI6o2gIPFisc4X1RTecYuXSKo649NSm5Wjgo8YAZ9FVx31pHxVSE8Ne1vcUyCHoIQ
                          e: AQAB
                        consumerInformation:
                          consumerId: 0a911379-9f28-4de8-bbba-53af010318d1
                          status: Active
                        _embedded: {
                          }
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/wallets/989f9b50-141c-4b5a-9aac-bcd8bdf4a885/provision-payment-means/4be909a5-c4f7-4613-b2b9-f4ad62bca4ac
                list-wallet-payment-means-by-provisioning-id:
                  value:
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provision-payment-means?query=byProvisioningId&query=byProvisioningId&provisioningId=c57c5aa9-8cab-446b-b867-6a0c4dc7f83a
                    _embedded:
                      paymentMeans:
                      - id: 12ed19f7-b3a2-447d-a0a4-d7b168f1def7
                        paymentSourceId: cbc8b802-41f8-5335-ba12-241f8095b56c
                        consumerPspId: 00000000-0000-0000-0000-000000001080
                        publicKey:
                          kty: RSA
                          use: sig
                          alg: RS256
                          kid: 4cc7293d-f442-4632-943e-8926e17505cd
                          n: woyxvts-1ozv9Jjbkjy4ZWqB5DRnrC1bCD7f0sMpGjksqjm2be0hBzn4waycizuLly5M1vNV4uSDQ7PJRrA-XcMLU5lkUUkbdsM9bV_vMs0I5nsDDeDW755DMYhS5taO2aLTxV_BVmzynMC1hrxd4SjA58QksN8-OtjFtaRy_VeGAzlCCsZBahr3wQrpw0wdB0_5i5VtFr4IEyNyvTT6g18EKwelhvDsakJ23QLr5I_ZoOcDdZpgQJTYDZlYppoS21u9cFd4FoqZy0PntubBJAI6o2gIPFisc4X1RTecYuXSKo649NSm5Wjgo8YAZ9FVx31pHxVSE8Ne1vcUyCHoIQ
                          e: AQAB
                        consumerInformation:
                          consumerId: 0a911379-9f28-4de8-bbba-53af010318d1
                          status: Active
                        _embedded: {
                          }
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provision-payment-means/12ed19f7-b3a2-447d-a0a4-d7b168f1def7
        '404':
          $ref: '#/components/responses/errorResponse404'
      security:
      - BearerAccessToken: [
          ]
      summary: List means of payment for a wallet provisioning flow [Consumer PSP]
      description: |-
        The consumer PSP can list the means of payment that were created in a wallet provisioning flow.
        ## Scope
        This endpoint call does not require a scope.
    post:
      tags:
      - payment-means
      operationId: post-wallet-payment-means
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProvisionPaymentMeansRequest'
            examples:
              post-wallet-payment-means:
                value:
                  provisioningId: c3e61ddd-eb4c-458f-b779-e21f35fa6395
                  consumerId: 0a911379-9f28-4de8-bbba-53af010318d1
                  paymentMeans:
                  - paymentSourceId: cbc8b802-41f8-5335-ba12-241f8095b56c
                    publicKey:
                      kty: RSA
                      use: sig
                      alg: RS256
                      kid: 2c9b3e1a-8001-4c6f-95ae-2959d38d1111
                      n: utxN0wOR9cSSHdFjjrs6ZUspXmamxPeQd6ZjkR0Fc0C1hryzhUp6C3pk0lTcpH9N3xsZU_5j9NP3xIyzq4KXpQic5nAkFaanOoPWb_0UdfXTmE4V65I6RSbHAC_Awx-qMhdOh2vww9_JC76_UAdhB950BXDUyQ_ycWtkFCQDUS8wql9HbdaXpUwa22rILpJif6s_8QLSzARPOaQlapM-L4a63lmPoiG5ye9MUbmuzufvQc5Sb8kgW9AvpVVD22A-TrpppcDQCWtUcrQUfru-byXun5VQ5TqTGKbLolBfJ5l8rlpir5OHNpTafq7m04c38ucIvWD0fmAXSICzlutX8Q
                      e: AQAB
                  - paymentSourceId: 573a9e00-08c5-5f30-ba57-67c83aec49d9
                    publicKey:
                      kty: RSA
                      use: sig
                      alg: RS256
                      kid: 2c9b3e1a-8001-4c6f-95ae-2959d38d1111
                      n: utxN0wOR9cSSHdFjjrs6ZUspXmamxPeQd6ZjkR0Fc0C1hryzhUp6C3pk0lTcpH9N3xsZU_5j9NP3xIyzq4KXpQic5nAkFaanOoPWb_0UdfXTmE4V65I6RSbHAC_Awx-qMhdOh2vww9_JC76_UAdhB950BXDUyQ_ycWtkFCQDUS8wql9HbdaXpUwa22rILpJif6s_8QLSzARPOaQlapM-L4a63lmPoiG5ye9MUbmuzufvQc5Sb8kgW9AvpVVD22A-TrpppcDQCWtUcrQUfru-byXun5VQ5TqTGKbLolBfJ5l8rlpir5OHNpTafq7m04c38ucIvWD0fmAXSICzlutX8Q
                      e: AQAB
              post-verified-wallet-payment-means:
                value:
                  provisioningId: c3e61ddd-eb4c-458f-b779-e21f35fa6395
                  consumerId: 0a911379-9f28-4de8-bbba-53af010318d1
                  paymentMeans:
                  - paymentSourceId: cbc8b802-41f8-5335-ba12-241f8095b56c
                    publicKey:
                      kty: RSA
                      use: sig
                      alg: RS256
                      kid: 2c9b3e1a-8001-4c6f-95ae-2959d38d1111
                      n: utxN0wOR9cSSHdFjjrs6ZUspXmamxPeQd6ZjkR0Fc0C1hryzhUp6C3pk0lTcpH9N3xsZU_5j9NP3xIyzq4KXpQic5nAkFaanOoPWb_0UdfXTmE4V65I6RSbHAC_Awx-qMhdOh2vww9_JC76_UAdhB950BXDUyQ_ycWtkFCQDUS8wql9HbdaXpUwa22rILpJif6s_8QLSzARPOaQlapM-L4a63lmPoiG5ye9MUbmuzufvQc5Sb8kgW9AvpVVD22A-TrpppcDQCWtUcrQUfru-byXun5VQ5TqTGKbLolBfJ5l8rlpir5OHNpTafq7m04c38ucIvWD0fmAXSICzlutX8Q
                      e: AQAB
                  - paymentSourceId: 573a9e00-08c5-5f30-ba57-67c83aec49d9
                    publicKey:
                      kty: RSA
                      use: sig
                      alg: RS256
                      kid: 2c9b3e1a-8001-4c6f-95ae-2959d38d1111
                      n: utxN0wOR9cSSHdFjjrs6ZUspXmamxPeQd6ZjkR0Fc0C1hryzhUp6C3pk0lTcpH9N3xsZU_5j9NP3xIyzq4KXpQic5nAkFaanOoPWb_0UdfXTmE4V65I6RSbHAC_Awx-qMhdOh2vww9_JC76_UAdhB950BXDUyQ_ycWtkFCQDUS8wql9HbdaXpUwa22rILpJif6s_8QLSzARPOaQlapM-L4a63lmPoiG5ye9MUbmuzufvQc5Sb8kgW9AvpVVD22A-TrpppcDQCWtUcrQUfru-byXun5VQ5TqTGKbLolBfJ5l8rlpir5OHNpTafq7m04c38ucIvWD0fmAXSICzlutX8Q
                      e: AQAB
                  verifiers:
                    pspVerifier: F2Pj6++GJE9ovAs9mZLigr2wL9vjSLhJcA582HdWtF4=
                    userVerifier: UMQ139zgwcAxtq2OjTHkKlZlHF8CGO6EhgeO8CdWBgs=
      responses:
        '201':
          description: 201 - created
          headers:
            Location:
              description: URL that points to the location of the new wallet payment
                means resource. For more information about this response header, see
                [MDN web documentation](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Location).
              schema:
                type: string
          content:
            application/hal+json; charset=UTF-8:
              schema:
                type: object
                required:
                - paymentMeans
                - _links
                - _embedded
                properties:
                  paymentMeans:
                    type: array
                    description: List of the [Payment Means](#technical-principles-wallet-payment-means)
                      resources.
                    items:
                      $ref: '#/components/schemas/PaymentMeansSchema'
                  _links:
                    type: object
                    description: HAL links to related resources.
                    properties:
                      self:
                        $ref: '#/components/schemas/link'
                      wallet:
                        $ref: '#/components/schemas/link'
                  _embedded:
                    type: object
                    description: Embedded, related resources.
                    properties:
                      wallet:
                        $ref: '#/components/schemas/WalletSchema'
              examples:
                post-wallet-payment-means:
                  value:
                    paymentMeans:
                    - id: 4be909a5-c4f7-4613-b2b9-f4ad62bca4ac
                      paymentSourceId: cbc8b802-41f8-5335-ba12-241f8095b56c
                      consumerPspId: 00000000-0000-0000-0000-000000001080
                      publicKey:
                        kty: RSA
                        use: sig
                        alg: RS256
                        kid: 4cc7293d-f442-4632-943e-8926e17505cd
                        n: woyxvts-1ozv9Jjbkjy4ZWqB5DRnrC1bCD7f0sMpGjksqjm2be0hBzn4waycizuLly5M1vNV4uSDQ7PJRrA-XcMLU5lkUUkbdsM9bV_vMs0I5nsDDeDW755DMYhS5taO2aLTxV_BVmzynMC1hrxd4SjA58QksN8-OtjFtaRy_VeGAzlCCsZBahr3wQrpw0wdB0_5i5VtFr4IEyNyvTT6g18EKwelhvDsakJ23QLr5I_ZoOcDdZpgQJTYDZlYppoS21u9cFd4FoqZy0PntubBJAI6o2gIPFisc4X1RTecYuXSKo649NSm5Wjgo8YAZ9FVx31pHxVSE8Ne1vcUyCHoIQ
                        e: AQAB
                      consumerInformation:
                        consumerId: 0a911379-9f28-4de8-bbba-53af010318d1
                        status: Active
                      _embedded:
                        consumerPsp:
                          id: 00000000-0000-0000-0000-000000001080
                          name: Known Bank XY
                          countryCodeList:
                          - DE
                          apps: [
                            ]
                          _embedded: {
                            }
                        paymentSourceProfile:
                          id: cbc8b802-41f8-5335-ba12-241f8095b56c
                          displayName: Some displayName
                          paymentSourceProxies:
                          - type: PhoneNumber
                            id: 02df450e-96fb-4d38-a901-e7c102eefbfb
                            value: '+4915123456789'
                        paymentSource:
                          type: PaymentAccount
                          id: cbc8b802-41f8-5335-ba12-241f8095b56c
                          consumerPspId: 00000000-0000-0000-0000-000000001080
                          externalId: DE12345678901234567890
                          currency: EUR
                          status: Active
                          accountHolder: Jane Doe
                          pro: false
                          displayDigits: DE12xxxxxxxxxxxxxx7890
                          _links:
                            self:
                              href: https://spi.int.epi.engineering/api/payment-sources/cbc8b802-41f8-5335-ba12-241f8095b56c
                      _links:
                        self:
                          href: https://api.epi-services.eu/api/wallets/11fa3a1a-94e4-49aa-b945-c4e168796c7b/provision-payment-means/4be909a5-c4f7-4613-b2b9-f4ad62bca4ac
                    _embedded:
                      wallet:
                        id: 11fa3a1a-94e4-49aa-b945-c4e168796c7b
                        walletName: Some Wallet
                        consumerId: af85b240-3727-4264-9e2e-2f9ab5984cc3
                        host:
                          type: Mobile
                          device:
                            id: 58c56856-e7c6-403a-9594-3e8ca1ceff0e
                            name: Johnnys iPhone
                            model: iPhone 14
                          app:
                            id: de.epicompany.wallet
                            name: EPI Wallet
                        walletPublicKey:
                          kty: RSA
                          use: sig
                          alg: RS256
                          kid: 74cf2532-c6c2-4586-acb3-6fce198acc5b
                          n: vZl9LV2lmdaSn1CTfrpbIbkhuJZ4C-mb33JTSXGB9q7GuSW_eiFz5SUOK2p5JIXznabbazaywpYhyMBpw7tbnKSzBuQxRKQHPD-Li1hhV4abjr570hGmc0UyftpBWZz4_53-q6lp0hupi8getzDyfPiiDZvgyKIGHytYSvZCGeVHXzJQy6DNf2xyZxG8WwgKvpIcOi0FvlVDJgdlIQn3HGrW3xK1IJpHLzh_ucYDIhs4L864hdV2QzUZA7d_agbk7dbq7ZStZNF4J_KmbruouQ_edglZurKeh6xmiRcOqGfWqN-4gJXAT4gN6w_eslfkPAKRDOcyh4ig8GopQ6CD9w
                          e: AQAB
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/wallets/11fa3a1a-94e4-49aa-b945-c4e168796c7b
                          provisionings:
                            href: https://api.epi-services.eu/api/wallets/11fa3a1a-94e4-49aa-b945-c4e168796c7b/provisionings
                          paymentMeans:
                            href: https://api.epi-services.eu/api/wallets/11fa3a1a-94e4-49aa-b945-c4e168796c7b/provision-payment-means
                          notification:
                            href: https://api.epi-services.eu/api/wallets/11fa3a1a-94e4-49aa-b945-c4e168796c7b/notification
                        _embedded:
                          paymentMeans: [
                            ]
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets/11fa3a1a-94e4-49aa-b945-c4e168796c7b/provision-payment-means
                      wallet:
                        href: https://api.epi-services.eu/api/wallets/11fa3a1a-94e4-49aa-b945-c4e168796c7b
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          $ref: '#/components/responses/errorResponse403'
        '404':
          description: Not Found - The wallet with the given ID does not exist.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                WalletNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    callId: 00000000000000000000000000000000-0000000000000000
                ProvisioningNotFound:
                  value:
                    type: about:blank
                    status: 404
                    title: Not Found
                    callId: 00000000000000000000000000000000-0000000000000000
        '409':
          description: Conflict - The submitted payment source is already provisioned
            for this wallet.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                PaymentSourceAlreadyProvisioned:
                  description: The submitted payment source is already provisioned
                    for this wallet.
                  value:
                    type: about:blank
                    status: 409
                    title: Conflict
                    detail: Payment source is already provisioned for this wallet.
                    callId: 00000000000000000000000000000000-0000000000000000
                JwkKeyIdAlreadyExists:
                  description: The submitted public key already exists.
                  value:
                    type: about:blank
                    status: 409
                    title: Conflict
                    callId: 00000000000000000000000000000000-0000000000000000
        '410':
          description: Gone - The payment source with the given ID has been closed.
          content:
            application/problem+json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/Problem'
                discriminator:
                  propertyName: type
                  mapping:
                    about:blank: '#/components/schemas/Problem'
                    /problem/provisioning/completed: '#/components/schemas/Problem'
                    /problem/payment-source/closed: '#/components/schemas/Problem'
              examples:
                ProvisioningCancelledProblem:
                  value:
                    type: /problem/provisioning/completed
                    status: 410
                    title: Provisioning is not active anymore
                    callId: 00000000000000000000000000000000-0000000000000000
                ProvisioningCompleted:
                  description: The provisioning has been completed. Start a new provisioning
                    to create a new means of payment.
                  value:
                    type: about:blank
                    status: 410
                    title: Gone
                    detail: Provisioning is not active.
                    callId: 00000000000000000000000000000000-0000000000000000
                PaymentSourceClosed:
                  description: The payment source has been closed and therefore cannot
                    be represented by a means of payment.
                  value:
                    type: /problem/payment-source/closed
                    status: 410
                    title: Gone
                    detail: The payment source with the given ID has been closed
                    callId: 00000000000000000000000000000000-0000000000000000
        '422':
          description: Unprocessable Entity - The request was well formed but was
            not followed due to semantic errors.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                PaymentSourceNotFound:
                  description: The referenced payment source is not part of the provisioning.
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    callId: 00000000000000000000000000000000-0000000000000000
                ConsumerPspIsBeingMerged:
                  $ref: '#/components/examples/ConsumerPSPIsBeingMergedProblem'
                Consumer blocked:
                  description: The consumer is currently blocked and cannot be provisioned.
                  value:
                    type: /problem/consumer/consumer-blocked
                    status: 422
                    title: Consumer blocked
                    detail: The consumer is currently blocked and cannot be provisioned.
                    callId: 00000000000000000000000000000000-0000000000000000
      security:
      - BearerAccessToken: [
          ]
      summary: Create one or more means of payment and add them to a wallet [Wallet]
      description: |-
        This endpoint call is part of the standalone Wero digital wallet app workflow. Consumer PSPs that integrate with the standalone Wero digital wallet can use this endpoint. For consumer PSPs that do not integrate with the standalone Wero digital wallet, use  [Create one means of payment and add it to a wallet [Consumer PSP]](ref:create-single-payment-means).
        ## Wallet means of payment
        A _means of payment_ or _payment means_ is a representation of a payment source from a consumer PSP that has been signed by the wallet app.

        In the process of provisioning Wero digital wallets, consumer PSPs add information about the payment sources to the wallet provisioning resource. Then, the wallet app creates `paymentMeans` resources for each payment source, which are sub-resources of the wallet resource. The `paymentMeans` resources contain the payment source information and are signed by the wallet app.

        When consumers consent to payments in their Wero digital wallets, they select the means of payment that the consumer PSP uses for payment.

        ## Create means of payment
        In the final steps of the wallet provisioning workflow, the wallet creates means of payment, and the consumer PSP obtains the public keys for those means of payment.

        After means of payment have been created, the wallet provisioning resource is frozen, and no additional information about payment sources can be added to that resource. To create other means of payment for other payment sources in the same wallet, consumers must start another wallet provisioning workflow.  A new wallet provisioning resource then handles the additional payment sources and the workflow continues until the means of payment is created.

        If this endpoint is called with a list of means of payment, some of which cannot be created because the payment source is ineligible for any reason, for example, it is blocked or closed,  the other means of payment are still created, and the request is successful. The response contains a list of the means of payment that are successfully created.

        The wallet provisioning of a payment means supports PKCE-like verifiers. These are used, to bind the user and the PSP to the specific wallet provisioning process. A wallet provisioning can only successfully complete, if the verifiers that are submitted in the request match the verifiers that are registered in the wallet provisioning resource. If they do not match, this can indicate fraud. For backwards compatibility, these verifiers are optional. They are mandatory only, if the new wallet provisioning API has been used.
        ## Scope
        This endpoint call requires the `wallet:provisioning` scope.
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/wallets/{walletId}/provision-payment-means/{paymentMeansId}:
    parameters:
    - $ref: '#/components/parameters/walletId'
    - $ref: '#/components/parameters/paymentMeansId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      tags:
      - payment-means
      operationId: get-wallet-payment-means
      responses:
        '200':
          description: '200'
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentMeansSchema'
              examples:
                get-wallet-payment-means:
                  value:
                    id: 12ed19f7-b3a2-447d-a0a4-d7b168f1def7
                    paymentSourceId: cbc8b802-41f8-5335-ba12-241f8095b56c
                    consumerPspId: 00000000-0000-0000-0000-000000001080
                    publicKey:
                      kty: RSA
                      use: sig
                      alg: RS256
                      kid: 4cc7293d-f442-4632-943e-8926e17505cd
                      n: woyxvts-1ozv9Jjbkjy4ZWqB5DRnrC1bCD7f0sMpGjksqjm2be0hBzn4waycizuLly5M1vNV4uSDQ7PJRrA-XcMLU5lkUUkbdsM9bV_vMs0I5nsDDeDW755DMYhS5taO2aLTxV_BVmzynMC1hrxd4SjA58QksN8-OtjFtaRy_VeGAzlCCsZBahr3wQrpw0wdB0_5i5VtFr4IEyNyvTT6g18EKwelhvDsakJ23QLr5I_ZoOcDdZpgQJTYDZlYppoS21u9cFd4FoqZy0PntubBJAI6o2gIPFisc4X1RTecYuXSKo649NSm5Wjgo8YAZ9FVx31pHxVSE8Ne1vcUyCHoIQ
                      e: AQAB
                    consumerInformation:
                      consumerId: a3c5c713-4f5b-4b7e-8a76-4ce3eeecb3fa
                      status: Active
                    _embedded:
                      consumerPsp:
                        id: 00000000-0000-0000-0000-000000001080
                        name: TestBank
                        countryCodeList:
                        - DE
                        apps: [
                          ]
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/consumer-psps/00000000-0000-0000-0000-000000001080
                        _embedded:
                          meta:
                            icon:
                              contentBase64: iVBORw0KGgoAAAANSUhEUgAAAQMAAADCCAMAAAB6zFdcAAAAhFBMVEX///8AAAD8/Pz29vbx8fH5+fnU1NTr6+vu7u6zs7Po6OjNzc27u7tqamr09PTExMQUFBTg4OCIiIgbGxuPj4+oqKiXl5cwMDBcXFxSUlI+Pj5ERER2dnadnZ3Ozs5kZGRLS0tvb28qKip8fHwcHBw3Nzfa2tqsrKyDg4MlJSULCwsuLi5YcBb1AAAHgElEQVR4nO2baXuyOhCGBRQEsYjiglYR19b+//93JJmBBG19rVtzruf+pEjpzCSZLaHRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4jlaw64Sj/qvFeCGLbjr9tCxr/2pBXsjYEqTOqwW5hdZb64a/9qUJrPBu8jwXO+6Ew3422P3+Ee2pNMHsflI9lWA5OBTyd294xoimQXQ3qZ5LIsU/LH7/CIdMMLHvJ9Yz8Uj+9xue0adnuPJrqx3Erh/cRbynwPLHv39EvJGPyBtNNxyO1tmyiBLN+8n4YFwywQ25jZ3RM8gUEv9+Mj4akr/3q6AQuP7oI59YZ5i93VvShxFdPw2cY04c7ZPu7HBOd8acRMHhaXDRgdl2y4mjYfKeLUVOfIH0loTruYQk8uj7W5zAjfxhvzvrXda8wpxEoUXp3aZ98stb09uF848snY4H/6764GubZv1hFJuTKAxJ9Hl1yYkX4f4Y3qZXaC60z5OhH+08c5SXtFdS/qXniKxmlKfT1eZHV6dxWG1T9g3zy//uT8JZ/nI9uXLYV+n7aB91du1gKy/0TBt/uxnEu2j/cZWXO+o5nk3y/jx025XCVGyYlBHZcbQ/ZjXp9jr1V+l6HnbcuF0fbS42luZkRM1rFB9s0+46Ofr4H0J9l+7tPE+HW0l+VJrpTSfH8ObugualRe7SdFo+QfY7sdv8oPlgOsmTuR/FV3QEqVL4XbHxGt7P6b7ZLvPE78SB93atb+/QI9YPkfYhxKrqnAWsf5/YOyk94yTL/LPYRwfWW22Xk6OPd+Plv8tvN9vHauljUq8BuJf8Q7Hx1/DmfugGtNr3V8jfl3sHK692nRzi1JxpoGFb/y7/d52mOV03p1Ogw/L/Q3rX4k5ZreHoUZacPkbChxNTpZOWkcBxk+XnZto/7aXwqlnWYib1Ynvuw6V9DB+kV+nlQu4Jboa1Wx0uDGue4x4t+VcS1+TfcZArqBXBbK5aZ6hFWfLKnEJBZ62v8EhPH7V1zw7R+tSjAjfh6tPGFBb6iNeLCHXfkZtt9ZKAV4ipDrFBM38sndyoZgJrrGwQDcur+rrnPzLVIXJ6Jxd4NQsOucwdD1UhvKsso50v4V0JgwoFjSbF9XcRFznyWb1RwIu8THpsZQdJ7RBwA+2WPcqXwumRyAS48rOWRfm7qNlgXplAVdfmMGLqNAiolywcYpNOEVm58AG+bgOtzqySJ5ubR18G7a5r0NjKQoH33buygJa+gTO/1uS8DcouhEH1okbbUsaag2RXRghPBsIxpT16zGQbODlf6b1C/ntAQe1TfOGBpmBIU2Qiv7maCUp/UE0OU9MjLvaEl+dcj1w+L38ZM9n3b3z1qrstTZCamiWTQlkRF/n4CHn3NxrhmZwVXDHvY2XUO8quu7GHcqfKxOZxl86g9PYyKnBYfG/EA7aU07cUDOola5DasiJI1PFscX0oK4AOtVy/vIY3E58mjVg/c/MyJW6kr6xtR2bGn2JONHkWbMTXgLfiOmUfaTvULMCe0zioGS47QgupZ1583s1YNbES2pwIigzgwzqHqckBbY3J2U+Vgn/0hkl55CARP+X0rStKirmu/EAx1nEChb5ZjiEsJ3ijTPfaQfJV6idNwAO/ldEvslT69BAZK/3CIl2TzuuTO5DBT07/w0Q5diJ7BDzuVEPbWjQYUniVP1LJZVKYlI59JYuD0xMIMvErp74c6Ug9iJd5nGLIE94G7rnKoV9KG5yYQO41cIeF1oVWNPh2dYOYB2xHc07iNWTvVHq6ug1yueNU6ixMEM+UOxJpu0hRm0tvg45gyKWfSxtoa2Ebiot22VwUbyLspsotB/J8lGeJ3hpZbFbfifzDaDZQhrhLW27NrLxSKFyrHEnRFs0b8QfSIdzw9sfTGahrgSLgKtvzgSOX9+OttAgd7kq3ATs+WToexOfmaLbNjWouy6k9kypTnC93E5pVk31SmMArFwt5f3Z8H/pXw8jUhc0NgvfiCE7LG1adgawwgVO+mBG6utJkvMyck+kqI21Sczq4Ws9HXeWY6lrYqMyUXPYL3GrlPoxBxzIVKKxRWuedP5g8FO6C+47jXdl2LCc/x08jz5/E0svxazbzE/2PFRGNNutZRH4yXen9A/rNzPd6qUvA3dB13QJWTuYJxsqdtISq7jobb2ziBgPluT0aQKd2YLFXTnca+qlYFzKT6FVbsW/sP79MDA5UAE3Yp0dKfyxVnJwa/ygxVOPAjuOmSdkRww2xnC84nfXq6BsHs8RVe+WykSTPXZA9tPMpNKGMbCaVR0u7Sorfap+8kione1asGUoHavWx6EIZ+pZ7WQNsf7xN2qDYhlxQ5lDvoYaGroSCM69xnUG6wVXcHPLKPykK3K2RK0HQr6b591DUXHGDgDoqGo6ZybJA+LgLJ0j0Pupx5RiZDv3A/PKbeG/6ntLY1EM33xPlF4dV758Y1DO9J35VUWUmpsR3YUGnV3vz/5svuIZOsl6PTKwIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcD/+Az1uWm4wuYH/AAAAAElFTkSuQmCC
                              type: image/png
                            textColor: '#000000'
                            primaryColor: '#E5E7EB'
                            secondaryColor: '#4B5563'
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provision-payment-means/12ed19f7-b3a2-447d-a0a4-d7b168f1def7
        '404':
          $ref: '#/components/responses/errorResponse404'
      security:
      - BearerAccessToken: [
          ]
      summary: Retrieve means of payment [Consumer PSP or Wallet]
      description: |-
        Consumer PSPs can use this endpoint call to retrieve the means of payment to authorise and capture payments.
        ## Scope
        This endpoint requires the `wallet:provisioning` scope.
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
  /api/wallets/{walletId}/provisionings:
    parameters:
    - $ref: '#/components/parameters/walletId'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      deprecated: true
      tags:
      - wallet-provisionings
      operationId: list-provisioning-by-consumer-psp
      responses:
        '200':
          description: '200'
          content:
            application/hal+json; charset=UTF-8:
              schema:
                type: object
                required:
                - _links
                - _embedded
                properties:
                  _links:
                    type: object
                    required:
                    - self
                    properties:
                      self:
                        $ref: '#/components/schemas/link'
                  _embedded:
                    type: object
                    properties:
                      provisionings:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              format: uuid
                            consumerPspId:
                              type: string
                              format: uuid
                            consumerId:
                              type: string
                              format: uuid
                            paymentSources:
                              type: array
                              items:
                                type: object
                                properties:
                                  type:
                                    type: string
                                  id:
                                    type: string
                                    format: uuid
                                  externalId:
                                    type: string
                                  consumerPspId:
                                    type: string
                                    format: uuid
                                  accountIdentifier:
                                    $ref: '#/components/schemas/AccountIdentifier'
                                required:
                                - type
                                - id
                                - externalId
                                - consumerPspId
                            _links:
                              type: object
                              required:
                              - self
                              properties:
                                self:
                                  $ref: '#/components/schemas/link'
                                redirect:
                                  $ref: '#/components/schemas/link'
                                paymentMeans:
                                  $ref: '#/components/schemas/link'
                            _embedded:
                              type: object
                              properties:
                                consumerPsp:
                                  $ref: '#/components/schemas/consumerPSPDetailsSchema'
                          required:
                          - id
                          - consumerPspId
                          - paymentSources
                          - _links
                          - status
                          - _embedded
                    required:
                    - provisionings
              examples:
                Example 1:
                  value:
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provisionings
                    _embedded:
                      provisionings:
                      - id: c57c5aa9-8cab-446b-b867-6a0c4dc7f83a
                        consumerPspId: 00000000-0000-0000-0000-000000001080
                        consumerId: 1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9
                        status: Completed
                        paymentSources:
                        - type: Account
                          id: cbc8b802-41f8-5335-ba12-241f8095b56c
                          externalId: DE12345678901234567890
                          consumerPspId: 00000000-0000-0000-0000-000000001080
                          accountIdentifier:
                            type: IBAN
                            iban: DE12345678901234567890
                        - type: Account
                          id: 573a9e00-08c5-5f30-ba57-67c83aec49d9
                          externalId: 50032a6e-d027-4605-a4e9-03ec4e388145
                          consumerPspId: 00000000-0000-0000-0000-000000001080
                          accountIdentifier:
                            type: IBAN
                            iban: DE98765432109876543210
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provisionings/c57c5aa9-8cab-446b-b867-6a0c4dc7f83a
                          redirect:
                            href: https://app.weropay.eu/provisioning-done
                          paymentMeans:
                            href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provision-payment-means?query=byProvisioningId&provisioningId=c57c5aa9-8cab-446b-b867-6a0c4dc7f83a
                            name: retrievePaymentMeans
                        _embedded: {
                          }
                list-provisioning-by-consumer-psp:
                  value:
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provisionings
                    _embedded:
                      provisionings:
                      - id: c57c5aa9-8cab-446b-b867-6a0c4dc7f83a
                        status: Completed
                        consumerPspId: 00000000-0000-0000-0000-000000001080
                        consumerId: 1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9
                        paymentSources:
                        - type: Account
                          id: cbc8b802-41f8-5335-ba12-241f8095b56c
                          externalId: DE12345678901234567890
                          consumerPspId: 00000000-0000-0000-0000-000000001080
                          accountIdentifier:
                            type: IBAN
                            iban: DE12345678901234567890
                        - type: Account
                          id: 573a9e00-08c5-5f30-ba57-67c83aec49d9
                          externalId: 50032a6e-d027-4605-a4e9-03ec4e388145
                          consumerPspId: 00000000-0000-0000-0000-000000001080
                          accountIdentifier:
                            type: IBAN
                            iban: DE98765432109876543210
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provisionings/c57c5aa9-8cab-446b-b867-6a0c4dc7f83a
                          redirect:
                            href: https://app.weropay.eu/provisioning-done
                          paymentMeans:
                            href: https://api.epi-services.eu/api/wallets/1cc4ddd3-bd8c-4c8c-9c6a-d3dc15033de9/provision-payment-means?query=byProvisioningId&provisioningId=c57c5aa9-8cab-446b-b867-6a0c4dc7f83a
                            name: retrievePaymentMeans
                        _embedded: {
                          }
        '404':
          $ref: '#/components/responses/errorResponse404'
      description: |-
        ## Wallet provisioning
        > ❗️ This endpoint is deprecated. There is no equivalent replacement.
           The endpoint will be removed in early 2025. Information about the date will be published on the changelog.

        A Wero digital wallet app can create a Wallet Provisioning resource at EPI central services. This resource is a sub-resource of the Wallet resource and is created so that the wallet can be provisioned with one or more means of payment.

        The consumer PSP adds information about the consumer's eligible payment sources to the Wallet Provisioning resource. The process continues with the creation of a different resource. See Wallet means of payment.

        If the consumer creates further wallets, the provisioning process must be repeated because each wallet is tightly coupled with unique means of payment to ensure security.

        ## List all Wallet Provisioning resources of a consumer PSP
        Consumer PSPs can list all Wallet Provisioning resources that they are connected to. Wallet apps can list all Wallet Provisioning resources of the wallet, regardless of consumer PSP.
      security:
      - BearerAccessToken: [
          ]
      summary: List Wallet Provisioning resources of a consumer PSP [Consumer PSP
        or Wallet]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdOpt'
    post:
      deprecated: true
      summary: Create a Wallet Provisioning resource [Wallet]
      description: |-
        ## Wallet provisioning
        > ❗️ This endpoint is deprecated. The functionality has moved to `/api/provisionings`
          providing a more secure enrolment flow.
          The endpoint will be removed in early 2025. Information about the date will be published on the changelog.

        A Wero digital wallet app can create a Wallet Provisioning resource at EPI central services. This resource is a sub-resource of the Wallet resource and is created so that the wallet can be provisioned with one or more means of payment.

        The consumer PSP adds information about the consumer's eligible payment sources to the Wallet Provisioning resource. The process continues with the creation of a different resource. See Wallet means of payment.

        If the consumer creates further wallets, the provisioning process must be repeated because each wallet is tightly coupled with unique means of payment to ensure security.

        ## Create a Wallet Provisioning resource
        The wallet app creates a Wallet Provisioning resource at EPI central services.
      tags:
      - wallet-provisionings
      operationId: post-wallet-provisioning
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                consumerPspId:
                  type: string
                  description: UUID of the consumer PSP that is to provision the wallet.
                consumerDeviceTelemetry:
                  $ref: '#/components/schemas/InboundConsumerDeviceTelemetry'
              required:
              - consumerPspId
            examples:
              post-wallet-provisioning:
                value:
                  consumerPspId: 00000000-0000-0000-0000-000000001080
                  consumerDeviceTelemetry:
                    deviceModel: iPhone12,1
                    deviceScreenResolution: 828x1792
                    deviceCellularNetworkType: Telekom, Vodafone
                    deviceLocation: 52.520008,13.404954
                    deviceTimeZone: America/Los_Angeles
                    deviceId: 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
                    deviceOs: iOS
                    deviceLanguage: en_US
                    deviceTime: '2023-09-25T12:34:56Z'
                    deviceUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 13_3 like
                      Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.5
                      Mobile/15E148 Safari/604.1
                    deviceIpAddress: 192.0.2.123
                    additionalPropertyExample: some value
      responses:
        '201':
          description: '201'
          headers:
            Location:
              description: URL that points to the location of the new wallet provisioning
                resource. For more information about this response header, see [MDN
                web documentation](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Location).
              schema:
                type: string
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/walletProvisioningSchema'
              examples:
                post-wallet-provisioning:
                  value:
                    id: 4c17de33-11d4-43ff-9eb4-821a08af7798
                    consumerId: a3c5c713-4f5b-4b7e-8a76-4ce3eeecb3fa
                    status:
                      state: Completed
                    consumerPspId: 00000000-0000-0000-0000-000000009012
                    paymentSources: [
                      ]
                    _embedded:
                      consumerPsp:
                        id: 00000000-0000-0000-0000-000000009012
                        name: ING DE
                        countryCodeList:
                        - DE
                        _links:
                          self:
                            href: http://consumer-psp:8086/api/consumer-psps/00000000-0000-0000-0000-000000009012
                        _embedded:
                          meta:
                            icon:
                              contentBase64: iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAA9lBMVEX/ZgD/////ZQD/YgD/XwD/XAD/aQD//fv/WQD/+/j///3/+PP/awD/8+r//fz/9u//7uP/6Nn/7OD/5dP/cAD/3cr/5dX/8eX/8uz/yav/cRb/wKH/0bL/6N7/2cT/3cn/eTD/0rr/hEH/zbT/jk//fj7/1cP/fCH/2b//p3v/lFT/4Mn/nWv/uZX/hEv/pXT/w5z/iTn/klz/fCr/uY3/m1//rYb/jkn/mWb/xKn/dCX/pmn/zq3/hS//rHv/vJX/q4b/rHX/tIP/m1f/mGD/i0D/kkf/tpn/tIz/dSv/nXH/h1H/k2X/qYD/sZL/jjv/jFz/gybavk0qAAAgAElEQVR4nO1daVviSrAm1UkgBGRHCIqERRZRkEUFd1zGZfTM/P8/c7uru7MR1HMPOnPvY3+YQQih33R17VUdiXyP7/E9vsf3+B7f43t8j+/xPb7H9/ge3+N7fI/v8T2+x/f4Ht/je3yP7/H/ZQAbf3oS/2GsnL58G+aPj3P97Wv/2gFAIlatZYH7hvOKWI/4B1gFJbp5zV5DpFbTyf8djECIXnseDHObL7qYtV6LCABEPxh2Iuy1+pJUFGWPYge9n9u7OLD+b6wjhWfVfz50UnT2SuYkwper3uk+WxQjgdbFphI9JPRNMmOXnFH61Lub9FX6cmT99esIBObN7mUnqoiRazKIoC8o2srJnNS6O/Rd40JlRGqzK4ZAEg8pfvVmZZQgfxrDm4PUnl7LubjiGYVjRoXWHgIov9oGe7FR1ujF9QKuoWbtG87l2UpT/Ysxkno5qQTHziFFWIv73yzG6NWjDBLya8P3YW5/rP6tpEpadlRZHtUxgdPAe9t0DdUrE18HvxOtdvW/cxlJreGZ7M5+2iFUS+0EUJQIlRmNkMeBI9lo/o0ch8zL7nZSLlv6rQOrcG4EMJR0NfFgOn9mtjZ9H8ezlfFfBxH0ibuC2VvK9qG2L3dllv+36WAq/dOvugCHrdpB/8y7haOVxN+GEOA06pkxim7QezvelckO6osOX82NkrnhvD+lj4NE5q3boXgSSmpgqX8buyH3DsBMTzIKAGvirpRiJ4huzW0XGsdd55oM/Vef1xcM5N45zCeTvPY3bUaSlwDjE69eAuQwI6FsDlQKQyv7EW55LmfqN2lfTymFW2UlunX/9ywkSQilROmcByZFVLk/d1FH1QpefNFrEhAMQFQGmbziQ7nW/w6IQHJ8wsVpcML0Qy1fNei6Jfsq+1OruvCM6t0qQhTqANXpPnfqHxzqhE+54GojlNwcQ4HEzhslY5fr4FoZNZioWSoO75znQS+nw2NaQGL2FyEkd5xBpgeqeIcq07VWzd1hRDu/bHI06nVUMdPbjdO26nIS0GsHv54PahY4b6lPqDFs/RUGFbERoLkvpkfVlZ8PW7nO/mjurqPUp8l5sbh/p2te/RpaL1ubhpntXD4dyMciLI9k5C9ACPpDwWD2AucKoFo/h5zxJMtPteU1ONQDYoCMXKUuV+lbnBLUI7xJ+y9ASDG1f+RM22KrAmT8NHO1k5TdXTJql/4+dgQKfywn+FTIGLnuVI38DYNo9asaJ7u+nfLOV0m9p0WDnpOiVFhR6S7eilTY9j7TvmD+7wwqwbR8G/isRkU53cxOhjOgzOBNW0i7xKuM6o+rqx/lPSY807ds4UiT6Tfmnxf6xOo9NHYL50ijkRlfh81Kd1QfdbdQZ0v23qA0cofXmJVWhGow1sGAkWwhz1wfESTT8z9tK0K7kU5JjiAcE8rw2UL59niywxBvvqGZcA0gavPtSumhzki7y56J1mAK3uRPb0RyjAaBgdtFmO0XDsuHWpVBvAzdTCjm2/iNdN1ZKe2M/o3qgYYbMRv7EhyrB5miZN5j84B8mb2eeGw7tVdi+PMqW1Lf91Qt0j4/bF8zFIZnocgN27uMNlVEGM//4Y2oDlA24BRJndmDyZZXmKtIt+XD+/vfeS0m5Dyo6u/FjmkahoncqNR2v0LabE2nDCH3AvxpeSEE8w26eJ+YM6Lz6H3oqsdZYe4t2lSZoZvtJqd4x7aHEsFiT4kpgOQYyaP8h+WFQIhObPXKCCAE8CJELjsZk8Os4h8lT1zGRQj6Nn74pxFyKv2NCLlR13JnGxmfLTsY95beUZKnDrslY4kwEttFJvb7z8oLwUs5wiuEM3JMBmuwuYwmdEQrMkyFnCZ9gvcbpOkNjdM/ixAs1GJOkdNws3XLEo6XWjnoRXwDYlkQNxqb2R5XkQ5n20lz8adZDZJSjilXzLvCxoCgSlKvBlCYyaTclEamWChmfA7EBtohoDEizhzydSNa/rTylkr0JQj3cdZ3SFZ95H7JPsMbBJi2H/p9W6xq9iah5++6tmeR43YzQqXmLXtddIwmUJtHB394I6JMV2z2oCGBQlpJdnW15gdo2P2EquqSbs3ygU6Iavk8b7nXUfMId25RMh5QqaJarf1JiKDd4bqZPOhZ57aFWelV/Av4MFapSDhyREc0t1+DCJlXvMZWvJjjrHdXECaQbgoJ+M9BJJETT0iQ/i3FX8ZnJuZOmHWljryC0LxiUt0ahHAjY8ZlIACPnRrl+Z+CSOZOiCmLHhWYX4YIiGydbUwyt32RwlmEqTexneXrS1PhttoXz+tPQQRSt91gC9eQyfzXRSY449OYpqkqCag3O3f5fLv/UFoCGK+IbaheyAX+UxBPMg6jMAeSNxC9dRmYsl1uVB5OL9P+d4309na2ZCrBkbqQaMAaDR2Ij18PEfQHZ1KLlmvlAgG/Yq1Eo1HDND8m/jMX3luBNRVUH7f/ALshV3JWNb8HLZZbCeDdMfffimpGW+KTva+HqAqEuXnAnRZbJr2PjtySg5UkFuKz7JdDVF+QN3as4A/H+IzMbK6ztbXV2ameDYc7y0aGsTO5vpme8nG9OGOSIcSND2QgvntmfbG9zxGWlwACsOkkB7EY5aF04L+xcUCLM8pWjNrDqhyxQTocIRVDR5yjGY9fjbAbV8xJggD6lLyBI5xPsenzsfnlPbWXwOvtAL2J6lBosAksoSEdfzFC8mSUulRb1q3awcGB+3whz+eTfql5rx77ck6yJx6TAfT6A5clZ6EYSMvGTxdfjjDXpdLv58uwk9ncLDsrJhFSDu/a+1Rn9ZEpM3IdioSR1BKCayguUUcFtiM6XxxsIwfT8cl+RzDO7fwSQkXZdwmVe+JchAMVLOF3JHMpEZRLPwSY6xj1ptZ1lcpT44uTUMDqNxwjNur6xEB1cGRugW9TFofwScnUkQqHgxrzjasJN3cvQIfqZeWphiDVWoX+1v3Xygvoe4x0c+Duq5irvhRfxhBp9/skQm59+mq0okK7sHvVPKz3G64h0gsiVDY7s6u6TpV0/cn+Yh8/RB48M04euo/Xq9Mkq41GNW1rVLb49YCZCnpRSRV3Ch5rxKgFqDTBvmTmKk1KC2pt/4sR6vvu1Ownj2jQhkpgFGMR+OF/q0GpeTd4XcfS3GQHz62i25Uay5yqf+k+hISDML6oeRU39To48+2YdFO5z8QCbRZUdC5+zwp8mUhtjhzmXK7u9oOlfnEKkYswe+vNCCWadh+CsGb739qpk6BDnK51diODHAvmjYcEuuwcije3L2/u219JpmAJYtxqecUUOa3e/LOMkBwEjPnMLSH95ZxiwUzUbio1wqjrtfuRkUqVvpKbijWML/z6MOkZxpJtUdDIKBCtSL2o5HjZwOdBXzK26ZNjbAdqfruy8JXxRGDWU/qWp1q6Opu+bOpulDVyEliv6CtdrLtg9rCyiQgA2fQtkunNlterZXxl2Js8pZQOZnqx2JEDMVYIzloxpoQqsYE3Z8zXFgs6xv/hXkkM3wyROui+zi8cAtj4ymgb1cPsOWqXVv3MceJG1NNAZn7cLFNhdqUExgyTEPN+4BOR04HaQVKqtaCSm4K4sPSFQWGw7uuE5bBNO5icLt/X/OtiDvMagPoSRJi7ZWVA2sIrMWyRWCUU1an7W6raK+CVXxqpofomWM8LfN6eQCaAh07jmTuNkXA9IA7ZXCt1+oE6STuMKSUlOnlFOvAa9aDqZbyw+IVJp0DmJ0PBQLyRapJ3IRbGhK32056k2ORmelPGoHYoIlDb+0Vxk0snisiVWNOnxIH6wK4r9b9sESHSdMIOcdvLAEhbQsweM4CRCwYpni7szh66/eng5UejWmRfRV5C1PzAZnM33OAqkxaMTH3LBVqfcpz47lfZUMQauBp23L87QOQOKfuomNQpGqMw659HmO8bfTP54yPbpGSJehioqNNtuUsG+7jpggax1qOWcPLtPLJ1DSBosImRCZSAADS5rfRE2G49o4+gUOcp3M73KSpDsft5jGm0KHeKdt0bCI/AZtCoJ+NKVtn9iqxT0PsFhwma5VEkmJEewRQG8yc1fm9nBkuwXZJjai9NNYbdPjWMLLZkVV8mznOFPaMl/yHRT3509U9AFBwwda26XNda1vmFf2ygnTdQWqcelviDKFVIN8baKM2y2XxLQ6zRSzm+rIaCLyH884ZHIW40Q3+Rey22G0Uu/+MzDbwuR/pa45kqlICPqmyR5wHrl5B5P7T+6WsQOgV3dAeG/iDouIhOdCrTy08nju8N6qf5Y0empKLK5st8+TYAy/RI+ZT+FcwUehJgqKedpdXGXnwK2UapZO7JpAPQH4xSyQ3ix+36ajnurWQHrX1dLr58gUSEu5UAWWCXnJ8OcyGhwV8yZb9m+z6I23nm4g8FqbfbxMn5szKGsaHYX7CIUON70AoICYoucj9ZGV275FMDMlj6KH12+ltFmIHt+NhRjNzknP/BAwaF+udLRHhkXMLO+2IPdNvcTZZi3L6x0NHYGqXCP86eXZ8HmklADZ9XEhPBAJAxbz59PpnCnCqaVU9eKEX3OD1zJx6PRnGbmZP7fw57lw7Fns3plddih8YLi/u7mxumz2y4Jtfe4nju8fi3OMfFvQdwht/78QUIrTOleKdKzg3w2JQ6uLJhlkrb1eGiwXAMdVWF+YW7TEOAY/m6c2BR1kim9EF0qumS6RYxLuqywwK0cNnMJ3yaQkrNPt++AP0yeaKyhhZsJ8K8L9wRcTO9vbs4zrOQIQrEvXni4MLrq6AI75w/jK2TViIyoZCOY5Hzway4Lc2O1HA057/EbUVDIOTfrda+AOHpvkqtp/7ZM3EcpPFk0T7CoiaGWsVQjHE18bugTgFqXqN37+GJXldoMy6lqVbvYbeYRIo1hyghQedciXNteMQnkD35AuW7nSDUejJzdYnQLDa6baldU9P/uRLiK2RRTtzD3kE37C7I76nqeNAoMhx7XD8gLfRDZp6R1VhID9GrL0BIoH6UkxbeWEnbr3WQ6inFd1IJZarxDOM0F8mgs3v75dhp30JUOHyopqQ9DHoX1xQbpYDOix0rX7AR50c77EFfIe1EKk+WI7BBTfQbwVxuNpLV8o9mBE3+19mOX2BQ8/Ek4dyBkPEL1XcFYr6Iwnrk6uLW5xfsQwuNi5RgAOCWj6p6304HwTFu+eOpnuC6CaXFRP2pUvRfkbUHefc2xHJSMPUjtuQpTqbPeG2u+elkSlqpsF+i+Aa7Al88V3mQjVxyl08t3ZfOQOhOlT0JSkecpjd3uwlPpa3zWzx83Pf8bvLzWQ3hgrjj158I3O6KWZtbgwNLr2HxUrZLBR+Fx6LBzIXBUzfoMvHiSmNBrOcjZD/J4kViydiECMYecctDjbOpl09HKASxL9uMkGNb4EtORo8UL7AMjPhlC19qMWjfTU8vLgbT498JTWPv1S7okpR1YAl/3O2TKl7oQYwwZ4mm6CCWrtT9T2c14ll6qBTUdlkYRJsXLae667HJ1k/V8tNhsVQqpUw26IvisKdrhGUyTrikI3rtGve2WRxEAhjBql/sKYOIG/EKt9rWipA/S3c/EBiI/bd5Ovc07kJJnl8UmdXjG1GjdHZICVZ3OApE5jyHLbpU2c8+q1mIkIuLzqdrNfJZOqJXJpOw+he/ART7ZynC5IzcP74yfCB5kXiyE8x/EgYHiES+3Kdn8Mtn6bipuW6VvIbgJoq9XTgzDiyWds6ty9dw84GqC/ix+fPTEYpfsgW1kJ9UPKQu88tet3eyTZf9heQ0G1cyo3AEkBAdHJ4+X2/r4w9ln0V5y0HGbByGZRLIphIrxrJ3F9T8ZansOqa4j05uVplu+vJJsNxBfvmeJVjT/nLfD7yQp1PEw9pkUYU6zFNHMXqWtvbr50m/73AW4QCZfDozJQecdR4JVghkVeG9xjZidGc5NMzGit4e3oJETgNyUaFlYzFHOcT7uN4BNeSQZv/dK1WqLG80xq8+ZBtiSafvzhNu0edhDgShEnJ+RBXDXOvzxcWlfLRe4Rd2pZ6jlxF/nVDKxnxK832xJnPZd5yYN1GtQaPc+vTufPDEtlGTgHosCSZhhfbohGZlThICoSDWdL9ejTI3zgdWgtuHyr6nWaiasKy+P5q1/kGes4r5oJPIS1GUeUJtOGsGo1D4AQVu8Z46GZ7trCQHWt3eSDXfmKEkCJGZoSS9FwNp5wqNl7v8soeVf7yGBYbHLcWuae1ZSvbnIM1MPNMIs03BKb9cqKdiDQmpFy5XM0RQrbHoDSpLV3Y83ssI5EvMFNmdXTTbgIFXIjLOqZao6Xfn61je10xTGzFaS/IgPiaJxAuhTE4EaowDwjOIi8eEsuP5anzth8L2VDhvapd7acZuto+9lswFKrobyWyxsFs5mvbuztvt9uHd8fSislvY3l5DIT/U6omHLO4RnqhEbtGi4lmwEEgkxFJCZWsOGhpYu9z5verW1sM2NQlLC3GPeevg16/+RfnMu4i6LDWhj9VIlZLpdDabTafTyRQy31TvvyPUp1XhvOZkKhCecrff4sK3JcE6OB126K+q00ymMwnl9Y5MFQ0oFKOaUMUH9CPd8n0LIm9rS6X/jtByBMC5N5UJEZKf5obt06pZVz0LX83nVigLBev+XI3xW4k8AKV0E3M7ZgWDNiSktt8z/jPCCBGJzTKbjvSKLkImS5a8OCBnuiKoStWk3A3vk9KV3tbcveand08guf0WwM01IOQJEynJ4kQ6/sRB6M0feXMIyOoNo3rOIjQ3vTZ54c2NinjWnyzlW1PWkzkrDy8X0/Ya8jQhz7qsmg6DEx149rCwvos/9yEbB6zjGl9frJktIXGD6gaslNREaqVU5maOXbodc0YQ56ErZK6ZJi9ZXYvGwxpWG1M3ENbmOXt0hpDgMuzlPZ0FudJPZfOhjs7zQzrTDZu/S2bJlGka0WjULIl8HbBOskzSOI4PwWzMQnW7VNrm6l1jjRFi9dXYePASDS8NGbJWzwecYt/+NYCWNKZTmOmEDgH+ksnEm8GiUi7PLkS/QtA5VaZfHp3YG3oQjKdYTKVMijem6q5PYSX9JG8HIJQkGJeZyWBgE+8+yr/wgjoRdSSPgw4rhcV5/2C30HAZZE8F9K5qmtOhD9oiFBBtiO7mUt/hthTwFbXXZ1hR1nLF0rrU+Yg7hsi4konzRiAwZyIt11p+nqyvOVtaYvXP4inKZPBKHmwhg4yJOeDhP0hlqWSUlRGKHvKMPDeJSX8w567z/toWEcZHz6qqN6+20jbf/STSm+WUDLY6YVuGu3E8aUz0ceSbr0O2rTD8lnQQ8kvVuyO7sDkLIpQ9I8lx1cAMzvTmGV82v/90gBxnjW2IWZCoO2OWXkpwVDqVZiWHDddYP+sH/OH+yVjnShxYvddGTkneEUggrk0AYcVvcu8ZUfV6fwSBn6EKooA4fv1x1R30T/q3Ivj2hKA2edxmbtNNsjlcH5nWBpWqSN2yHV8RxchT0F9S5glqn2fpamPWZW+qD0XGjJI9AnmbfS/LVpc7tY4ijj/ER2VArEF151byFlVEPuSqPnPC7XKO12xUrvr1tflwSDfrpFCUep6GXZxia4U9tg0BkH2UGNfVbHkx6A2xhpQh5lxusTRAx2jP9iDM8pT7XSb2g84qFtdnF5OmEwLcaCxzTZihQwxEB4JqnUS0IUrlNKVpFRGm8HyLIxTVzysg8J2WnI3VMCUQuiiiZAeu9ab1AVRk7pod0riC1Gt4lc4vYU5elafmp+/oywq+ZDPCBFpKaAHfKRH6qCgeMtKV3zGPigqJNt97/cnlsHPpUMBaj6+RDWmUnaWadXdIhCyBgkzxkWSpwONnlHCfN3SZrPZHW4g6FZTnlJAZpeK1m4alLZJYewERy7IepTENRM9HqO66Lowq73aZeevkDYhwOc2Km8khItymW1JYD/c8xQI3061HPYq1bUMY06TlhnaiTr0xc2Psce3as2pUXTRM00xN1wWRsExmJfXm0SIiVUtJsqTvPCpWVXb8wwsC5ynwpM72asYtkhmfsQuzgmeduNGduOxuFmMtmE6XM4956YpxtyapD3lKpsn823cDXo8YvVIpDbGJl1hJLelxBUT4eKz705t7S3xhfCbwCATq8dnWhH5+3s7LUkdyw+6UljWnINdRurxS6wowamUjx1sI+xIKfbtdnMISZwGzWIk+32tu5OYnrOVcXkpBl8u7axbPy75m3J3m3lVFDhC9FouoW/PHUzRAiMg97qyLTO8WCRV9KPO5K2cT89pB0+PArRfZYQivfA1NWX4Gmj5JKyF1TB7/SK4G4QSiYpWKUsJP9d5iuCdXnLxyBm+tB2GE6K3nXz9PBpOzMyfkB4uzvfjmrUcFID07xawHcm6mr12OD1q7sBdSbkeenaBj9qQWWl4huvBuc1CiAIU7xEQ5y/26EPb2eKadaI4bkeJh01Ohj3k2hSO25OW2DxEhF0ulGuztEzdprNMPbRJFjimn2uBFtZDAUyWKvIYYuHv9dF0ID6WzISsXDftXBvMHKXsc63QqQY3KR4RYDccN/KeioxCalRAbjLeRrlrS5mCOzDiXykIOTdaEEIgMDBaPHTaHMrIXXBwunt8YJFJ7+lEZYTYwGTWc3LGNRph7FfRMxvHzq+heuBSiJ6Okq7uD/4jMGeqFzOySJbo8rp1dEYlfPchJpbrJDhfiK2H1Z5xUk5lOP+zJqNOpm6WMTThTPd7d8KjSH6+v1hQsUZFdkP0cNVRBpKHOQiUfi4Kpl/xoiHJe+GkSo7KSKb8+jZq18G/obCXFAxmwnVjgNB4Jdmb+b0NYRC7CGG4Dg6ebk8Pe7aB7Em6x8UQ3xxt5zNU7oywaC4BqXY0s8qY5RJ4r6HeGCFvEaOUzctxlk4jCWMpuzh/2kWLyxWw6mQrtPQ8ayf/uPVSkZxxIhXMXw26qjjX89lpA5EUp4+PjYbv08Zq0Ne8gd/41JL/xzzT6g9QFT9q+cNpZqo6iZVW2t7NJ02hI+QGWEIMb2YsPZuaxGHiyyysVGOnEbenHI+tbTYFIaYinp/GoF24J0dBZSWKzR6wXui4ItEJm02fhnmYylpnD5v7HDgqE27gs3dGQwaWRhYN+fr8ueci8mEhZMsEF1JRLpOopl5Zptr5wvqiWjKhjEMjOHyW3TwIZO1Lw8g2T0/3tR8bVkk98QyCfwtagasU0jPUhZHfea8uFENsSO8eLjtVKlKkeMBZrJgGBzt/YsF09jpw7ED+SMQMjvJS7D2MYvqwyMUGm5jqia3JSdA2vY45Oim2BxKMkbfzR+JCZSOROOATcwArhgY647emYlb9eLCaTy8nievz+b0MTtWzha8Vni6oVQHqdCO/M366uqQ5xEbK4UJwON4bIXIRBiOc7yq/qQv20vZkkcnyA14gEQr7cPJzIBQZzea0NIZx7+uJQ44H9TOoIl/B8WzFN8zKGc1VFA3NvsyciTw60V5SivjcIpma9Cv6JP1Ble56d0fRfQAV+xSOz1EU2mUxvi7rm/UJjMb0XC0zECSa+6mWnp9RO83+XuQ19w1HyeWQG6/VBN9e4htY84eYYjHvT6XGe2zRz1mJAOrCl2ab4FEaISP0691b20Bu/XrOdQk9RFTdj+n1se4378KG8f/TUnIM4ScXVCb2ODTLnvlWj6rd41R52xYinG81//cv89t2MDBiK2BNG17SttSHkh+GYucbryXy1jgXzfV6Csh/U+Vlsp2GzmqB/+8uQ4BUYPel0ggjynQZDqF6uCyEQp4l11n5tLp1YJa7S0SrNzo6XP6fMM6L/b2wB9aGC2cOczSAB1egiZjEhVF1k/vUNwwfpeUq0jNzsNvSsWx4hqq5aqLDOs+8aQOQwtXEk+TJps1poFhKOViLc5Tb6d0BWDbqE/jqKrN0LS/zsUviN+gcXClTSbk57d3ntLVc6UHUhKUwJdWzzoqHnZNpxpvxbLOGD9JbqKNONtraEpPXUffqYjxZULd9vUJsrmyk2eqtPI+WSl/fFUetVZZPtPrDKhTU3klIbG0GEzPZZymYB8sGAEERO7e2kuGk8We2RFboNtBlvTqNm0WR5OPgAoRn03f3HQe5CS0XNav5d6wwIurGD04c7f/lQqrhohxMrer1LmN+A7sMeD5GuOYdfqyz3n8ORuXsHIiT6w8npfTvgfQvJxouadujNUNHGs6LUH1gYLxSbNUET8xENodI3p9eLScdb+JrthbeOc8+15H7bQEtSstRVkg2fd9m5E7PaUszgFRrvZ3RyU19RzzYiaAtoWvt0zykcSZ8sUyB4uvOJaeX8CXYrqqRmYXQa6wj3CDlGu6yz/nZ8YHED9x/njFU1lr/eNrgKQA018F99PZxMhjkRLpIppD5GQpy2mZlqbqdTtgsZgz0zmWDjuyHzPGP/YuDt04brR0j40TlbmPwhmCVl9nd2Clcy589DhjG3gDMicDvm9Xy+Vo9Ov77GnHd0j8Xyi22TK9PMaeFlyOjUK6KzBLMegk72/z4gwrfS1s+Tn79+HbQeE1z5JtphA/m97e8olxBddcUsyQC9VNdec1GkxG403PRiUPMXBZHypJ2NvAebMjLN8jQdygLi6+9a42vRbaT3zh6eWiJ0RI7tkqLs+csg5akqjvf/tkCfw5aHtoS1uFGteTkLqBGLt1OKbcaHzy4Qxk2LmLXJDin8hMODyVWwjVC0+iI6CpNEt6j415AKT+5adILv6ricVNIuq8EaCjq2mzEA1ZsNJ73pVJR4XKnkUJyGTdgGOF07QJg3lpmeYY+kS7ZuBwpGADiZuhyBwKCa9Ph4rnH/RhvNqx8/rp6a42DFMyZnZh23NuibDzzEoReU+Porg8nPUM6eGciMs1Y90KpLRKY9AgLUtpvvKptmRjOZKNPYcvZsMPYFdZCKuSeWjxOxntqukll7uZ6n27V/JLsyTr8kD+cP7KGUiI8hOi9lZMZ7r08oaH8AAAikSURBVOqs33ZB8n3q6SroOGn3o8O1l1wGjgLwjNRglWAiiZO91Ucaao2wOtN0YdZLiFXDc1jdIJd3Mt3amnC5QyR2praGlw8PD5PhnquhJldCBNKaGD4B4fmsvR3+xKLpwpMgRoxM5g5DntD66/Rk1mOnblkJPWHNW6PLzPsQ6TKOho3QT9ULD5GmMrms588O704RQ7W8+BkRtJCZPvMJnM0Jzw8iYNVupc8m2V8JEYgVXuBKnDb7uYtmq1ZrtQ6ap4stnozPOxvwyMTXIJT1+PLp4nusK3SZY0y/oUKFS2ZyLkgg2tB1cSwGK5Wa16/3FBEF5ecsFdeVsxY6N5nNBY/Cjov2vFWcdFptnpNW+Lcahji0lfWz9vaxwR+863Rw3fk5S4XxJyHE30roHKPo9cPG1ulv4kl/JDHsbfGvWzZrDRHivtDkrznZeERlSQny9JPqJ7X0hkhrwYLQ5tbNPEIibnkjvnddsxwpBdphTil+YBqAxIg9VwFkA2kzj5uapeLVjltzkQvL/+FtE3c/ZwkhMXC8arnrVm3J2bA3eHQwErhovDsNYKWhzV7v+aBVm1twLLahqYL12BpdnGHzzMyiPgcnSoBR3o3Zx+zADy40iK62wmHuMPOtEP9MdeSoFcyP/d6d9VFZqH2p3NZkMJPHOfZPJh2PSm+Ub2tC2kGbpdCZyw17wwb5ULdhQhK1er3FjrsfhbmcoqbpbaK/+fDxc8NEL+WPjHin2+IYyaGdFic+v3d7UvtAbxCA1tP+1t5eZ3jVrIf1YEnP9vcbuwX3YF+jXH+XhUr7d/R2H1D/k9w5qqMPm6Vxdj7QyQzIqPN+ZAbmL1VJLbnQNkENTVM1vd3sNpz+ctXjNyESusny2ParZn8cIGJ8xYcHJHH3ASMCi67eBVhrLPXJNdKZtKdH6Yxn6rA2gC8yk7DwxvFvlHSuZo1y5SSv8uJ1fhv/b6QyVbs8Kywp4fHCS4KLjg8AROfbewCDx/mxsXsyOum+lgUY0+l0RNmR1Z9xvlG8WxlpyB/xtc42+mO5hDs/rl4rW0Wxy3cqr91RfZ7X6yHNXlLld1LmMU2QcUYLtcd3ACZCAGZvWVd8Yv3klYzxiodtU3Wzzxd91Ql3pFV2iCJdEEtYrhPKdsdNuuGT7K8EevopXTSLy7+vVN9WIwg5n/anh4lYF70hbyOMLZ9HoUSlT08VLrHq2OcwgtqATesifBaEF5j6R3nOY5yE6LXR5YN73ifAraSUi0uXy711BgvRpruZ9GY6U5jxp/MmQOckKd8SSp1eJlAY1aZvU7D+coZyEx4Fjuwvy5tc3aO2E8vrDgS4kDlhiVZfit/ozUo61c6rkqfzFsZvI4wJ3pkcDqan11v4jWhD5luApLZ4aeBTHegsm5nwo8NIyM6K9n2M18+FITLkx64MVBKZ34p1zKyQhaBeLInXtwBCnj+F4jFOjhecORWGPI9bLOPCvzUAVvQrIVfLgcYhqLGYLBlZalkOOrpJ4o0Yu63Fz2U3Vhxp5a3e/whCgcHcx2CuKBosStdezPbe5zoYHwu9o9f1GM+J/q1nOSW+d0MxEvXubK8zuSe+kC/hRVK8lovk0ccRH4YuorZ0wNk7CFWuhGb5qmm72NJpoQlbJnBm1Yc8se6JVnv3Mc3Xkj3bVp1jjbfufEfUYaiN56bS58x+NnoRhpA0Q3rCvolQJMEK1qLh0zOGNzdYYKtO/QjND3TdcvoEXSRiBJr+maQWnp68W960UuTo0QZPGL9nAqYYFvMG3XGAsNI8Mb3kG9OBRy4r0vj0pK+djjhrG6oFQ/db7xsqUkmLtgh2O39jZHxHIDEtgpuaOI1UO2wbisY4fMYxUSL0RkUJgJS2PPRKDt0D4Ko1SqlL58H13lX2yS+u8ORqIHtyK0v6Gh8bl95g1H2cdRDAd2IFJR7eGkkU3LIacbqTLLHjz1fPZiSJOoUJOZhvK4Y9Bgl4o7i7LaaYe1dVFK1OWFv9CNTFzYzdQpgBVfAdrDRk3BT3v7pQyqEdWSBhi4fDHCCodLPlWTknp7aXEgxPt39Awt5gOMt5kKnbubHWk1e+5/wS7ev42QgwFd/KtRJ923l6RlKmmnoRYjJeERUDMs6sqNqQKnQBj7kTx4Gu6FeIYU+pXO3ww0XFvjMfGinWsl+9FF3+NJAUL9uZrUZYExoEdiCQLh6qsqkRAT1a3O/+KLIfigYKEvtRxeTJXaQXPmlHmbhx+nEob7B4p0OTUuXHTUU0vlLbMesl07BA+MQy7My0vqDn5Dv9fMgBv2mUHVICMmmWNVEQ5SdKoUnUGBJLQKazRhBmRagFK+5+KCIo2E+kLh7mShNHpFfQWddFWYQomajGINI8sYCfb7iBTWgkmRrvIfzFFzvLgsIglo0f6BDD58WOeI5w6lg6w7H+4+Xgzbs7VIrnDcqTlVeGE7WZeMITGSOzECE7WhGNbJVLR6YCO3eTyQcrCeMnvw4PA5DnDOWwhwJ38uJZatoMEQbjLsxgexuhZfM7Yh3CM3/q0ZUuIwehlLxkjJCil7LSBf80MV1c+lqG4gDYVUUgcMKvw54Ckpd2Wg5CHvTk9G/cL+f9vT0AhHy4x6cuGjOuRMgzqERKHCL8jdxXMgBIcIRsvdSnTffW9M8re9URN7x7iTg89TEVRMjdZxpnGNVDsjojMXzOQh6y/CpJV9mV3hzZKK0jt5YI6xki6AdcAy7F8GnE3Q2AeVy5cIjgQ2iJhqR1ByEqT+LOykZpe3gcjOC/jVDUObAWC/KU+txKhCKDyhUA4oeNKfH+mWUmTUJQNL8W2pRYwq1D2XSYd3MRYSvsV8fd2Kjikzu3LNZITwIzJG/QLjnk6xZl+VFzrhPurUQo83rcJDEuLQIIi57HJZsKojKRC+NhrDIXBzYPIgecjlgZLc/UQxVfptvwkQn0GbqzV7e3Axl6pFqraLKpdCz4Hwx1ZgUJ7f8uAAAAAElFTkSuQmCC
                              type: image/png
                            textColor: '#000000'
                            primaryColor: '#FFFFFF'
                            secondaryColor: rgb(255, 98, 0)
                    _links:
                      self:
                        href: https://spi.int.epi.engineering/api/wallets/2d24dd9e-60af-4296-afbf-e55aab9588f1/provisionings/4c17de33-11d4-43ff-9eb4-821a08af7798
                      redirect:
                        href: https://consumer-psp.tld/epi/provisionings/4c17de33-11d4-43ff-9eb4-821a08af7798/2d24dd9e-60af-4296-afbf-e55aab9588f1
                      provisionPaymentSources:
                        href: https://spi.int.epi.engineering/api/wallets/2d24dd9e-60af-4296-afbf-e55aab9588f1/provisionings/4c17de33-11d4-43ff-9eb4-821a08af7798/provision-payment-sources
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          $ref: '#/components/responses/errorResponse404'
      security:
      - BearerAccessToken: [
          ]
      parameters:
      - $ref: '#/components/parameters/ConsumerIdReq'
  /api/payment-sources:
    post:
      tags:
      - payment-sources
      operationId: post-payment-sources
      summary: Create a payment source resource [Consumer PSP]
      description: |-
        Consumer PSPs can use this endpoint call to send information about a consumer's payment source to EPI central services and create a payment source resource.
        ## Scope
        This endpoint call does not require a scope.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePaymentSourceRequest'
      responses:
        '201':
          description: Created
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentSourceResource'
        '208':
          description: Already Reported - The payment source with the given externalId
            already exists and has not been changed.
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentSourceResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '409':
          description: |-
            Conflict
            The submitted payment source does not match the existing payment source, or a constraint is violated.  For example, the IBAN might already be in use, or the account holder might not match. Ensure that the combination of IBAN and externalId remains unique.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                TenantIdAlreadyInUse:
                  description: The submitted payment source was submitted before and
                    does not match the existing payment source.
                  value:
                    type: /problem/payment-source/tenant-id-already-in-use
                    status: 409
                    title: Constraint Violation
                    detail: The provided consumerPspId + externalId combination is
                      already in use.
                    callId: 00000000000000000000000000000000-0000000000000000
                IbanAlreadyInUse:
                  value:
                    type: /problem/payment-source/iban-already-in-use
                    status: 409
                    title: Constraint Violation
                    detail: The provided IBAN is already in use.
                    callId: 00000000000000000000000000000000-0000000000000000
                IbanAliasAlreadyInUse:
                  value:
                    type: /problem/payment-source/iban-alias-already-in-use
                    status: 409
                    title: Constraint Violation
                    detail: The provided consumerPspId + IBAN alias combination is
                      already in use.
                    callId: 00000000000000000000000000000000-0000000000000000
        '422':
          description: Unprocessable Entity - The request was well formed but was
            not followed due to semantic errors.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                PaymentSourceBlocked:
                  description: This payment source is blocked.
                  value:
                    type: about:blank
                    status: 422
                    title: Unprocessable Entity
                    detail: Payment source with ID 00000000-0000-0000-0000-000000000000
                      is blocked.
                    callId: 00000000000000000000000000000000-0000000000000000
                ConsumerPspIsBeingMerged:
                  value:
                    type: /problem/consumer-psp/consumer-psp-is-being-merged
                    status: 422
                    title: Consumer PSP is being merged
                    callId: 00000000000000000000000000000000-0000000000000000
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
    get:
      operationId: get-payment-sources
      summary: List payment sources [Consumer PSP]
      description: |-
        Consumer PSPs can use this endpoint call to retrieve a list of the payment source resources that it created at EPI central services.
        ## Scope
        This endpoint call does not require a scope.
      security:
      - BearerAccessToken: [
          ]
      tags:
      - payment-sources
      parameters:
      - name: id
        description: The ID of the payment source.
        in: query
        required: false
        explode: true
        schema:
          type: string
          format: uuid
      - name: externalId
        description: The external ID of the payment source.
        in: query
        required: false
        explode: true
        schema:
          type: string
      - name: status
        description: The status of the payment source.  If not specified, the default
          value is Active.
        in: query
        required: false
        explode: true
        schema:
          type: string
          default: Active
          enum:
          - Active
          - Blocked
          - Closed
      - name: page
        description: The page that is to be retrieved.  If not specified, the default
          value is `0`.
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
      - name: limit
        description: The maximum number of payment sources to return.  If not specified,
          the default value is 100.
        in: query
        required: false
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 100
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                type: object
                required:
                - _links
                - _embedded
                - page
                properties:
                  _links:
                    $ref: '#/components/schemas/PagedCollectionResourceLinks'
                  _embedded:
                    type: object
                    properties:
                      paymentSources:
                        type: array
                        items:
                          $ref: '#/components/schemas/PaymentSourceResource'
                  page:
                    $ref: '#/components/schemas/page'
              examples:
                page:
                  value:
                    _links:
                      self:
                        href: https://api.epi-services.eu/api/payment-sources?page=0&limit=100
                      first:
                        href: https://api.epi-services.eu/api/payment-sources?page=0&limit=100
                      last:
                        href: https://api.epi-services.eu/api/payment-sources?page=0&limit=100
                    _embedded:
                      paymentSources:
                      - type: PaymentAccount
                        id: 00000000-0000-0000-0000-000000000001
                        status: Active
                        consumerPspId: 8aff7e82-40c7-4715-ae9b-0be5fb3cb365
                        externalId: 6ae125d9-13b1-5add-9999-82e1a40cbb39
                        currency: EUR
                        accountIdentifier:
                          type: IBAN
                          iban: DE57100110012620341753
                        accountHolder: Lina Cash
                        pro: false
                        displayDigits: DE57xxxxxxxxxxxxxx1753
                        _links:
                          self:
                            href: https://api.epi-services.eu/api/payment-sources/00000000-0000-0000-0000-000000000001
                    page:
                      size: 1
                      totalElements: 1
                      totalPages: 1
                      number: 0
                      requestedPageSize: 100
                      limitReached: false
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          $ref: '#/components/responses/errorResponse403'
    parameters:
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
  /api/payment-sources/{paymentSourceId}:
    parameters:
    - $ref: '#/components/parameters/PaymentSourceIdPath'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    get:
      operationId: get-payment-source-by-id
      summary: Retrieve a payment source by ID [Consumer PSP]
      description: |-
        Consumer PSPs can use this endpoint call to retrieve details of a payment source by its payment source ID
        Because Wero digital wallets cannot receive IBANs, this resource can be requested only by consumer PSPs.
        ## Scope
        This endpoint call does not require a scope.
      tags:
      - payment-sources
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentSourceResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          description: Not Found - The payment source with the given ID does not exist.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '410':
          description: Gone - The payment source with the given ID has been closed.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
    delete:
      operationId: remove-payment-source-by-id
      summary: Remove a payment source [Consumer PSP]
      description: |-
        Consumer PSPs can remove a payment source from the Wero payment system so that the consumer cannot use the payment source through Wero. Note that this operation will also remove payment source profiles for all consumers associated with the removed payment source.
        For more information, see [Payment source status of 'removed'](doc:payment-source-resource#removed-payment-source).
        ## Scope
        This endpoint call does not require a scope.


        ## 📘 Important for Joint Accounts

        To remove a payment source for an individual consumer, use the event 'Account Authorized Person Access Revoked' via the endpoint [Notify EPI of an event \[Consumer PSP\]](ref:post-consumer-psp-events).
      tags:
      - payment-sources
      responses:
        '204':
          description: No Content
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          $ref: '#/components/responses/errorResponse404'
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
    put:
      summary: Update a payment source [Consumer PSP]
      operationId: put-payment-sources-paymentSourceId
      description: |-
        Consumer PSPs can use this endpoint call to update a payment source. This endpoint will perform a full overwrite of the existing payment source information with the following exceptions:
         * `externalId` cannot be updated.
         * `status` cannot be updated.
         * `consumerPspId` cannot be updated.

        ## Scope
        This endpoint requires the `wallet:provisioning` scope.
      tags:
      - payment-sources
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePaymentSourceRequest'
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                $ref: '#/components/schemas/PaymentSourceResource'
        '400':
          $ref: '#/components/responses/errorResponse400'
        '403':
          description: Forbidden - The payment source is in the process of being migrated.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                ConsumerPspMerging:
                  value:
                    type: /problem/service-provider/status/merging
                    status: 403
                    title: Service provider is merging
                    detail: This operation cannot be executed while a PSP-merge operation
                      is in progress
                    callId: 00000000000000000000000000000000-0000000000000000
        '404':
          description: Not Found -  The payment source with the given ID was not found.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '410':
          description: Gone -  The payment source with the given ID has been closed.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                PaymentSourceClosed:
                  value:
                    type: /problem/payment-source/status/closed
                    status: 410
                    title: Gone
                    detail: The payment source with this ID has been closed.
                    callId: 00000000000000000000000000000000-0000000000000000
      parameters: [
        ]
  /api/payment-sources/{paymentSourceId}/block:
    parameters:
    - $ref: '#/components/parameters/PaymentSourceIdPath'
    - $ref: '#/components/parameters/ContextUomCode'
    - $ref: '#/components/parameters/CorrelationId'
    - $ref: '#/components/parameters/ExternalId'
    put:
      operationId: block-payment-source-by-id
      summary: Block a payment source [Consumer PSP]
      description: |-
        A blocked payment source cannot have an active or passive part in any operation.  For more information, see [blocked payment source](doc:payment-source-resource#blocked-payment-source).
        ## Scope
        This endpoint call does not require a scope.
      tags:
      - payment-sources
      requestBody:
        content:
          application/hal+json; charset=UTF-8:
            schema:
              $ref: '#/components/schemas/BlockPaymentSourceRequest'
      responses:
        '202':
          description: Accepted No response body.
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          description: Not Found - The payment source with the given ID does not exist.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '410':
          description: Gone - The payment source with the given ID has been removed.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
    delete:
      operationId: unblock-payment-source-by-id
      summary: Unblock a payment source [Consumer PSP]
      description: |-
        Remove the blocked status from a payment source so that the consumer can use it again.
        ## Scope
        This endpoint does not require a scope.
      tags:
      - payment-sources
      responses:
        '204':
          description: No Content No response body.
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          description: Not Found - The payment source with the given ID does not exist.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
        '410':
          description: Gone - The payment source with the given ID has been removed.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
      security:
      - BearerAccessToken: [
          ]
      parameters: [
        ]
  /api/qr-code/p2p/encode:
    post:
      tags:
        - qr-code
      summary: "Generate a share url and qr-code to share information between users"
      description: "The qr-code endpoint facilitates the use of QR codes to share information,\
        \ such as contact details or requests for money, between Wero wallet users.\n\n\
        \ With this endpoint call, a Wero digital wallet requests EPI central services to\
        \ simultaneous create a URL (a share URL) and the associated QR code for sharing.\n\n\
        \ A prerequisite for this endpoint call is the existence at EPI central services\
        \ of a payment source profile for the Wero wallet user's payment source."
      operationId: get-consents
      parameters:
        - $ref: '#/components/parameters/ContextUomCode'
        - $ref: '#/components/parameters/CorrelationId'
        - $ref: '#/components/parameters/ConsumerIdReq'
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/QrCodeP2PEncodeSendRequest'
                - $ref: '#/components/schemas/QrCodeP2PEncodeShareRequest'
              discriminator:
                propertyName: action
                mapping:
                  send_money: '#/components/schemas/QrCodeP2PEncodeSendRequest'
                  share_contact: '#/components/schemas/QrCodeP2PEncodeShareRequest'
      responses:
        '200':
          description: OK
          content:
            application/hal+json; charset=UTF-8:
              schema:
                type: object
                required:
                  - url
                  - dataUri
                properties:
                  url:
                    type: string
                    description: The generated URL for sharing.
                  dataUri:
                    type: string
                    description: The data URI that represents the generated QR-code image.
              examples:
                share-contact:
                  value:
                    url: https://share.weropay.eu/p/1/c/gLG
                    dataUri: data:image/png;base64,xxxxxxxx
                send-money:
                  value:
                    url: https://share.weropay.eu/p/1/s/gMp?a=1&c=EUR
                    dataUri: data:image/png;base64,xxxxxxxx
        '400':
          $ref: '#/components/responses/errorResponse400'
        '404':
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                MissingPaymentSourceProfile:
                  value:
                    type: /problem/payment-source-profile/not-found
                    status: 404
                    title: Not Found
                    detail: Missing payment source profile
                    callId: 00000000000000000000000000000000-0000000000000000
        '422':
          description: Unprocessable Entity - The payment source cannot be found.
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
              examples:
                RelatedPaymentSourceNotFound:
                  value:
                    type: /problem/payment-source/not-found
                    status: 422
                    title: Unprocessable Entity
                    callId: 00000000000000000000000000000000-0000000000000000
        '429':
          description: |-
            Too Many Requests
            The waiting time is described in the Retry-After header.
          headers:
            Retry-After:
              $ref: '#/components/headers/RetryAfter'
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/Problem'
components:
  schemas:
    MerchantCategoryCode:
      type: string
      maxLength: 4
      minLength: 4
      pattern: ^\d{4}$
      description: ISO 18245:2023 defines a merchant category code (MCC) as "a code
        used to classify the business entity by type of activity in which it is engaged,
        to facilitate the evaluation of various risks undertaken by the entity and
        to better identify its transaction patterns and characteristics." The MCC
        is a four-digit number that is assigned to a business by credit card companies
        (for example, MasterCard or VISA) when the business first starts to accept
        one of these cards as a form of payment.
      example: '5812'
    updateState:
      type: object
      required:
      - state
      properties:
        state:
          description: State of the acceptor.
          type: string
          enum:
          - Active
          - Inactive
    link:
      type: object
      properties:
        href:
          type: string
          format: uri
        name:
          type: string
      required:
      - href
    stateResource:
      allOf:
      - $ref: '#/components/schemas/updateState'
      - type: object
        required:
        - _links
        properties:
          _links:
            type: object
            description: HAL links to related resources.
            required:
            - self
            - acceptor
            properties:
              self:
                $ref: '#/components/schemas/link'
              acceptor:
                $ref: '#/components/schemas/link'
    CountryCode:
      title: Country code
      description: A country code in ISO 3166-1 alpha-2 format.
      type: string
      pattern: ^[A-Z]{2}$
      enum:
      - AF
      - AX
      - AL
      - DZ
      - AS
      - AD
      - AO
      - AI
      - AQ
      - AG
      - AR
      - AM
      - AW
      - AU
      - AT
      - AZ
      - BS
      - BH
      - BD
      - BB
      - BY
      - BE
      - BZ
      - BJ
      - BM
      - BT
      - BO
      - BQ
      - BA
      - BW
      - BV
      - BR
      - IO
      - BN
      - BG
      - BF
      - BI
      - CV
      - KH
      - CM
      - CA
      - KY
      - CF
      - TD
      - CL
      - CN
      - CX
      - CC
      - CO
      - KM
      - CG
      - CD
      - CK
      - CR
      - CI
      - HR
      - CU
      - CW
      - CY
      - CZ
      - DK
      - DJ
      - DM
      - DO
      - EC
      - EG
      - SV
      - GQ
      - ER
      - EE
      - ET
      - FK
      - FO
      - FJ
      - FI
      - FR
      - GF
      - PF
      - TF
      - GA
      - GM
      - GE
      - DE
      - GH
      - GI
      - GR
      - GL
      - GD
      - GP
      - GU
      - GT
      - GG
      - GN
      - GW
      - GY
      - HT
      - HM
      - VA
      - HN
      - HK
      - HU
      - IS
      - IN
      - ID
      - IR
      - IQ
      - IE
      - IM
      - IL
      - IT
      - JM
      - JP
      - JE
      - JO
      - KZ
      - KE
      - KI
      - KP
      - KR
      - KW
      - KG
      - LA
      - LV
      - LB
      - LS
      - LR
      - LY
      - LI
      - LT
      - LU
      - MO
      - MK
      - MG
      - MW
      - MY
      - MV
      - ML
      - MT
      - MH
      - MQ
      - MR
      - MU
      - YT
      - MX
      - FM
      - MD
      - MC
      - MN
      - ME
      - MS
      - MA
      - MZ
      - MM
      - NA
      - NR
      - NP
      - NL
      - NC
      - NZ
      - NI
      - NE
      - NG
      - NU
      - NF
      - MP
      - 'NO'
      - OM
      - PK
      - PW
      - PS
      - PA
      - PG
      - PY
      - PE
      - PH
      - PN
      - PL
      - PT
      - PR
      - QA
      - RE
      - RO
      - RU
      - RW
      - BL
      - SH
      - KN
      - LC
      - MF
      - PM
      - VC
      - WS
      - SM
      - ST
      - SA
      - SN
      - RS
      - SC
      - SL
      - SG
      - SX
      - SK
      - SI
      - SB
      - SO
      - ZA
      - GS
      - SS
      - ES
      - LK
      - SD
      - SR
      - SJ
      - SZ
      - SE
      - CH
      - SY
      - TW
      - TJ
      - TZ
      - TH
      - TL
      - TG
      - TK
      - TO
      - TT
      - TN
      - TR
      - TM
      - TC
      - TV
      - UG
      - UA
      - AE
      - GB
      - US
      - UM
      - UY
      - UZ
      - VU
      - VE
      - VN
      - VG
      - VI
      - WF
      - EH
      - YE
      - ZM
      - ZW
      example: DE
    AddressInternational:
      title: International Address
      type: object
      description: An international address.
      required: [
        ]
      properties:
        line1:
          type: string
          description: Line of the address (e.g. street name and number).
          minLength: 1
          maxLength: 255
        line2:
          type: string
          description: Additional line for the address (e.g. apartment, suite, unit,
            building, floor, etc.).
          minLength: 1
          maxLength: 255
        postalCode:
          type: string
          description: The postal code.
          minLength: 1
          maxLength: 12
        city:
          type: string
          minLength: 1
          maxLength: 100
        country:
          type: string
          description: The country code (ISO 3166-1 alpha-2).
          minLength: 2
          maxLength: 2
          $ref: '#/components/schemas/CountryCode'
        state:
          type: string
          description: State or province for the address.
          minLength: 1
          maxLength: 255
      example:
        line1: Some street St 1
        line2: Apartment 1, suite 3, floor 1
        postalCode: '48180'
        city: Madrid
        country: ES
        state: Madrid
    addressResource:
      allOf:
      - $ref: '#/components/schemas/AddressInternational'
      - type: object
        required:
        - _links
        - country
        properties:
          _links:
            type: object
            description: HAL links to related resources.
            required:
            - self
            - acceptor
            properties:
              self:
                $ref: '#/components/schemas/link'
              acceptor:
                $ref: '#/components/schemas/link'
    EuropeanVatNumber:
      title: European VAT number.
      type: string
      pattern: ^[A-Z]{2}[0-9]{2,13}$
      minLength: 4
      maxLength: 15
      description: The full identifier starts with an ISO 3166-1 alpha-2 (2 letters)
        country code (except for Greece, which uses EL; and Northern Ireland, which
        uses the code XI) and then has between 2 and 13 characters.
      examples:
      - EU123456789
    updateLegal:
      type: object
      description: The information that public administration and regulators provide
        and require to manage an acceptor.
      properties:
        vatNumber:
          allOf:
          - $ref: '#/components/schemas/EuropeanVatNumber'
            description: The company VAT number that EPI requires to bill acceptors.
        taxNumber:
          type: string
          description: Company tax number.
          example: '123456789012'
          minLength: 1
          maxLength: 255
        registerNumber:
          type: string
          description: Company registration number.
          example: '123456789012'
          minLength: 1
          maxLength: 255
    legalResource:
      allOf:
      - $ref: '#/components/schemas/updateLegal'
      - type: object
        required:
        - _links
        properties:
          _links:
            type: object
            description: HAL links to related resources.
            required:
            - self
            - acceptor
            properties:
              self:
                $ref: '#/components/schemas/link'
              acceptor:
                $ref: '#/components/schemas/link'
    acceptorResource:
      type: object
      required:
      - id
      - externalId
      - name
      - acceptorPspId
      - mcc
      - _embedded
      - _links
      properties:
        id:
          description: ID of the acceptor that EPI central services provide when creating
            the acceptor resource.
          type: string
          format: uuid
          readOnly: true
        externalId:
          description: The external ID of the acceptor.
          type: string
        name:
          description: The company's legal name.
          type: string
        acceptorPspId:
          description: The ID of the acceptor PSP.
          type: string
          readOnly: true
        mcc:
          $ref: '#/components/schemas/MerchantCategoryCode'
          description: |
            The merchant category code (MCC) of the acceptor. See ISO 18245:2023 for more information on available merchant category codes.
        businessIncorporatedOn:
          description: The date that the acceptor's business was created.
          type: string
          format: date
          example: '2023-12-21'
        _embedded:
          type: object
          required:
          - state
          - address
          - legal
          properties:
            state:
              $ref: '#/components/schemas/stateResource'
            address:
              $ref: '#/components/schemas/addressResource'
            legal:
              $ref: '#/components/schemas/legalResource'
        _links:
          type: object
          description: The HAL links to related resources.
          required:
          - self
          - shops
          - state
          - address
          - legal
          properties:
            self:
              $ref: '#/components/schemas/link'
            shops:
              $ref: '#/components/schemas/link'
            state:
              $ref: '#/components/schemas/link'
            address:
              $ref: '#/components/schemas/link'
            legal:
              $ref: '#/components/schemas/link'
    page:
      type: object
      examples:
      - size: 1
        totalElements: 1
        totalPages: 1
        number: 0
        requestedPageSize: 10
        limitReached: false
      properties:
        size:
          type: integer
          description: The number of elements on the page.
        totalElements:
          type: integer
          description: The total number of elements available with the query.
        totalPages:
          type: integer
          description: The total number of pages available, using the requested page
            size.
        number:
          type: integer
          description: The number of the current page. Page numbers start at `0` and
            continue to the total number of pages.
        requestedPageSize:
          type: integer
          description: The requested page size. The value of "size" might differ for
            the last page if the last page is not full.
        limitReached:
          type: boolean
          description: If `true`, an internal limit when retrieving results was exceeded.
            Not all elements are returned.
      description: A paginated resource is a HAL resource. The resource contains the
        page object, which describes the provided subset of data. The data is provided
        as an embedded collection resource. The name of the collection depends on
        the endpoint. HAL links are also provided, for navigation.
      title: Structure of a paginated response
      required:
      - size
      - totalElements
      - totalPages
      - number
      - requestedPageSize
      - limitReached
    acceptorPagedCollectionResource:
      type: object
      title: Paged Collection Resource
      required:
      - _embedded
      - _links
      - page
      properties:
        _embedded:
          type: object
          required:
          - acceptors
          properties:
            acceptors:
              type: array
              items:
                $ref: '#/components/schemas/acceptorResource'
        _links:
          type: object
          required:
          - self
          - first
          - last
          properties:
            self:
              $ref: '#/components/schemas/link'
            first:
              $ref: '#/components/schemas/link'
            prev:
              $ref: '#/components/schemas/link'
            next:
              $ref: '#/components/schemas/link'
            last:
              $ref: '#/components/schemas/link'
        page:
          $ref: '#/components/schemas/page'
    Problem:
      type: object
      properties:
        type:
          type: string
          format: uri-reference
          description: A URI reference that uniquely identifies the problem type,
            only in the context of the provided endpoint.
          default: about:blank
          example: /some/uri-reference
          not:
            enum:
            - /problem/constraint-violation
        title:
          type: string
          description: A short, human-readable summary of the problem type.
          example: some title for the error situation
        status:
          type: integer
          format: int32
          description: The 'status' member is only advisory; it conveys the HTTP status
            code used for the convenience of the consumer. This attribute is always
            the same as the status code in the actual HTTP response.
          minimum: 100
          maximum: 599
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of
            the problem, which helps locate the problem and describes how to proceed.
          example: some description for the error situation
        instance:
          type: string
          format: uri-reference
          description: A URI reference that identifies the specific occurrence of
            the problem, for example, by adding a fragment identifier or sub-path
            to the problem type. Can be used to locate the root of the problem in
            the source code.
          example: /some/uri-reference#specific-occurrence-context
        callId:
          type: string
          description: A call ID that identifies the specific occurrence of the problem.
          example: 00000000000000000000000000000000-0000000000000000
      required:
      - type
      - title
      - status
    ConstraintViolationProblem:
      type: object
      properties:
        type:
          type: string
          format: uri-reference
          description: A URI reference that uniquely identifies the problem type only
            in the context of the provided endpoint.
          const: /problem/constraint-violation
        title:
          type: string
          description: A short, human-readable summary of the problem type.
          default: Constraint Violation
        status:
          type: integer
          format: int32
          description: The 'status' member is only advisory; it conveys the HTTP status
            code used for the convenience of the consumer. This attribute is always
            the same as the status code in the actual HTTP response.
          default: 400
        callId:
          type: string
          description: A call ID that identifies the specific occurrence of the problem.
          example: 00000000000000000000000000000000-0000000000000000
        violations:
          type: array
          description: A list of constraint violations.
          items:
            type: object
            required:
            - field
            - message
            properties:
              field:
                type: string
                description: The name of the field that caused the constraint violation.
              message:
                type: string
                description: A technical message that describes the constraint violation,
                  in English.
              userMessageKey:
                type: string
                description: A key that describes the type of constraint violation,
                  useful to report user input validation error. The key can be used
                  to look up a localised message for instance, that can then be interpolated
                  using the `userMessageValue`.
                example: constraint.string.min-length
                oneOf:
                - type: string
                  title: Standard constraint violation key
                  description: 'All known standard constraint violation keys: * **constraint.required**:
                    The field is required. * **constraint.type**: The field must be
                    of the correct type. * **constraint.enum**: The field must be
                    one of the allowed values. `userMessageValue` contains the list
                    as a string value. * **constraint.const**: The field must be a
                    specific value. `userMessageValue` contains the value as a string
                    value. * **constraint.number.multiple-of**: The field must be
                    a multiple of a specific number. `userMessageValue` contains the
                    number as a string value. * **constraint.number.maximum-inclusive**:
                    The field must be less than or equal to a specific number. `userMessageValue`
                    contains the number as a string value. * **constraint.number.maximum-exclusive**:
                    The field must be less than a specific number. `userMessageValue`
                    contains the number as a string value. * **constraint.number.minimum-inclusive**:
                    The field must be greater than or equal to a specific number.
                    `userMessageValue` contains the number as a string value.            *
                    **constraint.number.minimum-exclusive**: The field must be greater
                    than a specific number. `userMessageValue` contains the number
                    as a string value. * **constraint.string.max-length**: The field
                    must be at most a specific number of characters long. `userMessageValue`
                    contains the number as a string value. * **constraint.string.min-length**:
                    The field must be at least a specific number of characters long.
                    `userMessageValue` contains the number as a string value. * **constraint.string.min-length-not-blank**:
                    The field must be at least a specific number of characters long
                    and not blank. `userMessageValue` contains the number as a string
                    value. * **constraint.string.max-graphemes**: The field must be
                    at most a specific number of graphemes long. `userMessageValue`
                    contains the number as a string value. * **constraint.string.pattern**:
                    The field must match a specific pattern. * **constraint.string.length**:
                    The field must be a specific number of characters long. `userMessageValue`
                    contains the number as a string value. * **constraint.string.url**:
                    The field must be a valid URL. * **constraint.string.url.https**:
                    The field must be a valid HTTPS URL. * **constraint.string.uuid4**:
                    The field must be a valid UUID v4. * **constraint.string.email**:
                    The field must be a valid email address. * **constraint.string.phone-number**:
                    The field must be a valid phone number. * **constraint.duration.min-seconds**:
                    The field must be at least a specific number of seconds long.
                    `userMessageValue` contains the number as a string value. * **constraint.duration.max-days**:
                    The field must be at most a specific number of days long. `userMessageValue`
                    contains the number as a string value. * **constraint.datetime.before**:
                    The field must be before a specific date and time. `userMessageValue`
                    contains the `datetime` as a timestamp string value. * **constraint.array.min-items**:
                    The field must contain at least a specific number of items. `userMessageValue`
                    contains the number as a string value. * **constraint.array.max-items**:
                    The field must contain at most a specific number of items. `userMessageValue`
                    contains the number as a string value. * **constraint.array.unique-items**:
                    The field must contain only unique items. * **constraint.amount.maximum**:
                    The field must be less than or equal to a specific amount. * **constraint.amount.minimum**:
                    The field must be greater than or equal to a specific amount.
                    * **constraint.currency-supported**: The field must be a supported
                    currency.'
                  enum:
                  - constraint.required
                  - constraint.type
                  - constraint.enum
                  - constraint.const
                  - constraint.number.multiple-of
                  - constraint.number.maximum-inclusive
                  - constraint.number.maximum-exclusive
                  - constraint.number.minimum-inclusive
                  - constraint.number.minimum-exclusive
                  - constraint.string.max-length
                  - constraint.string.min-length
                  - constraint.string.min-length-not-blank
                  - constraint.string.max-graphemes
                  - constraint.string.pattern
                  - constraint.string.length
                  - constraint.string.url
                  - constraint.string.url.https
                  - constraint.string.uuid4
                  - constraint.string.email
                  - constraint.string.phone-number
                  - constraint.duration.min-seconds
                  - constraint.duration.max-days
                  - constraint.datetime.before
                  - constraint.array.min-items
                  - constraint.array.max-items
                  - constraint.array.unique-items
                  - constraint.amount.maximum
                  - constraint.amount.minimum
                  - constraint.currency-supported
                - type: string
                  description: Placeholder for a future user message key.
                  title: Placeholder for future message keys
                  not:
                    enum:
                    - constraint.required
                    - constraint.type
                    - constraint.enum
                    - constraint.const
                    - constraint.number.multiple-of
                    - constraint.number.maximum-inclusive
                    - constraint.number.maximum-exclusive
                    - constraint.number.minimum-inclusive
                    - constraint.number.minimum-exclusive
                    - constraint.string.max-length
                    - constraint.string.min-length
                    - constraint.string.min-length-not-blank
                    - constraint.string.max-graphemes
                    - constraint.string.pattern
                    - constraint.string.length
                    - constraint.string.url
                    - constraint.string.url.https
                    - constraint.string.uuid4
                    - constraint.string.email
                    - constraint.string.phone-number
                    - constraint.duration.min-seconds
                    - constraint.duration.max-days
                    - constraint.datetime.before
                    - constraint.array.min-items
                    - constraint.array.max-items
                    - constraint.array.unique-items
                    - constraint.amount.maximum
                    - constraint.amount.minimum
                    - constraint.currency-supported
              userMessageValue:
                type: string
                description: A string value that can be used to replace a placeholder
                  in the localised message.
      required:
      - type
      - title
      - status
      - violations
    updateAddress:
      allOf:
      - $ref: '#/components/schemas/AddressInternational'
      - type: object
        required:
        - country
        title: Acceptor Address
        description: |
          The address of the headquarters of the acceptor.
    updateCustomerService:
      type: object
      properties:
        phoneNumber:
          type: string
          description: The phone number of the customer service contact. The phone
            number must be a valid mobile phone number in the E.164 format.
          example: '+49712837192318'
        emailAddress:
          type: string
          description: The e-mail address of the customer service contact.
          format: email
          pattern: ^(.+)@(\S+)$
          example: email@example.com
        contactFormUrl:
          description: The URL of the contact form for customer service.
          type: string
    updateDisputesContact:
      type: object
      properties:
        personEmailAddress:
          type: string
          description: The e-mail address of the disputes contact.
          format: email
          pattern: ^(.+)@(\S+)$
          example: email@example.com
        personName:
          description: The name of the disputes contact person.
          type: string
    updateBusinessAddress:
      allOf:
      - $ref: '#/components/schemas/AddressInternational'
      - type: object
        required:
        - country
        title: Shop Address
        description: |
          The address of the shop. If a shop has multiple branches, every branch is expected to have its own shop resource.
    createShopRequest:
      type: object
      required:
      - externalShopId
      - state
      properties:
        externalShopId:
          description: The external ID of the shop.
          type: string
        name:
          description: The commercial trade name of the shop.
          type: string
        websiteUrl:
          description: The URL of the shop.
          type: string
        logo:
          description: |
            The base64-encoded string of the logo in data-URI format. The string-size limit is 100000 bytes (100 KB).  The following image formats are allowed: JPEG, PNG, and SVG.
          type: string
          example: data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgM.....FXgq8FXgq8FXgq8FXgq7fmlf//Z
        tacAndRefundPoliciesUrl:
          description: The URL of the terms and conditions and refund policies.
          type: string
        type:
          description: The type of shop.
          enum:
          - OnlineShop
          - PointOfSale
          - Hybrid
        state:
          description: The state of the shop.
          type: string
          enum:
          - Active
          - Inactive
        customerService:
          $ref: '#/components/schemas/updateCustomerService'
        disputesContact:
          $ref: '#/components/schemas/updateDisputesContact'
        businessAddress:
          $ref: '#/components/schemas/updateBusinessAddress'
    createAcceptorRequest:
      type: object
      required:
      - externalId
      - name
      - mcc
      - state
      - legal
      - address
      properties:
        externalId:
          description: The external ID of the acceptor.
          type: string
        name:
          description: The company's legal name.
          type: string
        mcc:
          $ref: '#/components/schemas/MerchantCategoryCode'
          description: |
            The merchant category code (MCC) of the acceptor. See ISO 18245:2023 for more information on available merchant category codes.
        state:
          description: The state of the acceptor.
          type: string
          enum:
          - Active
          - Inactive
        businessIncorporatedOn:
          description: The date that the acceptor's business was created.
          type: string
          format: date
          example: '2023-12-21'
        address:
          $ref: '#/components/schemas/updateAddress'
        legal:
          $ref: '#/components/schemas/updateLegal'
        shops:
          type: array
          items:
            $ref: '#/components/schemas/createShopRequest'
    updateShopState:
      type: object
      required:
      - state
      properties:
        state:
          description: The state of the shop.
          type: string
          enum:
          - Active
          - Inactive
    shopStateResource:
      allOf:
      - $ref: '#/components/schemas/updateShopState'
      - type: object
        required:
        - _links
        properties:
          _links:
            type: object
            description: HAL links to related resources.
            required:
            - self
            - shop
            properties:
              self:
                $ref: '#/components/schemas/link'
              shop:
                $ref: '#/components/schemas/link'
    customerServiceResource:
      allOf:
      - $ref: '#/components/schemas/updateCustomerService'
      - type: object
        required:
        - _links
        properties:
          _links:
            type: object
            description: HAL links to related resources.
            required:
            - self
            - shop
            properties:
              self:
                $ref: '#/components/schemas/link'
              shop:
                $ref: '#/components/schemas/link'
    disputesContactResource:
      allOf:
      - $ref: '#/components/schemas/updateDisputesContact'
      - type: object
        required:
        - _links
        properties:
          _links:
            type: object
            description: HAL links to related resources.
            required:
            - self
            - shop
            properties:
              self:
                $ref: '#/components/schemas/link'
              shop:
                $ref: '#/components/schemas/link'
    businessAddressResource:
      allOf:
      - $ref: '#/components/schemas/updateBusinessAddress'
      - type: object
        required:
        - _links
        properties:
          _links:
            type: object
            description: HAL links to related resources.
            required:
            - self
            - shop
            properties:
              self:
                $ref: '#/components/schemas/link'
              shop:
                $ref: '#/components/schemas/link'
    shopResource:
      type: object
      required:
      - id
      - externalId
      - name
      - _links
      - _embedded
      properties:
        id:
          description: The ID of the shop.
          type: string
          readOnly: true
        externalId:
          description: The external ID of the shop.
          type: string
        name:
          description: The commercial trade name of the shop.
          type: string
        websiteUrl:
          description: The URL of the shop.
          type: string
        tacAndRefundPoliciesUrl:
          description: The URL of the terms and conditions and refund policies.
          type: string
        type:
          description: The type of shop.
          enum:
          - OnlineShop
          - PointOfSale
          - Hybrid
        _links:
          type: object
          description: The HAL links to related resources.
          required:
          - self
          - state
          - acceptor
          - customerService
          - disputesContact
          - businessAddress
          properties:
            self:
              $ref: '#/components/schemas/link'
            state:
              $ref: '#/components/schemas/link'
            acceptor:
              $ref: '#/components/schemas/link'
            customerService:
              $ref: '#/components/schemas/link'
            disputesContact:
              $ref: '#/components/schemas/link'
            businessAddress:
              $ref: '#/components/schemas/link'
            logo:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          required:
          - state
          properties:
            state:
              $ref: '#/components/schemas/shopStateResource'
            customerService:
              $ref: '#/components/schemas/customerServiceResource'
            disputesContact:
              $ref: '#/components/schemas/disputesContactResource'
            businessAddress:
              $ref: '#/components/schemas/businessAddressResource'
    createAcceptorResponseResource:
      allOf:
      - $ref: '#/components/schemas/acceptorResource'
      - type: object
        required:
        - _embedded
        properties:
          _embedded:
            type: object
            required:
            - shops
            properties:
              shops:
                type: array
                description: The list of shops that have been created.
                items:
                  $ref: '#/components/schemas/shopResource'
    updateAcceptor:
      type: object
      required:
      - name
      - mcc
      properties:
        name:
          description: The company's legal name.
          type: string
        mcc:
          $ref: '#/components/schemas/MerchantCategoryCode'
          description: |
            The merchant category code (MCC) of the acceptor. See ISO 18245:2023 for more information on available merchant category codes.
        businessIncorporatedOn:
          description: The date that the acceptor's business was created.
          type: string
          format: date
          example: '2023-12-21'
    shopsPagedCollectionResource:
      type: object
      title: Paged Collection Resource
      required:
      - _embedded
      - _links
      - page
      properties:
        _embedded:
          type: object
          required:
          - shops
          properties:
            shops:
              type: array
              items:
                $ref: '#/components/schemas/shopResource'
        _links:
          type: object
          required:
          - self
          - first
          - last
          properties:
            self:
              $ref: '#/components/schemas/link'
            first:
              $ref: '#/components/schemas/link'
            prev:
              $ref: '#/components/schemas/link'
            next:
              $ref: '#/components/schemas/link'
            last:
              $ref: '#/components/schemas/link'
        page:
          $ref: '#/components/schemas/page'
    updatePointOfSaleShop:
      type: object
      required:
      - name
      - type
      properties:
        name:
          description: The commercial trade name of the shop.
          type: string
        websiteUrl:
          description: The URL of the shop.
          type: string
        tacAndRefundPoliciesUrl:
          description: The URL of the terms and conditions and refund policies.
          type: string
        type:
          description: The type of the shop.
          enum:
          - PointOfSale
    updateOnlineShop:
      type: object
      required:
      - name
      - type
      - websiteUrl
      properties:
        name:
          description: The commercial trade name of the shop.
          type: string
        websiteUrl:
          description: The URL of the shop.
          type: string
        tacAndRefundPoliciesUrl:
          description: The URL of the terms and conditions and refund policies.
          type: string
        type:
          description: Type of the shop.
          enum:
          - OnlineShop
    updateHybridShop:
      type: object
      required:
      - name
      - type
      - websiteUrl
      properties:
        name:
          description: The commercial trade name of the shop.
          type: string
        websiteUrl:
          description: The URL of the shop.
          type: string
        tacAndRefundPoliciesUrl:
          description: The URL of the terms and conditions and refund policies.
          type: string
        type:
          description: The type of the shop.
          enum:
          - Hybrid
    updateShop:
      type: object
      oneOf:
      - $ref: '#/components/schemas/updatePointOfSaleShop'
      - $ref: '#/components/schemas/updateOnlineShop'
      - $ref: '#/components/schemas/updateHybridShop'
      discriminator:
        propertyName: type
        mapping:
          PointOfSale: '#/components/schemas/updatePointOfSaleShop'
          OnlineShop: '#/components/schemas/updateOnlineShop'
          Hybrid: '#/components/schemas/updateHybridShop'
    BaseSummary:
      type: object
      required:
      - id
      - category
      - consumerId
      - consentId
      - createdAt
      - updatedAt
      properties:
        id:
          format: uuid
          type: string
          description: The ID of this activity.
        category:
          type: string
          description: A category groups multiple types. Consumer PSPs can use this
            to filter and cluster activities.
        consumerId:
          format: uuid
          type: string
          description: The ID of the consumer this activity is related to.
        consentId:
          format: uuid
          type: string
          description: The ID of the consent this activity is related to.
        createdAt:
          format: date-time
          type: string
          description: The date and time when this activity was created.
        updatedAt:
          format: date-time
          type: string
          description: The date and time when this activity was updated.
    Money:
      title: Money
      type: object
      properties:
        euroCents:
          type: integer
          description: 'The minimum `euroCents` value is `1`. `euroCents: 100` represents
            one euro.'
      description: |-
        Amounts of money in the API are represented as objects with a single property that describes both the currency (for example, euro) and the unit (which is usually the minor unit of the currency, for example, cents).

        Currently, the only supported representation is euroCents, as shown in the example.

        Other currencies will be added as needed.
      examples:
      - euroCents: 4900
    EComOriginatorPspReference:
      type: string
      description: The consumer PSP's reference of the originator of the payment (SEPA
        scheme attribute TO54). Consumer PSPs can use this field to link an EPI activity
        to their SEPA transaction. Note that this value is available only after the
        consumer PSP has marked the capture as settled.
    Shop:
      type: object
      description: The shop where the purchase was made.
      required:
      - name
      properties:
        name:
          type: string
          description: The name of the shop, as given by the acceptor PSP.
        websiteUrl:
          format: uri
          type: string
          description: A URL to the shop.
        logoUrl:
          format: uri
          type: string
          description: A URL to the logo of the shop.
    SingleImmediatePaymentSummary:
      type: object
      description: A single immediate payment has been made.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - amount
        - merchantCategoryCode
        - pending
        - failed
        - authorisationId
        - shop
        properties:
          type:
            type: string
            const: SingleImmediatePayment
          category:
            type: string
            const: ECommerce
          amount:
            $ref: '#/components/schemas/Money'
          merchantCategoryCode:
            $ref: '#/components/schemas/MerchantCategoryCode'
            description: |-
              The merchant category code of the merchant from which the purchase was made.  See ISO 18245:2023 for more information on available merchant category codes.
              Consumer PSPs can use this information to display a logo or provide contextual information when displaying  the activity to the consumer.
          pending:
            type: boolean
            description: Indicates whether the single immediate payment is pending.
          failed:
            type: boolean
            description: Indicates whether the single immediate payment failed.
          refundedAmount:
            $ref: '#/components/schemas/Money'
            description: The amount that was refunded for this payment.  This amount
              can cover a part of the original amount, the full amount, or even more
              than the original amount.
          authorisationId:
            type: string
            description: The [ID of the authorisation](ref:create-consumer-psp-authorisation)
              that was given to the consumer PSP when the payment request has been
              created. Consumer PSPs can use this field to link an EPI activity to
              their SEPA transaction.
          captureId:
            type: string
            description: The ID of the capture, as is returned by EPI central services.
              Consumer PSPs can use this field to link an EPI activity to their SEPA
              transaction.
          originatorPspReference:
            $ref: '#/components/schemas/EComOriginatorPspReference'
          shop:
            $ref: '#/components/schemas/Shop'
          _links:
            type: object
            required:
            - self
            properties:
              self:
                $ref: '#/components/schemas/link'
                description: A link to the details of the activity.
    EventDependentCaptureSummary:
      type: object
      description: A capture for a event-dependent payment request has been performed.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - amount
        - paymentSourceId
        - shop
        - merchantCategoryCode
        - failed
        - _links
        properties:
          type:
            type: string
            const: EventDependentCapture
          category:
            type: string
            const: ECommerce
          amount:
            $ref: '#/components/schemas/Money'
          paymentSourceId:
            type: string
            format: uuid
            description: The ID of the payment source.
          shop:
            $ref: '#/components/schemas/Shop'
          merchantCategoryCode:
            $ref: '#/components/schemas/MerchantCategoryCode'
            description: |-
              The merchant category code of the merchant from which the purchase was made.  See ISO 18245:2023 for more information on available merchant category codes.
              Consumer PSPs can use this information to show a logo or provide contextual information when displaying the activity to the consumer.
          failed:
            type: boolean
            description: Indicates whether the event-dependant capture failed.
          refundedAmount:
            allOf:
            - $ref: '#/components/schemas/Money'
            - type: object
              description: The amount that was refunded for this payment. This amount
                can cover a part of the original amount, the full amount, or even
                more than the original amount.
          captureId:
            type: string
            description: The ID of the capture, as is returned by EPI central services.
              Consumer PSPs can use this field to link an EPI activity to their SEPA
              transaction.
          originatorPspReference:
            $ref: '#/components/schemas/EComOriginatorPspReference'
          _links:
            type: object
            required:
            - self
            properties:
              self:
                allOf:
                - $ref: '#/components/schemas/link'
                  description: A link to the details of the activity.
    EventDependentReservationSummary:
      type: object
      description: An event-dependent payment request has been created.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - amount
        - shop
        - merchantCategoryCode
        - authorisationId
        properties:
          type:
            type: string
            const: EventDependentReservation
          category:
            type: string
            const: ECommerce
          amount:
            $ref: '#/components/schemas/Money'
          paymentSourceId:
            type: string
            format: uuid
            description: The ID of the payment source.
          shop:
            $ref: '#/components/schemas/Shop'
          merchantCategoryCode:
            $ref: '#/components/schemas/MerchantCategoryCode'
            description: |-
              The merchant category code of the merchant from which the purchase was made.  See ISO 18245:2023 for more information on available merchant category codes.

              Consumer PSPs can use this information to show a logo or provide contextual information when displaying the activity to the consumer.
          authorisationId:
            type: string
            description: The [ID of the authorisation]ref:create-consumer-psp-authorisation)
              that is given to the consumer PSP when the payment request has been
              created. Consumer PSPs can use this field to link an EPI activity to
              their SEPA transaction.
          _links:
            type: object
            required:
            - self
            properties:
              self:
                allOf:
                - $ref: '#/components/schemas/link'
                  description: |
                    A link to the details of the activity.
    RefundSummary:
      type: object
      description: A refund for a payment request has been made.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - originAmount
        - refundedAmount
        - shop
        - merchantCategoryCode
        - refundId
        - captureId
        properties:
          type:
            type: string
            const: Refund
          category:
            type: string
            const: ECommerce
          originAmount:
            $ref: '#/components/schemas/Money'
          refundedAmount:
            $ref: '#/components/schemas/Money'
          shop:
            $ref: '#/components/schemas/Shop'
          merchantCategoryCode:
            $ref: '#/components/schemas/MerchantCategoryCode'
            description: |-
              The merchant category code of the merchant from which the purchase was made.  See ISO 18245:2023 for more information on available merchant category codes.

              Consumer PSPs can use this information to display a logo or provide contextual information when displaying the activity to the consumer.
          refundId:
            type: string
            format: uuid
            description: The ID of the refund in EPI central services. Consumer PSPs
              can use this field to link an EPI activity to their SEPA transaction.
              The refund ID can be found either in the remittance info (T009, the
              first UUID) or in the originator's reference (T014) but without any
              '-'.
          captureId:
            type: string
            format: uuid
            description: The ID of the capture in EPI central services that this refund
              is related to.
          _links:
            type: object
            required:
            - self
            properties:
              self:
                $ref: '#/components/schemas/link'
                description: A link to the details of the activity.
    P2POpenRequestOwnerSummary:
      type: object
      description: A p2p open request has been created.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - paymentSourceId
        - cancelled
        - declined
        - expired
        properties:
          type:
            type: string
            const: P2POpenRequestOwner
          category:
            type: string
            const: P2P
          amount:
            $ref: '#/components/schemas/Money'
          paymentSourceId:
            type: string
            format: uuid
            description: The ID of the payment source.
          cancelled:
            type: boolean
            description: Indicates whether the request has been cancelled.
          declined:
            type: boolean
            description: Indicates whether the request has been declined by the payee.
          expired:
            type: boolean
            description: Indicates whether the request has expired.
          _links:
            type: object
            required:
            - self
            - p2pOpenRequest
            properties:
              self:
                allOf:
                - $ref: '#/components/schemas/link'
                  description: A link to the details of the activity.
              p2pOpenRequest:
                allOf:
                - $ref: '#/components/schemas/link'
                  description: A link to the p2p open request.
    Participant:
      type: object
      properties:
        name:
          type: string
        iconUrl:
          description: A URL to an icon representing the participant in the activity.
          type: string
    P2POriginatorPspReference:
      type: string
      description: |-
        The consumer PSP's reference for the originator of the payment (SEPA scheme attribute TO54). Consumer PSPs can use this field to link an EPI activity to their SEPA transaction.

        Note that this value is only available after the consumer PSP of the payer has marked the money transfer as settled.
    P2POpenRequestPayerSummary:
      type: object
      description: A p2p open request has been paid.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - amount
        - payee
        - failed
        properties:
          type:
            type: string
            const: P2POpenRequestPayer
          category:
            type: string
            const: P2P
          amount:
            $ref: '#/components/schemas/Money'
          payee:
            $ref: '#/components/schemas/Participant'
          originatorPspReference:
            $ref: '#/components/schemas/P2POriginatorPspReference'
          failed:
            type: boolean
            description: Indicates whether the request has failed.
          _links:
            type: object
            required:
            - self
            - p2pOpenRequest
            properties:
              self:
                $ref: '#/components/schemas/link'
                description: A link to the details of the activity.
              p2pOpenRequest:
                $ref: '#/components/schemas/link'
                description: 'A link to the P2P open request.                  '
    P2POpenRequestPayeeSummary:
      type: object
      description: A p2p open request has accepted.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - amount
        - paymentSourceId
        - payer
        - messages
        properties:
          type:
            type: string
            const: P2POpenRequestPayee
          category:
            type: string
            const: P2P
          amount:
            $ref: '#/components/schemas/Money'
          paymentSourceId:
            type: string
            format: uuid
            description: The ID of the payment source.
          payer:
            $ref: '#/components/schemas/Participant'
          originatorPspReference:
            $ref: '#/components/schemas/P2POriginatorPspReference'
          _links:
            type: object
            required:
            - self
            - p2pOpenRequest
            properties:
              self:
                $ref: '#/components/schemas/link'
                description: A link to the details of the activity.
              p2pOpenRequest:
                $ref: '#/components/schemas/link'
                description: A link to the P2P open request.
    P2PRequestPayerSummary:
      type: object
      description: A p2p request has been received.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - amount
        - participant
        - cancelled
        - declined
        - expired
        - failed
        properties:
          type:
            type: string
            const: P2PRequestPayer
          category:
            type: string
            const: P2P
          amount:
            $ref: '#/components/schemas/Money'
          payee:
            $ref: '#/components/schemas/Participant'
          cancelled:
            type: boolean
            description: Indicates whether the request has been cancelled by the payee.
          declined:
            type: boolean
            description: Indicates whether the request has been declined by the payer.
          expired:
            type: boolean
            description: Indicates whether the request has expired.
          failed:
            type: boolean
            description: Indicates whether the request has failed.
          originatorPspReference:
            $ref: '#/components/schemas/P2POriginatorPspReference'
          _links:
            type: object
            required:
            - self
            - p2pRequest
            properties:
              self:
                $ref: '#/components/schemas/link'
                description: A link to the details of the activity.
              p2pRequest:
                $ref: '#/components/schemas/link'
                description: A link to the P2P payment.
    P2PRequestPayeeSummary:
      type: object
      description: A p2p request has been created.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - amount
        - paymentSourceId
        - participant
        - cancelled
        - declined
        - expired
        - failed
        properties:
          type:
            type: string
            const: P2PRequestPayee
          category:
            type: string
            const: P2P
          amount:
            $ref: '#/components/schemas/Money'
          paymentSourceId:
            type: string
            format: uuid
            description: The ID of the payment source.
          payer:
            $ref: '#/components/schemas/Participant'
          cancelled:
            type: boolean
            description: Indicates whether the request has been cancelled.
          declined:
            type: boolean
            description: Indicates whether the request has been declined by the payee.
          expired:
            type: boolean
            description: Indicates whether the request has expired.
          failed:
            type: boolean
            description: Indicates whether the request has failed.
          originatorPspReference:
            $ref: '#/components/schemas/P2POriginatorPspReference'
          _links:
            type: object
            required:
            - self
            - p2pRequest
            properties:
              self:
                $ref: '#/components/schemas/link'
                description: A link to the details of the activity.
              p2pRequest:
                $ref: '#/components/schemas/link'
                description: A link to the P2P request.
    P2PPaymentPayerSummary:
      type: object
      description: A payment through a p2p payment has been made.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - amount
        - participant
        - pending
        - actionNeeded
        - failed
        properties:
          type:
            type: string
            const: P2PPaymentPayer
          category:
            type: string
            const: P2P
          amount:
            $ref: '#/components/schemas/Money'
          payee:
            $ref: '#/components/schemas/Participant'
          pending:
            type: boolean
            description: Indicates whether the P2P payment is pending.
          actionNeeded:
            type: boolean
            description: Indicates whether the P2P payment requires action from the
              consumer.
          failed:
            type: boolean
            description: Indicates whether the P2P payment has failed.
          originatorPspReference:
            $ref: '#/components/schemas/P2POriginatorPspReference'
          _links:
            type: object
            required:
            - self
            - p2pPayment
            properties:
              self:
                $ref: '#/components/schemas/link'
                description: A link to the details of the activity.
              p2pPayment:
                $ref: '#/components/schemas/link'
                description: A link to the p2p payment.
    P2PPaymentPayeeSummary:
      type: object
      description: A payment through a p2p payment has been received.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - amount
        - participant
        - failed
        properties:
          type:
            type: string
            const: P2PPaymentPayee
          category:
            type: string
            const: P2P
          amount:
            $ref: '#/components/schemas/Money'
          payer:
            $ref: '#/components/schemas/Participant'
          failed:
            type: boolean
            description: Indicates whether the payment has failed.
          originatorPspReference:
            $ref: '#/components/schemas/P2POriginatorPspReference'
          _links:
            type: object
            required:
            - self
            - p2pPayment
            properties:
              self:
                $ref: '#/components/schemas/link'
                description: A link to the details of the activity.
              p2pPayment:
                $ref: '#/components/schemas/link'
                description: A link to the p2p payment.
    ConsumerBlockedSummary:
      type: object
      description: The consumer has been blocked.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - category
        - consumerId
        - consumerName
        - type
        properties:
          type:
            type: string
            const: ConsumerBlocked
          category:
            type: string
            const: Consumer
          consumerId:
            type: string
            format: uuid
          consumerName:
            type: string
    ConsumerUnblockedSummary:
      type: object
      description: The consumer has been unblocked.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - category
        - consumerId
        - consumerName
        - type
        properties:
          type:
            type: string
            const: ConsumerUnblocked
          category:
            type: string
            const: Consumer
          consumerId:
            type: string
            format: uuid
          consumerName:
            type: string
    ContactBlockedSummary:
      type: object
      description: The contact has been blocked.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - contactName
        properties:
          type:
            type: string
            const: ContactBlocked
          category:
            type: string
            const: Consumer
          contactName:
            type: string
            description: The name of the contact.
    ContactUnblockedSummary:
      type: object
      description: The contact has been unblocked.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - contactName
        properties:
          type:
            type: string
            const: ContactUnblocked
          category:
            type: string
            const: Consumer
          contactName:
            type: string
            description: The name of the contact.
    ProxyAddedSummary:
      type: object
      description: A proxy has been added.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - paymentMeansId
        properties:
          type:
            type: string
            const: ProxyAdded
          category:
            type: string
            const: Consumer
          paymentMeansId:
            type: string
            format: uuid
            description: The ID of the payment means that was used for the proxy update.
    ProxyRemovedSummary:
      type: object
      description: A proxy has been removed.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - paymentMeansId
        properties:
          type:
            type: string
            const: ProxyRemoved
          category:
            type: string
            const: Consumer
          paymentMeansId:
            type: string
            format: uuid
            description: The ID of the payment means that was used for the proxy update.
    WalletCreatedSummary:
      type: object
      description: A new wallet has been linked to the consumer.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - walletId
        - walletName
        properties:
          type:
            type: string
            const: WalletCreated
          category:
            type: string
            const: Wallet
          walletId:
            type: string
            format: uuid
          walletName:
            type: string
    PaymentMeansAddedSummary:
      type: object
      description: A means of payment has been provisioned to a wallet.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - walletId
        - walletName
        - paymentMeansId
        - maskedIban
        properties:
          type:
            type: string
            const: PaymentMeansAdded
          category:
            type: string
            const: Wallet
          walletId:
            type: string
            format: uuid
          walletName:
            type: string
          paymentMeansId:
            type: string
            format: uuid
          maskedIban:
            type: string
            description: The masked IBAN of the account that is linked to the payment
              method that was changed.
    PaymentMeansRemovedSummary:
      type: object
      description: A means of payment has been removed from a wallet.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - walletId
        - walletName
        - paymentMeansId
        - maskedIban
        properties:
          type:
            type: string
            const: PaymentMeansRemoved
          category:
            type: string
            const: Wallet
          walletId:
            type: string
            format: uuid
          walletName:
            type: string
          paymentMeansId:
            type: string
            format: uuid
          maskedIban:
            type: string
            description: The masked IBAN of the account that is linked to the payment
              method that was changed.
    PaymentSourceBlockedSummary:
      type: object
      description: A payment source has been blocked.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - maskedPaymentAccountIdentifier
        properties:
          type:
            type: string
            const: PaymentSourceBlocked
          category:
            type: string
            const: PaymentSource
          maskedPaymentAccountIdentifier:
            type: string
            description: The masked payment account identifier.
    PaymentSourceRemovedSummary:
      type: object
      description: A payment source has been removed.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - maskedPaymentAccountIdentifier
        properties:
          type:
            type: string
            const: PaymentSourceRemoved
          category:
            type: string
            const: PaymentSource
          maskedPaymentAccountIdentifier:
            type: string
            description: The masked payment account identifier.
    PaymentSourceUnblockedSummary:
      type: object
      description: A payment source has been unblocked.
      allOf:
      - $ref: '#/components/schemas/BaseSummary'
      - type: object
        required:
        - type
        - category
        - maskedPaymentAccountIdentifier
        properties:
          type:
            type: string
            const: PaymentSourceUnblocked
          category:
            type: string
            const: PaymentSource
          maskedPaymentAccountIdentifier:
            type: string
            description: The masked payment account identifier.
    ActivitySummary:
      type: object
      description: A summary representation of an activity.
      oneOf:
      - $ref: '#/components/schemas/SingleImmediatePaymentSummary'
      - $ref: '#/components/schemas/EventDependentCaptureSummary'
      - $ref: '#/components/schemas/EventDependentReservationSummary'
      - $ref: '#/components/schemas/RefundSummary'
      - $ref: '#/components/schemas/P2POpenRequestOwnerSummary'
      - $ref: '#/components/schemas/P2POpenRequestPayerSummary'
      - $ref: '#/components/schemas/P2POpenRequestPayeeSummary'
      - $ref: '#/components/schemas/P2PRequestPayerSummary'
      - $ref: '#/components/schemas/P2PRequestPayeeSummary'
      - $ref: '#/components/schemas/P2PPaymentPayerSummary'
      - $ref: '#/components/schemas/P2PPaymentPayeeSummary'
      - $ref: '#/components/schemas/ConsumerBlockedSummary'
      - $ref: '#/components/schemas/ConsumerUnblockedSummary'
      - $ref: '#/components/schemas/ContactBlockedSummary'
      - $ref: '#/components/schemas/ContactUnblockedSummary'
      - $ref: '#/components/schemas/ProxyAddedSummary'
      - $ref: '#/components/schemas/ProxyRemovedSummary'
      - $ref: '#/components/schemas/WalletCreatedSummary'
      - $ref: '#/components/schemas/PaymentMeansAddedSummary'
      - $ref: '#/components/schemas/PaymentMeansRemovedSummary'
      - $ref: '#/components/schemas/PaymentSourceBlockedSummary'
      - $ref: '#/components/schemas/PaymentSourceRemovedSummary'
      - $ref: '#/components/schemas/PaymentSourceUnblockedSummary'
      discriminator:
        propertyName: type
        mapping:
          SingleImmediatePayment: '#/components/schemas/SingleImmediatePaymentSummary'
          EventDependentCapture: '#/components/schemas/EventDependentCaptureSummary'
          EventDependentReservation: '#/components/schemas/EventDependentReservationSummary'
          Refund: '#/components/schemas/RefundSummary'
          P2POpenRequestOwnerSummary: '#/components/schemas/P2POpenRequestOwnerSummary'
          P2POpenRequestPayerSummary: '#/components/schemas/P2POpenRequestPayerSummary'
          P2POpenRequestPayeeSummary: '#/components/schemas/P2POpenRequestPayeeSummary'
          P2PRequestPayer: '#/components/schemas/P2PRequestPayerSummary'
          P2PRequestPayee: '#/components/schemas/P2PRequestPayeeSummary'
          P2PPaymentPayer: '#/components/schemas/P2PPaymentPayerSummary'
          P2PPaymentPayee: '#/components/schemas/P2PPaymentPayeeSummary'
          ConsumerBlocked: '#/components/schemas/ConsumerBlockedSummary'
          ConsumerUnblocked: '#/components/schemas/ConsumerUnblockedSummary'
          ContactBlocked: '#/components/schemas/ContactBlockedSummary'
          ContactUnblocked: '#/components/schemas/ContactUnblockedSummary'
          ProxyAdded: '#/components/schemas/ProxyAddedSummary'
          ProxyRemoved: '#/components/schemas/ProxyRemovedSummary'
          WalletCreated: '#/components/schemas/WalletCreatedSummary'
          PaymentMeansAdded: '#/components/schemas/PaymentMeansAddedSummary'
          PaymentMeansRemoved: '#/components/schemas/PaymentMeansRemovedSummary'
          PaymentSourceBlocked: '#/components/schemas/PaymentSourceBlockedSummary'
          PaymentSourceRemoved: '#/components/schemas/PaymentSourceRemovedSummary'
          PaymentSourceUnblocked: '#/components/schemas/PaymentSourceUnblockedSummary'
    SummaryCollectionEmbed:
      type: object
      properties:
        activities:
          description: List of activities
          type: array
          items:
            $ref: '#/components/schemas/ActivitySummary'
    PagedCollectionResourceLinks:
      type: object
      properties:
        self:
          $ref: '#/components/schemas/link'
        first:
          $ref: '#/components/schemas/link'
        last:
          $ref: '#/components/schemas/link'
        prev:
          $ref: '#/components/schemas/link'
        next:
          $ref: '#/components/schemas/link'
      required:
      - self
      - first
      - last
    PagedSummaryCollectionResource:
      type: object
      properties:
        _embedded:
          $ref: '#/components/schemas/SummaryCollectionEmbed'
        _links:
          $ref: '#/components/schemas/PagedCollectionResourceLinks'
        page:
          $ref: '#/components/schemas/page'
    BasketItem:
      type: object
      required:
      - quantity
      - unitPrice
      properties:
        sku:
          type: string
          description: The stock keeping unit (SKU) of the item.
          minLength: 1
          maxLength: 128
        name:
          type: string
          description: The name of the item.
          minLength: 1
          maxLength: 128
        description:
          type: string
          description: The description of the item.
          minLength: 1
          maxLength: 128
        quantity:
          type: number
          description: The quantity of the item.
          minimum: 1
        unitPrice:
          $ref: '#/components/schemas/Money'
        tax:
          $ref: '#/components/schemas/Money'
    EComActivity:
      type: object
      required:
      - id
      - type
      - consumerId
      - paymentSourceId
      - consentId
      - createdAt
      - updatedAt
      - shop
      - merchantCategoryCode
      - _links
      properties:
        id:
          format: uuid
          type: string
          description: The ID of this activity. This ID is generated when the first
            event of the activity takes place. This ID remains stable throughout the
            lifetime of the activity. Use this ID to retrieve the activity details
            using the [retrieve activity](ref:get-activity) endpoint call. It is not
            derived from any of the other IDs involved in the associated transaction.
        type:
          type: string
          description: The type of this activity.
        consumerId:
          format: uuid
          type: string
          description: The ID of the consumer who created the activity.
        paymentSourceId:
          type: string
          format: uuid
          description: The ID of the payment source that was used to settle the payments.
        consentId:
          type: string
          format: uuid
          description: The UUID of a consent that was previously granted by the consumer.
        createdAt:
          format: date-time
          type: string
          description: The date and time when this activity was created.
        updatedAt:
          format: date-time
          type: string
          description: The date and time when this activity was updated.
        shop:
          $ref: '#/components/schemas/Shop'
        basketItems:
          type: array
          description: A list of items that were purchased.
          items:
            $ref: '#/components/schemas/BasketItem'
        orderDetailsUrl:
          type: string
          format: uri
          description: A URL to a page at the merchant's website where the user can
            view the order details.
        merchantCategoryCode:
          $ref: '#/components/schemas/MerchantCategoryCode'
          description: |
            The merchant category code of the merchant from which the purchase was made.  See ISO 18245:2023 for more information on available merchant category codes.
            Consumer PSPs can use this information to show a logo or provide contextual information when displaying  the activity to the consumer.
        _links:
          type: object
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
              description: A link to this activity.
    Pending:
      type: object
      required:
      - type
      - occurredAt
      properties:
        type:
          type: string
          const: Pending
        occurredAt:
          format: date-time
          type: string
    Confirmed:
      type: object
      required:
      - type
      - occurredAt
      properties:
        type:
          type: string
          const: Confirmed
        occurredAt:
          format: date-time
          type: string
    Refund:
      type: object
      required:
      - type
      - occurredAt
      - amount
      - _links
      properties:
        type:
          type: string
          const: Refund
        occurredAt:
          format: date-time
          type: string
        amount:
          $ref: '#/components/schemas/Money'
        _links:
          type: object
          required:
          - refundActivity
          properties:
            refundActivity:
              $ref: '#/components/schemas/link'
              description: A link to the activity that represents the refund.
    Failed:
      type: object
      required:
      - type
      - occurredAt
      - failureReason
      properties:
        type:
          type: string
          const: Failed
        failureReason:
          type: string
          enum:
          - InsufficientFunds
          - LimitExceeded
          - Others
        occurredAt:
          format: date-time
          type: string
    SingleImmediateHistoryItem:
      type: object
      oneOf:
      - $ref: '#/components/schemas/Pending'
      - $ref: '#/components/schemas/Confirmed'
      - $ref: '#/components/schemas/Refund'
      - $ref: '#/components/schemas/Failed'
      discriminator:
        propertyName: type
        mapping:
          Pending: '#/components/schemas/Pending'
          Confirmed: '#/components/schemas/Confirmed'
          Refund: '#/components/schemas/Refund'
          Failed: '#/components/schemas/Failed'
    SingleImmediatePayment:
      allOf:
      - $ref: '#/components/schemas/EComActivity'
      - type: object
        required:
        - type
        - history
        - amount
        properties:
          failed:
            type: boolean
            description: Indicates whether the single immediate payment failed
          pending:
            type: boolean
            description: Indicates whether the single immediate payment is pending.
          amount:
            $ref: '#/components/schemas/Money'
          refundedAmount:
            $ref: '#/components/schemas/Money'
            description: The amount that was refunded for this payment. This amount
              can cover a part of the original amount, the full amount, or even more
              than the original amount.
          captureId:
            type: string
            format: uuid
            description: The UUID of the capture for this payment if the capture did
              occur.
          history:
            type: array
            description: 'The history of the payment-related changes in this activity. '
            items:
              $ref: '#/components/schemas/SingleImmediateHistoryItem'
          type:
            type: string
            const: SingleImmediatePayment
          originatorPspReference:
            $ref: '#/components/schemas/EComOriginatorPspReference'
          _links:
            type: object
            required:
            - self
            properties:
              self:
                allOf:
                - $ref: '#/components/schemas/link'
                  description: |
                    A link to this activity.
    CaptureTrigger:
      type: string
      description: The trigger for capturing the payment.
      enum:
      - Shipping
      - Delivery
      - Availability
      - ServiceFulfilment
      - Other
    EventDependentParameters:
      type: object
      description: The parameters of the event-dependent payment plan.
      required:
      - initiallyAuthorisedUntil
      - captureTrigger
      - multiCaptures
      properties:
        initiallyAuthorisedUntil:
          type: string
          format: date-time
          description: |
            The date and time until the initially authorised amount expires.
        captureTrigger:
          $ref: '#/components/schemas/CaptureTrigger'
        multiCaptures:
          type: boolean
          description: |
            Indicates whether multiple captures are allowed for the payment plan.
    InitialAuthorisedAmount:
      type: object
      required:
      - type
      - amount
      - occurredAt
      properties:
        type:
          type: string
          const: InitialAuthorisedAmount
        occurredAt:
          format: date-time
          type: string
        amount:
          $ref: '#/components/schemas/Money'
    Capture:
      type: object
      required:
      - type
      - occurredAt
      - capturedAmount
      - _links
      properties:
        type:
          type: string
          const: Capture
        occurredAt:
          format: date-time
          type: string
        capturedAmount:
          $ref: '#/components/schemas/Money'
        remainingAuthorisedAmount:
          $ref: '#/components/schemas/Money'
        _links:
          type: object
          required:
          - captureActivity
          properties:
            captureActivity:
              $ref: '#/components/schemas/link'
              description: A link to the activity that represents the capture.
            remainingAuthorisationActivity:
              $ref: '#/components/schemas/link'
              description: A link to the activity that represents the remaining authorisation.
                Only available if the remaining authorised amount is greater than
                zero.
    Cancelled:
      type: object
      required:
      - type
      - occurredAt
      - cancelledAmount
      - reason
      - _links
      properties:
        type:
          type: string
          const: Capture
        occurredAt:
          format: date-time
          type: string
        cancelledAmount:
          $ref: '#/components/schemas/Money'
        reason:
          type: string
          enum:
          - Expiry
          - CancelledByMerchant
        _links:
          properties:
            authorisationActivity:
              $ref: '#/components/schemas/link'
              description: A link to the activity that represents the remaining authorisation.
                Only available if the remaining authorised amount is greater than
                zero.
    EventDependentHistoryItem:
      type: object
      oneOf:
      - $ref: '#/components/schemas/InitialAuthorisedAmount'
      - $ref: '#/components/schemas/Capture'
      - $ref: '#/components/schemas/Refund'
      - $ref: '#/components/schemas/Cancelled'
      - $ref: '#/components/schemas/Failed'
      discriminator:
        propertyName: type
        mapping:
          InitialAuthorisedAmount: '#/components/schemas/InitialAuthorisedAmount'
          Capture: '#/components/schemas/Capture'
          Refund: '#/components/schemas/Refund'
          Cancelled: '#/components/schemas/Cancelled'
          Failed: '#/components/schemas/Failed'
    EventDependentReservation:
      allOf:
      - $ref: '#/components/schemas/EComActivity'
      - type: object
        required:
        - type
        - eventDependentParameters
        - history
        - amount
        properties:
          type:
            type: string
            const: EventDependentReservation
          eventDependentParameters:
            $ref: '#/components/schemas/EventDependentParameters'
          amount:
            $ref: '#/components/schemas/Money'
          history:
            type: array
            description: |
              The history of the payment-related changes in this activity.
            items:
              $ref: '#/components/schemas/EventDependentHistoryItem'
          authorisationId:
            type: string
            description: |
              The [ID of the authorisation](https://docs.epicompany.eu/platform/reference/create-consumer-psp-authorisation) that was given to the consumer PSP when the payment request has been created. Consumer PSPs can use this field to link an EPI activity to their SEPA transaction.
          _links:
            type: object
            required:
            - self
            properties:
              self:
                allOf:
                - $ref: '#/components/schemas/link'
                  description: |
                    A link to this activity.
    EventDependentCapture:
      allOf:
      - $ref: '#/components/schemas/EComActivity'
      - type: object
        required:
        - type
        - eventDependentParameters
        - history
        - captureId
        - amount
        properties:
          type:
            type: string
            const: EventDependentCapture
          eventDependentParameters:
            $ref: '#/components/schemas/EventDependentParameters'
          failed:
            type: boolean
            description: |
              Indicates whether the event dependant capture failed.
          amount:
            $ref: '#/components/schemas/Money'
          refundedAmount:
            $ref: '#/components/schemas/Money'
            description: The amount that was refunded for this payment. This amount
              can cover a part of the original amount, the full amount, or even more
              than the original amount.
          history:
            type: array
            description: |
              The history of the payment-related changes in this activity.
            items:
              $ref: '#/components/schemas/EventDependentHistoryItem'
          captureId:
            type: string
            description: The ID of the capture, as is returned by EPI central services.
              Consumer PSPs can use this field to link an EPI activity to their SEPA
              transaction.
          originatorPspReference:
            $ref: '#/components/schemas/EComOriginatorPspReference'
          _links:
            type: object
            required:
            - self
            properties:
              self:
                allOf:
                - $ref: '#/components/schemas/link'
                  description: |
                    A link to this activity.
    RefundHistoryItem:
      type: object
      oneOf:
      - $ref: '#/components/schemas/Confirmed'
      discriminator:
        propertyName: type
        mapping:
          Confirmed: '#/components/schemas/Confirmed'
    RefundActivity:
      allOf:
      - $ref: '#/components/schemas/EComActivity'
      - type: object
        required:
        - type
        - history
        - refund
        - refundId
        - captureId
        - refundedAmount
        - originAmount
        properties:
          history:
            type: array
            description: |
              The history of the payment-related changes in this activity.
            items:
              $ref: '#/components/schemas/RefundHistoryItem'
          type:
            type: string
            const: Refund
          refundedAmount:
            $ref: '#/components/schemas/Money'
          originAmount:
            $ref: '#/components/schemas/Money'
          refund:
            type: object
            properties:
              messages:
                type: array
                description: |
                  Acceptor PSPs can add messages to the consumer during the refund process.
                items:
                  type: string
          refundId:
            type: string
            format: uuid
            description: |
              The ID of the refund in EPI central services. Consumer PSPs can use this field to link an EPI activity to their SEPA transaction. The refund ID can be found either in the remittance info (T009, the first UUID) or in the originator's reference (T014) but without any '-'.
          captureId:
            type: string
            format: uuid
            description: The UUID of the capture this refund refers to.
          _links:
            type: object
            required:
            - self
            properties:
              self:
                allOf:
                - $ref: '#/components/schemas/link'
                  description: |
                    A link to this activity.
              refundedActivity:
                $ref: '#/components/schemas/link'
                description: |
                  A deep link to the activity for which the refund in this activity was created.
    P2PActivity:
      type: object
      required:
      - id
      - type
      - consumerId
      - paymentSourceId
      - createdAt
      - updatedAt
      - messages
      - _links
      properties:
        id:
          format: uuid
          type: string
          description: The ID of this activity.
        type:
          type: string
        consumerId:
          format: uuid
          type: string
          description: The ID of the consumer who created the activity.
        amount:
          $ref: '#/components/schemas/Money'
        paymentSourceId:
          type: string
          format: uuid
          description: The ID of the payment source that was used to settle the payments.
        createdAt:
          format: date-time
          type: string
          description: The date and time when this activity was created.
        updatedAt:
          format: date-time
          type: string
          description: The date and time when this activity was updated.
        messages:
          type: array
          description: Consumers can add messages to P2P requests and payments.
          items:
            type: object
            required:
            - content
            - origin
            properties:
              content:
                type: string
                description: The content of the message.
              origin:
                type: string
                description: |
                  Indicates if the retriever of this activity is the sender or the receiver of the message.
                enum:
                - sender
                - receiver
        originatorPspReference:
          $ref: '#/components/schemas/P2POriginatorPspReference'
        _links:
          type: object
          required:
          - self
          properties:
            self:
              allOf:
              - $ref: '#/components/schemas/link'
                description: |
                  A link to this activity.
    P2PRequestHistoryItem:
      type: object
      oneOf:
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Requested
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Paid
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Expired
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Rejected
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
    P2PRequestPayer:
      allOf:
      - $ref: '#/components/schemas/P2PActivity'
      - type: object
        required:
        - amount
        - type
        - history
        - payee
        properties:
          type:
            type: string
            const: P2PRequestPayer
          history:
            type: array
            description: |
              The history of the payment-related changes in this activity.
            items:
              $ref: '#/components/schemas/P2PRequestHistoryItem'
          payee:
            type: object
            description: Information about the payee of the P2P request.
            required:
            - name
            properties:
              name:
                type: string
                description: The name of the payee.
              avatarUrl:
                type: string
                format: uri
                description: A cacheable URL to the avatar of the payee.
    P2PRequestPayee:
      type: object
      description: An activity representing a received P2P request.
      allOf:
      - $ref: '#/components/schemas/P2PActivity'
      - type: object
        required:
        - amount
        - type
        - history
        - payer
        properties:
          type:
            type: string
            const: P2PRequestPayee
          history:
            type: array
            description: 'The history of the payment-related changes in this activity. '
            items:
              $ref: '#/components/schemas/P2PRequestHistoryItem'
          payer:
            type: object
            description: Information about the payer of the P2P request.
            required:
            - name
            properties:
              name:
                type: string
                description: The name of the payer.
              avatarUrl:
                type: string
                format: uri
                description: |
                  A cacheable URL to the avatar of the payer.
    P2PPaymentHistoryItem:
      type: object
      oneOf:
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Paid
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Expired
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Failed
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
    P2PPaymentPayer:
      allOf:
      - $ref: '#/components/schemas/P2PActivity'
      - type: object
        required:
        - amount
        - type
        - history
        - payee
        properties:
          type:
            type: string
            const: P2PPaymentPayer
          history:
            type: array
            description: 'The history of the payment-related changes in this activity. '
            items:
              $ref: '#/components/schemas/P2PPaymentHistoryItem'
          payee:
            type: object
            description: Information about the payee of the p2p payment.
            required:
            - name
            properties:
              name:
                type: string
                description: |
                  The name of the payee.
              avatarUrl:
                type: string
                format: uri
                description: A cacheable URL to the avatar of the payee.
    P2PPaymentPayee:
      allOf:
      - $ref: '#/components/schemas/P2PActivity'
      - type: object
        required:
        - amount
        - type
        - history
        - payer
        properties:
          type:
            type: string
            const: P2PPaymentPayee
          history:
            type: array
            description: 'The history of the payment-related changes in this activity. '
            items:
              $ref: '#/components/schemas/P2PPaymentHistoryItem'
          payer:
            type: object
            description: Information about the payer of the P2P payment.
            required:
            - name
            properties:
              name:
                type: string
                description: |
                  The name of the payer.
              avatarUrl:
                type: string
                format: uri
                description: |
                  A cacheable URL to the avatar of the payer.
    P2POpenRequestHistoryItem:
      type: object
      oneOf:
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Requested
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Paid
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Expired
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
      - type: object
        required:
        - type
        - occurredAt
        properties:
          type:
            type: string
            const: Rejected
          occurredAt:
            type: string
            format: date-time
            description: The date and time when the change occurred.
    P2POpenRequestOwner:
      type: object
      description: An activity representing the owner of an open P2P request.
      allOf:
      - $ref: '#/components/schemas/P2PActivity'
      - type: object
        required:
        - type
        - history
        - expiresAt
        - _links
        properties:
          type:
            type: string
            const: P2POpenRequestOwner
          history:
            type: array
            description: 'The history of the payment-related changes in this activity. '
            items:
              $ref: '#/components/schemas/P2POpenRequestHistoryItem'
          expiresAt:
            format: date-time
            type: string
            description: The date and time at which the P2P open request expires.
              After expiration, the P2P request cannot be used to make payments.
          shareUrl:
            type: string
            format: uri
            description: |-
              The share URL that can be used to share the open request with payers.

              For more information about how to create a QR code from a Share URL, see [Generate a QR-code image](https://docs.epicompany.eu/platform/reference/post-api-share-url-qr).

              When the open request cannot be approved anymore, the share URL will be removed.
          _links:
            type: object
            required:
            - self
            - relatedActivities
            properties:
              self:
                $ref: '#/components/schemas/link'
                description: A link to this activity.
              relatedActivities:
                type: array
                description: A list of links to activities of payments made based
                  off of this request.
                items:
                  $ref: '#/components/schemas/link'
    P2POpenRequestPayer:
      type: object
      description: An activity representing the payer of a paid open P2P request.
      allOf:
      - $ref: '#/components/schemas/P2PActivity'
      - type: object
        required:
        - type
        - history
        - payee
        properties:
          type:
            type: string
            const: P2POpenRequestPayer
          history:
            type: array
            description: |
              The history of the payment-related changes in this activity.
            items:
              $ref: '#/components/schemas/P2POpenRequestHistoryItem'
          payee:
            type: object
            description: Information about the payee of the P2P request.
            required:
            - name
            properties:
              name:
                type: string
                description: The name of the payee.
              avatarUrl:
                type: string
                format: uri
                description: |
                  A cacheable URL to the avatar of the payee.
    P2POpenRequestPayee:
      type: object
      description: An activity representing the payee of a paid open P2P request.
      allOf:
      - $ref: '#/components/schemas/P2PActivity'
      - type: object
        required:
        - type
        - history
        - payer
        properties:
          type:
            type: string
            const: P2POpenRequestPayee
          history:
            type: array
            description: 'The history of the payment-related changes in this activity. '
            items:
              $ref: '#/components/schemas/P2POpenRequestHistoryItem'
          payer:
            type: object
            description: Information about the payer of the P2P request.
            required:
            - name
            properties:
              name:
                type: string
                description: |
                  The name of the payer.
              avatarUrl:
                type: string
                format: uri
                description: |
                  A cacheable URL to the avatar of the payer.
    Activity:
      type: object
      description: A detailed representation of an activity.
      oneOf:
      - $ref: '#/components/schemas/SingleImmediatePayment'
      - $ref: '#/components/schemas/EventDependentReservation'
      - $ref: '#/components/schemas/EventDependentCapture'
      - $ref: '#/components/schemas/RefundActivity'
      - $ref: '#/components/schemas/P2POpenRequestOwner'
      - $ref: '#/components/schemas/P2POpenRequestPayer'
      - $ref: '#/components/schemas/P2POpenRequestPayee'
      - $ref: '#/components/schemas/P2PRequestPayer'
      - $ref: '#/components/schemas/P2PRequestPayee'
      - $ref: '#/components/schemas/P2PPaymentPayer'
      - $ref: '#/components/schemas/P2PPaymentPayee'
      discriminator:
        propertyName: type
        mapping:
          SingleImmediatePayment: '#/components/schemas/SingleImmediatePayment'
          EventDependentReservation: '#/components/schemas/EventDependentReservation'
          EventDependentCapture: '#/components/schemas/EventDependentCapture'
          Refund: '#/components/schemas/RefundActivity'
          P2PRequestPayer: '#/components/schemas/P2PRequestPayer'
          P2PRequestPayee: '#/components/schemas/P2PRequestPayee'
          P2PPaymentPayer: '#/components/schemas/P2PPaymentPayer'
          P2PPaymentPayee: '#/components/schemas/P2PPaymentPayee'
    AssetId:
      title: Asset ID
      type: string
      description: The asset's ID.
      format: uuid
      example: ddffc0cf-63ee-4752-855c-607a0e7c6e52
    AssetType:
      title: Asset Type
      type: string
      enum:
      - PublicIcon
      example: PublicIcon
      description: |-
        The type of the asset.
        The following types are available:

         - `PublicIcon`: An image (logo/app icon) that is publicly available for use by all consumers. Those images have
        specific dimensions constraints: they need to be at least 1024px wide and 1024px tall and have a 1:1 aspect ratio (square image).
    AssetName:
      title: Asset Name
      type: string
      minLength: 1
      example: Sample Bank's Logo
      description: |-
        The name of the asset to be uploaded. Some notes about this field:
        * Any leading and trailing whitespaces will be trimmed from the value that will be saved in EPI's system. For example, `    Sample Bank's Logo     ` will be converted into `Sample Bank's Logo`.
        * The field is for documentation purposes only; the name of the asset file(s) that will be available for download from the CDN will be generated internally. While there is no requirement to make a unique name for every uploaded asset, uniqueness in asset names will aid greatly during support requests.
    AssetContentType:
      title: Asset Content Type
      type: string
      enum:
      - image/jpeg
      - image/png
      - image/svg+xml
      example: image/png
      description: The MIME type of the asset's content.
    ImageLinks:
      title: Image links
      type: object
      description: Contains the links for the image asset that are stored in EPI's
        system. Note that the filename within the link will be generated internally
        and independently of the name of the asset.
      properties:
        extraSmall:
          type: string
          description: The link to the extra-small-scale version of the asset.
          format: uri
          example: https://static.weropay.epi.engineering/da503c7d-9dcd-42c5-ba65-7411333f45e0_extra_small.png
        small:
          type: string
          description: The link to the small-scale version of the asset.
          format: uri
          example: https://static.weropay.epi.engineering/da503c7d-9dcd-42c5-ba65-7411333f45e0_small.png
        medium:
          type: string
          description: The link to the medium-scale version of the asset.
          format: uri
          example: https://static.weropay.epi.engineering/da503c7d-9dcd-42c5-ba65-7411333f45e0_medium.png
    DocumentLinks:
      title: Document links
      type: object
      description: Contains the URL for a document asset stored in EPI's system. Note
        that the file name that is contained in the link will be generated internally
        and independently of the name of the asset.
      properties:
        url:
          type: string
          format: uri
          description: A public link to the asset.
          example: https://static.weropay.epi.engineering/da503c7d-9dcd-42c5-ba65-7411333f45e0.pdf
    AssetLinks:
      oneOf:
      - $ref: '#/components/schemas/ImageLinks'
      - $ref: '#/components/schemas/DocumentLinks'
      discriminator:
        propertyName: type
        mapping:
          image: '#/components/schemas/ImageLinks'
          document: '#/components/schemas/DocumentLinks'
    AssetResource:
      title: Asset resource
      type: object
      description: The information about an asset that was either created or modified
        within EPI's system.
      properties:
        id:
          $ref: '#/components/schemas/AssetId'
        type:
          $ref: '#/components/schemas/AssetType'
        name:
          $ref: '#/components/schemas/AssetName'
        contentType:
          $ref: '#/components/schemas/AssetContentType'
        links:
          $ref: '#/components/schemas/AssetLinks'
        createdAt:
          type: string
          format: date-time
          description: Date and time when the asset was created.
          example: '2024-12-13T15:00:00.000Z'
        updatedAt:
          type: string
          format: date-time
          description: Date and time when the asset was last updated.
          example: '2024-12-13T15:00:00.000Z'
      required:
      - id
      - type
      - name
      - contentType
      - links
      - createdAt
      - updatedAt
    AssetContentBase64:
      title: Asset Content Base64
      type: string
      minLength: 4
      maxLength: 5242880
      example: SGVsbG8sIFdvcmxkIQ==
      description: |-
        The content of the file to be uploaded. This must consist of a string of Base64-encoded bytes.
        The maximum size of the content is 5MB.
    CreateAssetRequest:
      title: Create Asset Request
      type: object
      description: The necessary information for creating an asset that is to be stored
        for future access during interactions with EPI.
      properties:
        type:
          $ref: '#/components/schemas/AssetType'
        name:
          $ref: '#/components/schemas/AssetName'
        contentBase64:
          $ref: '#/components/schemas/AssetContentBase64'
        contentType:
          $ref: '#/components/schemas/AssetContentType'
      required:
      - type
      - name
      - contentBase64
      - contentType
    UpdateAssetRequest:
      title: Update Asset Request
      type: object
      description: |-
        The necessary information for updating an asset that being stored for interactions with EPI. Note that two additional conditions apply to the request beyond each individual field's validity:
        1. Even though no individual field is required, at least one field must be provided. 2. If `contentType` is provided, `contentBase64` must also be provided.
        Note that the asset type field is not updatable.
      properties:
        name:
          $ref: '#/components/schemas/AssetName'
        contentBase64:
          $ref: '#/components/schemas/AssetContentBase64'
        contentType:
          $ref: '#/components/schemas/AssetContentType'
    scopes:
      title: scopes
      type: string
      description: |-
        List of identifiers that denote the scope of the actions for which the client requests authorisation. For more information, see [access token scopes](ref:access-token-scopes).
        Multiple parts of the overall scope are delimited by blanks.
      examples:
      - p2p:transferMoney wallet:provisioning
      pattern: ^(p2p:transferMoney|wallet:provisioning|consumer-psp:report|consent:request|consent:c2cRequest|dispute:management|payment:request|acceptor:management|acceptor-psp:report|serviceProvider:management|serviceProvider:billing|refresh:offlineAccess|activities:all|activities:enrichment|bank-selector:management)(([
        ](p2p:transferMoney|wallet:provisioning|consumer-psp:report|consent:request|consent:c2cRequest|dispute:management|payment:request|acceptor:management|acceptor-psp:report|serviceProvider:management|refresh:offlineAccess|activities:all|activities:enrichment|bank-selector:management))*)$
    BrandId:
      title: Brand ID
      type: string
      description: The brand's ID.
      format: uuid
      example: ddffc0cf-63ee-4752-855c-607a0e7c6e52
    BrandName:
      title: Brand name
      type: string
      example: Acme
      description: The name of the brand.
      minLength: 1
      pattern: .*\S.*
    BrandAliases:
      title: Brand aliases
      description: A list of alternative names that can be used to refer to the brand.
        These can be acronyms, for instance. Aliases are not displayed but used for
        search purposes.
      type: array
      items:
        type: string
        minLength: 1
      example:
      - Acme
      - Acme Inc.
      - Acme Corporation
      uniqueItems: true
    BrandCountries:
      title: Brand countries
      description: |-
        A list of countries (ISO 3166-1 alpha-2) where the brand is present. This list is used to group and filter the brands that are displayed to the user.
        There must be at least one country in the list.
      type: array
      items:
        $ref: '#/components/schemas/CountryCode'
      example:
      - FR
      - DE
      uniqueItems: true
      minItems: 1
    Asset:
      title: Asset
      type: object
      description: Public image asset
      properties:
        id:
          title: ID of the asset
          type: string
          format: uuid
        name:
          title: Name of the asset
          type: string
        link:
          title: Public URL to the asset
          type: string
          format: uri
      required:
      - id
      - name
      - link
    BrandPrimaryColor:
      title: Brand primary colour
      description: The primary brand colour as a CSS colour string in six-digit HEX
        format. This value is used mainly for backgrounds.
      type: string
      pattern: ^#[A-Fa-f0-9]{6}$
      minLength: 7
      maxLength: 7
      example: '#FF0000'
    BrandResource:
      title: Brand resource
      description: The information about a brand that was either created or modified
        in EPI central services.
      type: object
      properties:
        id:
          $ref: '#/components/schemas/BrandId'
        name:
          $ref: '#/components/schemas/BrandName'
        published:
          type: boolean
          description: This value indicates whether the brand is published or not.
        aliases:
          $ref: '#/components/schemas/BrandAliases'
        countries:
          $ref: '#/components/schemas/BrandCountries'
        logoAsset:
          $ref: '#/components/schemas/Asset'
        primaryColor:
          $ref: '#/components/schemas/BrandPrimaryColor'
      required:
      - id
      - name
      - published
      - aliases
      - countries
      - logoAsset
    LogoAssetId:
      title: Logo asset ID
      description: The ID of a logo asset.
      type: string
      format: uuid
      example: 123e4567-e89b-12d3-a456-426614174000
    CreateBrandRequest:
      title: Create brand request
      description: The necessary information for creating a brand resource.
      type: object
      properties:
        name:
          $ref: '#/components/schemas/BrandName'
        aliases:
          $ref: '#/components/schemas/BrandAliases'
        countries:
          $ref: '#/components/schemas/BrandCountries'
        primaryColor:
          $ref: '#/components/schemas/BrandPrimaryColor'
        logoAssetId:
          $ref: '#/components/schemas/LogoAssetId'
      required:
      - name
      - aliases
      - countries
      - logoAssetId
    UpdateBrandRequest:
      title: Update brand request
      description: The necessary information for updating a brand resource.
      type: object
      properties:
        name:
          $ref: '#/components/schemas/BrandName'
        aliases:
          $ref: '#/components/schemas/BrandAliases'
        countries:
          $ref: '#/components/schemas/BrandCountries'
        primaryColor:
          $ref: '#/components/schemas/BrandPrimaryColor'
        logoAssetId:
          $ref: '#/components/schemas/LogoAssetId'
    BankName:
      title: Bank name
      type: string
      example: AcmeBank
      description: The name of the bank.
      minLength: 1
      pattern: .*\S.*
    AppId:
      title: App ID
      type: string
      description: The app's ID.
      format: uuid
      example: ddffc0cf-63ee-4752-855c-607a0e7c6e52
    AppName:
      title: App name
      type: string
      example: AcmeApp
      description: The name of the app.
      minLength: 1
      pattern: .*\S.*
    BankApps:
      title: Bank apps
      type: array
      description: Apps that are associated with this bank.
      items:
        type: object
        properties:
          id:
            $ref: '#/components/schemas/AppId'
          name:
            $ref: '#/components/schemas/AppName'
        required:
        - id
    BankContext:
      title: Bank context
      type: string
      description: Some context related to the bank that is passed over to the bank
        app via the app universal link. It can be used to provide additional information
        to the bank app, e.g. the selected bank's BIC.
      minLength: 1
      pattern: .*\S.*
    BankAliases:
      title: Bank aliases
      description: A list of alternative names that can be used to refer to the bank.
        These can be acronyms, for instance. Aliases are not displayed but used for
        search purposes.
      type: array
      items:
        type: string
        minLength: 1
        pattern: .*\S.*
      example:
      - AcmeBank
      - AcmeBankInc.
      - AB
      uniqueItems: true
    BankCountries:
      title: Bank countries
      description: The countries where the bank is available (if different from the
        brand) in ISO 3166-1 alpha-2 format. This list must be a subset of the countries
        of the brand. There must be at least one country in the list.
      type: array
      items:
        $ref: '#/components/schemas/CountryCode'
      example:
      - FR
      - DE
      uniqueItems: true
      minItems: 1
    BankPrimaryColor:
      title: Bank primary colour
      description: The primary bank colour (if different from the brand) as a CSS
        colour string in six-digit HEX format. This is used mainly for backgrounds.
      type: string
      pattern: ^#[A-Fa-f0-9]{6}$
      minLength: 7
      maxLength: 7
      example: '#FF0000'
    BankSupportsStandaloneApp:
      type: boolean
      description: Indicates support of the standalone Wero digital wallet app. If
        set as `true`, the bank's consumer PSP ID is required.
      example: true
      default: false
    BankConsumerPspId:
      type: string
      format: uuid
      description: The UUID of the consumer PSP that uses the bank on display in the
        standalone Wero digital wallet app. This is required if the bank supports
        the standalone Wero digital wallet app.
    BankResource:
      title: Bank resource
      description: The bank resource.
      type: object
      properties:
        id:
          title: The ID of the bank
          type: string
          format: uuid
        published:
          type: boolean
          description: This value indicates whether the bank is published on the bank
            selector.
        name:
          $ref: '#/components/schemas/BankName'
        apps:
          $ref: '#/components/schemas/BankApps'
        bankContext:
          $ref: '#/components/schemas/BankContext'
        aliases:
          $ref: '#/components/schemas/BankAliases'
        countries:
          $ref: '#/components/schemas/BankCountries'
        logoAsset:
          $ref: '#/components/schemas/Asset'
          description: The logo asset of the bank if the logo is different from the
            brand.
        primaryColor:
          $ref: '#/components/schemas/BankPrimaryColor'
        supportsStandaloneApp:
          $ref: '#/components/schemas/BankSupportsStandaloneApp'
        consumerPspId:
          $ref: '#/components/schemas/BankConsumerPspId'
      required:
      - id
      - published
      - name
      - apps
      - supportsStandaloneApp
    BankAppIds:
      title: Bank app IDs
      type: array
      description: The IDs of the apps that are associated with this bank.
      items:
        $ref: '#/components/schemas/AppId'
    CreateBankRequest:
      title: Create bank request
      description: The necessary information for creating a bank resource.
      type: object
      properties:
        name:
          $ref: '#/components/schemas/BankName'
        appIds:
          $ref: '#/components/schemas/BankAppIds'
        bankContext:
          $ref: '#/components/schemas/BankContext'
        aliases:
          $ref: '#/components/schemas/BankAliases'
        countries:
          $ref: '#/components/schemas/BankCountries'
        logoAssetId:
          $ref: '#/components/schemas/LogoAssetId'
        primaryColor:
          $ref: '#/components/schemas/BankPrimaryColor'
        supportsStandaloneApp:
          $ref: '#/components/schemas/BankSupportsStandaloneApp'
        consumerPspId:
          $ref: '#/components/schemas/BankConsumerPspId'
      required:
      - name
      - appIds
    UpdateBankRequest:
      title: Update bank request
      description: The necessary information for updating a bank resource.
      type: object
      properties:
        name:
          $ref: '#/components/schemas/BankName'
        appIds:
          $ref: '#/components/schemas/BankAppIds'
        bankContext:
          $ref: '#/components/schemas/BankContext'
        aliases:
          $ref: '#/components/schemas/BankAliases'
        countries:
          $ref: '#/components/schemas/BankCountries'
        logoAssetId:
          $ref: '#/components/schemas/LogoAssetId'
        primaryColor:
          $ref: '#/components/schemas/BankPrimaryColor'
        supportsStandaloneApp:
          $ref: '#/components/schemas/BankSupportsStandaloneApp'
        consumerPspId:
          $ref: '#/components/schemas/BankConsumerPspId'
    AppUniversalLink:
      title: App universal link
      type: string
      description: The universal/app link to the app that opens if the app is installed,
        and otherwise suggests to download it. The link needs to be a valid URI using
        the HTTPS protocol.
      format: uri
      pattern: ^https://.*
      example: https://acme.app.link
    AppRoles:
      title: App roles
      type: array
      items:
        type: string
        enum:
        - wallet
        - provisioning
      minItems: 1
    AppUseCases:
      title: App universal link use cases
      type: array
      items:
        type: string
        enum:
        - market
        - share
        - provisioning
        - fallback
    AppResource:
      title: App resource
      description: The app resource.
      type: object
      properties:
        id:
          $ref: '#/components/schemas/AppId'
        name:
          $ref: '#/components/schemas/AppName'
        universalLink:
          $ref: '#/components/schemas/AppUniversalLink'
        iconAsset:
          $ref: '#/components/schemas/Asset'
        roles:
          $ref: '#/components/schemas/AppRoles'
        useCases:
          $ref: '#/components/schemas/AppUseCases'
      required:
      - id
      - name
      - universalLink
      - iconAsset
      - roles
    IconAssetId:
      title: Icon asset ID
      description: The ID of an icon asset.
      type: string
      format: uuid
      example: 123e4567-e89b-12d3-a456-426614174000
    CreateAppRequest:
      title: Create app request
      description: The necessary information for creating an app resource.
      type: object
      properties:
        name:
          $ref: '#/components/schemas/AppName'
        iconAssetId:
          $ref: '#/components/schemas/IconAssetId'
        universalLink:
          $ref: '#/components/schemas/AppUniversalLink'
        roles:
          $ref: '#/components/schemas/AppRoles'
        useCases:
          $ref: '#/components/schemas/AppUseCases'
      required:
      - name
      - iconAssetId
      - universalLink
      - roles
    UpdateAppRequest:
      title: Update app request
      description: The necessary information for updating an app resource.
      type: object
      properties:
        name:
          $ref: '#/components/schemas/AppName'
        iconAssetId:
          $ref: '#/components/schemas/IconAssetId'
        universalLink:
          $ref: '#/components/schemas/AppUniversalLink'
        roles:
          $ref: '#/components/schemas/AppRoles'
        useCases:
          $ref: '#/components/schemas/AppUseCases'
    consentResourceStatusRequested:
      type: object
      title: Consent Resource Status - Requested
      properties:
        value:
          type: string
          const: Requested
        at:
          type: string
          format: date-time
        timesOutAt:
          type: string
          format: date-time
      required:
      - value
      - at
    consentResourceStatusGranted:
      type: object
      title: Consent Resource Status - Granted
      properties:
        value:
          type: string
          const: Granted
        at:
          type: string
          format: date-time
      required:
      - value
      - at
    consentResourceStatusDenied:
      type: object
      title: Consent Resource Status - Denied
      properties:
        value:
          type: string
          const: Denied
        at:
          type: string
          format: date-time
      required:
      - value
      - at
    consentResourceStatusRevoked:
      type: object
      title: Consent Resource Status - Revoked
      properties:
        value:
          type: string
          const: Revoked
        at:
          type: string
          format: date-time
        source:
          type: string
          enum:
          - Consumer
          - AcceptorPsp
          - ConsumerPsp
      required:
      - value
      - at
      - source
    consentResourceStatusTimedOut:
      type: object
      title: Consent Resource Status - Timed Out
      properties:
        value:
          type: string
          const: TimedOut
        at:
          type: string
          format: date-time
      required:
      - value
      - at
    consentResourceStatus:
      description: |-
        A consent resource represents the consent request sent by the acceptor to the consumer and can have one of the following statuses:

        |       Status      | Description |
        |:-----------------:|:-----------------------------------------------------------------------------------------------------------------------:|
        | Requested         | EPI central services have sent the consent request to the consumer. The consumer has not yet granted or denied consent. |
        | Granted           | The consumer has granted consent (that is, they have consented to the payment plan). |
        | Denied            | The consumer has denied consent (that is, they have rejected the payment plan). |
        | Revoked           | The consent that was initially granted has been revoked. |
        | TimedOut          | The request timed out before the consumer could grant or deny consent. |
      discriminator:
        propertyName: value
        mapping:
          Requested: '#/components/schemas/consentResourceStatusRequested'
          Granted: '#/components/schemas/consentResourceStatusGranted'
          Denied: '#/components/schemas/consentResourceStatusDenied'
          Revoked: '#/components/schemas/consentResourceStatusRevoked'
          TimedOut: '#/components/schemas/consentResourceStatusTimedOut'
      oneOf:
      - $ref: '#/components/schemas/consentResourceStatusRequested'
      - $ref: '#/components/schemas/consentResourceStatusGranted'
      - $ref: '#/components/schemas/consentResourceStatusDenied'
      - $ref: '#/components/schemas/consentResourceStatusRevoked'
      - $ref: '#/components/schemas/consentResourceStatusTimedOut'
    easyCheckout:
      description: |
        Acceptor PSPs can set this field to request an easy-checkout.
        If an easy-checkout is requested, consumers must provide the billing and the shipping address when accepting the consent. Acceptor PSPs may additionally request the consumer's phone number and the consumer's email.
        >❗️ Currently, the easy-checkout feature is available only for the Dutch market.
      type: object
      properties:
        includePhone:
          description: |
            Acceptor PSPs must set this field to `true` if they expect the consumer's phone number to be provided.
          type: boolean
        includeEmail:
          description: |
            Acceptor PSPs must set this field to `true` if they expect the consumer's email address to be provided.
          type: boolean
      required:
      - includePhone
      - includeEmail
    businessRules:
      description: |
        Acceptor PSPs can set this to indicate specificities for this consent.
        For now the only use-case is RSM (Rail Selection Mechanism) transactions for the Dutch market.
      type: object
      properties:
        dutchMigration:
          description: |
            Acceptor PSPs must set this field with the routing advice ID to indicate this consent was created through RSM.
          type: object
          properties:
            routingAdviceId:
              description: |
                The routing advice ID.
              type: string
              format: uuid
          required:
          - routingAdviceId
    singleImmediatePaymentResource:
      title: Single, immediate payment
      description: A single, immediate payment, containing the payment type and amount.
      type: object
      properties:
        type:
          type: string
          const: SingleImmediate
        amount:
          $ref: '#/components/schemas/Money'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - type
      - amount
      - _links
    IBAN:
      type: string
    c2cPaymentResource:
      title: Consumer-to-consumer (C2C) payment
      description: A consumer-to-consumer (C2C) payment, containing the payment type,
        amount, ultimate beneficiary name and IBAN.
      type: object
      properties:
        type:
          type: string
          const: C2c
        amount:
          $ref: '#/components/schemas/Money'
        ultimateBeneficiaryName:
          type: string
          minLength: 1
          maxLength: 70
          description: The name of the ultimate beneficiary of the payment.
        ultimateBeneficiaryIban:
          $ref: '#/components/schemas/IBAN'
          description: The IBAN of the ultimate beneficiary of the payment.
      required:
      - type
      - amount
      - ultimateBeneficiaryName
      - ultimateBeneficiaryIban
    eventDependentPaymentResource:
      title: Event dependent payment
      description: An event dependent payment, containing the payment type, the amount,
        and the event-dependent specific information.
      type: object
      properties:
        type:
          type: string
          const: EventDependent
        amount:
          $ref: '#/components/schemas/Money'
        description:
          type: string
          description: The merchant's description of the goods that were sold.
        captureTrigger:
          $ref: '#/components/schemas/CaptureTrigger'
        amountPaymentType:
          type: string
          enum:
          - Pay
          - PayUpTo
          description: Indicates if the consumer must be charged the complete amount
            or up to the given amount.
        maxAuthToCaptureTime:
          type: integer
          description: The maximum time, in seconds, between authorisation and capture.
        multiCapturesAllowed:
          type: boolean
          description: Indicates if multiple captures are allowed.
        reason:
          type: string
          description: The reason why the payment will be captured in multiple payment
            captures.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - type
      - amount
      - captureTrigger
      - amountPaymentType
      - maxAuthToCaptureTime
      - multiCapturesAllowed
      - _links
    subscriptionPaymentResource:
      title: Subscription payment
      description: A subscription-based payment plan, containing the frequency, the
        amount, and other subscription-specific information.
      type: object
      properties:
        type:
          type: string
          const: Subscription
        amount:
          $ref: '#/components/schemas/Money'
        startAt:
          type: string
          format: date-time
          description: The date and time when the subscription starts.
        firstPaymentAt:
          type: string
          format: date-time
          description: The date and time when the first payment should be collected.  The
            payment capture can occur later than the value that is specified in the
            `startAt` field  when there is a free-trial period at the beginning of
            the subscription.
        endAt:
          type: string
          format: date-time
          description: The date and time when the subscription will end. This is optional
            if the subscription is open ended.
        repetition:
          type: string
          enum:
          - Weekly
          - Monthly
          - Quarterly
          - HalfYearly
          - Yearly
          description: The repetition cycle for the subscription collections.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - type
      - amount
      - startAt
      - firstPaymentAt
      - repetition
      - _links
    paymentPlanResource:
      type: object
      description: The Payment Plan resource.
      oneOf:
      - $ref: '#/components/schemas/singleImmediatePaymentResource'
      - $ref: '#/components/schemas/c2cPaymentResource'
      - $ref: '#/components/schemas/eventDependentPaymentResource'
      - $ref: '#/components/schemas/subscriptionPaymentResource'
      discriminator:
        propertyName: type
        mapping:
          SingleImmediate: '#/components/schemas/singleImmediatePaymentResource'
          C2c: '#/components/schemas/c2cPaymentResource'
          EventDependent: '#/components/schemas/eventDependentPaymentResource'
          Subscription: '#/components/schemas/subscriptionPaymentResource'
    consentTokenResource:
      type: object
      description: The consent token resource.
      properties:
        token:
          type: string
          description: The consent token (JWS format).
        _links:
          type: object
          properties:
            self:
              $ref: '#/components/schemas/link'
          required:
          - self
    consentPaymentRuleResourceItemConstraint:
      type: object
      description: 'Type of the payment constraint: Single or Multiple.'
      properties:
        type:
          type: string
          enum:
          - Single
          - Multiple
          description: Specifies whether the consent is for a single payment request
            or for multiple payment requests. In the case of multiple payment requests,
            the sum of all requests must not exceed the `maxAmount`.
        maxAmount:
          $ref: '#/components/schemas/Money'
      required:
      - type
      - maxAmount
    consentPaymentRuleResourceItemFixed:
      type: object
      properties:
        type:
          type: string
          description: 'Type of the payment rules: fixed, cyclic or sliding.'
          enum:
          - Fixed
        constraint:
          $ref: '#/components/schemas/consentPaymentRuleResourceItemConstraint'
        startOffset:
          type: string
          description: An offset (compliant with ISO 8601) that defines the start
            time of the window during which payment can be collected.   The start
            time is then the offset amount of time _after_ the time that the consumer
            gave consent.
          example: PT-5S
        windowDuration:
          type: string
          description: Duration (compliant with ISO 8601) of the window during which
            payment can be collected. Begins at the start time defined by `startOffset`.
          example: PT5M
      required:
      - type
      - constraint
      - startOffset
      - windowDuration
    consentPaymentRuleResourceItemCyclic:
      type: object
      properties:
        type:
          type: string
          description: 'Type of the payment rules: fixed, cyclic or sliding.'
          enum:
          - Cyclic
        constraint:
          $ref: '#/components/schemas/consentPaymentRuleResourceItemConstraint'
        startOffset:
          type: string
          description: An offset (compliant with ISO 8601) that defines the start
            time of the window during which payment can be collected.   The start
            time is then the offset amount of time _after_ the time that the consumer
            gave consent.
          example: PT-5S
        windowDuration:
          type: string
          description: Duration (compliant with ISO 8601) of the window during which
            payment can be collected. Begins at the start time defined by `startOffset`.
          example: PT5M
        modifications:
          type: array
          items:
            type: object
            description: A modification of a cyclic payment window that replaces one
              or more cycle definitions.   Enables subscriptions to be modelled that,
              for example, start with a free or discounted trial period.
            properties:
              cycleIndexes:
                type: string
                description: The index of the cycle that is modified or replaced.
                pattern: '[0-9]+[.]{2}[0-9]+'
                example: 2..10
              constraint:
                $ref: '#/components/schemas/consentPaymentRuleResourceItemConstraint'
        repetition:
          type: string
          enum:
          - Weekly
          - Monthly
          - Quarterly
          - HalfYearly
          - Yearly
      required:
      - type
      - constraint
      - startOffset
      - windowDuration
      - modifications
      - repetition
    consentPaymentRuleResourceItemSliding:
      type: object
      description: Payment rule that defines a _sliding_ period during which the given
        constraints must be satisfied.
      properties:
        type:
          type: string
          description: 'Type of the payment rules: fixed, cyclic or sliding.'
          enum:
          - Sliding
        constraint:
          $ref: '#/components/schemas/consentPaymentRuleResourceItemConstraint'
        duration:
          type: string
          example: PT45M
          description: Duration (compliant with ISO 8601) of the window during which
            the payment constraint must be valid.
      required:
      - type
      - constraint
      - duration
    consentPaymentRuleResourceItem:
      oneOf:
      - $ref: '#/components/schemas/consentPaymentRuleResourceItemFixed'
      - $ref: '#/components/schemas/consentPaymentRuleResourceItemCyclic'
      - $ref: '#/components/schemas/consentPaymentRuleResourceItemSliding'
      discriminator:
        propertyName: type
        mapping:
          Fixed: '#/components/schemas/consentPaymentRuleResourceItemFixed'
          Cyclic: '#/components/schemas/consentPaymentRuleResourceItemCyclic'
          Sliding: '#/components/schemas/consentPaymentRuleResourceItemSliding'
    consentPaymentRulesResource:
      type: object
      description: The payment plan is converted into payment rules, which are a parameterised
        version of the payment plan details. The payment plan is more readable than
        the payment rules. The payment rules describe one or more payments that consumers
        consent to.
      properties:
        paymentRules:
          type: array
          items:
            $ref: '#/components/schemas/consentPaymentRuleResourceItem'
        _links:
          type: object
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - paymentRules
      - _links
      title: Payment rules
    captureRulesResource:
      type: object
      description: The rules for capturing the payment.
      properties:
        captureRules:
          type: object
          required:
          - maxDurationAfterAuthorization
          - multiCapturesAllowed
          properties:
            maxDurationAfterAuthorization:
              type: integer
              description: The maximum duration, in seconds, for captures to complete
                after a payment authorisation is granted.
            multiCapturesAllowed:
              type: boolean
              description: Indicates if multiple payment captures are allowed.
        _links:
          type: object
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - captureRules
      - _links
      title: Capture rules
    consentDetailsResourceAddress:
      type: object
      title: Address
      required:
      - recipientName
      - line1
      - city
      - postalCode
      - countryCode
      properties:
        companyName:
          type: string
          minLength: 1
          maxLength: 128
        recipientName:
          type: string
          minLength: 1
          maxLength: 128
        line1:
          type: string
          minLength: 1
          maxLength: 300
        line2:
          type: string
          minLength: 1
          maxLength: 300
        city:
          type: string
          minLength: 1
          maxLength: 64
        postalCode:
          type: string
          minLength: 1
          maxLength: 32
        state:
          type: string
          minLength: 1
          maxLength: 300
        countryCode:
          type: string
    consentBasketItem:
      type: object
      required:
      - quantity
      - unitPrice
      properties:
        sku:
          type: string
          description: The stock keeping unit (SKU) of the item.
          minLength: 1
          maxLength: 128
        name:
          type: string
          description: The name of the item.
          minLength: 1
          maxLength: 128
        description:
          type: string
          description: The description of the item.
          minLength: 1
          maxLength: 128
        quantity:
          type: number
          description: The quantity of the item.
          minimum: 1
        unitPrice:
          $ref: '#/components/schemas/Money'
        tax:
          $ref: '#/components/schemas/Money'
    consentDetailsResource:
      type: object
      properties:
        description:
          type: string
          description: The description that is provided by the acceptor in the consent
            request.
        orderPageUrl:
          type: string
          description: The URL of the order page. The URL is provided by the acceptor
            and can be called by the wallet to display the order in the shop application.
            The URL must be a valid HTTPS URL.
        gift:
          type: boolean
          description: Indicates whether the purchased goods are a gift for someone
            else. The gift flag is set by the acceptor.
          default: false
        billingAddress:
          $ref: '#/components/schemas/consentDetailsResourceAddress'
        shippingAddress:
          $ref: '#/components/schemas/consentDetailsResourceAddress'
        shippingCosts:
          description: The shipping costs (if any exist).
          $ref: '#/components/schemas/Money'
        basketItems:
          type: array
          items:
            $ref: '#/components/schemas/consentBasketItem'
        contact:
          description: |-
            The contact details of the consumer in an easy-checkout scenario.
            >❗️ Currently, the easy-checkout feature is available only for the Dutch market.
          type: object
          properties:
            emailAddress:
              type: string
              description: The consumer's email address.
              format: email
            phoneNumber:
              type: string
              description: The consumer's phone number in E.164 format.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            orderPage:
              $ref: '#/components/schemas/link'
    consentResource:
      type: object
      required:
      - id
      - acceptor
      - status
      - meta
      - _links
      properties:
        id:
          description: The ID of the consent resource.
          type: string
          format: uuid
        shortId:
          description: The short ID of the consent resource. The short ID contains
            10 alphanumerical characters. The alphabetical characters are all capital
            letters. This ID can be used to find the resource if, for example, a QR-code
            scan fails.
          type: string
        durationUntilExpiry:
          description: The duration, in seconds, until the consent resource expires.
            This value must be used to calculate the 'expiredAt' of the signed consent
            token by adding it to the `consentedAt` timestamp. Note that this parameter
            is always present when the consumer calls the resource. However, it is
            optional for the acceptor-PSP side. Because both consumers and acceptor
            PSPs call this endpoint, this parameter is required but is marked as optional.
          type: integer
        consentedAt:
          description: The timestamp when the consent token was initially signed by
            the wallet application. This is present only if the consent is granted
            and the principal is either a consumer or a technical service provider.
          type: string
          format: date-time
        expiresAt:
          description: The timestamp when the consent token will expire (calculated
            from `consentedAt`). This is present only if the consent is granted and
            the principal is either a consumer or a technical service provider.
          type: string
          format: date-time
        acceptor:
          description: The acceptor data that is associated with the consent request.
          type: object
          required:
          - name
          - shop
          - mcc
          properties:
            id:
              description: The acceptor ID, as is known to the acceptor PSP.
              type: string
            name:
              description: The legal name of the acceptor.
              type: string
            mcc:
              $ref: '#/components/schemas/MerchantCategoryCode'
              description: |
                The merchant category code (MCC) of the acceptor. See ISO 18245:2023 for more information on available merchant category codes.
            countryCode:
              description: The acceptor's country code.
              type: string
            pspId:
              description: The ID of the acceptor PSP. This is the same as the member
                ID.
              type: string
              format: uuid
            shop:
              description: If present, the shop object contains the shop name or consumer-facing
                name of the acceptor.
              type: object
              properties:
                id:
                  description: The acceptor shop ID, as is known to the acceptor.
                  type: string
                name:
                  description: The shop name or consumer-facing name of the acceptor.
                  type: string
              required:
              - name
        consumerIdentifier:
          description: The data to identify the consumer that triggered the consent
            request.
          type: object
          properties:
            walletId:
              description: The wallet ID of the consumer
              type: string
              format: uuid
          required:
          - walletId
        orderReferenceId:
          description: The reference ID of the order, which is an external ID that
            the acceptor can use to retrieve consent resources.
          type: string
        callbackUrl:
          description: The URL to which EPI central services sends an update after
            the consent token or its status is updated.
          type: string
        status:
          $ref: '#/components/schemas/consentResourceStatus'
        meta:
          type: object
          description: Metadata about the consent request.
          properties:
            createdAt:
              type: string
              format: date-time
          required:
          - createdAt
        easyCheckout:
          $ref: '#/components/schemas/easyCheckout'
        businessRules:
          $ref: '#/components/schemas/businessRules'
        _links:
          type: object
          description: The HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            paymentRules:
              description: Details of the payments that the consumer consents to with
                the token. For more information, see [payment rules](doc:consent-tokens#payment-rules).
                For a full format definition, see [Retrieve the payment rules of a
                consent resource](ref:get-consent-payment-rules). This resource is
                not publicly available and requires API access.
              $ref: '#/components/schemas/link'
            captureRules:
              description: Details of the rules for capturing the payment. For more
                information, see [capture rules](doc:consent-tokens#capture-rules).
                For a full format definition, see [Retrieve the capture rules of a
                consent resource](ref:get-consent-capture-rules). This resource is
                not publicly available and requires API access.
              $ref: '#/components/schemas/link'
            paymentPlan:
              description: The payment plan is a sub-resource of the consent resource
                and contains information about the payment plan that the acceptor
                asked the consumer to consent to. For more information, see [payment
                plan types](doc:payment-plan-types). For a full format definition,
                see [Retrieve the payment plan of a consent resource](ref:get-consent-payment-plan).
                This resource is not publicly available and requires API access.
              $ref: '#/components/schemas/link'
            currentToken:
              description: The current, valid consent token. For more information,
                see [updated versions of consent tokens](doc:consent-model-technical-description#updated-versions-of-consent-tokens).
                For a full format definition, see [Retrieve the current, valid consent
                token of a consent resource](ref:get-consent-current-token). This
                resource is not publicly available and requires API access.
              $ref: '#/components/schemas/link'
            details:
              description: Details about the consent request, for example, description,
                billing address, shipping address and basket items. For an example,
                see the `details` object in the request body of this endpoint. For
                a full format definition, see [Retrieve the consent's details resource](ref:get-consent-details).
                This resource is not publicly available and requires API access.
              $ref: '#/components/schemas/link'
            landingPage:
              description: 'A link to a consent request in the following format: `https://pay.weropay.eu/{consentId}`.
                This resource is publicly available and does not require API access.'
              $ref: '#/components/schemas/link'
            returnPage:
              description: The Wero pay page redirects to this URL after the consumer
                has granted or denied consent. This page is supplied by the party
                triggering the consent request.
              $ref: '#/components/schemas/link'
            printLink:
              description: A payment link that allows consent to be used on a given
                artefact, such as an invoice. This is dependent on the `printOptions`
                object in the request. This resource is publicly available and does
                not require API access.
              $ref: '#/components/schemas/link'
            printQrCode:
              description: A QR code that allows the consent to be used on a given
                artefact such as an invoice. This is dependent on the `printOptions`
                object in the request.
              $ref: '#/components/schemas/link'
            denial:
              description: A link to deny the given consent. For a full format definition,
                see [Deny consent](ref:deny-consent). This resource is not publicly
                available and requires API access.
              $ref: '#/components/schemas/link'
            revocation:
              description: A link to revoke the given consent. For a full format definition,
                see [Revoke consent](ref:revoke-consent). This resource is not publicly
                available and requires API access.
              $ref: '#/components/schemas/link'
            shopInfo:
              description: A link to the shop front sub-resource of the consent resource.
                For more information, see [Retrieve the shop-front of a consent resource](ref:get-consent-shop-front).
                This resource is not publicly available and requires API access.
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            paymentPlan:
              $ref: '#/components/schemas/paymentPlanResource'
            currentToken:
              $ref: '#/components/schemas/consentTokenResource'
            paymentRules:
              $ref: '#/components/schemas/consentPaymentRulesResource'
            captureRules:
              $ref: '#/components/schemas/captureRulesResource'
            details:
              $ref: '#/components/schemas/consentDetailsResource'
    consentCollectionResource:
      type: object
      title: Collection Resource
      required:
      - _embedded
      - _links
      additionalProperties: false
      properties:
        _embedded:
          type: object
          required:
          - consents
          properties:
            consents:
              type: array
              items:
                $ref: '#/components/schemas/consentResource'
        _links:
          type: object
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
    consentPagedCollectionResource:
      type: object
      title: Paged Collection Resource
      required:
      - _embedded
      - _links
      - page
      properties:
        _embedded:
          type: object
          required:
          - consents
          properties:
            consents:
              type: array
              items:
                $ref: '#/components/schemas/consentResource'
        _links:
          type: object
          required:
          - self
          - first
          - last
          properties:
            self:
              $ref: '#/components/schemas/link'
              description: Link to the current page of consent resources. This link
                is always present.
            first:
              $ref: '#/components/schemas/link'
              description: Link to the first page of consent resources.
            prev:
              $ref: '#/components/schemas/link'
              description: Link to the previous page of consent resources. If there
                is no previous page, this link is not present.
            next:
              description: Link to the next page of consent resources. If there is
                no next page, this link is not present.
              $ref: '#/components/schemas/link'
            last:
              $ref: '#/components/schemas/link'
              description: Link to the last page of consent resources.
        page:
          $ref: '#/components/schemas/page'
    requestedSingleImmediatePayment:
      title: Single, immediate payment
      description: A single, immediate payment, containing the payment type and amount.
      type: object
      properties:
        type:
          type: string
          const: SingleImmediate
        amount:
          $ref: '#/components/schemas/Money'
      required:
      - type
      - amount
    requestedC2cPayment:
      title: Consumer-to-consumer (C2C) payment
      description: A consumer-to-consumer (C2C) payment, containing the payment type,
        amount, ultimate beneficiary name and IBAN.
      type: object
      properties:
        type:
          type: string
          const: C2c
        amount:
          $ref: '#/components/schemas/Money'
        ultimateBeneficiaryName:
          type: string
          minLength: 1
          maxLength: 70
          description: The name of the ultimate beneficiary of the payment.
        ultimateBeneficiaryIban:
          $ref: '#/components/schemas/IBAN'
          description: The IBAN of the ultimate beneficiary of the payment.
      required:
      - type
      - amount
      - ultimateBeneficiaryName
      - ultimateBeneficiaryIban
    requestedEventDependentPayment:
      title: Event-dependent payment
      description: An event-dependent payment that contains the payment type, amount,
        capture trigger and amount payment type.
      type: object
      properties:
        type:
          type: string
          const: EventDependent
        description:
          type: string
          description: The merchant's description for the goods that were sold.
        captureTrigger:
          type: string
          enum:
          - Shipping
          - Delivery
          - Availability
          - ServiceFulfilment
          - Other
          description: The trigger for capturing the payment.
        amountPaymentType:
          type: string
          enum:
          - Pay
          - PayUpTo
          description: Indicates if the consumer must be charged the complete amount
            or up to the amount.
        maxAuthToCaptureTime:
          type: integer
          description: The maximum time, in seconds, between authorisation and capture.
            The default value is `604800 `, which translates to one week.
          default: 604800
        multiCapturesAllowed:
          type: boolean
          description: Indicates if multiple captures are allowed. The default value
            is `false`.
          default: false
        reason:
          type: string
          description: The reason for the payment.
        amount:
          $ref: '#/components/schemas/Money'
      required:
      - type
      - amount
      - captureTrigger
      - amountPaymentType
    requestedSubscriptionPayment:
      title: Subscription payment
      description: A subscription-based payment plan, containing the frequency, the
        amount, and other subscription-specific information.
      type: object
      properties:
        type:
          type: string
          const: Subscription
        amount:
          $ref: '#/components/schemas/Money'
        startAt:
          type: string
          format: date-time
          description: The date and time when the subscription starts.
        firstPaymentAt:
          type: string
          format: date-time
          description: The date and time when the first payment is captured. The payment
            capture can occur later than the value that is specified in the `startAt`
            field  when there is a free-trial period at the beginning of the subscription.
        endAt:
          type: string
          format: date-time
          description: The date and time when the subscription will end. This is optional
            if the subscription is open ended.
        repetition:
          type: string
          enum:
          - Weekly
          - Monthly
          - Quarterly
          - HalfYearly
          - Yearly
          description: The repetition cycle for the subscription collections.
      required:
      - type
      - amount
      - startAt
      - firstPaymentAt
      - repetition
    requestedPaymentPlan:
      type: object
      oneOf:
      - $ref: '#/components/schemas/requestedSingleImmediatePayment'
      - $ref: '#/components/schemas/requestedC2cPayment'
      - $ref: '#/components/schemas/requestedEventDependentPayment'
      - $ref: '#/components/schemas/requestedSubscriptionPayment'
      discriminator:
        propertyName: type
        mapping:
          SingleImmediate: '#/components/schemas/requestedSingleImmediatePayment'
          C2c: '#/components/schemas/requestedC2cPayment'
          EventDependent: '#/components/schemas/requestedEventDependentPayment'
          Subscription: '#/components/schemas/requestedSubscriptionPayment'
    requestedAddress:
      type: object
      properties:
        companyName:
          description: Consumer PSPs can give the name of the company to indicate
            that the address belongs to a business entity.
          type: string
          minLength: 1
          maxLength: 128
        recipientName:
          type: string
          description: The name of the recipient.
          minLength: 1
          maxLength: 128
        line1:
          type: string
          description: The first line of the address.
          minLength: 1
          maxLength: 300
        line2:
          type: string
          description: The second line of the address.
          minLength: 1
          maxLength: 300
        city:
          type: string
          description: The city of the address.
          minLength: 1
          maxLength: 64
        postalCode:
          type: string
          description: The postal code of the address.
          minLength: 1
          maxLength: 32
        state:
          type: string
          description: The state of the address.
          minLength: 1
          maxLength: 300
        countryCode:
          type: string
          description: The country code of the address.
          pattern: ^[A-Z]{2}$
      required:
      - recipientName
      - line1
      - city
      - postalCode
    requestedConsentDetails:
      type: object
      properties:
        description:
          type: string
          description: The description in the consent request. The description is
            provided by the acceptor.
          minLength: 1
          maxLength: 128
        orderPageUrl:
          type: string
          description: The URL of the order page. The URL is provided by the acceptor
            and can be called by the wallet to display the order inside the shop application.
            The URL must be a valid HTTPS URL.
        gift:
          type: boolean
          description: Indicates whether the purchased goods are a gift for someone
            else. The gift flag is set by the acceptor.
          default: false
        billingAddress:
          description: The billing address of the consumer.
          $ref: '#/components/schemas/requestedAddress'
        shippingAddress:
          description: The shipping address of the consumer.
          $ref: '#/components/schemas/requestedAddress'
        shippingCosts:
          description: The shipping costs (if any exist).
          $ref: '#/components/schemas/Money'
        basketItems:
          type: array
          items:
            $ref: '#/components/schemas/consentBasketItem'
    requestNewConsentRequest:
      type: object
      properties:
        paymentPlan:
          description: The proposed payment plan.
          $ref: '#/components/schemas/requestedPaymentPlan'
        orderReferenceId:
          description: The order reference ID, which is an external ID that the acceptor
            can use to retrieve consent resources.
          type: string
        acceptor:
          description: Acceptor data
          type: object
          required:
          - id
          - name
          - mcc
          - countryCode
          - shop
          properties:
            id:
              description: The acceptor ID, as is known to the acceptor PSP.
              type: string
            name:
              description: The legal name of the acceptor. As part of a consumer-to-consumer
                (C2C) payment, this value is the name of the C2C provider.
              type: string
            mcc:
              $ref: '#/components/schemas/MerchantCategoryCode'
              description: |
                The merchant category code (MCC) of the acceptor. See ISO 18245:2023 for more information on available merchant category codes.
            countryCode:
              description: The acceptor's country code.
              type: string
              pattern: ^[A-Z]{2}$
            shop:
              description: Data that is related to the acceptor's shop.
              type: object
              required:
              - id
              - name
              properties:
                id:
                  description: The acceptor shop ID.
                  type: string
                name:
                  description: The name of the acceptor shop. As part of a consumer-to-consumer
                    (C2C) payment, this value is the name of the C2C provider.
                  type: string
        consumerIdentifier:
          description: |-
            Data to identify the consumer that triggered the consent request.
            Note that if you include an optional parameter such as **consumerIdentifier**, its required properties become mandatory to include also.
          type: object
          properties:
            walletId:
              description: The wallet ID of the consumer.
              type: string
              format: uuid
          required:
          - walletId
        returnUrl:
          description: The Wero pay page redirects to this URL after the consumer
            has granted or denied consent.
          type: string
        callbackUrl:
          description: The URL to which EPI central services send an update after
            the consent token or its state is updated.
          type: string
        printOptions:
          type: object
          description: If provided, the consent can then be used on a given artefact
            such as an invoice.
          properties:
            lifetime:
              type: integer
              description: The lifetime for the consent that is specified in minutes.
                Print artefacts such as invoices can use the `lifetime` value to highlight
                the time constraint on receiving payment. The default is 12 weeks
                (120,960 minutes), and the maximum allowed lifetime is 24 weeks (241,920
                minutes).
              default: 120960
              maximum: 241920
              minimum: 1
            format:
              description: Acceptor PSPs can enable acceptors to create a payment
                link or QR code through selecting one of the following format options.
                The payment amount is mandatory and fixed.  It cannot be modified
                by the consumer during payment.  All payment links or QR codes can
                receive payment one time.
              oneOf:
              - const: printLink
                description: EPI returns a payment link in the response body of the
                  consent request.
                title: printLink
                default: printLink
              - const: printQR
                description: EPI returns a QR code in the response body of the consent
                  request.
                title: printQR
                default: printQR
              - const: printQRAndLink
                description: EPI returns both a payment link and QR code in the response
                  body of the consent request.
                title: printQRAndLink
                default: printQRAndLink
              - type: string
                title: future option
                not:
                  enum:
                  - printLink
                  - printQR
                  - printQRAndLink
                description: |
                  This property is extensible to accommodate future consent application use-cases.
              default: default
              examples:
              - printQRAndLink
              - printLink
        details:
          description: Additional details about the consent request, for example,
            description, billing address, shipping address and basket items.
          $ref: '#/components/schemas/requestedConsentDetails'
        easyCheckout:
          $ref: '#/components/schemas/easyCheckout'
        businessRules:
          $ref: '#/components/schemas/businessRules'
      required:
      - paymentPlan
      - acceptor
      - orderReferenceId
    setEasyCheckoutProfileRequest:
      type: object
      required:
      - shippingAddress
      properties:
        contact:
          type: object
          properties:
            emailAddress:
              description: E-mail address. This property is required if the acceptor
                PSP requested the e-mail address for this easy-checkout.
              type: string
              format: email
            phoneNumber:
              description: Must be a valid mobile phone number in E.164 format. This
                property is required if the acceptor PSP requested the phone number
                for this easy-checkout.
              type: string
        shippingAddress:
          $ref: '#/components/schemas/requestedAddress'
        billingAddress:
          $ref: '#/components/schemas/requestedAddress'
    InboundConsumerDeviceTelemetry:
      type: object
      title: Consumer device telemetry
      description: |-
        Telemetry data ("device fingerprint") of the device used by the consumer, as reported by the wallet application.

        EPI cannot guarantee consumer PSPs will send a complete set of consumer device telemetry properties, and therefore they are treated as optional.

        It is possible to send additional properties in this object, which EPI will pass on verbatim to EPI's fraud scoring service provider for evaluation.

        This is to allow for easier integration on the consumer PSP side.

        However, PSPs are strongly encouraged to provide values for the properties as specified here where possible in order for EPI to provide the best possible fraud scoring.
      additionalProperties: true
      properties:
        deviceIpAddress:
          description: The IPv4 or IPv6 address of the consumer's device.
          type: string
          example: 192.0.2.123
        deviceUserAgent:
          description: The user agent string of the device used by the consumer. This
            will often contain information redundantly captured in the `deviceOs`
            and `deviceModel` properties.
          type: string
          examples:
          - Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15
            ...
          - Mozilla/5.0 (Linux; Android 10; Pixel 3) AppleWebKit/537.36...
        deviceModel:
          description: The model of the device used by the consumer.
          type: string
          examples:
          - iPhone12,1
          - Pixel 3
        deviceScreenResolution:
          description: The screen resolution of the device used by the consumer, in
            pixels (width x height).
          type: string
          examples:
          - 828x1792
          - 1080x2280
        deviceCellularProviders:
          type: string
          description: The cellular provider(s) of the device used by the consumer.
            This is a comma-separated list of the names of the cellular providers.
          examples:
          - Telekom, Vodafone
          - T-Mobile
        deviceLocation:
          description: The location of the device used by the consumer. This is a
            comma-separated list of the latitude and longitude of the device.
          type: string
          example: 37.7749,-122.4194
        deviceTimeZone:
          description: The time zone of the device used by the consumer.
          type: string
          example: America/Los_Angeles
        deviceId:
          description: 'The unique device identifier of the device used by the consumer.
            Note: Formats differ (UUID on iOS vs. 64-bit hex string on Android).'
          type: string
          examples:
          - 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
          - 2b6f0cc904d137be2e1730235f5664094b831186
        deviceOs:
          description: The operating system of the device used by the consumer.
          type: string
          examples:
          - iOS
          - Android
        deviceLanguage:
          description: The language of the device used by the consumer.
          type: string
          example: en_US
        deviceTime:
          description: The time on the device used by the consumer, in ISO 8601 format.
          type: string
          format: date-time
          example: '2023-09-25T12:34:56Z'
    updateCurrentTokenRequest:
      type: object
      properties:
        token:
          type: string
        consumerDeviceTelemetry:
          $ref: '#/components/schemas/InboundConsumerDeviceTelemetry'
      required:
      - token
    shopFrontResource:
      type: object
      description: An overview of the shop that helps consumers recognise and verify
        where the consent request comes from.
      properties:
        websiteUrl:
          description: The URL of the shop's website.
          type: string
        shopName:
          description: The name of the shop.
          type: string
        shopLogoFallbackIdentifier:
          description: The identifier of the fallback logo, in case the shop logo
            is not available or cannot be loaded. The fallback logo depends on the
            availability of EPI's image catalogue. You can ignore this  until the
            release of the image catalogue.
          type: string
        _links:
          type: object
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            shopLogo:
              $ref: '#/components/schemas/link'
      required:
      - shopName
      - shopLogoFallbackIdentifier
      - _links
      title: Shop front
    phoneNumber:
      title: phoneNumber
      type: string
      description: Consumer's mobile phone number that receives the authentication
        request SMS. Must be a valid mobile phone number in E.164 format.
      pattern: ^\+\d{5,25}$
      minLength: 6
    OAuthTokenRequestWithJwtBearer:
      type: object
      properties:
        grant_type:
          type: string
          description: Method of authentication. OTP, JWT-Bearer and refresh token
            are supported.
          enum:
          - urn:ietf:params:oauth:grant-type:jwt-bearer
        assertion:
          type: string
          description: |-
            The JSON Web Token (JWT), signed with the wallet's private key.
            Must be a valid JSON Web Signature (JWS).
        scope:
          $ref: '#/components/schemas/scopes'
      required:
      - grant_type
      - assertion
    OAuthTokenRequestWithOtp:
      type: object
      properties:
        grant_type:
          type: string
          enum:
          - otp
          description: Method of authentication. OTP, JWT-Bearer and refresh token
            are supported.
        phoneNumber:
          $ref: '#/components/schemas/phoneNumber'
        otp:
          type: string
          description: One-time password that the consumer received via SMS.
      required:
      - grant_type
      - phoneNumber
      - otp
    OAuthTokenRequestWithRefreshToken:
      type: object
      properties:
        grant_type:
          type: string
          enum:
          - refresh_token
          description: Method of authentication. OTP, JWT-Bearer and refresh token
            are supported.
        refresh_token:
          type: string
          description: Value of the refresh token issued by EPI central services.
        scope:
          $ref: '#/components/schemas/scopes'
      required:
      - grant_type
      - refresh_token
    NoActiveConsumersException:
      type: object
      properties:
        type:
          type: string
          format: uri-reference
          description: A URI reference that uniquely identifies the problem type only
            in the context of the provided API.
          enum:
          - /problem/authentication/no-active-consumers
        title:
          type: string
          description: A short, human-readable summary of the problem type.
          enum:
          - Token cannot be generated
        status:
          type: integer
          format: int32
          description: The "status" member is only advisory; it conveys the HTTP status
            code used for the convenience of the consumer. This attribute is always
            the same as the status code in the actual HTTP response.
          default: 422
        callId:
          type: string
          description: A call ID that identifies the specific occurrence of the problem.
          example: 00000000000000000000000000000000-0000000000000000
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of
            the problem.
          example: There are no active consumers found for the supplied issuer
      required:
      - type
      - title
      - status
      - callId
    WalletNotFoundException:
      type: object
      properties:
        type:
          type: string
          format: uri-reference
          description: A URI reference that uniquely identifies the problem type only
            in the context of the provided API.
          enum:
          - /problem/authentication/wallet-not-found
        title:
          type: string
          description: A short, human-readable summary of the problem type.
          enum:
          - Wallet not found
        status:
          type: integer
          format: int32
          description: The `status` member is only advisory; it conveys the HTTP status
            code that is used for the convenience of the consumer. This attribute
            is always the same as the status code in the actual HTTP response.
          default: 422
        callId:
          type: string
          description: A call ID that identifies the specific occurrence of the problem.
          example: 00000000000000000000000000000000-0000000000000000
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of
            the problem.
          example: Wallet 'c8d71569-d703-453e-951a-99830eb61ab6' is not known.
      required:
      - type
      - title
      - status
      - callId
    RevokeRefreshTokenRequest:
      type: object
      properties:
        token_type_hint:
          type: string
          enum:
          - refresh_token
          description: Type of the token to be revoked.
        token:
          type: string
          description: Value of the refresh token issued by EPI central services.
      required:
      - token_type_hint
      - token
    ConsumerResourceExternalId:
      type: object
      required:
      - type
      properties:
        type:
          type: string
          description: 'Type of identifier: External or PhoneNumber.'
          enum:
          - External
        externalId:
          type: string
          description: Unique ID as provided from the PSP.
        consumerPspId:
          type: string
          format: uuid
          description: PSP ID of the consumer.
    ConsumerResourcePhoneNumberId:
      type: object
      required:
      - type
      properties:
        type:
          type: string
          description: 'Type of identifier: External or PhoneNumber.'
          enum:
          - PhoneNumber
        phoneNumber:
          type: string
          description: Phone number in E.164 format.
    ConsumerResourceStatus:
      title: Consumer status type
      type: string
      enum:
      - Active
      - Blocked
      - Removed
      example: Active
      description: |-
        The status of a Consumer resource can have the following values:


        |    Value   | Description                                                      |
        |:----------:|:-----------------------------------------------------------------------------------------------------:|
        | `Active`   | The default status when a consumer is created.                                                        |
        | `Blocked`  | The consumer is blocked. No action can be done with that consumer anymore.                            |
        | `Removed`  | ❗️ The consumer is removed. This is an internal state that is used only in EPI central services. Members and consumers cannot retrieve consumers in the `Removed` state. |
    ConsumerResource:
      type: object
      required:
      - id
      - identifier
      - status
      - _links
      properties:
        id:
          type: string
          description: ID of the consumer.
        identifier:
          oneOf:
          - $ref: '#/components/schemas/ConsumerResourceExternalId'
          - $ref: '#/components/schemas/ConsumerResourcePhoneNumberId'
          discriminator:
            propertyName: type
            mapping:
              External: '#/components/schemas/ConsumerResourceExternalId'
              PhoneNumber: '#/components/schemas/ConsumerResourcePhoneNumberId'
        status:
          $ref: '#/components/schemas/ConsumerResourceStatus'
        reasonForRemoval:
          type: string
          description: The reason why the consumer was removed. Only present when
            the consumer is removed.
          example: ContractTerminated
        consumerName:
          type: object
          required:
          - firstName
          - lastName
          properties:
            firstName:
              type: string
              minLength: 1
              maxLength: 255
              description: The first name of the consumer, as is known to the consumer
                PSP.
            middleNames:
              type: string
              minLength: 1
              maxLength: 255
              description: The middle names of the consumer, as is known to the consumer
                PSP.
            lastName:
              type: string
              minLength: 1
              maxLength: 255
              description: The last name of the consumer, as is known to the consumer
                PSP.
          description: The real name of the consumer, as is known to the consumer
            PSP.
        pspObfuscatedConsumerName:
          type: object
          required:
          - firstName
          - pspObfuscatedLastName
          properties:
            firstName:
              type: string
              minLength: 1
              maxLength: 255
              description: The first name of the consumer, as is known to the consumer
                PSP.
            pspObfuscatedLastName:
              type: string
              minLength: 1
              maxLength: 255
              description: The last name of the consumer, obfuscated by the consumer
                PSP.
          description: The know-your-customer (KYC) name of the consumer but obfuscated
            by the consumer PSP. Present only if the consumer PSP did not provide
            the consumerName.
        dateOfBirth:
          type: string
          format: date
        birthCountry:
          type: string
          minLength: 2
          maxLength: 2
        nationality:
          type: string
          minLength: 2
          maxLength: 2
        residenceCountry:
          type: string
          minLength: 2
          maxLength: 2
        residenceCity:
          type: string
          minLength: 1
          maxLength: 255
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            self:
              $ref: '#/components/schemas/link'
            paymentSourceProfiles:
              $ref: '#/components/schemas/link'
            contactItems:
              $ref: '#/components/schemas/link'
            pspProfiles:
              $ref: '#/components/schemas/link'
    ConsumersCollectionResource:
      type: object
      required:
      - _embedded
      - _links
      properties:
        _embedded:
          type: object
          required:
          - consumers
          properties:
            consumers:
              type: array
              items:
                $ref: '#/components/schemas/ConsumerResource'
        _links:
          type: object
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
    CreateConsumerRequest:
      type: object
      required:
      - externalId
      properties:
        externalId:
          type: string
          minLength: 1
          maxLength: 255
          description: External ID of a consumer, provided by the consumer PSP. Uniquely
            identifies a consumer outside of the EPI context. For EPI to correlate
            consumers across different wallet installations, consumer PSPs must provide
            the same external ID for a particular consumer across wallets.
        consumerName:
          type: object
          required:
          - firstName
          - lastName
          properties:
            firstName:
              type: string
              minLength: 1
              maxLength: 255
              description: The first name of the consumer, as is known to the consumer
                PSP.
            middleNames:
              type: string
              minLength: 1
              maxLength: 255
              description: The middle names of the consumer, as is known to the consumer
                PSP.
            lastName:
              type: string
              minLength: 1
              maxLength: 255
              description: The last name of the consumer, as is known to the consumer
                PSP.
          description: |-
            The full know-your-customer (KYC) name of the consumer, as is known to the consumer PSP.
            > ❗️ Either this object or the `pspObfuscatedConsumerName` is required.

             * If the `consumerName` is provided, EPI obfuscates the display name that is shown to other consumers. However, the consumer can override the default setting and set the full `consumerName` as the display name.
             * If the `consumerName` is not provided, the consumer cannot provision a Wero digital wallet with a means of payment but can receive P2P payments. In that case, the `pspObfuscatedConsumerName` is used as the display name.
        pspObfuscatedConsumerName:
          type: object
          title: PSP-obfuscated consumer name object
          required:
          - firstName
          - pspObfuscatedLastName
          properties:
            firstName:
              type: string
              minLength: 1
              maxLength: 255
              description: The first name of the consumer, as is known to the consumer
                PSP.
            pspObfuscatedLastName:
              type: string
              minLength: 1
              maxLength: 255
              description: |-
                The know-your-customer (KYC) last name of the consumer that the consumer PSP obfuscates to display only the first character followed by one asterisk for each other character. For example:
                 * `D**` instead of `Doe`.
                 * `D*****` instead of `Durand`.
                For information about obfuscation rules, see [Recommended masking rules](doc:obfuscating-consumer-names#recommended-masking-rules).
          description: |-
            The know-your-customer (KYC) name of the consumer but with the last name obfuscated by the consumer PSP. When consumer PSPs enrol consumers in the Wero payment system, creating [wallet-less consumers that can receive P2P payments](ref:post-walletless-p2p-receiver), the consumer PSPs might not want to provide the full consumer names to EPI and can use this option to obfuscate the consumer name. For more information, see [Obfuscated names for wallet-less consumers](doc:person-to-person-payments#psp-obfuscated-names-for-wallet-less-consumers).
            > ❗️ Either this object or the `consumerName` is required.


             * If the `consumerName` is provided, the `pspObfuscatedConsumerName` is ignored.
             * If the `consumerName` is not provided, the `pspObfuscatedConsumerName` is used as the display name that is shown to other consumers.

             `pspObfuscatedLastName` obfuscates the last name of the consumer only to other consumers. The consumer's full name is visible to the consumer PSP.
        dateOfBirth:
          type: string
          format: date
          description: The date of birth of the consumer, as is known to the consumer
            PSP. This information will be used for age verification.
        birthCountry:
          type: string
          minLength: 2
          maxLength: 2
          description: The country of birth of the consumer, as is known to the consumer
            PSP. This information will be used for anti-money-laundering checks.
          example: DE
        residenceCountry:
          type: string
          minLength: 2
          maxLength: 2
          description: The country of residence of the consumer, as is known to the
            consumer PSP. This information will be used for anti-money-laundering
            checks.
          example: NE
        residenceCity:
          type: string
          minLength: 1
          maxLength: 255
          description: The city of residence of the consumer, as is known to the consumer
            PSP. This information will be used for anti-money-laundering checks
          example: Amsterdam
        nationality:
          type: string
          minLength: 2
          maxLength: 2
          description: The nationality of the consumer, as is known to the consumer
            PSP. This information will be used for anti-money-laundering checks.
          example: FR
    UpdateConsumerRequest:
      type: object
      required:
      - consumerName
      properties:
        consumerName:
          type: object
          required:
          - firstName
          - lastName
          properties:
            firstName:
              type: string
              minLength: 1
              maxLength: 255
              description: The first name of the consumer, as is known to the consumer
                PSP.
            middleNames:
              type: string
              minLength: 1
              maxLength: 255
              description: The middle names of the consumer, as is known to the consumer
                PSP.
            lastName:
              type: string
              minLength: 1
              maxLength: 255
              description: The last name of the consumer, as is known to the consumer
                PSP.
          description: The full know-your-customer (KYC) name of the consumer, as
            is known to the consumer PSP.
        dateOfBirth:
          type: string
          format: date
          description: The date of birth of the consumer, as is known to the consumer
            PSP. The date of birth must be provided in the ISO-8601 format, for example,
            `1990-01-01`. This information will be used for age verification.
          example: '1990-01-01'
        birthCountry:
          type: string
          minLength: 2
          maxLength: 2
          description: The country of birth of the consumer.
          example: DE
        nationality:
          type: string
          minLength: 2
          maxLength: 2
          description: The nationality of the consumer.
          example: NL
        residenceCountry:
          type: string
          minLength: 2
          maxLength: 2
          description: The country of residence of the consumer.
          example: FR
        residenceCity:
          type: string
          minLength: 1
          maxLength: 255
          description: The city of residence of the consumer.
          example: Brussels
    RemoveConsumerRequest:
      title: RemoveConsumerRequest
      type: object
      properties:
        reason:
          description: The reason for removing the consumer. Although the reason being
            optional, it is recommended to provide it.
          type: string
          oneOf:
          - const: GDPRCompliance
            description: The consumer has instructed the app or the consumer PSP to
              remove them from the Wero payment system.
            title: GDPR Compliance
            default: GDPRCompliance
          - const: ContractTerminated
            description: The consumer has terminated their contract with the consumer
              PSP.
            title: Termination of Contract
            default: ContractTerminated
          - const: ConsumerDeceased
            description: The consumer is deceased.
            title: Consumer deceased
            default: ConsumerDeceased
          - const: Undefined
            description: The consumer is removed for another reason.
            default: Undefined
            title: Reason undefined
          - type: string
            not:
              enum:
              - GDPRCompliance
              - ContractTerminated
              - ConsumerDeceased
              - Undefined
            description: Placeholder for a future reason, to be defined.
            title: Any String
    BlockConsumerRequest:
      type: object
      required:
      - reason
      properties:
        reason:
          description: The reason for blocking the consumer. This enumeration is extensible;
            additional values might be added.
          type: string
          oneOf:
          - const: ConfirmedScammer
            description: The consumer is a confirmed scammer.
            default: ConfirmedScammer
            title: Confirmed Scammer
          - const: SuspectedFraudster
            description: The consumer is suspected of conducting fraud.
            default: SuspectedFraudster
            title: Suspected Fraudster
          - const: ConfirmedFraudster
            description: The consumer has conducted fraud.
            default: ConfirmedFraudster
            title: Confirmed Fraudster
          - const: MisuseEPIUseCase
            description: The consumer used the standalone Wero digital wallet for
              unlawful purposes.
            default: MisuseEPIUseCase
            title: Misuse of Wero use case
          - const: MisuseEPIP2PUseCase
            description: The consumer has been transferring or requesting money as
              a fake P2Pro scammer or is providing illegal services through P2Pro
              payment services for unlawful purposes.
            default: MisuseEPIP2PUseCase
            title: Misuse of EPI P2Pro Use Case
          - const: ConfirmedMoneyLaundering
            description: The consumer is a confirmed money launderer.
            default: ConfirmedMoneyLaundering
            title: Confirmed Money Laundering
          - const: SuspectedMoneyLaundering
            description: The consumer is a suspected money launderer.
            default: SuspectedMoneyLaundering
            title: Suspected Money Laundering
          - const: MatchPEPOrNegativeLists
            description: The consumer is on a Public Exposed Persons (PEP) or other
              negative blocklist.
            title: Match PEP Or Negative Lists
            default: MatchPEPOrNegativeLists
          - const: Other
            description: The consumer is blocked for reasons unrelated to EPI. For
              example, a negative payment source balance, the consumer is deceased,
              or issues between account holders in a shared accounts use case.
            default: Other
            title: Other
          - type: string
            not:
              enum:
              - SuspectedFraudster
              - ConfirmedScammer
              - ConfirmedFraudster
              - MisuseEPIUseCase
              - MisuseEPIP2PUseCase
              - ConfirmedMoneyLaundering
              - SuspectedMoneyLaundering
              - MatchPEPOrNegativeLists
              - Other
            description: Any other type of block reason not listed above. This property
              is extensible to accommodate future block reasons.
            title: Any string
    email:
      title: Email
      type: string
      pattern: ^(.+)@(\S+)$
      description: Consumer's email address that receives the email message with the
        authentication request.
      examples:
      - someEmail73140990-8c8a-4138-95d7-304cf07b247a@Example.com
    ContactItem:
      type: object
      examples:
      - type: PhoneNumber
        value: '+4915197287357'
        contactItemId: 77ea64ef-658d-4f35-b40c-9cd4ff0e9f03
        createdAt: '2023-05-31T14:06:44.202748107Z'
        verified: false
        nextChallengeNotBefore: '2023-05-31T14:08:44.202961136Z'
        _links:
          self:
            href: https://spi.int.epi.engineering/api/consumers/34a89294-f9fa-42a6-816d-aa9626439745/contact-items/77ea64ef-658d-4f35-b40c-9cd4ff0e9f03
          resendOtp:
            href: https://spi.int.epi.engineering/api/consumers/34a89294-f9fa-42a6-816d-aa9626439745/contact-items/77ea64ef-658d-4f35-b40c-9cd4ff0e9f03/challenges
          respondToChallenge:
            href: https://spi.int.epi.engineering/api/consumers/34a89294-f9fa-42a6-816d-aa9626439745/contact-items/77ea64ef-658d-4f35-b40c-9cd4ff0e9f03/challenge-responses
      properties:
        contactItemId:
          type: string
          description: ID of the contact item.
          format: uuid
        type:
          type: string
          enum:
          - PhoneNumber
          - EmailAddress
          description: 'Type of the contact item: phone number or email address'
          example: PhoneNumber
        value:
          oneOf:
          - $ref: '#/components/schemas/email'
          - $ref: '#/components/schemas/phoneNumber'
        aliasValue:
          type: string
          description: Alias value of the contact item if it is a phone number of
            overseas France or of Monaco. The phone number is in E.164 format.
        createdAt:
          type: string
          description: Time at which the contact item was created (and added to the
            contact item list).
          format: date-time
          example: '2023-05-03T10:39:09.742283565Z'
        verified:
          type: boolean
          description: Indicates whether the contact item has been verified.
        verifiedAt:
          type: string
          format: date-time
          description: Time at which the contact item was verified.
          example: '2023-05-03T10:39:09.779658812Z'
        nextChallengeNotBefore:
          type: string
          description: The next one-time password can be requested after this time.
          format: date-time
          example: '2023-05-03T10:39:29.699035547Z'
        linkedPaymentSourceId:
          type: string
          format: uuid
          description: ID of the linked payment source if the contact item is a proxy.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            resendOtp:
              $ref: '#/components/schemas/link'
            respondToChallenge:
              $ref: '#/components/schemas/link'
            paymentSourceProfile:
              $ref: '#/components/schemas/link'
      required:
      - contactItemId
      - type
      - value
      - createdAt
      - verified
      - _links
    CreateContactItemRequest:
      type: object
      required:
      - type
      - value
      properties:
        type:
          type: string
          enum:
          - PhoneNumber
          - EmailAddress
          description: 'Type of the contact item: phone number or email address'
          example: PhoneNumber
        value:
          oneOf:
          - $ref: '#/components/schemas/phoneNumber'
          - $ref: '#/components/schemas/email'
    BlockedConsumerResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        label:
          type: string
        _links:
          type: object
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - id
      - label
      - _links
    SelfLinkOnly:
      type: object
      required:
      - self
      properties:
        self:
          $ref: '#/components/schemas/link'
    FraudScore:
      type: object
      properties:
        score:
          type: integer
          maximum: 99
          minimum: 0
          example: 50
          description: Indicates the probability that this is a fraudulent action.
            The higher the score, the higher the probability.
        primaryRiskVector:
          type: string
          enum:
          - AccountTakeover
          - RequestSpam
          - MerchantScam
          - Manipulation
          - CompromisedDevice
          - Ubiquity
          - Other
          example: AccountTakeover
          description: |-
            Indicates the primary risk vector for this fraud score. The primary risk vector is the type of fraud that is most likely to have occurred.

            `AccountTakeover`: Account takeover. Unauthorized access and control detected, implying the user account may be operated by an entity other than the owning consumer.

            `RequestSpam`: Request spam. The money transfer request is likely illegitimate. This is based on factors such as the number of requests being sent by this consumer within a short period.

            `MerchantScam`: Merchant scam. Transaction is associated with a merchant that has been identified as engaging in fraudulent or suspicious activities.

            `Manipulation`: Detected anomalies in user behavior, indicating potential account manipulation, typically associated with phishing attempts.

            `CompromisedDevice`: Compromised device. Potential unauthorized device access, detected patterns indicative of possible physical compromise of the device, such as theft or loss.

            `Ubiquity`: Multiple geolocations have been recorded for this consumer within a short time frame.

            `Other`: Other reason.
      required:
      - score
      - primaryRiskVector
    ConsumerFraudScores:
      type: object
      required:
      - type
      properties:
        type:
          type: string
          const: consumer-fraud-scores
        user:
          $ref: '#/components/schemas/FraudScore'
          description: The fraud score for the consumer of the provisioning.
    FraudScoreError:
      type: object
      properties:
        type:
          type: string
          const: fraud-scores-error
        error:
          type: string
          enum:
          - Timeout
          - OtherError
          description: |-
            An error has occurred when attempting to retrieve the fraud score.
            'Timeout': The fraud score could not be retrieved within the timeout period. 'OtherError': An unspecified error has occurred when attempting to retrieve the fraud score.
      required:
      - error
      - type
    OutboundConsumerDeviceTelemetry:
      type: object
      title: Consumer device telemetry
      description: |-
        Telemetry data ("device fingerprint") of the device used by the consumer, as reported by EPI central services.

        The availability of the properties of this object may vary based on whether the consumer is using Wero standalone wallet or a consumer PSP's banking app.

        EPI cannot guarantee consumer PSPs will send a complete set of consumer device telemetry properties, and therefore they must be treated as optional.

        Individual differences between Wero and banking apps are documented in the respective property descriptions.
      additionalProperties: true
      required:
      - clientIpAddress
      - clientUserAgent
      properties:
        deviceIpAddress:
          description: The IPv4 or IPv6 address of the consumer's device.
          type: string
          example: 192.0.2.123
        deviceUserAgent:
          description: |-
            The user agent string of the device used by the consumer. This will often contain information redundantly captured in the `deviceOs` and `deviceModel` properties.
            Similar to `deviceIpAddress`, this property is most accurately inferred by the EPI backend itself in the case of the standalone Wero digital wallet app (_Wero_). But in case of banking apps, this property should be provided by the consumer PSP on behalf of the consumer.
          type: string
          examples:
          - Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15
            ...
          - Mozilla/5.0 (Linux; Android 10; Pixel 3) AppleWebKit/537.36...
        clientUserAgent:
          description: The user agent string of the client making the HTTP request
            to the EPI backend. This is the user agent of the consumer PSP's backend
            in the case of consumer PSP's own banking apps, and the user agent of
            the consumer device in the case of the standalone Wero digital wallet
            app (_Wero_).
          type: string
          examples:
          - Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15
            ...
          - Mozilla/5.0 (Linux; Android 10; Pixel 3) AppleWebKit/537.36...
        deviceModel:
          description: The model of the device used by the consumer.
          type: string
          examples:
          - iPhone12,1
          - Pixel 3
        deviceScreenResolution:
          description: The screen resolution of the device used by the consumer, in
            pixels (width x height).
          type: string
          examples:
          - 828x1792
          - 1080x2280
        deviceCellularProviders:
          type: string
          description: The cellular provider(s) of the device used by the consumer.
            This is a comma-separated list of the names of the cellular providers.
          examples:
          - Telekom, Vodafone
          - T-Mobile
        deviceLocation:
          description: The location of the device used by the consumer. This is a
            comma-separated list of the latitude and longitude of the device.
          type: string
          example: 37.7749,-122.4194
        deviceTimeZone:
          description: The time zone of the device used by the consumer.
          type: string
          example: America/Los_Angeles
        deviceId:
          description: 'The unique device identifier of the device used by the consumer.
            Note: Formats differ (UUID on iOS vs. 64-bit hex string on Android).'
          type: string
          examples:
          - 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
          - 2b6f0cc904d137be2e1730235f5664094b831186
        deviceOs:
          description: The operating system of the device used by the consumer.
          type: string
          examples:
          - iOS
          - Android
        deviceLanguage:
          description: The language of the device used by the consumer.
          type: string
          example: en_US
        deviceTime:
          description: The time on the device used by the consumer, in ISO 8601 format.
          type: string
          format: date-time
          example: '2023-09-25T12:34:56Z'
        clientIpAddress:
          description: The IPv4 or IPv6 address of the client making the HTTP request
            to the EPI backend. This is the IP address of the consumer PSP's backend
            in the case of consumer PSP's banking apps, and the IP address of the
            consumer device in the case of standalone Wero digital wallet app (_Wero_).
          type: string
          example: 198.51.100.101
    ConsumerFraudRiskInformationResource:
      title: Fraud risk information resource
      description: HAL resource representation of the fraud risk information about
        the consumer during wallet provisioning in a mobile banking app.
      type: object
      properties:
        fraudRiskInformation:
          type: object
          description: Contains information about the fraud risk assessment during
            wallet provisioning.
          properties:
            fraudScores:
              oneOf:
              - $ref: '#/components/schemas/ConsumerFraudScores'
              - $ref: '#/components/schemas/FraudScoreError'
              discriminator:
                propertyName: type
                mapping:
                  consumer-fraud-scores: '#/components/schemas/ConsumerFraudScores'
                  fraud-scores-error: '#/components/schemas/FraudScoreError'
              description: Contains fraud scores during the provisioning of the wallet.
            consumerDeviceTelemetry:
              $ref: '#/components/schemas/OutboundConsumerDeviceTelemetry'
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            consumer:
              $ref: '#/components/schemas/link'
      required:
      - fraudRiskInformation
      - _links
      example:
        fraudRiskInformation:
          fraudScores:
            type: consumer-fraud-scores
            user:
              score: 10
              primaryRiskVector: AccountTakeover
          consumerDeviceTelemetry:
            deviceModel: iPhone12,1
            deviceScreenResolution: 828x1792
            deviceCellularProviders: Telekom, Vodafone
            deviceLocation: 37.7749,-122.4194
            deviceTimeZone: America/Los_Angeles
            deviceId: 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
            deviceOs: iOS
            deviceLanguage: en_US
            deviceTime: '2023-09-25T12:34:56Z'
            deviceIpAddress: 192.0.2.123
            clientIpAddress: 198.51.100.101
            deviceUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)
              AppleWebKit/605.1.15 ...
            clientUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)
              AppleWebKit/605.1.15 ...
        _links:
          consumer:
            href: https://api.epi-services.eu/api/consumer/27b7911f-0b76-4db8-9989-ceb44343c3f8/fraud-risk-information
    PaymentSourceProfileRequest:
      type: object
      properties:
        obfuscateConsumerName:
          type: boolean
          description: |-
            Indicates whether the consumer has chosen to display only an obfuscated version of their name instead of their  full name to other consumers in P2P transactions. An obfuscated name can take the form of a masked name or  pseudonym. For an example of how a masked name displays, see  [Wero proxy look up database](doc:selecting-contacts-and-looking-up-proxies#wero-proxy-look-up-database). Note that the default behaviour for whether an obfuscated or non-obfuscated name will be displayed - as well as whether this flag will be taken into consideration - depends on the policies of the country of the consumer's payment source.
            > ❗️The `obfuscateConsumerName` field is required for all consumers. If the field is not provided, the request will fail.
          example: true
      required:
      - obfuscateConsumerName
    ProxyResource:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID of the Proxy resource.
        value:
          type: string
          description: Value of the proxy. Phone number or email address.
        type:
          type: string
          enum:
          - PhoneNumber
          - EmailAddress
          description: Type of the proxy.
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - id
      - value
      - type
    Embedded:
      type: object
      properties:
        paymentSourceProxies:
          type: array
          items:
            $ref: '#/components/schemas/ProxyResource'
      required:
      - paymentSourceProxies
    PaymentSourceProfileResource:
      type: object
      examples:
      - paymentSourceId: 6c82d39e-f243-4ad3-8d96-1a86b6fa1382
        displayName: Some displayName
        isDisplayNameObfuscated: false
        _links:
          self:
            href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/6c82d39e-f243-4ad3-8d96-1a86b6fa1382
          proxies:
            href: https://api.epi-services.eu/api/consumers/af85b240-3727-4264-9e2e-2f9ab5984cc3/payment-source-profiles/6c82d39e-f243-4ad3-8d96-1a86b6fa1382/proxies
        _embedded:
          paymentSourceProxies: [
            ]
      properties:
        paymentSourceId:
          type: string
          format: uuid
          description: ID of the payment source.
        displayName:
          type: string
          description: The consumer's full name, as is provided by the consumer PSP,
            or the obfuscated version of the name. This depends on whether the consumer
            has chosen to display an obfuscated name to other consumers in  P2P transactions
            as well as country-specific obfuscation policies.
        isDisplayNameObfuscated:
          type: boolean
          description: Indicates whether the consumer has chosen to display only an
            obfuscated version of their name, instead of their  full name, to other
            consumers in P2P transactions. Note that the default behaviour for whether
            an obfuscated or  non-obfuscated name will be displayed depends on the
            policies of the country of the consumer's payment source.
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            self:
              $ref: '#/components/schemas/link'
            proxies:
              $ref: '#/components/schemas/link'
        _embedded:
          $ref: '#/components/schemas/Embedded'
      required:
      - paymentSourceId
      - displayName
      - isDisplayNameObfuscated
      - _links
      - _embedded
    ProxyCollectionResource:
      type: object
      properties:
        _embedded:
          $ref: '#/components/schemas/Embedded'
        _links:
          type: object
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - _embedded
      - _links
    PaymentSourceInfoPaymentAccount:
      type: object
      required:
      - type
      title: Payment account
      properties:
        type:
          type: string
          enum:
          - PaymentAccount
        paymentSourceId:
          type: string
          format: uuid
          description: The ID of the payment source.
      examples:
      - type: PaymentAccount
        paymentSourceId: e369792d-ce10-4fb3-afbf-6a9632cb5156
    PaymentSourceInfo:
      type: object
      description: ''
      oneOf:
      - $ref: '#/components/schemas/PaymentSourceInfoPaymentAccount'
      discriminator:
        propertyName: type
        mapping:
          PaymentAccount: '#/components/schemas/PaymentSourceInfoPaymentAccount'
    ProxyProblem:
      type: object
      title: Proxy problem
      description: The contact item is already linked (as a proxy) to another payment
        source profile. See the `type` property for further details.
      properties:
        type:
          type: string
          format: uri-reference
          description: |-
            Indicates whether the proxy can be transferred:
             - `proxy-transfer-confirmation-needed`: The proxy is linked to another of the consumer's payment source profiles. The consumer must confirm that they want to transfer the proxy from one payment source profile to the other. After confirmation, this endpoint call can be repeated (with the same parameters in the request except that `proxyTransferConfirmation` is set to `true`).
             - `proxy-already-in-use`: The proxy is linked to another consumer's payment source profile and cannot be transferred.
          enum:
          - /problem/payment-source-profiles/proxy-already-in-use
          - /problem/payment-source-profiles/proxy-transfer-confirmation-needed
        title:
          type: string
          description: A short, human-readable summary of the problem type.
          default: Conflict
        status:
          type: integer
          format: int32
          description: The "status" member is only advisory; it conveys the HTTP status
            code used for the convenience of the consumer. This attribute is always
            the same as the status code in the actual HTTP response.
          default: 409
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of
            the problem.
        callId:
          type: string
          description: A call ID that identifies the specific occurrence of the problem.
          example: 00000000000000000000000000000000-0000000000000000
        currentLinkedPaymentSource:
          $ref: '#/components/schemas/PaymentSourceInfo'
    PspProfileResource:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The ID of this profile. Always the same as the consumer PSP
            ID.
        consumerName:
          type: object
          required:
          - firstName
          - lastName
          properties:
            firstName:
              type: string
              minLength: 1
              maxLength: 255
              description: The first name of the consumer, as is known to the consumer
                PSP.
            middleNames:
              type: string
              minLength: 1
              maxLength: 255
              description: The middle names of the consumer, as is known to the consumer
                PSP.
            lastName:
              type: string
              minLength: 1
              maxLength: 255
              description: The last name of the consumer, as is known to the consumer
                PSP.
          description: The real name of the consumer, as is known to the consumer
            PSP.
        pspObfuscatedConsumerName:
          type: object
          required:
          - firstName
          - pspObfuscatedLastName
          properties:
            firstName:
              type: string
              minLength: 1
              maxLength: 255
              description: The first name of the consumer, as is known to the consumer
                PSP.
            pspObfuscatedLastName:
              type: string
              minLength: 1
              maxLength: 255
              description: The last name of the consumer, obfuscated by the consumer
                PSP.
          description: The know-your-customer (KYC) name of the consumer but obfuscated
            by the consumer PSP. Present only if the consumer PSP did not provide
            the consumerName.
        dateOfBirth:
          type: string
          format: date
        birthCountry:
          type: string
          minLength: 2
          maxLength: 2
        nationality:
          type: string
          minLength: 2
          maxLength: 2
        residenceCountry:
          type: string
          minLength: 2
          maxLength: 2
        residenceCity:
          type: string
          minLength: 1
          maxLength: 255
        externalId:
          type: string
          description: The external ID of this customer, as defined by the consumer
            PSP (for example, customer number).
          minLength: 1
          maxLength: 255
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - id
      - externalId
    PspProfilesCollectionResource:
      type: object
      properties:
        _embedded:
          type: object
          required:
          - pspProfiles
          properties:
            pspProfiles:
              type: array
              items:
                $ref: '#/components/schemas/PspProfileResource'
        _links:
          type: object
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - _embedded
      - _links
    EasyCheckoutAddress:
      type: object
      required:
      - recipientName
      - line1
      - city
      - postalCode
      - countryCode
      properties:
        companyName:
          description: Consumer PSPs can give the name of the company to indicate
            that the address belongs to a business entity.
          type: string
          minLength: 1
          maxLength: 128
          example: Dental Guardians Ltd.
        recipientName:
          description: The recipient's name.
          type: string
          minLength: 1
          maxLength: 128
          example: John Doe
        line1:
          description: The first line of the address.
          type: string
          minLength: 1
          maxLength: 300
          example: 123 Main St
        line2:
          description: The second line of the address.
          type: string
          minLength: 1
          maxLength: 300
          example: Apt 123
        city:
          description: The city of the address.
          type: string
          minLength: 1
          maxLength: 64
          example: Anytown
        state:
          description: The state of the address.
          type: string
          minLength: 1
          maxLength: 300
          example: CA
        postalCode:
          description: The postal code of the address.
          type: string
          minLength: 1
          maxLength: 32
          example: '12345'
        countryCode:
          description: The ISO 3166-1 alpha-2 country code of the address.
          type: string
          pattern: ^[A-Z]{2}$
          example: US
    EasyCheckoutProfileProperties:
      type: object
      required:
      - shippingAddress
      - emailAddress
      - preferred
      properties:
        shippingAddress:
          description: The consumer's shipping address.
          $ref: '#/components/schemas/EasyCheckoutAddress'
        billingAddress:
          description: The consumer's billing address. This defaults to the shipping
            address if not set.
          $ref: '#/components/schemas/EasyCheckoutAddress'
        phoneNumber:
          description: The consumer's phone number.
          type: string
          example: '+49123456789'
        emailAddress:
          description: The consumer's email address.
          type: string
          example: test@test.org
        preferred:
          description: Whether this profile is the consumer's preferred profile. Only
            one profile can be preferred at a time, and the preferred profile cannot
            be deleted.
          type: boolean
          example: true
    EasyCheckoutProfileResource:
      allOf:
      - $ref: '#/components/schemas/EasyCheckoutProfileProperties'
      - type: object
        required:
        - id
        - _links
        properties:
          id:
            type: string
            example: af85b240-3727-4264-9e2e-2f9ab5984cc3
            description: The unique identifier of the easy-checkout profile.
          _links:
            type: object
            required:
            - self
            properties:
              self:
                $ref: '#/components/schemas/link'
    CreateEasyCheckoutProfileRequest:
      allOf:
      - $ref: '#/components/schemas/EasyCheckoutProfileProperties'
    UpdateEasyCheckoutProfileRequest:
      allOf:
      - $ref: '#/components/schemas/EasyCheckoutProfileProperties'
    ShareUrlP2PEncodeSendRequest:
      type: object
      title: Share URL P2P encode send request
      description: This option facilitates the sharing of information so that another
        consumer can send a proposed amount of money.
      required:
      - action
      - consumerId
      - paymentSourceProfileId
      properties:
        action:
          type: string
          description: Here, the action is always `send_money`.
          enum:
          - send_money
        consumerId:
          type: string
          format: uuid
          description: ID of the consumer.
          minLength: 1
          maxLength: 255
        paymentSourceProfileId:
          type: string
          format: uuid
          description: ID of the payment source profile. This is identical to paymentSourceId.
          minLength: 1
          maxLength: 255
        amount:
          type: integer
          format: int32
          description: Amount of money in the smallest sub-division of the currency.
          example: 3000
        currency:
          type: string
          description: The three-letter ISO 4217:2015 currency code for the transaction
            amount.
          example: EUR
    ShareUrlP2PEncodeShareRequest:
      type: object
      title: Share URL P2P encode share request
      description: This option facilitates the sharing of the consumer's contact details
        so that another consumer can send or request money.
      required:
      - action
      - consumerId
      - paymentSourceProfileId
      properties:
        action:
          type: string
          description: Here, the action is always `share_contact`.
          enum:
          - share_contact
        consumerId:
          type: string
          format: uuid
          description: ID of the consumer.
          minLength: 1
          maxLength: 255
        paymentSourceProfileId:
          type: string
          format: uuid
          description: ID of the payment source profile. This is identical to paymentSourceId.
          minLength: 1
          maxLength: 255
    P2PShareUrlDataShareContact:
      type: object
      description: The information that the Wero digital wallet requires in relation
        to the P2P action.
      required:
      - displayName
      - shareId
      - canBePayer
      - pro
      - action
      properties:
        displayName:
          type: string
          description: The consumer's full or masked display name that corresponds
            to the payment source profile.
          minLength: 1
          maxLength: 255
        shareId:
          type: string
          description: Share ID of the payment source profile. The Wero digital wallet
            can use this ID to initiate a P2P payment.
          minLength: 1
          maxLength: 255
        canBePayer:
          type: boolean
          description: Indicates whether the consumer can act as a payer and respond
            to payment requests. EPI sets this value to `false` if the underlying
            payment means have been removed or if member-specific rules prohibit payment
            requests.
        pro:
          type: boolean
          description: Indicates whether the payment source linked to the consumer
            is a business account (P2Pro).
        action:
          type: string
          enum:
          - share_contact
          description: The reason why the contact details of the consumer who generates
            the QR-code image are shared.
    P2PShareUrlDataSendMoney:
      type: object
      description: The information that the Wero digital wallet requires in relation
        to the P2P action.
      required:
      - displayName
      - shareId
      - pro
      - action
      properties:
        displayName:
          type: string
          description: The consumer's full or masked display name that corresponds
            to the payment source profile.
          minLength: 1
          maxLength: 255
        shareId:
          type: string
          description: Share ID of the payment source profile. The Wero digital wallet
            can use this ID to initiate a P2P payment.
          minLength: 1
          maxLength: 255
        pro:
          type: boolean
          description: Indicates whether the payment source linked to the consumer
            is a business account (P2Pro).
        action:
          type: string
          enum:
          - send_money
          description: The reason why the contact details of the consumer who generates
            the QR-code image are shared
        amount:
          type: integer
          format: int32
          description: Amount of money in the smallest sub-division of the currency.
          example: 3000
        currency:
          type: string
          description: The three-letter ISO 4217:2015 currency code for the transaction.
          example: EUR
    P2POpenRequestTitle:
      type: string
      description: Text used as message title, limited to 3 graphemes, sent to the
        payers.
      example: 🎂🍽️💶
    PaymentReference:
      title: Payment Reference
      type: string
      description: |-
        The reference that is used for the payment. Limited to 140 SEPA characters.
        This will be used within the remittance information of the payment.
        Set this field only in a P2Pro transaction context.
      pattern: '[-a-zA-Z0-9/?:().,''+\s]*'
      maxLength: 140
    P2POpenRequestStatus:
      title: P2P open request status type
      type: string
      enum:
      - Pending
      - Paid
      - Canceled
      - Rejected
      - Expired
      - Blocked
      description: |-
        The status of a P2P open request resource can have the following values:
          - Pending: it has been created and is waiting for approvals. Only when the status is `Pending` can the payer make a payment.
          - Paid: it has been approved and paid by all payers
          - Rejected: it has been rejected by all payers
          - Canceled: it has been canceled by the payee (owner)
          - Expired: it has expired before being paid
          - Blocked: it has been blocked and cannot be used anymore
    proxyHash:
      title: proxyHash
      type: string
      pattern: ^[a-zA-Z0-9\-_=]{44}$
      minLength: 44
      maxLength: 44
      example: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
      description: Hashed proxy of a payee or payer.
    ConsentPayloadResource:
      type: object
      properties:
        payload:
          type: string
          description: The consent payload in JSON format.
        createdAt:
          type: string
          format: date-time
          description: The date and time when the consent payload was generated.
        expiresAt:
          type: string
          format: date-time
          description: The date and time when the consent payload expires.
        _links:
          type: object
          properties:
            self:
              type: object
              properties:
                href:
                  type: string
                  description: The URL of the consent payload resource.
              required:
              - href
          required:
          - self
      required:
      - payload
      - createdAt
      - expiresAt
      - _links
    p2pPaymentStatus:
      title: P2P-payment status type
      type: string
      enum:
      - Initial
      - Canceled
      - Approved
      - Accepted
      - Rejected
      - Settled
      - Failed
      - Expired
      example: Settled
      description: |-
        The status of a P2P Payment resource can have the following values:


        |    Value   | Description |
        |:----------:|:-----------------------------------------------------------------------------------------------------------------------------------------------------------:|
        | `Initial`  | The initial status. The payer has not yet approved the P2P payment. |
        | `Canceled` | The payer has canceled the P2P payment. |
        | `Approved` | The payer has approved the P2P payment. |
        | `Accepted` | The payer's PSP has accepted the order to settle the P2P payment. |
        | `Rejected` | The payer's PSP has rejected the order to settle the P2P payment. |
        | `Settled`  | The money has been transferred and has reached the beneficiary’s account. |
        | `Failed`   | The payer's PSP attempted to settle the payment, but the settlement failed. Note that the status is `Failed` even if the _payee's_ PSP rejected the payment.|
        | `Expired`  | EPI has expired the payment because the payer didn’t approve it within the required timeframe. |
    paymentRuleResourceItemConstraint:
      type: object
      description: 'Type of the payment constraint: Single or Multiple.'
      properties:
        type:
          type: string
          enum:
          - Single
          - Multiple
          description: Specifies whether the consent is for a single capture or for
            multiple captures. In the case of multiple captures, the sum of all captures
            must not exceed the maxAmount.
        maxAmount:
          $ref: '#/components/schemas/Money'
      required:
      - type
      - maxAmount
    paymentRuleResourceItemFixed:
      type: object
      properties:
        type:
          type: string
          description: 'Type of the payment rules: fixed, cyclic or sliding.'
          enum:
          - Fixed
        constraint:
          $ref: '#/components/schemas/paymentRuleResourceItemConstraint'
        startOffset:
          type: string
          description: An offset (compliant with ISO 8601) that defines the start
            time of the window during which payment can be collected.   The start
            time is then the offset amount of time _after_ the time that the consumer
            gave consent.
          example: PT-5S
        windowDuration:
          type: string
          description: Duration (compliant with ISO 8601) of the window during which
            payment can be collected. Begins at the start time defined by `startOffset`.
          example: PT5M
      required:
      - type
      - constraint
      - startOffset
      - windowDuration
    paymentRuleResourceItemCyclic:
      type: object
      properties:
        type:
          type: string
          description: 'Type of the payment rules: fixed, cyclic or sliding.'
          enum:
          - Cyclic
        constraint:
          $ref: '#/components/schemas/paymentRuleResourceItemConstraint'
        startOffset:
          type: string
          description: An offset (compliant with ISO 8601) that defines the start
            time of the window during which payment can be collected.   The start
            time is then the offset amount of time _after_ the time that the consumer
            gave consent.
          example: PT-5S
        windowDuration:
          type: string
          description: Duration (compliant with ISO 8601) of the window during which
            payment can be collected. Begins at the start time defined by `startOffset`.
          example: PT5M
        modifications:
          type: array
          items:
            type: object
            description: A modification of a cyclic payment window that replaces one
              or more cycle definitions.   Enables subscriptions to be modelled that,
              for example, start with a free or discounted trial period.
            properties:
              cycleIndexes:
                type: string
                description: The index of the cycle that is modified or replaced.
                pattern: '[0-9]+[.]{2}[0-9]+'
                example: 2..10
              constraint:
                $ref: '#/components/schemas/paymentRuleResourceItemConstraint'
        repetition:
          type: string
          enum:
          - Weekly
          - Monthly
          - Quarterly
          - HalfYearly
          - Yearly
      required:
      - type
      - constraint
      - startOffset
      - windowDuration
      - modifications
      - repetition
    paymentRuleResourceItemSliding:
      type: object
      description: Payment rule that defines a _sliding_ period during which the given
        constraints must be satisfied.
      properties:
        type:
          type: string
          description: 'Type of the payment rules: fixed, cyclic or sliding.'
          enum:
          - Sliding
        constraint:
          $ref: '#/components/schemas/paymentRuleResourceItemConstraint'
        duration:
          type: string
          example: PT45M
          description: Duration (compliant with ISO 8601) of the window during which
            the payment constraint must be valid.
      required:
      - type
      - constraint
      - duration
    paymentRuleResourceItem:
      oneOf:
      - $ref: '#/components/schemas/paymentRuleResourceItemFixed'
      - $ref: '#/components/schemas/paymentRuleResourceItemCyclic'
      - $ref: '#/components/schemas/paymentRuleResourceItemSliding'
      discriminator:
        propertyName: type
        mapping:
          Fixed: '#/components/schemas/paymentRuleResourceItemFixed'
          Cyclic: '#/components/schemas/paymentRuleResourceItemCyclic'
          Sliding: '#/components/schemas/paymentRuleResourceItemSliding'
    IbanIdentifier:
      title: IBAN account identifier
      type: object
      required:
      - type
      - iban
      description: An IBAN, if the consumer PSP permits EPI to store IBANs. This IBAN
        must have a valid checksum and a country code from a supported country. For
        more information, see the [IBAN checker](https://www.iban.com/iban-checker)
        on the IBAN validation and calculation website.
      properties:
        type:
          type: string
          enum:
          - IBAN
        iban:
          $ref: '#/components/schemas/IBAN'
    AliasIdentifier:
      title: Alias account identifier
      type: object
      required:
      - type
      - alias
      - maskedIban
      description: The IBAN alias, which identifies the account if the PSP does not
        permit EPI to store IBANs.
      properties:
        type:
          type: string
          enum:
          - Alias
        alias:
          type: string
          description: The IBAN alias for this account.
          pattern: ^[-a-zA-Z0-9/?:().,'+\s]{8,50}$
        maskedIban:
          type: string
          description: |
            The masked IBAN of this account. Since EPI has no information for generating a masked IBAN but needs the masked IBAN for display purposes, the PSP must provide the masked IBAN.
          minLength: 8
          maxLength: 34
          example: DE12********7890
    AccountIdentifier:
      description: |
        A polymorphic type that identifies an account. The value can be of one of the following types.
        - An IBAN, if the consumer PSP permits EPI to store IBANs. This IBAN must have a valid checksum and a country code from a supported country. For more information, see the [IBAN checker](https://www.iban.com/iban-checker) on the IBAN validation and calculation website.
        - An alias for the IBAN, if the consumer PSP does not permit EPI to store IBANs.
      type: object
      oneOf:
      - $ref: '#/components/schemas/IbanIdentifier'
      - $ref: '#/components/schemas/AliasIdentifier'
      discriminator:
        propertyName: type
        mapping:
          IBAN: '#/components/schemas/IbanIdentifier'
          Alias: '#/components/schemas/AliasIdentifier'
    MtPartyName:
      title: The party name.
      description: The name of the respective party (originator, beneficiary) of the
        payment (P001, E001).
      type: string
      minLength: 1
      maxLength: 70
    MtOriginatorReference:
      title: Originator reference.
      description: |-
        The originator reference identifies each SCT Inst Instruction presented to the originator PSP for an originator in a unique way. This number will be transmitted in the entire process of the handling of the SCT Inst Transaction from acceptance until the transaction completes. Any provider involved in the transaction must return the originator reference in any exception-handling process-step. The originator cannot request for any other referencing information to be returned to them to identify an SCT Inst.

        The originator must define the internal structure of this reference; it can only be expected to be meaningful to the originator.

        The originator PSP must include this value as the 'originator's reference (T014)' attribute in the SCT Inst. EPI central services create this reference on behalf of the originator. Currently, references are created by removing the four hyphens from the `moneyTransferId`. However, the format is subject to change.

        If any party contacts EPI central services for SCT Inst exception handling, that party must provide the originator's reference. With the current format, EPI central services will re-insert the hyphens to obtain the `moneyTransferId` to investigate the exception.
      type: string
      minLength: 1
      maxLength: 35
    MtCategoryPurpose:
      title: Category purpose of the EPI payment.
      description: The category purpose of the EPI payment (T008). The value is always
        set to EPI.
      type: string
      oneOf:
      - type: string
        const: EPI
        default: EPI
        title: EPI
        enum:
        - EPI
      - type: string
        minLength: 0
        maxLength: 35
        not:
          enum:
          - EPI
        title: Any string
    MtPurpose:
      title: Purpose of the EPI payment.
      description: The purpose of this EPI payment (T007). The value is set to MP2P
        for P2P payments and MP2B for P2Pro payments.
      type: string
      minLength: 4
      maxLength: 4
      enum:
      - MP2P
      - MP2B
    MtRemittanceInfo:
      title: Remittance information.
      description: |-
        The remittance information (T009) that must be sent for the SCT inst. This information is the message that the payer wrote for the payee during the send-money procedure in the standalone Wero digital wallet or mobile banking app. If the payer adds a message, it is mandatory to send the remittance information. However, if the consumer adds no message, sending an empty string or omitting the empty `remittanceinfo` element is acceptable. Different rules apply for local-market and cross-border transactions. For more information, see [Settlement triggering - data requirements](doc:settlement-triggering#212-data-requirements).
        >❗ The one character minimum length rule will be removed as of March 2025.
      type: string
      minLength: 1
      maxLength: 140
    P2PPaymentOriginRequest:
      type: object
      description: A payment that originates from a P2P request (in-app request).
      properties:
        type:
          description: This property is a discriminator; its value is always `P2PRequest`.
            A payment that originates from a P2P request (in-app request).
          const: P2PRequest
        id:
          type: string
          format: uuid
          description: The ID of the P2P request.
          examples:
          - 123e4567-e89b-12d3-a456-426614174000
      required:
      - type
      - id
    P2PPaymentOriginOpenRequest:
      type: object
      description: A payment that originates from a P2P open request (stateful QR
        code / share via link).
      properties:
        type:
          description: This property is a discriminator; its value is always `P2POpenRequest`.
            A payment that originates from a P2P open request (stateful QR code /
            share via link).
          const: P2POpenRequest
        id:
          type: string
          format: uuid
          description: The ID of the P2P open request.
          examples:
          - 123e4567-e89b-12d3-a456-426614174000
        viewsCount:
          type: integer
          minimum: 0
          description: The number of views the link / QR code has received (total
            number of calls to the [Decode share URL](ref:post-api-share-url-decode)
            route).
          examples:
          - 5
        linkedP2PPaymentIds:
          type: array
          items:
            type: string
          description: The IDs of all P2P payments originating from this P2P open
            request.
          examples:
          - - 123e4567-e89b-12d3-a456-426614174000
            - 345e6789-e12b-34c5-d678-987654321000
        settledP2PPaymentIds:
          type: array
          items:
            type: string
          description: The IDs of the P2P payments associated to this open request
            that have been settled.
          examples:
          - - 123e4567-e89b-12d3-a456-426614174000
            - 987e6543-e21b-34c5-d678-987654321000
        expiryDuration:
          type: integer
          minimum: 0
          description: The duration in seconds after which the P2P payment request
            was configured to expire. A shorter duration may indicate QR code usage
            rather than a shared link.
          examples:
          - 3600
        totalExpectedPayments:
          type: integer
          minimum: 0
          description: The total number of payments expected to be made against this
            open request. If this value is not provided, the open request can be paid
            an unlimited number of times until it expires. If this number is reached,
            the open request cannot be paid any more.
          examples:
          - 1
      required:
      - type
      - id
      - viewsCount
      - linkedP2PPaymentIds
      - settledP2PPaymentIds
      - expiryDuration
    P2PPaymentOriginShareId:
      type: object
      description: A share ID QR code (static QR code that does not expire) can result
        in either a P2P payment from the consumer scanning it or a P2P Request towards
        the consumer who shared their QR code, leading to a P2P payment on approval.
      properties:
        type:
          description: This property is a discriminator; its value is always `ShareId`.
            A share ID QR code (static QR code that does not expire) can result in
            either a P2P payment from the consumer scanning it or a P2P Request towards
            the consumer who shared their QR code, leading to a P2P payment on approval.
          const: ShareId
        shareId:
          type: string
          minLength: 1
          description: The share ID value (part of the QR code share URL).
      required:
      - type
      - shareId
    P2PPaymentOriginDirect:
      type: object
      description: A _direct_ P2P payment does not originate from any kind of request.
      properties:
        type:
          description: This property is a discriminator; its value is always `Direct`.
            A _direct_ P2P payment does not originate from any kind of request.
          const: Direct
      required:
      - type
    MtPaymentOrigin:
      description: The payment origin describes the origin of the payment and whether
        it is coming from a payee-based request or not (Direct).
      oneOf:
      - $ref: '#/components/schemas/P2PPaymentOriginRequest'
      - $ref: '#/components/schemas/P2PPaymentOriginOpenRequest'
      - $ref: '#/components/schemas/P2PPaymentOriginShareId'
      - $ref: '#/components/schemas/P2PPaymentOriginDirect'
      discriminator:
        propertyName: type
        mapping:
          P2PRequest: '#/components/schemas/P2PPaymentOriginRequest'
          P2POpenRequest: '#/components/schemas/P2PPaymentOriginOpenRequest'
          ShareId: '#/components/schemas/P2PPaymentOriginShareId'
          Direct: '#/components/schemas/P2PPaymentOriginDirect'
    MoneyTransferDatasetResource:
      title: Schema of a money transfer request for a P2P(ro) payment.
      type: object
      required:
      - originatorAccountIdentifier
      - beneficiaryAccountIdentifier
      - originatorName
      - beneficiaryName
      - originatorUnmodifiedName
      - beneficiaryUnmodifiedName
      - originatorReference
      - amount
      - categoryPurpose
      - purpose
      - remittanceInfo
      - isOriginatedFromP2PRequest
      - paymentOrigin
      properties:
        originatorAccountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
        beneficiaryAccountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
        originatorName:
          $ref: '#/components/schemas/MtPartyName'
        beneficiaryName:
          $ref: '#/components/schemas/MtPartyName'
        originatorUnmodifiedName:
          type: string
          description: The unmodified name of the originator.
        beneficiaryUnmodifiedName:
          type: string
          description: The unmodified name of the beneficiary.
        originatorReference:
          $ref: '#/components/schemas/MtOriginatorReference'
        amount:
          $ref: '#/components/schemas/Money'
        categoryPurpose:
          $ref: '#/components/schemas/MtCategoryPurpose'
        purpose:
          $ref: '#/components/schemas/MtPurpose'
        remittanceInfo:
          $ref: '#/components/schemas/MtRemittanceInfo'
        isOriginatedFromP2PRequest:
          deprecated: true
          type: boolean
          description: |-
            > ❗️This field is deprecated and will be removed after November 2025. This field is replaced by `paymentOrigin` with the `P2PRequest` type.
            Indicates whether the payment originated in a P2PRequest.
        paymentOrigin:
          $ref: '#/components/schemas/MtPaymentOrigin'
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            self:
              $ref: '#/components/schemas/link'
    ConsumerProfile:
      title: ConsumerProfile
      type: object
      properties:
        displayName:
          type: string
          description: The consumer's name. Depending on the consumer's personal choice,
            the consumer name is either the full name as provided by the consumer
            PSP or an obfuscated name in the form of a pseudonym or masked name.
        proxyValue:
          type: string
          description: Proxy value linked to that consumer.
        pro:
          type: boolean
          description: Indicates whether the payment source linked to the consumer
            is a business account (P2Pro).
      required:
      - displayName
      - pro
    P2PPaymentPayerSchema:
      title: P2P Payment (as a payer)
      type: object
      description: This is a P2P payment as seen by the payer.
      properties:
        id:
          type: string
          description: ID of the P2P payment. The [create a money transfer](ref:put-money-transfers)
            endpoint uses this ID as the `moneyTransferId`.
          format: uuid
        amount:
          $ref: '#/components/schemas/Money'
        title:
          type: string
          description: Large text or emojis used as message title, limited to three
            characters.
          example: 🎂🍽️💶
        message:
          type: string
          description: 'Message that is sent to the payee. *Important notice*: This
            field is going to be marked as optional in the first release of December
            2024 to match the optionality of this field in the request body, when
            creating a P2P payment.'
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        payerPaymentMeansId:
          type: string
          format: uuid
          description: The means of payment that is used to make the payment.
          example: 45f2b62f-f7ee-4db4-be77-380e10f90f1e
        payeeProxyHash:
          $ref: '#/components/schemas/proxyHash'
        consent:
          $ref: '#/components/schemas/ConsentPayloadResource'
          description: This is a consent payload for a P2P payment approval (standard
            flow). It is only provided with an initial P2P payment.
        created:
          type: string
          format: date-time
          description: 'Date and time at which the P2P payment was created. (Format:
            Timestamp)'
          example: '2023-05-03T10:39:16.425084691Z'
        updatedAt:
          type: string
          format: date-time
          description: 'Date and time at which the P2P payment was updated. (Format:
            Timestamp)'
          example: '2023-05-03T10:39:16.425084691Z'
        status:
          $ref: '#/components/schemas/p2pPaymentStatus'
        _embedded:
          type: object
          description: Embedded, related resources.
          required:
          - paymentRules
          properties:
            paymentRules:
              type: object
              title: Payment rules
              description: The payment plan is converted into payment rules, which
                are a parameterised version of the payment plan details. The payment
                plan is more readable than the payment rules. The payment rules describe
                one or more payments that consumers consent to.
              properties:
                paymentRules:
                  type: array
                  items:
                    $ref: '#/components/schemas/paymentRuleResourceItem'
              required:
              - paymentRules
            paymentDataset:
              $ref: '#/components/schemas/MoneyTransferDatasetResource'
              description: Embedded transaction resource that contains the information
                for completing the SCT Inst template. Retrievable by the consumer
                PSP, not the wallet.
            payeeContact:
              $ref: '#/components/schemas/ConsumerProfile'
            p2pRequest:
              type: object
              description: Embedded P2P Request resource if the payment was created
                from a P2P request.  See the [Retrieve a P2P Request endpoint](ref:get-p2p-requests-p2prequestid)
                for an example of the type.
            p2pOpenRequest:
              type: object
              description: Embedded P2P open request resource if the payment was created
                from a P2P open request.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            approval:
              $ref: '#/components/schemas/link'
            cancellation:
              $ref: '#/components/schemas/link'
            fraudRiskInformation:
              description: Is returned only when a consumer PSP makes the request.
              $ref: '#/components/schemas/link'
        viewerType:
          type: string
          description: The type of the viewer of the P2P payment.
          const: Payer
          enum:
          - Payer
      required:
      - id
      - amount
      - status
      - payerPaymentMeansId
      - created
      - updatedAt
      - _embedded
      - _links
      - viewerType
    P2POpenRequestPayerSchema:
      title: P2P Open Request (as payer)
      type: object
      description: This is a P2P open request as seen by the payers.
      properties:
        id:
          type: string
          format: uuid
          description: ID of the P2P open request.
        amount:
          $ref: '#/components/schemas/Money'
        message:
          type: string
          description: Message that is sent to the payers.
        title:
          $ref: '#/components/schemas/P2POpenRequestTitle'
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        status:
          type: object
          description: Status of the P2P Open request.
          properties:
            value:
              $ref: '#/components/schemas/P2POpenRequestStatus'
        createdAt:
          type: string
          format: date-time
          description: Date and time at which the P2P open request was created
        expiresAt:
          type: string
          format: date-time
          description: Date and time at which the P2P open request expires. The payee
            defines this value when creating the open request.
        updatedAt:
          type: string
          format: date-time
          description: Date and time at which the P2P open request's status was last
            changed
        isFixedAmount:
          type: boolean
          description: Indicates whether the amount can be changed by the payer or
            not.
        originatingTransactionId:
          type: string
          description: The ID of the originating transaction.  In the example of a
            purchase, the purchase transaction ID can be used as the `originatingTransactionId`
            to provide a reference for an open request.  For example, if a consumer
            pays for a group meal and then creates an open request for others from
            that group to pay their part, the `originatingTransactionId` provides
            the reference for in the open request for the meal.
        payeeDisplayName:
          type: string
          description: The display name of the payee.
        payeeIsPro:
          type: boolean
          description: Indicates whether the payee payment source is a business account
            (P2Pro).
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            approval:
              $ref: '#/components/schemas/link'
            rejection:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          description: Contains the embedded P2P Payment created as part of the approval.
          properties:
            p2pPayment:
              $ref: '#/components/schemas/P2PPaymentPayerSchema'
        viewerType:
          type: string
          description: The type of the viewer of the P2P open request.
          const: Payer
          enum:
          - Payer
      required:
      - id
      - status
      - createdAt
      - expiresAt
      - payeeIsPro
      - _links
      - _embedded
      - viewerType
    P2POpenRequestShareUrlOutputData:
      type: object
      description: A P2P open request
      required:
      - action
      - p2pOpenRequest
      properties:
        action:
          type: string
          enum:
          - open_request
          description: Type of object that maps to a P2P open request
        p2pOpenRequest:
          $ref: '#/components/schemas/P2POpenRequestPayerSchema'
    ShareUrlDecodeResponse:
      type: object
      required:
      - namespace
      - p2pData
      properties:
        namespace:
          type: string
          description: The use case for the share URL.
          example: P2P
          enum:
          - P2P
        p2pData:
          type: object
          oneOf:
          - $ref: '#/components/schemas/P2PShareUrlDataShareContact'
          - $ref: '#/components/schemas/P2PShareUrlDataSendMoney'
          - $ref: '#/components/schemas/P2POpenRequestShareUrlOutputData'
          discriminator:
            propertyName: action
            mapping:
              share_contact: '#/components/schemas/P2PShareUrlDataShareContact'
              send_money: '#/components/schemas/P2PShareUrlDataSendMoney'
              open_request: '#/components/schemas/P2POpenRequestShareUrlOutputData'
    Currency:
      type: string
      description: The three-letter ISO 4217:2015 currency code for the transaction.
      oneOf:
      - const: EUR
        description: EPI's home currency.
        title: EPI's home currency
      - type: string
        not:
          enum:
          - EUR
        description: Any other currency.
        title: Any other currency
    CreatePaymentSourcePaymentAccountRequest:
      type: object
      properties:
        type:
          type: string
          enum:
          - PaymentAccount
        externalId:
          type: string
          minLength: 1
          description: External ID of a payment source, provided by the consumer PSP.
            For example, the IBAN of a payment account. Uniquely identifies a payment
            source outside of the EPI context. For EPI to correlate payment sources
            across different wallet installations, consumer PSPs must provide the
            same external ID for a particular payment source across wallets.
        accountHolder:
          minLength: 1
          type: string
          description: |-
            Name of the account holder.
            > ❗️This field is optional but will become required from June 2025 for accounts used in the Wero Standalone App.
        pro:
          type: boolean
          description: Indicates whether the payment account is a pro account for
            P2Pro payments.
          default: false
        accountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
        currency:
          $ref: '#/components/schemas/Currency'
        countryCode:
          $ref: '#/components/schemas/CountryCode'
          description: |-
            ISO 3166-1 alpha-2 country code of the country where the payment account is located.
            > ❗️This field is optional but will become required from June 2025.
        testField:
          type: string
          description: This is a test field to demonstrate the use of the `x-epi-internal`
            extension.
      required:
      - type
      - externalId
      - accountIdentifier
      - currency
      - pro
    CreateWalletLessP2PReceiverRequest:
      type: object
      properties:
        consumer:
          $ref: '#/components/schemas/CreateConsumerRequest'
        paymentSource:
          $ref: '#/components/schemas/CreatePaymentSourcePaymentAccountRequest'
        paymentSourceProfile:
          $ref: '#/components/schemas/PaymentSourceProfileRequest'
        verifiedContactItem:
          $ref: '#/components/schemas/CreateContactItemRequest'
      required:
      - consumer
      - paymentSource
      - verifiedContactItem
      - paymentSourceProfile
    CreateWalletLessP2PReceiverResponse:
      description: The response to a wallet-less p2p receiver creation request.
      type: object
      required:
      - consumer
      - paymentSource
      - verifiedContactItem
      - paymentSourceProfile
      - proxy
      - _links
      properties:
        consumer:
          type: object
          required:
          - id
          properties:
            id:
              description: The identifier of the created consumer.
              type: string
              example: b8f44f50-d482-4bff-b226-ca19e87092c7
        paymentSource:
          type: object
          required:
          - id
          properties:
            id:
              description: The identifier of the created payment source.
              type: string
              example: b13d237f-bd88-442d-91ee-d9e478db10f6
        paymentSourceProfile:
          type: object
          required:
          - id
          properties:
            id:
              description: The identifier of the created payment source profile.
              type: string
              example: b13d237f-bd88-442d-91ee-d9e478db10f6
        verifiedContactItem:
          type: object
          required:
          - id
          properties:
            id:
              description: The identifier of the verified contact item.
              type: string
              example: 69f6bf96-d9bb-4564-a73c-ea122029a394
        proxy:
          type: object
          required:
          - id
          properties:
            id:
              description: The identifier of the created proxy.
              type: string
              example: 69f6bf96-d9bb-4564-a73c-ea122029a394
        _links:
          type: object
          required:
          - consumer
          - paymentSource
          - verifiedContactItem
          - paymentSourceProfile
          - proxy
          properties:
            consumer:
              $ref: '#/components/schemas/link'
            paymentSource:
              $ref: '#/components/schemas/link'
            verifiedContactItem:
              $ref: '#/components/schemas/link'
            paymentSourceProfile:
              $ref: '#/components/schemas/link'
            proxy:
              $ref: '#/components/schemas/link'
    CaptureStatusFailed:
      type: object
      title: Failed
      description: The capture has failed for technical reasons.
      required:
      - value
      - at
      - technicalReason
      properties:
        value:
          type: string
          const: Failed
        at:
          type: string
          format: date-time
          description: Date and time when the capture status changed to `Failed`.
        technicalReason:
          type: string
          description: Technical reason why the capture failed.
    CaptureStatusPending:
      type: object
      title: Pending
      description: While processing the capture, the consumer PSP encountered a problem
        and is trying to resolve it.
      properties:
        value:
          type: string
          const: Pending
        at:
          type: string
          format: date-time
          description: Date and time when the capture status changed to `Pending`.
        reasonCode:
          type: string
          description: Reason code (from ExternalStatusReason1Code) indicating why
            the capture is pending.
        reason:
          type: string
          description: If the reason code is 'NARR', this property must contain the
            proprietary reason why the capture is pending. Otherwise, it must contain
            a comprehensive description of the reason code.
      required:
      - value
      - at
      - reasonCode
      - reason
    CaptureStatusRejected:
      type: object
      title: Rejected
      description: The consumer PSP, clearing and settlement mechanism (CSM) provider,
        or beneficiary PSP has rejected the capture.
      properties:
        value:
          type: string
          const: Rejected
        at:
          type: string
          format: date-time
          description: Date and time when the capture status changed to `Rejected`.
        reasonCode:
          type: string
          description: Reason code (from ExternalStatusReason1Code) indicating why
            the capture was rejected.
        reason:
          type: string
          description: If the reason code is 'NARR', this property must contain the
            proprietary reason why the capture was rejected. Otherwise, it must contain
            a comprehensive description of the reason code.
      required:
      - value
      - at
      - reasonCode
      - reason
    SettlementMethod:
      title: SettlementMethod
      type: string
      enum:
      - SCTInst
      - OnUs
      - FinancialGuarantees
      description: |-
        The consumer PSP can settle a capture by using one of the following settlement methods:

        |       Method        | Description |
        |:-------------------:|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
        | SCTInst             | A SEPA instant credit transfer (SCT Inst) is the default settlement method for Wero transactions. |
        | OnUs                | On-us transactions are those for which the payment sources of the originator and of the beneficiary are with the same consumer PSP.                                                             |
        | FinancialGuarantees | Applicable only to e/m-commerce and point-of-sale payments. Used by EPI only when consumer PSPs have already made financial guarantees. For details, see the _EPI Financial Guarantees Policy_. |
    CaptureStatusSettled:
      type: object
      title: Settled
      description: The capture has been settled.
      properties:
        value:
          type: string
          const: Settled
        at:
          type: string
          format: date-time
          description: Date and time when the capture status changed to `Settled`.
        originatorPspReference:
          type: string
          description: Capture reference that was provided by the originator PSP.
        settlementMethod:
          $ref: '#/components/schemas/SettlementMethod'
      required:
      - value
      - at
      - originatorPspReference
      - settlementMethod
    CaptureStatusForChange:
      description: |-
        The consumer PSP can notify EPI central services of one of the following statuses for the capture:

        |       Status      | Description                                                            |
        |:-----------------:|:-------------------------------------------------------------------------------------------------:|
        | Pending           | While processing the capture, the consumer PSP encountered a problem and is trying to resolve it. |
        | Settled           | The capture has been successfully processed by the consumer PSP.                                  |
        | Rejected          | The consumer PSP, clearing and settlement mechanism (CSM) provider, or beneficiary PSP has rejected the capture.|
        | Failed            | The capture has failed for technical reasons.                                                     |
      discriminator:
        propertyName: value
        mapping:
          Failed: '#/components/schemas/CaptureStatusFailed'
          Pending: '#/components/schemas/CaptureStatusPending'
          Rejected: '#/components/schemas/CaptureStatusRejected'
          Settled: '#/components/schemas/CaptureStatusSettled'
      oneOf:
      - $ref: '#/components/schemas/CaptureStatusFailed'
      - $ref: '#/components/schemas/CaptureStatusPending'
      - $ref: '#/components/schemas/CaptureStatusRejected'
      - $ref: '#/components/schemas/CaptureStatusSettled'
    CaptureStatusChangedRequest:
      title: Capture Status Changed
      type: object
      required:
      - name
      - id
      - rootAggregateId
      - captureId
      - status
      properties:
        name:
          type: string
          const: CaptureStatusChanged
        id:
          type: string
          format: uuid
          description: ID of this event.
        rootAggregateId:
          type: string
          format: uuid
          description: EPI central services provides this ID in the [capture request
            endpoint call](ref:create-consumer-psp-capture) to link an individual
            capture request endpoint call to the capture request's subsequent status
            changes as they are received from the consumer PSP.
        captureId:
          type: string
          format: uuid
          description: ID of the Capture resource at EPI central services.
        status:
          $ref: '#/components/schemas/CaptureStatusForChange'
      examples:
      - name: CaptureStatusChanged
        id: c0204631-b190-425d-bfa6-aa053b88f382
        rootAggregateId: d8bcb97b-3524-4eb1-bde3-419fbe0a9e2e
        captureId: f2f84a80-2c26-458e-bcfc-f2b5a92228c9
        status:
          value: Settled
          at: '2023-05-03T10:38:30.799631719Z'
          originatorPspReference: '1234567890'
          settlementMethod: SCTInst
    RefundStatusFailed:
      type: object
      title: Failed
      description: The refund has failed for technical reasons.
      properties:
        value:
          type: string
          const: Failed
        technicalReason:
          type: string
          description: The technical reason why the refund failed.
        at:
          type: string
          format: date-time
          description: The date and time of the incoming SCT-Inst.
      required:
      - value
      - at
      - technicalReason
    RefundStatusRejected:
      type: object
      title: Rejected
      description: The consumer PSP or beneficiary PSP has rejected the refund.
      properties:
        value:
          type: string
          const: Rejected
        reasonCode:
          type: string
          description: Reason code (from ExternalStatusReason1Code) indicating why
            the refund was rejected.
        reason:
          type: string
          description: Proprietary reason why the refund was rejected.
        at:
          type: string
          format: date-time
          description: The date and time of the incoming SCT-Inst
      required:
      - value
      - at
      - reasonCode
      - reason
    RefundStatusSettled:
      type: object
      title: Settled
      description: The refund has been settled.
      properties:
        value:
          type: string
          const: Settled
        at:
          type: string
          format: date-time
          description: The date and time of the incoming SCT-Inst
      required:
      - value
      - at
    RefundStatusForChange:
      description: |-
        The consumer PSP can notify EPI central services of one of the following statuses for the refund settlement:

        |       Status      | Description                                                            |
        |:-----------------:|:-------------------------------------------------------------------------------------------------:|
        | Settled           | The consumer PSP has successfully processed the refund settlement.                                |
        | Rejected          | The consumer PSP has rejected the refund settlement.                                              |
        | Failed            | The refund settlement has failed for technical reasons.                                           |
      discriminator:
        propertyName: value
        mapping:
          Failed: '#/components/schemas/RefundStatusFailed'
          Rejected: '#/components/schemas/RefundStatusRejected'
          Settled: '#/components/schemas/RefundStatusSettled'
      oneOf:
      - $ref: '#/components/schemas/RefundStatusFailed'
      - $ref: '#/components/schemas/RefundStatusRejected'
      - $ref: '#/components/schemas/RefundStatusSettled'
    MonetaryAmount:
      title: MonetaryAmount
      type: object
      description: Monetary amount.
      required:
      - value
      - currency
      properties:
        value:
          type: integer
          description: Amount of money in the smallest subdivision of the currency.
            For example, euro cents.
        currency:
          type: string
          description: The three-letter ISO 4217:2015 currency code for the transaction.
          pattern: ^[A-Z]{3}$
          examples:
          - EUR
      examples:
      - value: 12345
        currency: EUR
    RefundStatusChangedRequest:
      title: Refund Status Changed
      type: object
      required:
      - name
      - id
      - refundId
      - status
      - amount
      properties:
        name:
          type: string
          const: RefundStatusChanged
        id:
          type: string
          format: uuid
          description: ID of this event.
        refundId:
          type: string
          format: uuid
          description: ID of the refund at EPI central services. This ID can be found
            either in the remittance info (T009) (first UUID) or in the originator's
            reference (T014) but without any '-'.
        status:
          $ref: '#/components/schemas/RefundStatusForChange'
        remittanceInfo:
          type: string
          description: The remittance information that is provided in the incoming
            SCT-Inst
        amount:
          $ref: '#/components/schemas/MonetaryAmount'
          description: Monetary amount of the incoming SCT-Inst.
      examples:
      - name: RefundStatusChanged
        id: c0204631-b190-425d-bfa6-aa053b88f382
        refundId: d8bcb97b-3524-4eb1-bde3-419fbe0a9e2e
        amount:
          value: 100
          currency: EUR
        status:
          value: Settled
          at: '2023-05-03T10:38:30.799631719Z'
    MTStatusAccepted:
      title: Accepted
      description: The money transfer request has been accepted.
      type: object
      required:
      - value
      - at
      properties:
        value:
          type: string
          enum:
          - Accepted
        at:
          type: string
          format: date-time
          example: '2023-05-03T10:38:49.475916359Z'
          description: Date and time at which the money transfer was accepted. Must
            be a valid UTC timestamp.
    MTStatusFailed:
      title: Failed
      description: The SCT-inst has failed. The reason for the failure must be reported.
      type: object
      required:
      - value
      - at
      - failureCode
      - failureReason
      properties:
        value:
          type: string
          enum:
          - Failed
        at:
          type: string
          format: date-time
          example: '2023-05-03T10:38:49.475916359Z'
          description: Date and time at which the SCT Inst was initiated (T056). If
            no SCT Inst was initiated, this string is the date and time of the failure.
            Must be a valid UTC timestamp.
        failureCode:
          type: string
          minLength: 4
          maxLength: 4
          description: Failure code (external code of R004, ExternalStatusReason1Code).
            For more information, see [SCT Inst failures and P2P payments](doc:sct-inst-failure-handling).
            Failures on the consumer PSP side that are unrelated to the SCT Inst settlement
            layer must use `NARR`
        failureReason:
          type: string
          minLength: 1
          maxLength: 105
          description: Failure reason (proprietary reason R004). For more information,
            see [SCT Inst failures and P2P payments](doc:sct-inst-failure-handling).
            Failures on the consumer PSP side that are unrelated to the SCT Inst settlement
            layer must use `Issue on consumer PSP side`.
    MTStatusSettled:
      title: Settled
      description: The SCT-inst has been completed / settled. The originator psp reference
        is required.
      type: object
      required:
      - value
      - at
      - originatorPspReference
      properties:
        value:
          type: string
          enum:
          - Settled
        at:
          type: string
          format: date-time
          example: '2023-05-03T10:38:49.475916359Z'
          description: Date and time at which the SCT Inst was made (T056). Must be
            a valid UTC timestamp.
        originatorPspReference:
          type: string
          maxLength: 35
          description: The PSP reference of the original payment request (TO54).
        settlementMethod:
          type: string
          enum:
          - SCTInst
          - OnUs
          example: SCTInst
          description: One of the listed settlement methods.
    MTStatusRejected:
      title: Rejected
      description: The payer's PSP rejected the payment and therefore did not initiate
        an SCT Inst.
      type: object
      required:
      - value
      - at
      - rejectionReason
      properties:
        value:
          type: string
          enum:
          - Rejected
        at:
          type: string
          format: date-time
          description: Date and time at which the payer's PSP rejected the payment.
            Must be a valid UTC timestamp.
          examples:
          - '2023-05-03T10:38:49.475916359Z'
        rejectionReason:
          description: Reason for the rejection. The value must be `SecurityConcern`,
            `InsufficientFunds`, `TransferLimitReached`, or `Unspecified`. Custom
            values cannot be used.
          type: string
          oneOf:
          - const: SecurityConcern
            description: Suspected fraud, money laundering or other security concern.
            title: SecurityConcern
          - const: InsufficientFunds
            description: The payer's account has insufficient funds to complete the
              payment.
            title: InsufficientFunds
          - const: TransferLimitReached
            description: The payer has reached their transfer limit.
            title: TransferLimitReached
          - const: Unspecified
            description: Unspecified reason.
            title: Unspecified
          - type: string
            not:
              enum:
              - SecurityConcern
              - InsufficientFunds
              - TransferLimitReached
              - Unspecified
            description: Placeholder for a future reason, to be defined. This cannot
              be used to add custom reasons.
            title: Any String
        rejectionMessage:
          type: string
          description: Detailed description of the rejection reason from the PSP.
            Will be forwarded as-is to the payer.
          minLength: 1
          maxLength: 140
    MoneyTransferStatus:
      title: Status
      oneOf:
      - $ref: '#/components/schemas/MTStatusAccepted'
      - $ref: '#/components/schemas/MTStatusFailed'
      - $ref: '#/components/schemas/MTStatusSettled'
      - $ref: '#/components/schemas/MTStatusRejected'
      discriminator:
        propertyName: value
        mapping:
          Accepted: '#/components/schemas/MTStatusAccepted'
          Failed: '#/components/schemas/MTStatusFailed'
          Settled: '#/components/schemas/MTStatusSettled'
          Rejected: '#/components/schemas/MTStatusRejected'
    MoneyTransferStatusChangedRequest:
      title: Money Transfer Status Changed
      type: object
      required:
      - name
      - id
      - resourceId
      - status
      properties:
        name:
          type: string
          const: MoneyTransferStatusChanged
        id:
          type: string
          format: uuid
          description: ID of this event.
        resourceId:
          type: string
          format: uuid
          description: The P2P payment ID that the consumer PSP uses to connect its
            internal money-transfer transaction to the P2P payment. The consumer PSP
            must use this ID in this endpoint call to notify EPI of a status change.
            This ID is used as the `moneyTransferId` also in the [create a money transfer](ref:put-money-transfers)
            endpoint call.
        status:
          $ref: '#/components/schemas/MoneyTransferStatus'
      examples:
      - name: MoneyTransferStatusChanged
        id: 4ff0cddc-75f2-4d4c-9126-e47134386480
        resourceId: f2f84a80-2c26-458e-bcfc-f2b5a92228c9
        status:
          value: Settled
          at: '2023-05-03T10:38:30.801643443Z'
          originatorPspReference: '1234567890'
    AccountClosedRequest:
      title: Account Closed
      type: object
      required:
      - name
      - id
      - externalPaymentSourceId
      properties:
        name:
          type: string
          const: AccountClosed
        id:
          type: string
          format: uuid
          description: ID of this event.
        externalPaymentSourceId:
          type: string
          description: The external ID of the payment source.
      description: '**DEPRECATED** - This event type is deprecated and will be removed
        on 31 Dec 2024. You can, instead, notify EPI of a closed account through the
        endpoint call: _''Remove a payment source''_.'
      examples:
      - name: AccountClosed
        id: 4ff0cddc-75f2-4d4c-9126-e47134386480
        externalPaymentSourceId: f2f84a80-2c26-458e-bcfc-f2b5a92228c9
    AuthorizedPersonNameChangedRequest:
      title: Authorized Person Name Changed
      type: object
      description: '>❗️ This event type is deprecated and will be removed after 31
        Mar 2025. You can notify EPI of a consumer name change using the update a
        consumer endpoint call.'
      properties:
        name:
          type: string
          const: AuthorizedPersonNameChanged
        id:
          type: string
          format: uuid
          description: ID of this event.
        externalConsumerId:
          type: string
          description: The external ID of the consumer.
        newConsumerName:
          type: object
          required:
          - firstName
          - lastName
          description: The new name of the authorized person, as an object. Currently,
            either the `newConsumerName` or the `newName` is required.
          properties:
            firstName:
              type: string
              description: The new first name of the authorized person.
            middleNames:
              type: string
              description: The new middle names of the authorized person.
            lastName:
              type: string
              description: The new last name of the authorized person.
      required:
      - id
      - externalConsumerId
      - newConsumerName
      - name
      examples:
      - name: AuthorizedPersonNameChanged
        id: 4ff0cddc-75f2-4d4c-9126-e47134386480
        externalConsumerId: f2f84a80-2c26-458e-bcfc-f2b5a92228c9
        newConsumerName:
          firstName: Jane
          lastName: Smith
    AccountAuthorizedPersonAccessRevokedRequest:
      title: Account Authorized Person Access Revoked
      type: object
      required:
      - name
      - id
      - externalConsumerId
      - externalPaymentSourceId
      properties:
        name:
          type: string
          const: AccountAuthorizedPersonAccessRevoked
        id:
          type: string
          format: uuid
          description: ID of this event.
        externalConsumerId:
          type: string
          description: The external ID of the consumer.
        externalPaymentSourceId:
          type: string
          description: The external ID of the payment source.
      examples:
      - name: AccountAuthorizedPersonAccessRevoked
        id: 4ff0cddc-75f2-4d4c-9126-e47134386480
        externalConsumerId: f2f84a80-2c26-458e-bcfc-f2b5a92228c9
        externalPaymentSourceId: f2f84a80-2c26-458e-bcfc-f2b5a92228c9
    AccountHolderChangedRequest:
      title: Account Holder Changed
      type: object
      description: '> ❗️ This event is deprecated and will be removed after 30 June
        2025. The functionality will be replaced by the `Update a payment source`
        endpoint. For more information, see [Update a payment source](ref:put-payment-sources-paymentsourceid).'
      required:
      - name
      - id
      - externalPaymentSourceId
      - accountHolder
      properties:
        name:
          type: string
          const: AccountHolderChanged
        id:
          type: string
          format: uuid
          description: ID of this event.
        externalPaymentSourceId:
          type: string
          description: The external ID of the payment source.
        accountHolder:
          type: string
          description: The new account holder.
      examples:
      - name: AccountHolderChanged
        id: 4ff0cddc-75f2-4d4c-9126-e47134386480
        externalPaymentSourceId: f2f84a80-2c26-458e-bcfc-f2b5a92228c9
        accountHolder: Jane Smith & Jon Doe
    AppIcon:
      type: object
      description: Icon of the registered consumer PSP app. This can either be a mobile
        or web specific application.
      properties:
        contentBase64:
          type: string
          description: The content of the image as a base64 data string.
          example: iVBORw0KGgoAAAANSUhEUgAAAQMAAADCCAMAAAB6zFdcAAAAhFBMVEX///8AAAD8/Pz29vbx8fH5+fnU1NTr6+vu7u6zs7Po6OjNzc27u7tqamr09PTExMQUFBTg4OCIiIgbGxuPj4+oqKiXl5cwMDBcXFxSUlI+Pj5ERER2dnadnZ3Ozs5kZGRLS0tvb28qKip8fHwcHBw3Nzfa2tqsrKyDg4MlJSULCwsuLi5YcBb1AAAHgElEQVR4nO2baXuyOhCGBRQEsYjiglYR19b+//93JJmBBG19rVtzruf+pEjpzCSZLaHRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4jlaw64Sj/qvFeCGLbjr9tCxr/2pBXsjYEqTOqwW5hdZb64a/9qUJrPBu8jwXO+6Ew3422P3+Ee2pNMHsflI9lWA5OBTyd294xoimQXQ3qZ5LIsU/LH7/CIdMMLHvJ9Yz8Uj+9xue0adnuPJrqx3Erh/cRbynwPLHv39EvJGPyBtNNxyO1tmyiBLN+8n4YFwywQ25jZ3RM8gUEv9+Mj4akr/3q6AQuP7oI59YZ5i93VvShxFdPw2cY04c7ZPu7HBOd8acRMHhaXDRgdl2y4mjYfKeLUVOfIH0loTruYQk8uj7W5zAjfxhvzvrXda8wpxEoUXp3aZ98stb09uF848snY4H/6764GubZv1hFJuTKAxJ9Hl1yYkX4f4Y3qZXaC60z5OhH+08c5SXtFdS/qXniKxmlKfT1eZHV6dxWG1T9g3zy//uT8JZ/nI9uXLYV+n7aB91du1gKy/0TBt/uxnEu2j/cZWXO+o5nk3y/jx025XCVGyYlBHZcbQ/ZjXp9jr1V+l6HnbcuF0fbS42luZkRM1rFB9s0+46Ofr4H0J9l+7tPE+HW0l+VJrpTSfH8ObugualRe7SdFo+QfY7sdv8oPlgOsmTuR/FV3QEqVL4XbHxGt7P6b7ZLvPE78SB93atb+/QI9YPkfYhxKrqnAWsf5/YOyk94yTL/LPYRwfWW22Xk6OPd+Plv8tvN9vHauljUq8BuJf8Q7Hx1/DmfugGtNr3V8jfl3sHK692nRzi1JxpoGFb/y7/d52mOV03p1Ogw/L/Q3rX4k5ZreHoUZacPkbChxNTpZOWkcBxk+XnZto/7aXwqlnWYib1Ynvuw6V9DB+kV+nlQu4Jboa1Wx0uDGue4x4t+VcS1+TfcZArqBXBbK5aZ6hFWfLKnEJBZ62v8EhPH7V1zw7R+tSjAjfh6tPGFBb6iNeLCHXfkZtt9ZKAV4ipDrFBM38sndyoZgJrrGwQDcur+rrnPzLVIXJ6Jxd4NQsOucwdD1UhvKsso50v4V0JgwoFjSbF9XcRFznyWb1RwIu8THpsZQdJ7RBwA+2WPcqXwumRyAS48rOWRfm7qNlgXplAVdfmMGLqNAiolywcYpNOEVm58AG+bgOtzqySJ5ubR18G7a5r0NjKQoH33buygJa+gTO/1uS8DcouhEH1okbbUsaag2RXRghPBsIxpT16zGQbODlf6b1C/ntAQe1TfOGBpmBIU2Qiv7maCUp/UE0OU9MjLvaEl+dcj1w+L38ZM9n3b3z1qrstTZCamiWTQlkRF/n4CHn3NxrhmZwVXDHvY2XUO8quu7GHcqfKxOZxl86g9PYyKnBYfG/EA7aU07cUDOola5DasiJI1PFscX0oK4AOtVy/vIY3E58mjVg/c/MyJW6kr6xtR2bGn2JONHkWbMTXgLfiOmUfaTvULMCe0zioGS47QgupZ1583s1YNbES2pwIigzgwzqHqckBbY3J2U+Vgn/0hkl55CARP+X0rStKirmu/EAx1nEChb5ZjiEsJ3ijTPfaQfJV6idNwAO/ldEvslT69BAZK/3CIl2TzuuTO5DBT07/w0Q5diJ7BDzuVEPbWjQYUniVP1LJZVKYlI59JYuD0xMIMvErp74c6Ug9iJd5nGLIE94G7rnKoV9KG5yYQO41cIeF1oVWNPh2dYOYB2xHc07iNWTvVHq6ug1yueNU6ixMEM+UOxJpu0hRm0tvg45gyKWfSxtoa2Ebiot22VwUbyLspsotB/J8lGeJ3hpZbFbfifzDaDZQhrhLW27NrLxSKFyrHEnRFs0b8QfSIdzw9sfTGahrgSLgKtvzgSOX9+OttAgd7kq3ATs+WToexOfmaLbNjWouy6k9kypTnC93E5pVk31SmMArFwt5f3Z8H/pXw8jUhc0NgvfiCE7LG1adgawwgVO+mBG6utJkvMyck+kqI21Sczq4Ws9HXeWY6lrYqMyUXPYL3GrlPoxBxzIVKKxRWuedP5g8FO6C+47jXdl2LCc/x08jz5/E0svxazbzE/2PFRGNNutZRH4yXen9A/rNzPd6qUvA3dB13QJWTuYJxsqdtISq7jobb2ziBgPluT0aQKd2YLFXTnca+qlYFzKT6FVbsW/sP79MDA5UAE3Yp0dKfyxVnJwa/ygxVOPAjuOmSdkRww2xnC84nfXq6BsHs8RVe+WykSTPXZA9tPMpNKGMbCaVR0u7Sorfap+8kione1asGUoHavWx6EIZ+pZ7WQNsf7xN2qDYhlxQ5lDvoYaGroSCM69xnUG6wVXcHPLKPykK3K2RK0HQr6b591DUXHGDgDoqGo6ZybJA+LgLJ0j0Pupx5RiZDv3A/PKbeG/6ntLY1EM33xPlF4dV758Y1DO9J35VUWUmpsR3YUGnV3vz/5svuIZOsl6PTKwIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcD/+Az1uWm4wuYH/AAAAAElFTkSuQmCC
        type:
          type: string
          description: The type of the image as a media type string, either JPG or
            PNG.
          example: image/png
      required:
      - contentBase64
      - type
    consumerPspMetadata:
      type: object
      example:
        icon:
          contentBase64: iVBORw0KGgoAAAANSUhEUgAAAQMAAADCCAMAAAB6zFdcAAAAhFBMVEX///8AAAD8/Pz29vbx8fH5+fnU1NTr6+vu7u6zs7Po6OjNzc27u7tqamr09PTExMQUFBTg4OCIiIgbGxuPj4+oqKiXl5cwMDBcXFxSUlI+Pj5ERER2dnadnZ3Ozs5kZGRLS0tvb28qKip8fHwcHBw3Nzfa2tqsrKyDg4MlJSULCwsuLi5YcBb1AAAHgElEQVR4nO2baXuyOhCGBRQEsYjiglYR19b+//93JJmBBG19rVtzruf+pEjpzCSZLaHRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4jlaw64Sj/qvFeCGLbjr9tCxr/2pBXsjYEqTOqwW5hdZb64a/9qUJrPBu8jwXO+6Ew3422P3+Ee2pNMHsflI9lWA5OBTyd294xoimQXQ3qZ5LIsU/LH7/CIdMMLHvJ9Yz8Uj+9xue0adnuPJrqx3Erh/cRbynwPLHv39EvJGPyBtNNxyO1tmyiBLN+8n4YFwywQ25jZ3RM8gUEv9+Mj4akr/3q6AQuP7oI59YZ5i93VvShxFdPw2cY04c7ZPu7HBOd8acRMHhaXDRgdl2y4mjYfKeLUVOfIH0loTruYQk8uj7W5zAjfxhvzvrXda8wpxEoUXp3aZ98stb09uF848snY4H/6764GubZv1hFJuTKAxJ9Hl1yYkX4f4Y3qZXaC60z5OhH+08c5SXtFdS/qXniKxmlKfT1eZHV6dxWG1T9g3zy//uT8JZ/nI9uXLYV+n7aB91du1gKy/0TBt/uxnEu2j/cZWXO+o5nk3y/jx025XCVGyYlBHZcbQ/ZjXp9jr1V+l6HnbcuF0fbS42luZkRM1rFB9s0+46Ofr4H0J9l+7tPE+HW0l+VJrpTSfH8ObugualRe7SdFo+QfY7sdv8oPlgOsmTuR/FV3QEqVL4XbHxGt7P6b7ZLvPE78SB93atb+/QI9YPkfYhxKrqnAWsf5/YOyk94yTL/LPYRwfWW22Xk6OPd+Plv8tvN9vHauljUq8BuJf8Q7Hx1/DmfugGtNr3V8jfl3sHK692nRzi1JxpoGFb/y7/d52mOV03p1Ogw/L/Q3rX4k5ZreHoUZacPkbChxNTpZOWkcBxk+XnZto/7aXwqlnWYib1Ynvuw6V9DB+kV+nlQu4Jboa1Wx0uDGue4x4t+VcS1+TfcZArqBXBbK5aZ6hFWfLKnEJBZ62v8EhPH7V1zw7R+tSjAjfh6tPGFBb6iNeLCHXfkZtt9ZKAV4ipDrFBM38sndyoZgJrrGwQDcur+rrnPzLVIXJ6Jxd4NQsOucwdD1UhvKsso50v4V0JgwoFjSbF9XcRFznyWb1RwIu8THpsZQdJ7RBwA+2WPcqXwumRyAS48rOWRfm7qNlgXplAVdfmMGLqNAiolywcYpNOEVm58AG+bgOtzqySJ5ubR18G7a5r0NjKQoH33buygJa+gTO/1uS8DcouhEH1okbbUsaag2RXRghPBsIxpT16zGQbODlf6b1C/ntAQe1TfOGBpmBIU2Qiv7maCUp/UE0OU9MjLvaEl+dcj1w+L38ZM9n3b3z1qrstTZCamiWTQlkRF/n4CHn3NxrhmZwVXDHvY2XUO8quu7GHcqfKxOZxl86g9PYyKnBYfG/EA7aU07cUDOola5DasiJI1PFscX0oK4AOtVy/vIY3E58mjVg/c/MyJW6kr6xtR2bGn2JONHkWbMTXgLfiOmUfaTvULMCe0zioGS47QgupZ1583s1YNbES2pwIigzgwzqHqckBbY3J2U+Vgn/0hkl55CARP+X0rStKirmu/EAx1nEChb5ZjiEsJ3ijTPfaQfJV6idNwAO/ldEvslT69BAZK/3CIl2TzuuTO5DBT07/w0Q5diJ7BDzuVEPbWjQYUniVP1LJZVKYlI59JYuD0xMIMvErp74c6Ug9iJd5nGLIE94G7rnKoV9KG5yYQO41cIeF1oVWNPh2dYOYB2xHc07iNWTvVHq6ug1yueNU6ixMEM+UOxJpu0hRm0tvg45gyKWfSxtoa2Ebiot22VwUbyLspsotB/J8lGeJ3hpZbFbfifzDaDZQhrhLW27NrLxSKFyrHEnRFs0b8QfSIdzw9sfTGahrgSLgKtvzgSOX9+OttAgd7kq3ATs+WToexOfmaLbNjWouy6k9kypTnC93E5pVk31SmMArFwt5f3Z8H/pXw8jUhc0NgvfiCE7LG1adgawwgVO+mBG6utJkvMyck+kqI21Sczq4Ws9HXeWY6lrYqMyUXPYL3GrlPoxBxzIVKKxRWuedP5g8FO6C+47jXdl2LCc/x08jz5/E0svxazbzE/2PFRGNNutZRH4yXen9A/rNzPd6qUvA3dB13QJWTuYJxsqdtISq7jobb2ziBgPluT0aQKd2YLFXTnca+qlYFzKT6FVbsW/sP79MDA5UAE3Yp0dKfyxVnJwa/ygxVOPAjuOmSdkRww2xnC84nfXq6BsHs8RVe+WykSTPXZA9tPMpNKGMbCaVR0u7Sorfap+8kione1asGUoHavWx6EIZ+pZ7WQNsf7xN2qDYhlxQ5lDvoYaGroSCM69xnUG6wVXcHPLKPykK3K2RK0HQr6b591DUXHGDgDoqGo6ZybJA+LgLJ0j0Pupx5RiZDv3A/PKbeG/6ntLY1EM33xPlF4dV758Y1DO9J35VUWUmpsR3YUGnV3vz/5svuIZOsl6PTKwIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcD/+Az1uWm4wuYH/AAAAAElFTkSuQmCC
          type: image/png
        textColor: '#000000'
        primaryColor: '#FFFFFF'
        secondaryColor: '#A0A0A0'
      title: Consumer PSP metadata
      description: This metadata is provided by the consumer PSP during enrolment
        with EPI and should be used by clients to display the correct corporate identity
        of the consumer PSP.
      properties:
        icon:
          $ref: '#/components/schemas/AppIcon'
        textColor:
          type: string
          pattern: ^#[0-9ABCDEFabcdef]{6}$|^rgb\(\d{1,3}, \d{1,3}, \d{1,3}\)$
          description: |-
            > ❗️ This field is deprecated and will be removed in March 2025.
            The text colour as a CSS colour string.
          example: '#000000'
          deprecated: true
        primaryColor:
          type: string
          pattern: ^#[0-9ABCDEFabcdef]{6}$|^rgb\(\d{1,3}, \d{1,3}, \d{1,3}\)$
          description: The primary colour as a CSS colour string. Used mainly for
            backgrounds.
          example: '#FFFFFF'
        secondaryColor:
          type: string
          pattern: ^#[0-9ABCDEFabcdef]{6}$|^rgb\(\d{1,3}, \d{1,3}, \d{1,3}\)$
          description: |-
            > ❗️ This field is deprecated and will be removed in March 2025.
            The secondary colour as a CSS colour string. Used mainly for buttons and borders.
          example: '#A0A0A0'
          deprecated: true
    consumerPSPListSchema:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Consumer PSP ID.
        name:
          type: string
          description: Consumer PSP name.
        countryCodeList:
          type: array
          description: List of codes of countries that the consumer PSP does business
            with in the ISO 3166-1 alpha-2 code format.
          items:
            $ref: '#/components/schemas/CountryCode'
        appsCount:
          type: integer
          description: Indicates how many apps are available for this consumer PSP.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            meta:
              $ref: '#/components/schemas/consumerPspMetadata'
      required:
      - id
      - name
      - countryCodeList
      - appsCount
      - _embedded
    consumerPSPDetailsSchema:
      type: object
      properties:
        id:
          type: string
          description: Consumer PSP ID.
        name:
          type: string
          description: Consumer PSP name.
        countryCodeList:
          type: array
          description: List of codes of countries that the consumer PSP does business
            with in the ISO 3166-1 alpha-2 code format.
          items:
            $ref: '#/components/schemas/CountryCode'
        apps:
          type: array
          description: List of apps available for this consumer PSP.
          items:
            type: object
            description: Data about the App for this consumer PSP.
            properties:
              id:
                type: string
                format: uuid
                description: App ID.
              name:
                type: string
                description: App name.
              icon:
                $ref: '#/components/schemas/AppIcon'
            required:
            - id
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            meta:
              $ref: '#/components/schemas/consumerPspMetadata'
      required:
      - id
      - name
      - countryCodeList
      - apps
      - _embedded
    DisputeStatus:
      type: string
      description: Current status of the pre-dispute.
      oneOf:
      - const: Initiated
        title: Initiated
        default: Initiated
        description: Consumer initiated a new pre-dispute.
      - const: Accepted
        title: Accepted
        default: Accepted
        description: Acceptor accepted the pre-dispute.
      - const: ClosedByConsumer
        title: ClosedByConsumer
        default: ClosedByConsumer
        description: Consumer closed the pre-dispute.
      - const: FullyRefunded
        title: FullyRefunded
        default: FullyRefunded
        description: The pre-dispute was fully refunded and therefore closed by EPI.
      - const: RejectedByAcceptor
        title: RejectedByAcceptor
        default: RejectedByAcceptor
        description: Acceptor rejected the pre-dispute.
      - const: OfferMade
        title: OfferMade
        default: OfferMade
        description: Acceptor made an offer that is still ongoing.
      - const: OfferRejected
        title: OfferRejected
        default: OfferRejected
        description: Consumer rejected the offer.
      - const: OfferAccepted
        title: OfferAccepted
        default: OfferAccepted
        description: Consumer accepted the offer.
      - const: EscalatedIntoChargeback
        title: EscalatedIntoChargeback
        default: EscalatedIntoChargeback
        description: Consumer escalated the pre-dispute into chargeback.
      - const: ChargebackApproved
        title: ChargebackApproved
        default: ChargebackApproved
        description: The consumer PSP has approved the chargeback request and executed
          it against the acceptor PSP.
      - const: ChargebackRejected
        title: ChargebackRejected
        default: ChargebackRejected
        description: The consumer PSP has declined the chargeback request from the
          consumer. The dispute is closed.
      - const: ChargebackRepresented
        title: ChargebackRepresented
        default: ChargebackRepresented
        description: The acceptor PSP has disagreed with the chargeback and represents
          it.
      - const: ChargebackAccepted
        title: ChargebackAccepted
        default: ChargebackAccepted
        description: The acceptor PSP has accept the chargeback. The dispute is closed.
      - const: RepresentmentAccepted
        title: RepresentmentAccepted
        default: RepresentmentAccepted
        description: The consumer PSP has agreed with the acceptor PSP not to have
          a chargeback. The dispute is closed.
      - const: PreArbitrationStarted
        title: PreArbitrationStarted
        default: PreArbitrationStarted
        description: The consumer PSP has rejected the representment, which initiates
          the pre-arbitration process.
      - const: PreArbitrationWithdrawn
        title: PreArbitrationWithdrawn
        default: PreArbitrationWithdrawn
        description: The consumer PSP has withdrawn the chargeback. The dispute is
          closed.
      - const: PreArbitrationAccepted
        title: PreArbitrationAccepted
        default: PreArbitrationAccepted
        description: The acceptor PSP has accepted the chargeback during the pre-arbitration.
          The dispute is closed.
      - const: PreArbitrationDeclined
        title: PreArbitrationDeclined
        default: PreArbitrationDeclined
        description: The acceptor PSP has declined the pre-arbitration and therefore
          created the option for the consumer PSP to request arbitration by EPI.
      - const: PreArbitrationDeclinementAccepted
        title: PreArbitrationDeclinementAccepted
        default: PreArbitrationDeclinementAccepted
        description: The consumer PSP has accepted that pre-arbitration has been declined.
      - const: EscalatedToArbitration
        title: EscalatedToArbitration
        default: EscalatedToArbitration
        description: The consumer PSP escalated to arbitration through EPI
      - const: ArbitrationWonByConsumer
        title: ArbitrationWonByConsumer
        default: ArbitrationWonByConsumer
        description: The arbitration was decided in favor of the consumer.
      - const: ArbitrationWonByAcceptor
        title: ArbitrationWonByAcceptor
        default: ArbitrationWonByAcceptor
        description: The arbitration was decided in favor of the acceptor.
      - type: string
        not:
          enum:
          - Initiated
          - Accepted
          - ClosedByConsumer
          - ClosedByEpi
          - RejectedByAcceptor
          - OfferMade
          - OfferRejected
          - OfferAccepted
          - EscalatedIntoChargeback
          - ChargebackApproved
          - ChargebackRejected
          - ChargebackRepresented
          - ChargebackAccepted
          - RepresentmentAccepted
          - PreArbitrationStarted
          - PreArbitrationWithdrawn
          - PreArbitrationAccepted
          - PreArbitrationDeclined
          - PreArbitrationDeclinementAccepted
          - EscalatedToArbitration
          - ArbitrationWonByConsumer
          - ArbitrationWonByAcceptor
          description: Placeholder for a future reason, to be defined.
          title: Any string
    PreDisputeReason:
      type: string
      description: The reason for the dispute.
      oneOf:
      - const: GoodsNotReceived
        title: Goods not received
        default: GoodsNotReceived
      - const: GoodsNotAsDescribed
        title: Goods not as described
        default: GoodsNotAsDescribed
      - const: RefundNotReceived
        title: Refund not received
        default: RefundNotReceived
      - const: BillingProblem
        title: Billing problem
        default: BillingProblem
      - const: UnknownTransaction
        title: I don't recognize this transaction
        default: UnknownTransaction
      - type: string
        not:
          enum:
          - GoodsNotReceived
          - GoodsNotAsDescribed
          - RefundNotReceived
          - BillingProblem
          - UnknownTransaction
        description: Placeholder for a future reason, to be defined.
        title: Any String
    CursorCollectionResourceLinks:
      type: object
      properties:
        first:
          $ref: '#/components/schemas/link'
        prev:
          $ref: '#/components/schemas/link'
        next:
          $ref: '#/components/schemas/link'
      required:
      - first
    AcceptorResource:
      type: object
      required:
      - externalId
      - pspId
      properties:
        externalId:
          type: string
          description: The external ID of the acceptor.
        pspId:
          type: string
          description: The ID of the acceptor PSP.
        name:
          type: string
          description: The name of the acceptor.
        mcc:
          $ref: '#/components/schemas/MerchantCategoryCode'
          description: |
            The merchant category code (MCC) of the acceptor. See ISO 18245:2023 for more information on available merchant category codes.
    AuthorisationResource:
      type: object
      properties:
        amount:
          $ref: '#/components/schemas/Money'
    DisputeBasketItem:
      type: object
      required:
      - quantity
      - unitPrice
      properties:
        sku:
          type: string
          description: The stock keeping unit (SKU) of the item.
          minLength: 1
          maxLength: 128
        name:
          type: string
          description: The name of the item.
          minLength: 1
          maxLength: 128
        description:
          type: string
          description: The description of the item.
          minLength: 1
          maxLength: 128
        quantity:
          type: number
          description: The quantity of the item.
          minimum: 1
        unitPrice:
          $ref: '#/components/schemas/Money'
        tax:
          $ref: '#/components/schemas/Money'
    DisputeAddress:
      type: object
      title: Address
      required:
      - recipientName
      - line1
      - city
      - postalCode
      - countryCode
      properties:
        recipientName:
          type: string
          minLength: 1
          maxLength: 128
        line1:
          type: string
          minLength: 1
          maxLength: 300
        line2:
          type: string
          minLength: 1
          maxLength: 300
        city:
          type: string
          minLength: 1
          maxLength: 64
        postalCode:
          type: string
          minLength: 1
          maxLength: 32
        state:
          type: string
          minLength: 1
          maxLength: 300
        countryCode:
          type: string
    Consent:
      type: object
      required:
      - id
      properties:
        id:
          type: string
          format: UUID
          description: The ID of consent.
        orderReferenceId:
          type: string
          description: The ID of the order.
        basketItems:
          type: array
          items:
            $ref: '#/components/schemas/DisputeBasketItem'
          description: The purchased basket items.
        billingAddress:
          $ref: '#/components/schemas/DisputeAddress'
          description: The billing address.
        shippingAddress:
          $ref: '#/components/schemas/DisputeAddress'
          description: The shipping address.
    DisputeConsumerResource:
      type: object
      required:
      - id
      - pspId
      properties:
        id:
          type: string
          format: UUID
          description: The ID of the consumer.
        pspId:
          type: string
          description: The ID of the consumer PSP.
        name:
          type: object
          required:
          - firstName
          - lastName
          properties:
            firstName:
              type: string
              minLength: 1
              maxLength: 255
              description: The first name of the consumer, as is known to the consumer
                PSP.
            middleNames:
              type: string
              minLength: 1
              maxLength: 255
              description: One or more middle names of the consumer, as is known to
                the consumer PSP.
            lastName:
              type: string
              minLength: 1
              maxLength: 255
              description: The last name of the consumer, as is known to the consumer
                PSP.
    DisputeProperties:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The dispute ID
        shortId:
          type: string
          description: A human-readable dispute ID.
        createdAt:
          type: string
          format: date-time
          description: The date when the dispute was created.
        replyUntil:
          type: string
          format: date-time
          description: The deadline to reply. The property is set to `null` if there
            is no action required of the party that calls this endpoint.  For example,
            if the acceptor PSP has made an offer and is waiting for the consumer
            to reply, then `replyUntil` will be set to `null`.
        status:
          $ref: '#/components/schemas/DisputeStatus'
        acceptor:
          $ref: '#/components/schemas/AcceptorResource'
        authorisations:
          type: array
          description: The list of authorised amounts.
          items:
            $ref: '#/components/schemas/AuthorisationResource'
        consent:
          $ref: '#/components/schemas/Consent'
        consumer:
          $ref: '#/components/schemas/DisputeConsumerResource'
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            self:
              $ref: '#/components/schemas/link'
            consent:
              $ref: '#/components/schemas/link'
    CursorPage:
      type: object
      required:
      - size
      - requestedPageSize
      properties:
        size:
          type: number
          description: The actual page size.
        requestedPageSize:
          type: number
          description: The requested page size.
    InitiatePreDisputeRequest:
      type: object
      properties:
        reason:
          $ref: '#/components/schemas/PreDisputeReason'
        consentId:
          type: string
          format: uuid
          description: The ID of the consent that is disputed.
        message:
          type: string
          minLength: 1
          description: The consumer must provide information to explain the reasons
            behind the creation of the pre-dispute.
          maxLength: 2000
      required:
      - reason
      - consentId
      - message
    PreDisputeMessageResource:
      type: object
      properties:
        content:
          type: string
          description: The content of the message.
        author:
          enum:
          - Consumer
          - Acceptor
          - EPI
        sentAt:
          type: string
          format: date-time
          description: The date and time at which the message was sent.
        _links:
          type: object
          description: HAL links to attached files.
          properties:
            attachments:
              type: array
              items:
                $ref: '#/components/schemas/link'
        messageType:
          type: string
          description: The type of the message.
          enum:
          - Message
          - Initiated
          - AcceptedFullRefund
          - FullyRefunded
          - AcceptedResendGoods
          - AcceptedPartialRefund
          - Closed
          - RejectedByAcceptor
          - OfferMade
          - OfferRejected
          - OfferAccepted
          - EscalatedIntoChargeback
      example:
        content: I would like to return the goods and get a full refund.
        messageType: Initiated
        author: Consumer
    PreDisputeMessageHistoryResource:
      type: object
      properties:
        messages:
          type: array
          description: The list of messages describing the history of the pre-dispute.
          items:
            $ref: '#/components/schemas/PreDisputeMessageResource'
    ChargebackActivitySummaryResource:
      type: object
      properties:
        entries:
          type: array
          description: A condensed log of activities that have happened during the
            chargeback phase.
          items:
            type: object
            properties:
              occurredAt:
                type: string
                format: date-time
                description: The date and time at which the activity occurred.
              activity:
                type: string
                description: The type of the activity.
                enum:
                - ChargebackRequested
                - ChargebackApproved
                - ChargebackRejected
                - ChargebackRepresented
                - ChargebackAccepted
                - RepresentmentAccepted
                - PreArbitrationStarted
                - PreArbitrationWithdrawn
                - PreArbitrationAccepted
                - PreArbitrationDeclinementAccepted
                - ArbitrationWonByConsumer
                - ArbitrationWonByAcceptor
              message:
                type: string
                description: An optional message completing the activity.
            required:
            - occurredAt
            - activity
    PreDisputeResource:
      allOf:
      - $ref: '#/components/schemas/DisputeProperties'
      - type: object
        properties:
          reason:
            $ref: '#/components/schemas/PreDisputeReason'
          isEscalatable:
            type: boolean
            description: Indicates whether the pre-dispute can be escalated into a
              chargeback.
          isClosed:
            type: boolean
            description: Indicates whether the pre-dispute is closed or not.
          messageHistory:
            $ref: '#/components/schemas/PreDisputeMessageHistoryResource'
          chargebackActivitySummary:
            $ref: '#/components/schemas/ChargebackActivitySummaryResource'
          _links:
            type: object
            description: HAL links to related resources.
            properties:
              self:
                $ref: '#/components/schemas/link'
              consent:
                $ref: '#/components/schemas/link'
      required:
      - id
      - shortId
      - acceptor
      - consumer
      - consent
      - reason
      - createdAt
      - status
      - isEscalatable
      - messageHistory
      - authorisations
      - _links
    FaqResource:
      type: object
      properties:
        language:
          type: string
          description: The language of the FAQ entries in 'en-US' format.
        question:
          type: string
          description: The frequently asked question.
        answer:
          type: string
          description: The answer to the frequently asked question.
      required:
      - language
      - question
      - answer
    ShopResource:
      type: object
      description: The shop information.
      properties:
        name:
          type: string
          example: Shop Name
          description: The shop name.
        contact:
          type: object
          description: The shop contact information.
          properties:
            email:
              type: string
              example: epi@support.com
              description: The shop e-mail.
            phone:
              type: string
              example: +49 800 122 67 90
              description: The shops phone number.
            website:
              type: string
              example: www.epicompany.com/contact
              description: The shops website.
    EvaluatePreDisputeResource:
      description: The response returned by the evaluate pre-dispute endpoint.
      oneOf:
      - type: object
        title: Disputable reasons
        description: Response returned when the payment is disputable.
        properties:
          type:
            type: string
            const: Disputable
          isDisputable:
            type: boolean
            example: true
            description: The payment is disputable.
          availableReasons:
            type: array
            minItems: 1
            description: All the reasons why the payment can be disputed.
            items:
              $ref: '#/components/schemas/PreDisputeReason'
          faqs:
            type: object
            propertyNames:
              $ref: '#/components/schemas/PreDisputeReason'
            additionalProperties:
              type: array
              minItems: 0
              description: The array of FAQ resources that contain all available questions
                and answers that relate to why the payment is disputable.
              items:
                $ref: '#/components/schemas/FaqResource'
          shop:
            $ref: '#/components/schemas/ShopResource'
        required:
        - isDisputable
        - availableReasons
        - faqs
      - type: object
        title: Indisputable reason
        description: Response returned when the payment is not disputable.
        properties:
          type:
            type: string
            const: Undisputable
          isDisputable:
            type: boolean
            example: false
            description: The payment is indisputable.
          reason:
            enum:
            - PaymentRequestNotCaptured
            - PaymentTooOld
            - PaymentBelowMinimumAmount
            - AlreadyDisputed
            description: The reason why the payment is not disputable.
          faqs:
            type: array
            minItems: 0
            description: An array of FAQ resources that contain questions and answers
              that relate to why the payment is indisputable.
            items:
              $ref: '#/components/schemas/FaqResource'
          shop:
            $ref: '#/components/schemas/ShopResource'
          existingDisputeId:
            type: string
            format: uuid
            description: When `reasonCode` is set to `AlreadyDisputed`, this field
              contains the ID of the existing dispute.
        required:
        - isDisputable
        - reason
        - faqs
    ClosePreDisputeRequest:
      type: object
      properties:
        message:
          type: string
          minLength: 1
          maxLength: 2000
          description: The reason to close the pre-dispute.
    AcceptPreDisputeResendGoodsRequest:
      type: object
      properties:
        type:
          type: string
          const: ResendGoods
          description: The type of the request.
        message:
          type: string
          minLength: 1
          maxLength: 2000
          description: The reason to accept the pre-dispute.
      required:
      - type
      - message
    AcceptPreDisputeFullRefundRequest:
      type: object
      properties:
        type:
          type: string
          const: FullRefund
          description: The type of the request.
        message:
          type: string
          minLength: 1
          maxLength: 2000
          description: The reason to accept the pre-dispute.
      required:
      - type
      - message
    AcceptPreDisputePartialRefundRequest:
      type: object
      properties:
        type:
          type: string
          const: PartialRefund
          description: The type of the request.
        message:
          type: string
          minLength: 1
          maxLength: 2000
          description: The reason to accept the pre-dispute.
      required:
      - type
      - message
    RejectPreDisputeRequest:
      type: object
      properties:
        message:
          type: string
          minLength: 1
          maxLength: 2000
          description: The reason to reject the pre-dispute.
      required:
      - message
    CommentRequest:
      type: object
      properties:
        comment:
          type: string
          minLength: 1
          maxLength: 2000
          description: The message to send.
      required:
      - comment
      example:
        comment: This is a comment from the merchant.
    AnswerOfferRequest:
      type: object
      properties:
        answer:
          type: string
          enum:
          - ACCEPT
          - REJECT
          description: Whether the resolution is accepted or rejected.
      required:
      - answer
    MakeAnOfferRequest:
      type: object
      properties:
        offer:
          type: string
          minLength: 1
          maxLength: 2000
          description: A field in which the acceptor or acceptor PSP can enter a description
            of the offer.
      required:
      - offer
      example:
        offer: We saw that the delivery is ongoing. We are sorry for the delay and
          we would like to offer you a 10% discount on your next purchase.
    ChargebackReasonCode:
      title: Chargeback reason status codes
      type: integer
      enum:
      - 11
      - 12
      - 13
      - 14
      - 21
      - 31
      - 32
      - 33
      - 34
      - 35
      description: |-
        A chargeback resource can have one of the following reason codes:

        | Status |                 Description                      |
        |:------:|:------------------------------------------------:|
        |   11   | Duplicate charge                                 |
        |   12   | Incorrect transaction amount                     |
        |   13   | Paid by other means                              |
        |   14   | Incorrect transaction currency                   |
        |   21   | Unauthorized transaction                         |
        |   31   | Defective merchandise – Not as described         |
        |   32   | Services not rendered/Non-received merchandise   |
        |   33   | Cancelled recurring payment                      |
        |   34   | Refund not credited                              |
        |   35   | Non-authorized additional deferred charges       |
    ChargebackMessageResource:
      type: object
      properties:
        content:
          type: string
          description: The content of the message.
        author:
          enum:
          - ConsumerPSP
          - AcceptorPSP
        sentAt:
          type: string
          format: date-time
          description: The date and time at which the message was sent.
        _links:
          type: object
          description: HAL links to attached files.
          properties:
            attachments:
              type: array
              items:
                $ref: '#/components/schemas/link'
        messageType:
          type: string
          description: The type of the message.
          enum:
          - Message
          - Initiated
          - Approved
          - Rejected
          - Accepted
          - Represented
          - RepresentmentAccepted
          - PreArbitrationStarted
          - PreArbitrationWithdrawn
          - PreArbitrationAccepted
          - PreArbitrationDeclined
          - PreArbitrationDeclinementAccepted
          - EscalatedToArbitration
          - ArbitrationWonByConsumer
          - ArbitrationWonByAcceptor
      example:
        content: I would like to return the goods and get a full refund.
        messageType: Approved
        author: ConsumerPSP
    ChargebackMessageHistoryResource:
      type: object
      properties:
        messages:
          type: array
          description: The list of messages describing the history of the chargeback.
          items:
            $ref: '#/components/schemas/ChargebackMessageResource'
    TransactionDataResource:
      type: object
      properties:
        beneficiaryName:
          type: string
          description: The name of the beneficiary of the chargeback. (E001)
        iban:
          type: string
          description: The IBAN of the beneficiary of the chargeback. (C001)
        amount:
          $ref: '#/components/schemas/Money'
          description: The amount of the SCT Inst (T002).
        purpose:
          type: string
          description: The purpose of the SCT Inst Instruction. (T007)
        categoryPurpose:
          type: string
          description: The category purpose of the SCT Inst Instruction. (T008)
        remittanceInfo:
          type: string
          description: The remittance information of the SCT Inst Instruction. (T009)
        originatorsReference:
          type: string
          description: The originator's reference of the SCT Inst Instruction. (T014)
    ChargebackResource:
      allOf:
      - $ref: '#/components/schemas/DisputeProperties'
      - type: object
        properties:
          reasonCode:
            $ref: '#/components/schemas/ChargebackReasonCode'
          messageHistory:
            $ref: '#/components/schemas/ChargebackMessageHistoryResource'
          consumerPspTransactionData:
            $ref: '#/components/schemas/TransactionDataResource'
          acceptorPspTransactionData:
            $ref: '#/components/schemas/TransactionDataResource'
          _embedded:
            type: object
            properties:
              preDispute:
                type: object
                description: The pre-dispute that was escalated to a chargeback.
                properties:
                  reason:
                    $ref: '#/components/schemas/PreDisputeReason'
                  messageHistory:
                    $ref: '#/components/schemas/PreDisputeMessageHistoryResource'
      required:
      - id
      - shortId
      - acceptor
      - consumer
      - consent
      - createdAt
      - status
      - messageHistory
      - authorisations
      - _links
      - _embedded
    ApproveChargebackRequest:
      type: object
      properties:
        chargebackActivityMessage:
          type: string
          minLength: 1
          maxLength: 2000
          description: The message that will appear in the chargeback activity summary
            of the consumer.
        message:
          type: string
          minLength: 1
          maxLength: 2000
          description: The message that will be added to the chargeback, not shown
            to the consumer or the acceptor.
        reasonCode:
          $ref: '#/components/schemas/ChargebackReasonCode'
        beneficiaryName:
          type: string
          minLength: 1
          maxLength: 2000
          description: The name of the beneficiary of the chargeback booking.
        beneficiaryIban:
          $ref: '#/components/schemas/IBAN'
          description: The IBAN of the beneficiary of the chargeback booking.
        amount:
          $ref: '#/components/schemas/Money'
          description: The amount to be transferred.
      required:
      - chargebackActivityMessage
      - message
      - reasonCode
      - beneficiaryName
      - beneficiaryIban
      - amount
      example:
        chargebackActivityMessage: Your chargeback request has been approved. If you
          haven't received your refund yet, please contact your bank.
        message: My customer is absolutely right
        reasonCode: 11
        beneficiaryName: John Doe
        beneficiaryIban: DE89370400440532013000
        amount:
          euroCents: 1234
    RejectChargebackRequest:
      type: object
      properties:
        chargebackActivityMessage:
          type: string
          minLength: 1
          maxLength: 2000
          description: The message that will appear in the chargeback activity summary
            of the consumer.
      required:
      - chargebackActivityMessage
      example:
        chargebackActivityMessage: Your chargeback request has been approved. If you
          haven't received your refund yet, please contact your bank.
    InboundFraudulentTransaction:
      title: Payer PSP Fraud Notification
      description: |
        A notification about fraudulent transactions, reported to EPI by the payer PSP.
      type: object
      properties:
        transactionId:
          type: string
          format: uuid
          description: |
            Unique identifier for the transaction within the EPI system.
          examples:
          - db0a49f4-576b-43d7-a79e-f3090cf1d66a
        externalId:
          type: string
          description: |
            Originator PSP reference to correlate the transaction  between EPI's and the consumer PSP's systems.
          examples:
          - EXT987654321
        amount:
          type: object
          properties:
            value:
              type: integer
              description: |
                The amount of the transaction in the currency's minor unit  as defined by ISO 4217:2015. For example, euro cents.
              examples:
              - 4500
            currency:
              type: string
              description: |
                The three-letter ISO 4217:2015 currency code for the transaction.
              examples:
              - EUR
          required:
          - value
          - currency
        payeeName:
          type: string
          description: |
            The know-your-customer (KYC) name for the payee that is provided by the payee's PSP or the commercial trade name of the acceptor.
          examples:
          - John Doe
        fraudCategory:
          description: |
            This enumeration is extensible in order to accommodate additional fraud categories in the future.
          oneOf:
          - const: Lost
            title: Lost
            default: Lost
          - const: Stolen
            title: Stolen
            default: Stolen
          - const: Fraudulent application
            title: Fraudulent application
            default: Fraudulent application
          - const: Account takeover
            title: Account takeover
            default: Account takeover
          - const: Fraudulent use
            title: Fraudulent use
            default: Fraudulent use
          - const: Modified transaction
            title: Modified transaction
            default: Modified transaction
          - const: First-party fraud
            title: First-party fraud
            default: First-party fraud
          - const: Payer manipulation
            title: Payer manipulation
            default: Payer manipulation
          - type: string
            not:
              enum:
              - Lost
              - Stolen
              - Fraudulent application
              - Account takeover
              - Fraudulent use
              - Modified transaction
              - First-party fraud
              - Payer manipulation
            description: |
              Any other type of fraud category not listed above. This property is extensible to accommodate future fraud categories.
            title: Any string
          examples:
          - Account takeover
          - Other
        fraudSubcategory:
          type: object
          properties:
            payerManipulationMethod:
              type: string
              description: |
                Specify a fraud subcategory only if the fraud category is 'Payer manipulation'.
              enum:
              - E-mail contact
              - In-person contact
              - Online contact
              - Phone contact
              - Social media contact
              - Text message contact
              examples:
              - E-mail contact
      required:
      - transactionId
      - externalId
      - amount
      - payeeName
      - fraudCategory
    CreateFraudulentTransactionsRequest:
      type: object
      properties:
        fraudulentTransactions:
          description: |
            Add information about the fraudulent transactions to this array.
          type: array
          minItems: 1
          items:
            $ref: '#/components/schemas/InboundFraudulentTransaction'
    P2PPaymentPayeeSchema:
      title: P2P Payment (as a payee)
      type: object
      description: This is a P2P payment as seen by the payee.
      properties:
        id:
          type: string
          description: ID of the P2P payment. The [create a money transfer](ref:put-money-transfers)
            endpoint uses this ID as the `moneyTransferId`.
          format: uuid
        amount:
          $ref: '#/components/schemas/Money'
        title:
          type: string
          description: Large text or emojis used as message title, limited to three
            characters.
          example: 🎂🍽️💶
        message:
          type: string
          description: 'Message that is sent to the payee. *Important notice*: This
            field is going to be marked as optional in the first release of December
            2024 to match the optionality of this field in the request body, when
            creating a P2P payment.'
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        payeePaymentSourceId:
          type: string
          description: ID of the payment source that received the payment.
          format: uuid
        created:
          type: string
          format: date-time
          description: 'Date and time at which the P2P payment was created. (Format:
            Timestamp)'
          example: '2023-05-03T10:39:16.425084691Z'
        updatedAt:
          type: string
          format: date-time
          description: 'Date and time at which the P2P payment was updated. (Format:
            Timestamp)'
          example: '2023-05-03T10:39:16.425084691Z'
        status:
          $ref: '#/components/schemas/p2pPaymentStatus'
        _embedded:
          type: object
          description: Embedded, related resources.
          required:
          - paymentRules
          properties:
            paymentRules:
              type: object
              title: Payment rules
              description: The payment plan is converted into payment rules, which
                are a parameterised version of the payment plan details. The payment
                plan is more readable than the payment rules. The payment rules describe
                one or more payments that consumers consent to.
              properties:
                paymentRules:
                  type: array
                  items:
                    $ref: '#/components/schemas/paymentRuleResourceItem'
              required:
              - paymentRules
            paymentDataset:
              $ref: '#/components/schemas/MoneyTransferDatasetResource'
              description: Embedded transaction resource that contains the information
                for completing the SCT Inst template. Retrievable by the consumer
                PSP, not the wallet.
            payerContact:
              $ref: '#/components/schemas/ConsumerProfile'
            p2pRequest:
              type: object
              description: Embedded P2P Request resource if the payment was created
                from a P2P request.  See the [Retrieve a P2P Request endpoint](ref:get-p2p-requests-p2prequestid)
                for an example of the type.
            p2pOpenRequest:
              type: object
              description: Embedded P2P open request resource if the payment was created
                from a P2P open request.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          - blockContact
          properties:
            self:
              $ref: '#/components/schemas/link'
            fraudRiskInformation:
              $ref: '#/components/schemas/link'
            blockContact:
              $ref: '#/components/schemas/link'
        viewerType:
          type: string
          description: The type of the viewer of the P2P payment.
          const: Payee
          enum:
          - Payee
      required:
      - id
      - amount
      - status
      - created
      - updatedAt
      - _embedded
      - _links
      - viewerType
    P2PPaymentBaseSchema:
      title: P2P Payment
      type: object
      description: This is a P2P payment.
      properties:
        id:
          type: string
          description: ID of the P2P payment. The [create a money transfer](ref:put-money-transfers)
            endpoint uses this ID as the `moneyTransferId`.
          format: uuid
        amount:
          $ref: '#/components/schemas/Money'
        title:
          type: string
          description: Large text or emojis used as message title, limited to three
            characters.
          example: 🎂🍽️💶
        message:
          type: string
          description: 'Message that is sent to the payee. *Important notice*: This
            field is going to be marked as optional in the first release of December
            2024 to match the optionality of this field in the request body, when
            creating a P2P payment.'
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        created:
          type: string
          format: date-time
          description: 'Date and time at which the P2P payment was created. (Format:
            Timestamp)'
          example: '2023-05-03T10:39:16.425084691Z'
        updatedAt:
          type: string
          format: date-time
          description: 'Date and time at which the P2P payment was updated. (Format:
            Timestamp)'
          example: '2023-05-03T10:39:16.425084691Z'
        status:
          $ref: '#/components/schemas/p2pPaymentStatus'
        _embedded:
          type: object
          description: Embedded, related resources.
          required:
          - paymentRules
          properties:
            paymentRules:
              type: object
              title: Payment rules
              description: The payment plan is converted into payment rules, which
                are a parameterised version of the payment plan details. The payment
                plan is more readable than the payment rules. The payment rules describe
                one or more payments that consumers consent to.
              properties:
                paymentRules:
                  type: array
                  items:
                    $ref: '#/components/schemas/paymentRuleResourceItem'
              required:
              - paymentRules
            paymentDataset:
              $ref: '#/components/schemas/MoneyTransferDatasetResource'
              description: Embedded transaction resource that contains the information
                for completing the SCT Inst template. Retrievable by the consumer
                PSP, not the wallet.
            p2pRequest:
              type: object
              description: Embedded P2P Request resource if the payment was created
                from a P2P request.  See the [Retrieve a P2P Request endpoint](ref:get-p2p-requests-p2prequestid)
                for an example of the type.
            p2pOpenRequest:
              type: object
              description: Embedded P2P open request resource if the payment was created
                from a P2P open request.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            fraudRiskInformation:
              description: Is returned only when a consumer PSP makes the request.
              $ref: '#/components/schemas/link'
        viewerType:
          type: string
          description: The type of the viewer of the P2P payment.
          const: Unknown
          enum:
          - Unknown
      required:
      - id
      - amount
      - status
      - created
      - updatedAt
      - _embedded
      - _links
      - viewerType
    P2PPaymentSchema:
      oneOf:
      - $ref: '#/components/schemas/P2PPaymentPayerSchema'
      - $ref: '#/components/schemas/P2PPaymentPayeeSchema'
      - $ref: '#/components/schemas/P2PPaymentBaseSchema'
      discriminator:
        propertyName: viewerType
        mapping:
          Payee: '#/components/schemas/P2PPaymentPayeeSchema'
          Payer: '#/components/schemas/P2PPaymentPayerSchema'
          Unknown: '#/components/schemas/P2PPaymentBaseSchema'
    FlowType:
      title: P2P Flow Type
      description: |-
        The action flow in which the payment was created. This consists of the following types:
        - Standard: After a consumer PSP implements the `MoneyTransfer` route, the EPI central services call this route during P2P payment approval to trigger the SCT-Inst money transfer.
        - StandardSync: As the `Standard` flow, but the consumer PSP sends the final payment status as response to the `MoneyTransfer` call.
        - StandardAsync: As the `Standard` flow, but the consumer PSP eventually sends the final payment status via the ["Consumer PSP Events" route](ref:post-consumer-psp-events).
        - Alternative: The payer's consumer PSP handles the payment process directly and eventually sends the final payment status via the ["Consumer PSP Events" route](ref:post-consumer-psp-events).
      type: string
      enum:
      - Standard
      - StandardSync
      - StandardAsync
      - Alternative
    P2PPaymentFraudScores:
      type: object
      required:
      - type
      properties:
        type:
          type: string
          const: p2p-payment-fraud-scores
        originator:
          $ref: '#/components/schemas/FraudScore'
          description: The fraud score for the originator of the P2P transaction.
        beneficiary:
          $ref: '#/components/schemas/FraudScore'
          description: The fraud score for the beneficiary of the P2P transaction.
    P2PPaymentFraudRiskInformationResource:
      title: Fraud risk information resource
      description: HAL resource representation of fraud risk information for a P2P
        payment.
      type: object
      properties:
        isOriginatedFromP2PRequest:
          type: boolean
          description: Specifies whether the payment originated in a P2P Request.
        fraudRiskInformation:
          type: object
          description: Contains information related to the fraud risk assessment for
            a P2P transaction.
          properties:
            fraudScores:
              oneOf:
              - $ref: '#/components/schemas/P2PPaymentFraudScores'
              - $ref: '#/components/schemas/FraudScoreError'
              discriminator:
                propertyName: type
                mapping:
                  p2p-payment-fraud-scores: '#/components/schemas/P2PPaymentFraudScores'
                  fraud-scores-error: '#/components/schemas/FraudScoreError'
              description: Contains fraud scores for the P2P transaction, split up
                by participant.
            consumerDeviceTelemetry:
              $ref: '#/components/schemas/OutboundConsumerDeviceTelemetry'
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            p2pPayment:
              $ref: '#/components/schemas/link'
      required:
      - isOriginatedFromP2PRequest
      - fraudRiskInformation
      - _links
      example:
        isOriginatedFromP2PRequest: true
        fraudRiskInformation:
          fraudScores:
            type: p2p-payment-fraud-scores
            originator:
              score: 10
              primaryRiskVector: AccountTakeover
            beneficiary:
              score: 90
              primaryRiskVector: RequestSpam
          consumerDeviceTelemetry:
            deviceModel: iPhone12,1
            deviceScreenResolution: 828x1792
            deviceCellularProviders: Telekom, Vodafone
            deviceLocation: 37.7749,-122.4194
            deviceTimeZone: America/Los_Angeles
            deviceId: 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
            deviceOs: iOS
            deviceLanguage: en_US
            deviceTime: '2023-09-25T12:34:56Z'
            deviceIpAddress: 192.0.2.123
            clientIpAddress: 198.51.100.101
            deviceUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)
              AppleWebKit/605.1.15 ...
            clientUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)
              AppleWebKit/605.1.15 ...
        _links:
          p2pPayment:
            href: https://api.epi-services.eu/api/p2p-payments/27b7911f-0b76-4db8-9989-ceb44343c3f8/fraud-risk-information
    P2PRequestStatus:
      title: P2P-request status type
      type: string
      enum:
      - Pending
      - Rejected
      - Approved
      - Canceled
      - Expired
      description: |-
        The status of a P2P Request resource can have the following values:

          - **`Pending`**:  The initial status. The payer has not yet approved the P2P request.

          - **`Rejected`**: The payer has rejected the P2P request.

          - **`Approved`**: The payer has approved the P2P request.

          - **`Canceled`**: The payee has closed the P2P request.

          - **`Expired`**:  The P2P request has expired without either an acceptance or rejection by the payer.
    P2PRequestPayeeSchema:
      title: P2P Request (created as payee)
      type: object
      description: This is a P2P request. It is created by the payee and can be approved
        or rejected by payers.
      properties:
        id:
          type: string
          description: ID of the P2P request.
          format: uuid
        amount:
          $ref: '#/components/schemas/Money'
        title:
          type: string
          description: Large text used as message title, limited to 3 characters,
            sent to the payer.
          example: 🎂🍽️💶
        message:
          type: string
          description: Message that is sent to the payer.
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        status:
          type: object
          description: Status of the P2P request.
          properties:
            value:
              $ref: '#/components/schemas/P2PRequestStatus'
            at:
              type: string
              format: date-time
              description: 'Date and time at which the status was last updated. (Format:
                Timestamp)'
          required:
          - value
          - at
        created:
          type: string
          format: date-time
          description: 'Date and time at which the P2P request was created. (Format:
            Timestamp)'
        expiresAt:
          type: string
          format: date-time
          description: 'Date and time at which the P2P request expires. (Format: Timestamp)'
        updatedAt:
          type: string
          format: date-time
          description: 'Date and time at which the P2P request was updated. (Format:
            Timestamp)'
        payeePaymentMeansId:
          type: string
          description: The means of payment that is used to receive the payment.
        payerProxyHash:
          $ref: '#/components/schemas/proxyHash'
        payerShareId:
          type: string
          description: The share ID of the payer that is only set if `payerProxyHash`
            is `null`.
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            payerContact:
              $ref: '#/components/schemas/ConsumerProfile'
              description: |-
                The profile of the payer that is displayed to the payee.
                The profile information is derived from the proxy hash of the payer at the time of the payment request creation. This profile information might be different from the related P2P-payment payer information because on approval, the payer can use a different payment means.
            p2pPayment:
              $ref: '#/components/schemas/P2PPaymentPayeeSchema'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          - cancellation
          properties:
            self:
              $ref: '#/components/schemas/link'
            cancellation:
              $ref: '#/components/schemas/link'
        viewerType:
          type: string
          description: The type of the viewer of the P2P request.
          const: Payee
          enum:
          - Payee
      required:
      - id
      - amount
      - status
      - created
      - expiresAt
      - updatedAt
      - payeePaymentMeansId
      - _embedded
      - _links
      - viewerType
      examples:
      - id: 0e1acec0-57ed-4094-94db-cdcfee5ae7b6
        amount:
          euroCents: 4900
        message: For our weekend trip 🧳 🌄.
        status:
          value: Pending
          at: '2023-05-04T10:39:18.238726038Z'
        created: '2023-05-03T10:39:18.238726038Z'
        updatedAt: '2023-05-04T10:39:18.238726038Z'
        expiresAt: '2023-06-02T10:39:18.238726038Z'
        payeePaymentMeansId: c28d282a-ac77-4bee-a5c1-bc4d7ed426c3
        payerProxyHash: PZGI4MTD8kVdbysQMF8ztCykGY87PLIhrg-1qfxPPrg=
        _embedded:
          payerContact:
            displayName: Payer Display Name
            proxyValue: '+431809876543210'
            pro: false
        _links:
          self:
            href: https://api.epi-services.eu/api/p2p-requests/0e1acec0-57ed-4094-94db-cdcfee5ae7b6
          cancellation:
            href: https://api.epi-services.eu/api/p2p-requests/0e1acec0-57ed-4094-94db-cdcfee5ae7b6/cancellation
        viewerType: Payee
    P2PRequestPayerSchema:
      title: P2P Request (received as payer)
      type: object
      description: This is a P2P request as seen by the payer.
      properties:
        id:
          type: string
          description: ID of the P2P request.
          format: uuid
        amount:
          $ref: '#/components/schemas/Money'
        title:
          type: string
          description: Large text used as message title, limited to 3 characters,
            sent to the payer.
          example: 🎂🍽️💶
        message:
          type: string
          description: Message that is sent to the payer.
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        status:
          type: object
          description: Status of the P2P request.
          properties:
            value:
              $ref: '#/components/schemas/P2PRequestStatus'
            at:
              type: string
              format: date-time
              description: 'Date and time at which the status was last updated. (Format:
                Timestamp)'
          required:
          - value
          - at
        created:
          type: string
          format: date-time
          description: 'Date and time at which the P2P request was created. (Format:
            Timestamp)'
        expiresAt:
          type: string
          format: date-time
          description: 'Date and time at which the P2P request expires. (Format: Timestamp)'
        updatedAt:
          type: string
          format: date-time
          description: 'Date and time at which the P2P request was updated. (Format:
            Timestamp)'
        availableAction:
          type: string
          description: The action available to the payer.
          oneOf:
          - const: ApproveRequest
            default: ApproveRequest
            title: ApproveRequest
            description: Payer can approve the P2P request.
            type: string
          - const: ApprovePayment
            default: ApprovePayment
            title: ApprovePayment
            description: Payer can approve the P2P payment.
            type: string
          - const: Wait
            default: Wait
            title: Wait
            description: Payer must wait for the consumer PSP to settle the P2P payment.
            type: string
          - const: CreateNewPayment
            default: CreateNewPayment
            title: CreateNewPayment
            description: Payer can retry a new P2P payment.
            type: string
          - type: string
            not:
              enum:
              - ApproveRequest
              - ApprovePayment
              - Wait
              - CreateNewPayment
            description: Placeholder for a future action, to be defined. This cannot
              be used for custom actions.
            title: Any String
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            payeeContact:
              $ref: '#/components/schemas/ConsumerProfile'
            p2pPayment:
              $ref: '#/components/schemas/P2PPaymentPayerSchema'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          - approval
          - rejection
          - blockContact
          properties:
            self:
              $ref: '#/components/schemas/link'
            approval:
              $ref: '#/components/schemas/link'
            rejection:
              $ref: '#/components/schemas/link'
            blockContact:
              $ref: '#/components/schemas/link'
            retryPayment:
              $ref: '#/components/schemas/link'
        viewerType:
          type: string
          description: The type of the viewer of the P2P request.
          const: Payer
          enum:
          - Payer
      required:
      - id
      - amount
      - status
      - created
      - expiresAt
      - updatedAt
      - _embedded
      - _links
      - viewerType
    P2PRequestBaseSchema:
      title: P2P Request
      type: object
      description: This is a P2P request. It is created by the payee and can be approved
        or rejected by payers.
      properties:
        id:
          type: string
          description: ID of the P2P request.
          format: uuid
        amount:
          $ref: '#/components/schemas/Money'
        title:
          type: string
          description: Large text used as message title, limited to 3 characters,
            sent to the payer.
          example: 🎂🍽️💶
        message:
          type: string
          description: Message that is sent to the payer.
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        status:
          type: object
          description: Status of the P2P request.
          properties:
            value:
              $ref: '#/components/schemas/P2PRequestStatus'
            at:
              type: string
              format: date-time
              description: 'Date and time at which the status was last updated. (Format:
                Timestamp)'
          required:
          - value
          - at
        created:
          type: string
          format: date-time
          description: 'Date and time at which the P2P request was created. (Format:
            Timestamp)'
        expiresAt:
          type: string
          format: date-time
          description: 'Date and time at which the P2P request expires. (Format: Timestamp)'
        updatedAt:
          type: string
          format: date-time
          description: 'Date and time at which the P2P request was updated. (Format:
            Timestamp)'
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            p2pPayment:
              $ref: '#/components/schemas/P2PPaymentBaseSchema'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
        viewerType:
          type: string
          description: The type of the viewer of the P2P request.
          const: Unknown
          enum:
          - Unknown
      required:
      - id
      - amount
      - status
      - created
      - expiresAt
      - updatedAt
      - _embedded
      - _links
      - viewerType
      examples:
      - id: 0e1acec0-57ed-4094-94db-cdcfee5ae7b6
        amount:
          euroCents: 4900
        message: For our weekend trip 🧳 🌄.
        status:
          value: Pending
          at: '2023-05-04T10:39:18.238726038Z'
        created: '2023-05-03T10:39:18.238726038Z'
        updatedAt: '2023-05-04T10:39:18.238726038Z'
        expiresAt: '2023-06-02T10:39:18.238726038Z'
        _embedded: {
          }
        _links:
          self:
            href: https://api.epi-services.eu/api/p2p-requests/0e1acec0-57ed-4094-94db-cdcfee5ae7b6
        viewerType: Unknown
    P2PRequestSchema:
      oneOf:
      - $ref: '#/components/schemas/P2PRequestPayerSchema'
      - $ref: '#/components/schemas/P2PRequestPayeeSchema'
      - $ref: '#/components/schemas/P2PRequestBaseSchema'
      discriminator:
        propertyName: viewerType
        mapping:
          Payee: '#/components/schemas/P2PRequestPayeeSchema'
          Payer: '#/components/schemas/P2PRequestPayerSchema'
          Unknown: '#/components/schemas/P2PRequestBaseSchema'
    P2POpenRequestPayeeSchema:
      title: P2P Open Request (as payee)
      type: object
      description: This is a P2P open request. It is created by the payee and can
        be approved or rejected by payers.
      properties:
        id:
          type: string
          format: uuid
          description: ID of the P2P open request.
        amount:
          $ref: '#/components/schemas/Money'
        message:
          type: string
          description: Message that is sent to the payers.
        title:
          $ref: '#/components/schemas/P2POpenRequestTitle'
        paymentReference:
          $ref: '#/components/schemas/PaymentReference'
        status:
          type: object
          description: Status of the P2P Open request.
          properties:
            value:
              $ref: '#/components/schemas/P2POpenRequestStatus'
          required:
          - value
        createdAt:
          type: string
          format: date-time
          description: Date and time at which the P2P open request was created
        expiresAt:
          type: string
          format: date-time
          description: Date and time at which the P2P open request expires. The payee
            defines this value when creating the open request.
        updatedAt:
          type: string
          format: date-time
          description: Date and time at which the P2P open request's status was last
            changed
        payeePaymentMeansId:
          type: string
          description: The means of payment that is used to receive the payment.
        isFixedAmount:
          type: boolean
          description: Indicates whether the amount can be changed by the payer or
            not.
        originatingTransactionId:
          type: string
          description: The ID of the originating transaction. In the example of a
            purchase, the purchase transaction ID can be used as the `originatingTransactionId`
            to provide a reference for an open request.   For example, if a consumer
            pays for a group meal and then creates an open request for others from
            that group to pay their part, the `originatingTransactionId` provides
            the reference for in the open request for the meal.
        totalExpectedPayments:
          type: integer
          description: Total number of payments that are expected to be made.
        viewsCount:
          type: integer
          description: Total number of times the open request share url was decoded,
            that can be considered as the number of times it's been used.
        rejectionsCount:
          type: integer
          description: Total number of times the open request was rejected by payers.
        approvalsCount:
          type: integer
          description: Total number of times the open request was approved by payers.
        settlementsCount:
          type: integer
          description: Total number of payments that have been settled.
        shareUrl:
          type: string
          description: The share URL that can be used to share the open request with
            payers.
          example: https://share.weropay.eu/p/1/r/1234567890
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          - paymentsList
          properties:
            self:
              $ref: '#/components/schemas/link'
            cancellation:
              $ref: '#/components/schemas/link'
            paymentsList:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          description: Embedded resources (empty for the payee)
          properties: {
            }
        viewerType:
          type: string
          description: The type of the viewer of the P2P open request.
          const: Payee
          enum:
          - Payee
      required:
      - id
      - status
      - createdAt
      - expiresAt
      - payeePaymentMeansId
      - viewsCount
      - rejectionsCount
      - approvalsCount
      - settlementsCount
      - _links
      - _embedded
      - viewerType
    paymentRequestCaptureStatus:
      title: Payment request capture status
      type: string
      enum:
      - NotCaptured
      - PartiallyCaptured
      - FullyCaptured
      description: |-
        The capture status of a Payment Request. This status represents the overall capture state of the Payment Request resource and differs from the individual statuses of the linked capture operations. A Payment Request resource can have one of the following capture statuses:

        |       Status      | Description                                                     |
        |:-----------------:|:------------------------------------------------------------------------------------------:|
        | NotCaptured       | The consumer PSP has not processed any payment capture for the payment request.            |
        | PartiallyCaptured | The consumer PSP has processed at least one partial capture for this payment request.      |
        | FullyCaptured     | The Payment request has been fully captured (through 1 or more captures). No further captures are possible for the payment request. This status is the final status. |
    paymentRequestCaptureResourceAccepted:
      type: object
      description: The consumer PSP has accepted the payment capture request that
        EPI central services sent.
      title: Accepted
      properties:
        value:
          type: string
          const: Accepted
        at:
          type: string
          description: Date and time at which the status was set to `Accepted`. A
            valid UTC timestamp.
          format: date-time
      required:
      - value
      - at
    paymentRequestCaptureResourceFailed:
      type: object
      description: EPI central services sent the payment capture request to the consumer
        PSP, but the request has failed for technical reasons.
      title: Failed
      properties:
        value:
          type: string
          const: Failed
        at:
          type: string
          description: Date and time at which the status was set to `Failed`. A valid
            UTC timestamp.
          format: date-time
        technicalReason:
          type: string
          description: Reason for the failure. The reason can include any technical
            information that might be useful for debugging.
      required:
      - value
      - at
      - technicalReason
    paymentRequestCaptureResourcePending:
      type: object
      description: EPI central services sent the payment capture request to the consumer
        PSP. However, the consumer PSP encountered a problem while executing the SCT
        Inst and is trying to resolve it.
      title: Pending
      properties:
        value:
          type: string
          const: Pending
        at:
          type: string
          description: Date and time at which the status was set to `Pending`. This
            value must include the timestamp that is provided in the SCT Inst (T054)
            element.
          format: date-time
        reason:
          type: string
          description: If the reason code is 'NARR', this property must contain the
            proprietary reason why the capture is pending. Otherwise, it must contain
            a comprehensive description of the reason code.
        reasonCode:
          type: string
          description: Reason code for the problem / rejection (ISO 20022 PaymentRejectReasonCode).
      required:
      - value
      - at
      - reason
      - reasonCode
    paymentRequestCaptureResourceRejected:
      type: object
      description: The consumer PSP, clearing and settlement mechanism (CSM) provider,
        or beneficiary PSP has rejected the capture.
      title: Rejected
      properties:
        value:
          type: string
          const: Rejected
        at:
          type: string
          description: Date and time at which the status was set to `Rejected`. This
            value must include the timestamp that is provided in the SCT Inst (T054)
            element.
          format: date-time
        reason:
          type: string
          description: If the reason code is 'NARR', this property must contain the
            proprietary reason why the capture was rejected. Otherwise, it must contain
            a comprehensive description of the reason code.
        reasonCode:
          type: string
          description: Reason code for the rejection (ISO 20022 PaymentRejectReasonCode).
      required:
      - value
      - at
      - reason
      - reasonCode
    settlementMethod:
      title: SettlementMethod
      type: string
      enum:
      - SCTInst
      - OnUs
      - FinancialGuarantees
      description: |-
        The consumer PSP can settle a capture by using one of the following settlement methods:

        |       Method        | Description |
        |:-------------------:|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
        | SCTInst             | A SEPA instant credit transfer (SCT Inst) is the default settlement method for Wero transactions. |
        | OnUs                | On-us transactions are those for which the payment sources of the originator and of the beneficiary are with the same consumer PSP.                                                             |
        | FinancialGuarantees | Applicable only to e/m-commerce and point-of-sale payments. Used by EPI only when consumer PSPs have already made financial guarantees. For details, see the _EPI Financial Guarantees Policy_. |
    paymentRequestCaptureResourceSettled:
      type: object
      description: The consumer PSP has successfully settled the payment that EPI
        central services requested to be captured.
      title: Settled
      properties:
        value:
          type: string
          const: Settled
        at:
          type: string
          description: Date and time at which the status was set to `Settled`. This
            value must include the timestamp that is provided in the SCT Inst (T054)
            element.
          format: date-time
        originatorPspReference:
          type: string
          description: Originator PSP’s reference number of the transfer, for example,
            of the SCT Inst (T054). The reference of the SCT Inst Transaction given
            by the originator PSP, which must be delivered unaltered to the beneficiary
            PSP.
        settlementMethod:
          $ref: '#/components/schemas/settlementMethod'
      required:
      - value
      - at
      - originatorPspReference
    paymentRequestCaptureResourceStatus:
      description: |-
        A Capture resource at EPI central services can have the following statuses:

          |       Status      |                            Description                                                                                           |
          |:-----------------:|:--------------------------------------------------------------------------------------------------------------------------------:|
          | Accepted          | The consumer PSP has accepted the capture request.                                                                               |
          | Failed            | Payment capture has failed due to a technical issue at EPI central services or at the consumer PSP.                              |
          | Pending           | The consumer PSP accepted the capture request but encountered an issue while executing the SCT Inst and is trying to resolve it. |
          | Rejected          | The consumer PSP, clearing and settlement mechanism (CSM) provider, or beneficiary PSP has rejected the capture.                 |
          | Settled           | The consumer PSP has successfully settled the payment that EPI central services requested to be captured.                        |
      discriminator:
        propertyName: value
        mapping:
          Accepted: '#/components/schemas/paymentRequestCaptureResourceAccepted'
          Failed: '#/components/schemas/paymentRequestCaptureResourceFailed'
          Pending: '#/components/schemas/paymentRequestCaptureResourcePending'
          Rejected: '#/components/schemas/paymentRequestCaptureResourceRejected'
          Settled: '#/components/schemas/paymentRequestCaptureResourceSettled'
      oneOf:
      - $ref: '#/components/schemas/paymentRequestCaptureResourceAccepted'
      - $ref: '#/components/schemas/paymentRequestCaptureResourceFailed'
      - $ref: '#/components/schemas/paymentRequestCaptureResourcePending'
      - $ref: '#/components/schemas/paymentRequestCaptureResourceRejected'
      - $ref: '#/components/schemas/paymentRequestCaptureResourceSettled'
    paymentRequestCaptureResource:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID of the payment capture.
        amount:
          $ref: '#/components/schemas/Money'
        createdAt:
          type: string
          description: Date and time at which the Capture resource was created at
            EPI central services. A valid UTC timestamp.
          format: date-time
        status:
          $ref: '#/components/schemas/paymentRequestCaptureResourceStatus'
        referenceId:
          type: string
          description: External reference ID of the capture.
        retryMetadata:
          description: If the payment capture has been retried, this field contains
            the metadata of the previous capture attempt.
          type: object
          properties:
            originCaptureId:
              type: string
              format: uuid
              description: The ID of the original payment capture that must be retried.
          required:
          - originCaptureId
        final:
          type: boolean
          description: Indicates whether this capture is the final capture.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - id
      - amount
      - status
      - final
      - createdAt
      - _links
    paymentRequestCaptureCollectionResource:
      type: object
      description: This embedded collection contains all captures that correspond
        to the payment request.
      properties:
        _embedded:
          type: object
          description: Captures that correspond to the payment request.
          required:
          - captures
          properties:
            captures:
              type: array
              description: Captures that correspond to the payment request.
              items:
                $ref: '#/components/schemas/paymentRequestCaptureResource'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - _embedded
      - _links
    paymentRequestAuthorisationResourceInitial:
      type: object
      description: The status of the Authorisation resource at EPI central services
        is `Initial`. An authorisation request has _not_ been sent to the consumer
        PSP yet.
      title: Initial
      properties:
        value:
          type: string
          const: Initial
        at:
          type: string
          description: Date and time at which the status was set to `Initial`. A valid
            UTC timestamp.
          format: date-time
      required:
      - value
      - at
    paymentRequestAuthorisationResourceGranted:
      type: object
      description: The authorisation request was successful; the consumer PSP has
        authorised the payment.
      title: Granted
      properties:
        value:
          type: string
          const: Granted
        payerName:
          type: string
          minLength: 1
          maxLength: 70
          description: The name of the payer. This property is only provided, if it
            has been provided by the consumer PSP in the authorisation response.
        payerIban:
          $ref: '#/components/schemas/IBAN'
          description: The IBAN of the payer. This property is only provided, if it
            has been provided by the consumer PSP in the authorisation response.
        at:
          type: string
          description: Date and time at which the status was set to `Granted`. A valid
            UTC timestamp.
          format: date-time
      required:
      - value
      - at
    paymentRequestAuthorisationResourceRejected:
      type: object
      description: The authorisation request has been rejected by the consumer PSP.
      title: Rejected
      properties:
        value:
          type: string
          const: Rejected
        at:
          type: string
          description: Date and time at which the status was set to `Rejected`. A
            valid UTC timestamp.
          format: date-time
        reason:
          type: string
          description: If the reason code is 'NARR', this property must contain the
            proprietary reason for the rejection. Otherwise, it must contain a comprehensive
            description of the reason code.
        reasonCode:
          type: string
          description: Reason code for the rejection (ISO 20022 PaymentRejectReasonCode).
      required:
      - value
      - at
      - reason
      - reasonCode
    paymentRequestAuthorisationResourceFailed:
      type: object
      description: Authorisation has failed because of technical problems.
      title: Failed
      properties:
        value:
          type: string
          const: Failed
        at:
          type: string
          description: Date and time at which the status was set to `Failed`. A valid
            UTC timestamp.
          format: date-time
        technicalReason:
          type: string
          description: Reason for the failure. The reason can include any technical
            information that might be useful for debugging.
      required:
      - value
      - at
      - technicalReason
    paymentRequestAuthorisationResourceCancelled:
      type: object
      description: Authorisation has been successfully cancelled.
      title: Cancelled
      properties:
        value:
          type: string
          const: Cancelled
        at:
          type: string
          description: Date and time at which the status was set to `Cancelled`. A
            valid UTC timestamp.
          format: date-time
      required:
      - value
      - at
    paymentRequestAuthorisationResourceStatus:
      description: |-
        A payment Authorisation resource at EPI central services indicates the status of the consumer PSP's authorisation of a payment. The resource can have one of the following statuses:

        |       Status      | Description |
        |:-----------------:|:-----------------------------------------------------------------------------------------------------------------------------:|
        | Initial           | EPI central services has created an Authorisation resource but has not yet sent an authorisation request to the consumer PSP. |
        | Granted           | The consumer PSP has authorised the payment. |
        | Rejected          | The consumer PSP has rejected the authorisation request. |
        | Failed            | Payment authorisation has failed due to a technical issue at EPI central services or at the consumer PSP.                     |
        | Cancelled         | Payment authorisation has been cancelled. |
      discriminator:
        propertyName: value
        mapping:
          Initial: '#/components/schemas/paymentRequestAuthorisationResourceInitial'
          Granted: '#/components/schemas/paymentRequestAuthorisationResourceGranted'
          Rejected: '#/components/schemas/paymentRequestAuthorisationResourceRejected'
          Failed: '#/components/schemas/paymentRequestAuthorisationResourceFailed'
          Cancelled: '#/components/schemas/paymentRequestAuthorisationResourceCancelled'
      oneOf:
      - $ref: '#/components/schemas/paymentRequestAuthorisationResourceInitial'
      - $ref: '#/components/schemas/paymentRequestAuthorisationResourceGranted'
      - $ref: '#/components/schemas/paymentRequestAuthorisationResourceRejected'
      - $ref: '#/components/schemas/paymentRequestAuthorisationResourceFailed'
      - $ref: '#/components/schemas/paymentRequestAuthorisationResourceCancelled'
    paymentRequestAuthorisationResource:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The payment request's internal ID.
        amount:
          $ref: '#/components/schemas/Money'
        status:
          $ref: '#/components/schemas/paymentRequestAuthorisationResourceStatus'
        externalId:
          type: string
          description: If the `externalAuthorisationId` has been submitted with the
            payment request, this parameter will be populated with the ID.
        sentRiskInformation:
          type: boolean
          description: Indicates if a request for payment authorisation, including
            the fraud risk score information, has been sent to the callback URL.
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - id
      - amount
      - status
      - sentRiskInformation
      - _links
    paymentRequestResource:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The ID of the payment request.
        createdAt:
          type: string
          description: The date and time at which the payment request was created.
            A valid UTC timestamp.
          format: date-time
        consentId:
          type: string
          format: uuid
          description: The ID of the consent resource.
        paymentPlanType:
          type: string
          enum:
          - SingleImmediate
          - EventDependent
          - C2c
          - Subscription
          description: The type of the consented payment plan.
        originatorWalletId:
          type: string
          format: uuid
          description: The ID of the originator's wallet.
        originatorPaymentMeansId:
          type: string
          format: uuid
          description: The ID of the originator's means of payment.
        consumerPspId:
          type: string
          format: uuid
          description: The ID of the originator's PSP (consumer PSP).
        beneficiaryIban:
          type: string
          description: The IBAN of the beneficiary.
        beneficiaryName:
          type: string
          description: The name of the beneficiary.
        acceptorId:
          type: string
          description: The ID of the acceptor, as is known to the acceptor PSP.
        acceptorPspId:
          type: string
          format: uuid
          description: The ID of the acceptor PSP.
        acceptorName:
          type: string
          description: The name of the acceptor.
        acceptorMCC:
          type: string
          description: The merchant category code (MCC) of the acceptor.
        acceptorCountryCode:
          type: string
          description: The country of the acceptor.
        shopId:
          type: string
          description: The ID of the shop, as is known to the acceptor PSP.
        shopName:
          type: string
          description: The name of the shop.
        captureStatus:
          $ref: '#/components/schemas/paymentRequestCaptureStatus'
        _links:
          type: object
          description: The HAL links to related resources.
          required:
          - self
          - captures
          - authorisation
          properties:
            self:
              $ref: '#/components/schemas/link'
            captures:
              $ref: '#/components/schemas/link'
            authorisation:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          description: Embedded resources.
          properties:
            captures:
              $ref: '#/components/schemas/paymentRequestCaptureCollectionResource'
            authorisation:
              $ref: '#/components/schemas/paymentRequestAuthorisationResource'
          required:
          - captures
          - authorisation
      required:
      - id
      - createdAt
      - consentId
      - paymentPlanType
      - originatorWalletId
      - originatorPaymentMeansId
      - consumerPspId
      - beneficiaryIban
      - beneficiaryName
      - acceptorId
      - acceptorPspId
      - acceptorName
      - captureStatus
      - _links
      - _embedded
    createPaymentRequestRequest:
      type: object
      properties:
        consentToken:
          type: string
          description: Consent token.
        beneficiaryToken:
          type: string
          description: Beneficiary token.
        amount:
          $ref: '#/components/schemas/Money'
        sendRiskInformation:
          type: boolean
          default: false
          description: Indicates if a payment authorisation request including the
            fraud risk information must be sent to the callback URL. If this property
            is `true`, a callback URL must be submitted with the request.
        externalAuthorisationId:
          type: string
          minLength: 1
          maxLength: 36
          description: The optional external authorisation ID will be transmitted
            with the payment authorisation request and sent to the callback URL.
        orderReference:
          type: string
          description: Reference to the order for which the payment is made. Limited
            to 35 characters.
          minLength: 1
          maxLength: 35
        description:
          type: string
          description: Optional description of the remittance info. Limited to 140
            characters.
          minLength: 1
          maxLength: 140
        callbackUrl:
          type: string
          description: Optional URL to which EPI central services send notifications
            of changes to the payment-request status. See also the endpoint call for
            [notifying an acceptor PSP of a change in payment-request status](ref:payment-request-notifications).
      required:
      - consentToken
      - beneficiaryToken
      - amount
      - orderReference
    createNewCaptureRequest:
      type: object
      properties:
        type:
          type: string
          const: Capture
        amount:
          $ref: '#/components/schemas/Money'
        final:
          type: boolean
          description: 'Boolean flag that indicates whether this is the final capture.
            No captures are allowed after the final capture, even when the authorised
            amount was not fully captured. Default, if omitted: false.'
        referenceId:
          type: string
          description: An external ID that can be used to identify the capture.  Limited
            to 35 characters, in compliance with ISO 20022. Some callbacks can arrive
            at the acceptor PSP before the acceptor PSP knows the actual resource
            on EPI central services' side.      In these cases, the reference ID is
            used. Internal IDs in the callbacks are not helpful because they are unknown
            to the recipient.
          minLength: 1
          maxLength: 35
        description:
          type: string
          description: Optional description of the remittance info. Limited to 140
            characters.
          minLength: 1
          maxLength: 140
      required:
      - amount
      - final
      - referenceId
    createCaptureRetryRequest:
      type: object
      properties:
        type:
          type: string
          const: CaptureRetry
        originCaptureId:
          type: string
          format: uuid
          description: The ID of the original payment capture that must be retried.
        beneficiaryToken:
          type: string
          description: If further attempts at capturing a payment must be performed
            with a different beneficiary token than the token used in the original
            payment request, it can be provided through this field.
      required:
      - originCaptureId
    refundRequestOverRefund:
      type: object
      properties:
        amount:
          type: object
          properties:
            euroCents:
              type: integer
              description: 'The minimum `euroCents` value is `1`. `euroCents: 100`
                represents one euro.'
          description: This field contains the amount that is refunded on top of a
            full refund . For example, if a consumer orders goods for 100 euro, returns
            it, and receives a refund of 110EUR to cover shipping costs.
        reason:
          type: string
          enum:
          - GoodWill
          - ReturnShippingCosts
          - MultipleSubscriptionRefund
          - AuxiliaryCostRefund
          - Other
      required:
      - amount
      - reason
    createRefundRequest:
      type: object
      properties:
        captureId:
          type: string
          format: uuid
          description: ID of the payment capture.
        refundReason:
          type: string
          description: Select one of the following reasons for the refund.
          enum:
          - ReturnedGoods
          - WrongAmountCorrection
          - PreDisputeRefund
          - SubscriptionRefund
          - ServiceLateCancellation
          - Other
        consumerFreeText:
          type: string
          description: The acceptor adds some information about the refund to the
            consumer.
        refundAmount:
          $ref: '#/components/schemas/Money'
        refundType:
          type: string
          description: Select whether the refund is full, partial, or more than the
            original amount.
          enum:
          - FullRefund
          - PartialRefund
          - OverRefund
        overRefund:
          $ref: '#/components/schemas/refundRequestOverRefund'
      required:
      - captureId
      - refundReason
      - consumerFreeText
      - refundAmount
      - refundType
    refundTransactionResource:
      type: object
      properties:
        beneficiaryName:
          type: string
          description: Name of the beneficiary. (E001)
        beneficiaryIban:
          type: string
          description: IBAN of the beneficiary. (C001)
        originatorReference:
          type: string
          description: |-
            The originator reference identifies each SCT Inst Instruction presented to the originator PSP for an originator in a unique way. This number will be transmitted in the entire process of the handling of the SCT Inst Transaction from acceptance until the transaction completes.  Any provider involved in the transaction must return the originator reference in any exception-handling process-step.  The originator cannot request for any other referencing information to be returned to them to identify an SCT Inst. The originator must define the internal structure of this reference; it can only be expected to be meaningful to the originator. The originator PSP must include this value as the 'originator's reference (T014)' attribute in the SCT Inst. EPI central services create this reference on behalf of the originator. Currently, references are created by removing the four hyphens from the `refundId`. However, the format is subject to change.

            If any party contacts EPI central services for SCT Inst exception handling, that party must provide the originator's reference. With the current format, EPI central services will re-insert the hyphens to obtain the `refundId` to investigate the exception.
        ultimateDebtor:
          type: string
          description: Name of the ultimate debtor, originator of refund. (P006)
        amount:
          type: object
          properties:
            euroCents:
              type: integer
              description: 'The minimum `euroCents` value is `1`. `euroCents: 100`
                represents one euro.'
          description: This field represents the total refund amount, which includes
            the `overRefund` amount.
        categoryPurpose:
          type: string
          description: Category purpose of the transfer (T008).
        purpose:
          type: string
          description: Purpose of the transfer (T007). For refunds always 'REFU'.
        remittanceInfo:
          type: string
          description: 'Remittance information of the transfer. Maximum 140 characters.
            This must include free text to the consumer from the acceptor that summarizes
            the issue, then a `- wero refund -` block, followed by the  `refund_id`
            and the `captureId`. Add a message based on the following example: `Refund
            has been completed - wero refund - abc12345-273f-446c-8f92-e186d7304848
            - bbc1c226-273f-446c-8f92-e186d7304848`. (T009)'
      required:
      - beneficiaryName
      - beneficiaryIban
      - originatorReference
      - ultimateDebtor
      - amount
      - categoryPurpose
      - purpose
      - remittanceInfo
    refundResourceStatusBaseProperties:
      type: object
      properties:
        at:
          type: string
          format: date-time
          description: The date and time when the status changed.
        amount:
          $ref: '#/components/schemas/Money'
        remittanceInfo:
          type: string
          description: 'Remittance information of the transfer. Maximum 140 characters.
            This must include free text to the consumer from the acceptor that summarizes
            the issue, then a `- wero refund -` block, followed by the  `refund_id`
            and the `captureId`. Add a message based on the following example: `Refund
            has been completed - wero refund - abc12345-273f-446c-8f92-e186d7304848
            - bbc1c226-273f-446c-8f92-e186d7304848`. (T009)'
      required:
      - at
      - amount
    refundResourceInitial:
      title: Initial
      allOf:
      - $ref: '#/components/schemas/refundResourceStatusBaseProperties'
      - type: object
        properties:
          value:
            type: string
            const: Initial
            description: The status of the refund resource.
        required:
        - value
    refundResourceFailed:
      title: Failed
      allOf:
      - $ref: '#/components/schemas/refundResourceStatusBaseProperties'
      - type: object
        properties:
          value:
            type: string
            const: Failed
            description: The status of the refund resource.
          technicalReason:
            type: string
            description: Reason for the failure. The reason can include any technical
              information that might be useful for debugging.
        required:
        - value
        - technicalReason
    refundResourceRejected:
      title: Rejected
      allOf:
      - $ref: '#/components/schemas/refundResourceStatusBaseProperties'
      - type: object
        properties:
          value:
            type: string
            const: Rejected
            description: The status of the refund resource.
          reasonCode:
            type: string
            description: Reason code for the rejection (ISO 20022 PaymentRejectReasonCode).
          reason:
            type: string
            description: If the reason code is 'NARR', this property must contain
              the proprietary reason why the refund was rejected. Otherwise, it must
              contain a comprehensive description of the reason code.
        required:
        - value
        - reasonCode
        - reason
    refundResourceSettled:
      title: Settled
      allOf:
      - $ref: '#/components/schemas/refundResourceStatusBaseProperties'
      - type: object
        properties:
          value:
            type: string
            const: Settled
            description: The status of the refund resource.
        required:
        - value
    refundResourceStatus:
      description: |-
        A refund resource at EPI central services can have the following statuses:

          |       Status      |                            Description                                                                                           |
          |:-----------------:|:--------------------------------------------------------------------------------------------------------------------------------:|
          | Initial           | The refund resource has been created. There has been not settlement update, yet.                                                 |
          | Failed            | The beneficiary PSP encountered a technical problem when processing the incoming SCTInst.                                        |
          | Rejected          | The beneficiary PSP has rejected the settlement of the refund payment (SCTInst).                                                 |
          | Settled           | The refund payment (SCTInst) has successfully been settled on the beneficiary side.                                              |
      discriminator:
        propertyName: value
        mapping:
          Initial: '#/components/schemas/refundResourceInitial'
          Failed: '#/components/schemas/refundResourceFailed'
          Rejected: '#/components/schemas/refundResourceRejected'
          Settled: '#/components/schemas/refundResourceSettled'
      oneOf:
      - $ref: '#/components/schemas/refundResourceInitial'
      - $ref: '#/components/schemas/refundResourceFailed'
      - $ref: '#/components/schemas/refundResourceRejected'
      - $ref: '#/components/schemas/refundResourceSettled'
    comRefundFraudScores:
      type: object
      properties:
        consumer:
          $ref: '#/components/schemas/FraudScore'
          description: Fraud score for the consumer of the commercial refund transaction.
        acceptor:
          $ref: '#/components/schemas/FraudScore'
          description: Fraud score for the acceptor of the commercial refund transaction.
        type:
          type: string
          const: com-refund-fraud-scores
      required:
      - type
      - consumer
      - acceptor
    comRefundFraudScoreError:
      type: object
      properties:
        error:
          type: string
          enum:
          - Timeout
          - OtherError
          description: |-
            An error has occurred when attempting to retrieve the fraud score.
             - 'Timeout': The fraud score could not be retrieved within the timeout period.
             - 'OtherError': An unspecified error has occurred when attempting to retrieve the fraud score.
        type:
          type: string
          const: com-refund-fraud-scores-error
      required:
      - error
      - type
    fraudRiskComRefund:
      title: The fraud risk information object for a commercial refund transaction.
      description: Contains information about the fraud risk assessment for a commercial
        refund transaction.
      type: object
      properties:
        fraudScores:
          oneOf:
          - $ref: '#/components/schemas/comRefundFraudScores'
          - $ref: '#/components/schemas/comRefundFraudScoreError'
          discriminator:
            propertyName: type
            mapping:
              com-refund-fraud-scores: '#/components/schemas/comRefundFraudScores'
              com-refund-fraud-scores-error: '#/components/schemas/comRefundFraudScoreError'
          description: Contains fraud scores for the commercial refund transaction,
            split up by participant.
      required:
      - fraudScores
      examples:
      - fraudScores:
          consumer:
            score: 10
            primaryRiskVector: AccountTakeover
          acceptor:
            score: 90
            primaryRiskVector: MerchantScam
          type: com-refund-fraud-scores
    refundRequestResource:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID of the refund.
        paymentRequestId:
          type: string
          format: uuid
          description: ID of the payment request.
        captureId:
          type: string
          format: uuid
          description: ID of the payment capture.
        refundReason:
          type: string
          description: Select one of the following reasons for the refund.
          enum:
          - ReturnedGoods
          - WrongAmountCorrection
          - PreDisputeRefund
          - SubscriptionRefund
          - ServiceLateCancellation
          - Other
        consumerFreeText:
          type: string
          description: The acceptor adds some information about the refund to the
            consumer.
        refundType:
          type: string
          description: Select whether the refund is full, partial, or more than the
            original amount.
          enum:
          - FullRefund
          - PartialRefund
          - OverRefund
        overRefund:
          $ref: '#/components/schemas/refundRequestOverRefund'
          description: Required only if `refundType` is `OverRefund`.
        refundTransactionResource:
          $ref: '#/components/schemas/refundTransactionResource'
        status:
          $ref: '#/components/schemas/refundResourceStatus'
        fraudRiskInformation:
          $ref: '#/components/schemas/fraudRiskComRefund'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - id
      - paymentRequestId
      - captureId
      - refundReason
      - consumerFreeText
      - refundType
      - refundTransactionResource
      - status
      - fraudRiskInformation
    ProxyIndicators:
      type: object
      properties:
        indicators:
          type: array
          description: List of eligible proxy hashes.
          items:
            type: object
            properties:
              proxyHash:
                $ref: '#/components/schemas/proxyHash'
              canBePayer:
                type: boolean
                default: true
                description: Indicates whether the consumer linked to the proxy hash
                  can act as a payer and respond to payment requests.
              pro:
                type: boolean
                default: false
                description: Indicates whether the payment source linked to the proxy
                  hash is a business account (P2Pro).
            required:
            - proxyHash
            - canBePayer
            - pro
        expiresAt:
          type: string
          description: |-
            The time until which the client should cache eligibility information about a proxy hash. Clients should not re-request eligibility information about a proxy hash before its `expiresAt` time has passed.
            This property is DEPRECATED and will be removed.
          format: date-time
        truncated:
          type: boolean
          description: Indicates whether the list has been truncated (because the
            request contained too many proxy hashes). The current limit is 5000 proxy
            hashes in a request.
      required:
      - indicators
      - truncated
      example:
        indicators:
        - proxyHash: uT1CLsQ1AZPd_fUu1MS07IddzTQ4VpNGg08FcADOWrw=
          canBePayer: true
          pro: false
        - proxyHash: uqf-OQv4EPgDjX7iKDfdj5JfJHvSxB3BQgVLz8QVhe4=
          canBePayer: false
          pro: true
        expiresAt: '2023-05-03T11:38:31.265914449Z'
        truncated: false
    ProxyIndicatorsTruncated:
      allOf:
      - $ref: '#/components/schemas/ProxyIndicators'
      - type: object
        properties:
          truncatedAfter:
            type: integer
            description: The Wero digital wallet can use this information in subsequent
              requests to check the eligibility of the remaining proxy hashes.
        required:
        - truncated
        - truncatedAfter
      example:
        indicators:
        - proxyHash: uT1CLsQ1AZPd_fUu1MS07IddzTQ4VpNGg08FcADOWrw=
          canBePayer: true
          pro: true
        - proxyHash: uqf-OQv4EPgDjX7iKDfdj5JfJHvSxB3BQgVLz8QVhe4=
          canBePayer: false
          pro: true
        expiresAt: '2023-05-03T11:38:31.265914449Z'
        truncated: true
        truncatedAfter: 2
    OrderReferenceId:
      description: Order reference ID, which is an external ID that the acceptor can
        use to retrieve consent resources.
      type: string
      example: '2206600275931757'
      minLength: 1
      maxLength: 255
    Acceptor:
      description: Acceptor data
      type: object
      required:
      - name
      properties:
        name:
          description: Acceptor name.
          type: string
          example: ABC Company
          minLength: 1
        shop:
          description: Data related to the acceptor's shop.
          type: object
          required:
          - name
          properties:
            name:
              description: Acceptor shop name.
              type: string
              example: The Cool shop
              minLength: 1
    IssuerId:
      description: The business identifier code for the Issuer. Corresponds to the
        issuerId field of iDEAL.
      type: string
      example: ABNANL2A
      minLength: 8
      maxLength: 11
      pattern: ^[A-Z]{6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3})?$
    ReturnUrl:
      type: string
      format: uri
      description: The pay page redirects to this URL in case the consumer has cancelled
        the transaction on the Rail Selection Landing Page.
      example: https://shopping.com/order?orderId=45029ac2-b22a-4121-b7d7-e90ae0e307f3
      minLength: 1
    RoutingAdviceCallbackUrl:
      description: RSM send an update to this URL after the rail has been determined
        for the routing advice.
      type: string
      format: uri
      example: https://api.acceptor-psp.com/updates
      minLength: 1
    RoutingAdviceId:
      type: string
      format: uuid
      description: ID of the routing advice
      example: 5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
    Advice:
      type: string
      description: ''
      enum:
      - IDEAL
      - WERO
      example: WERO
    Links:
      type: object
      description: HAL links to related resources.
      required:
      - self
      properties:
        self:
          example:
            href: https://checked.local.epi.rocks/api/rsm/routing-advice/5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
          $ref: '#/components/schemas/link'
        landingPage:
          description: The RSM Landing page. The consumer must be redirected to this
            page to continue the payment.
          example:
            href: https://pay.local.epi.rocks/5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
          $ref: '#/components/schemas/link'
        redirectUrl:
          description: The redirect URL provided that is by the Rail. In an iDEAL
            use case, this must be populated with the value of the `redirectUrl` that
            is received from the response after initiating an iDEAL transaction. In
            a Wero use case, this must be populated with the value of 'landingPage'
            received from the response after initiating a consent request.
          example:
            href: https://pay.local.epi.rocks/5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
          $ref: '#/components/schemas/link'
    RoutingAdvice:
      type: object
      description: ''
      properties:
        id:
          $ref: '#/components/schemas/RoutingAdviceId'
        amount:
          $ref: '#/components/schemas/Money'
        orderReferenceId:
          $ref: '#/components/schemas/OrderReferenceId'
        acceptor:
          $ref: '#/components/schemas/Acceptor'
        issuerId:
          $ref: '#/components/schemas/IssuerId'
        returnUrl:
          $ref: '#/components/schemas/ReturnUrl'
        routingAdviceCallbackUrl:
          $ref: '#/components/schemas/RoutingAdviceCallbackUrl'
        advice:
          $ref: '#/components/schemas/Advice'
        _links:
          $ref: '#/components/schemas/Links'
    ReconciliationReportSchema:
      title: Reconciliation report
      type: object
      description: This is a reconciliation report.
      properties:
        url:
          type: string
          description: An AWS S3 presigned URL to retrieve the reconciliation report.
          example: https://s3.eu-central-1.amazonaws.com/reconciliation-reports-5820096b-8570-4fa5-9fca-b27a8acbf8c1/key-fa7f7b78-9ffa-4181-9556-0d29fbd4939e?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=test%2F20240521%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20240521T162212Z&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=6c4e6cb84487df5eda6962f9549e45c2426b66300aaa198625348052116bee3e
      required:
      - url
    BIC:
      type: string
      description: A Business Identifier Code (BIC). The BIC is an ISO 9362 standard
        for identifying business entities in the  financial industry. The BIC is also
        known as the SWIFT code.
      pattern: ^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?$
      example: DEUTDEFF
    Address:
      title: Address
      type: object
      description: An address containing the address first line, second line (optional),
        postal code, city and country.
      properties:
        streetLine:
          type: string
          description: Line of the address (e.g. street name and number).
          minLength: 1
          maxLength: 255
        additionalLine:
          type: string
          description: Additional line for the address (e.g. apartment, suite, unit,
            building, floor, etc.).
          minLength: 1
          maxLength: 255
        postalCode:
          type: string
          description: The postal code.
          minLength: 1
          maxLength: 12
        city:
          type: string
          minLength: 1
          maxLength: 100
        country:
          type: string
          description: The country code (ISO 3166-1 alpha-2).
          minLength: 2
          maxLength: 2
          $ref: '#/components/schemas/CountryCode'
        stateOrProvince:
          type: string
          description: State or province for the address.
          minLength: 1
          maxLength: 255
      example:
        streetLine: Some street St 1
        additionalLine: Apartment 1, suite 3, floor 1
        postalCode: '48180'
        city: Madrid
        country: ES
        stateOrProvince: Madrid
      required:
      - streetLine
      - postalCode
      - city
      - country
    ServiceProviderBilling:
      type: object
      description: Billing information that the service provider registers with EPI.
        This data is used in the administrative section of EPICentre
      properties:
        vatNumber:
          type: string
          description: Company VAT number.
          example: '123456789012'
          minLength: 1
          maxLength: 255
        address:
          $ref: '#/components/schemas/Address'
        email:
          type: string
          description: Billing email address.
          format: email
          minLength: 1
          maxLength: 255
          example: user@example.com
      example:
        vatNumber: '123456789012'
        address:
          streetLine: Some street St 1
          additionalLine: Apartment 1, suite 3, floor 1
          postalCode: '48180'
          city: Madrid
          country: ES
        email: user@example.com
      required:
      - vatNumber
      - address
      - email
    ServiceProviderContact:
      type: object
      description: Contact information that the service provider registers with EPI.
        This data is used in the administrative section of EPICentre.
      properties:
        name:
          type: string
          description: Contact name.
          example: Alejandro
          minLength: 1
          maxLength: 255
        phoneNumber:
          type: string
          description: Contact mobile phone number. Must be a valid mobile phone number
            in E.164 format.
          pattern: ^\+\d{5,25}$
          minLength: 6
        email:
          type: string
          description: Contact email address.
          format: email
          minLength: 1
          maxLength: 255
          example: user@example.com
      example:
        name: Alejandro
        phoneNumber: '+346569746'
        email: example-mail@gmail.com
      required:
      - name
      - phoneNumber
      - email
    AcceptorPSPRole:
      type: object
      title: Acceptor PSP role
      description: Indicates that the service provider has the role of acceptor PSP.
      required:
      - type
      properties:
        type:
          type: string
          description: The type of service provider. This is a discriminator property;
            its value must be `acceptor-psp`.
          const: acceptor-psp
          example: acceptor-psp
        apiAccess:
          type: boolean
          description: Specifies whether the acceptor PSP is permitted to access the
            EPI central services API.
          default: false
    ConsumerPSPRole:
      type: object
      title: Consumer PSP role
      description: Indicates that the service provider has the role of consumer PSP.
      required:
      - type
      properties:
        type:
          type: string
          description: The type of service provider. This property is a discriminator;
            its value must be `consumer-psp`.
          const: consumer-psp
          example: consumer-psp
        apiAccess:
          type: boolean
          description: Specifies whether the consumer PSP is permitted to access the
            EPI central services API.
          default: false
    TechnicalSPRole:
      type: object
      title: Technical service provider role
      description: Indicates that the service provider has the role of technical service
        provider.
      required:
      - type
      properties:
        type:
          type: string
          description: The type of service provider. This property is a discriminator;
            its value must be `technical-service-provider`.
          const: technical-service-provider
          example: technical-service-provider
        apiAccess:
          type: boolean
          description: Specifies whether the TSP is permitted to access the EPI central
            services API.
          default: true
    RSAPublicJWK:
      title: RSA Public Key
      type: object
      description: |-
        Public key of an asymmetric RSA key pair.
        Represented as JSON Web Key ([JWK](https://www.rfc-editor.org/rfc/rfc7517)).
      properties:
        kid:
          type: string
          description: Key ID
          example: 74cf2532-c6c2-4586-acb3-6fce198acc5b
        kty:
          type: string
          description: 'Key Type: RSA or EC'
          const: RSA
        use:
          type: string
          description: Indicates whether a JWK is used for encrypting data or verifying
            the signature on data. Here, always `sig`.
          const: sig
        alg:
          type: string
          description: Identifies the algorithm intended for use with the key.
          enum:
          - RS256
          - RS384
          - RS512
        n:
          type: string
          description: Modulus. Base64Url encoded.
          example: vZl9LV2lmdaSn1CTfrpbIbkhuJZ4C-mb33JTSXGB9q7GuSW_eiFz5SUOK2p5JIXznabbazaywpYhyMBpw7tbnKSzBuQxRKQHPD-Li1hhV4abjr570hGmc0UyftpBWZz4_53-q6lp0hupi8getzDyfPiiDZvgyKIGHytYSvZCGeVHXzJQy6DNf2xyZxG8WwgKvpIcOi0FvlVDJgdlIQn3HGrW3xK1IJpHLzh_ucYDIhs4L864hdV2QzUZA7d_agbk7dbq7ZStZNF4J_KmbruouQ_edglZurKeh6xmiRcOqGfWqN-4gJXAT4gN6w_eslfkPAKRDOcyh4ig8GopQ6CD9w
        e:
          type: string
          description: Exponent. Base64Url encoded.
          example: AQAB
      required:
      - kid
      - kty
      - n
      - e
    EllipticCurvePublicJWK:
      title: Elliptic Curve Public Key
      type: object
      description: |-
        Public key of an asymmetric elliptic-curve key pair.
        Represented as  JSON Web Key (JWK) https://www.rfc-editor.org/rfc/rfc7517
      properties:
        kid:
          type: string
          description: Key ID
          example: 74cf2532-c6c2-4586-acb3-6fce198acc5b
        kty:
          type: string
          description: 'Key Type: RSA or EC'
          const: EC
        use:
          type: string
          description: Indicates whether a JWK is used for encrypting data or verifying
            the signature on data. Here, always `sig`.
          const: sig
        alg:
          type: string
          description: Identifies the algorithm intended for use with the key.
          enum:
          - ES256
          - ES384
          - ES512
        crv:
          type: string
          description: Name of selected curve
          enum:
          - P-256
          - P-384
          - P-521
        x:
          type: string
          description: X Coordinate
        y:
          type: string
          description: Y Coordinate
      required:
      - kid
      - kty
      - crv
      - x
      - y
    ServiceProviderPublicKey:
      title: Public key of the service provider.
      type: object
      description: |-
        Public key of the service provider. The key must be unique to the service provider.
        Represented as JSON Web Key ([JWK](https://www.rfc-editor.org/rfc/rfc7517)).
      oneOf:
      - $ref: '#/components/schemas/RSAPublicJWK'
      - $ref: '#/components/schemas/EllipticCurvePublicJWK'
      discriminator:
        propertyName: kty
        mapping:
          RSA: '#/components/schemas/RSAPublicJWK'
          EC: '#/components/schemas/EllipticCurvePublicJWK'
    ServiceProviderStatus:
      type: string
      title: Service provider status
      description: The status of the service provider.
      enum:
      - Active
      - Inactive
      - Migrating
      - Migrated
      example: Active
      default: Active
    ServiceProviderManagement:
      type: object
      properties:
        managerServiceProviderId:
          type: string
          description: The ID of the TSP that manages the payment service provider.
          format: uuid
          example: 00000000-0000-0000-0000-000000009000
        name:
          type: string
          description: The name of the TSP that manages the payment service provider.
          example: Acme-Bank
        managedScope:
          type: array
          description: The scope of the actions that the TSP can perform on behalf
            of the payment service provider. If no scope is specified, the TSP can
            perform the entire scope of the actions that are normally performed by
            the payment service provider.
          items:
            type: string
            description: The scope of the actions that the TSP can perform on behalf
              of the payment service provider.
            minLength: 1
          minItems: 1
      required:
      - managerServiceProviderId
      - name
    AcceptorPSPIntegrationParameters:
      type: object
      title: Acceptor PSP integration parameters
      description: Information to be used by EPI to integrate with the acceptor PSP.
      required:
      - type
      properties:
        type:
          type: string
          description: The type of integration parameter set. This property is a discriminator;
            its value must be `acceptor-psp-integration-parameters`.
          const: acceptor-psp-integration-parameters
          example: acceptor-psp-integration-parameters
        baseUrl:
          type: string
          description: The base URL that EPI must use to send HTTP requests to the
            acceptor PSP's API.
          minLength: 1
          maxLength: 255
          example: https://example.com
        excludeBaseUrlPathFromSignature:
          type: boolean
          description: Specifies whether the service provider's `baseUrl` path must
            be excluded from the API signature in requests to the service provider.
          default: false
          example: false
        countryCodes:
          type: array
          description: List of codes of countries that the acceptor PSP does business
            with (ISO 3166-1 alpha-2).
          items:
            type: string
            minLength: 2
            maxLength: 2
            $ref: '#/components/schemas/CountryCode'
          minItems: 1
    LanguageCode:
      title: Language Code
      description: A language code in ISO 639-1 alpha-2 format.
      type: string
      pattern: ^[a-z]{2}$
      enum:
      - fr
      - en
      - nl
      - de
      example: de
    SpeechPattern:
      type: string
      title: Speech Pattern
      description: The speech pattern for notifications.
      enum:
      - Formal
      - Informal
      example: Formal
      default: Informal
    ProfileImage:
      type: object
      description: Profile image of the technical service provider, payment service
        provider, app, or the consumer who is registered in the EPI proxy look-up
        database.   If no image is provided, the service provider will be absent from
        the selector screen of the standalone Wero digital wallet.
      required:
      - contentBase64
      - type
      properties:
        contentBase64:
          type: string
          description: The content of the image as a base64 data string.
        type:
          type: string
          description: The type of the image as a media-type string.
          enum:
          - image/png
          - image/jpeg
    UniversalAppLink:
      type: string
      description: This field provides a link that can function as both the universal
        link (in the iOS context)  and app link (in the Android context). It facilitates
        either the launch of the app or   access to a website, accommodating the context
        of both the device and the consumer.
      example: https://www.example.com/universal/some-action/someParameter
    OnboardingLinks:
      type: object
      description: Links for redirecting the consumer from the standalone Wero digital
        wallet app to the consumer PSP's mobile banking app and website. The links
        serve for continuing the wallet provisioning process. For more information,
        see [Deep links + URLs for provisioning wallets with means of payment](doc:providing-consumer-psp-details-and-links-for-standalone-apps#information-from-consumer-psps-that-support-the-standalone-app)
      properties:
        deep:
          type: string
          description: The deep link URL.
          example: https://www.example.com
        web:
          type: string
          description: The web link URL.
          example: https://www.example.com
        universal:
          $ref: '#/components/schemas/UniversalAppLink'
    AppData:
      type: object
      description: Information about the mobile banking apps that the consumer PSP
        offers.
      properties:
        name:
          type: string
          description: Display name of the app.
          example: My App
          minLength: 1
          maxLength: 255
        packageName:
          type: string
          description: The package name used to identify the app via the [`Navigator.getInstalledRelatedApps`](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/getInstalledRelatedApps)
            to preselect apps in EPI's browser landing-page.
          example: com.example.myapp
          minLength: 1
          maxLength: 512
        id:
          type: string
          description: ID of the app as a UUID.
          format: uuid
          example: 00000000-0000-0000-0000-000000009000
        icon:
          description: Logo, icon or other image that represents the app. Provide
            a square image with a resolution between 400x400 and 600x600 pixels in
            either JPG or PNG format.
          $ref: '#/components/schemas/ProfileImage'
        monochromaticIcon:
          description: Monochromatic logo, icon or other image that represents the
            app. This version can be used to provide distinct shapes and outlines
            instead of fine details and vibrant colours. Provide a logo a square image
            with a resolution between 400x400 and 600x600 pixels in PNG format.
          $ref: '#/components/schemas/ProfileImage'
        primaryColor:
          type: string
          default: '#FFFFFF'
          pattern: ^#[0-9ABCDEFabcdef]{6}$|^rgb\(\d{1,3}, \d{1,3}, \d{1,3}\)$
          description: The primary brand colour as a CSS colour string. Used mainly
            for backgrounds.
          minLength: 1
          maxLength: 25
        links:
          $ref: '#/components/schemas/OnboardingLinks'
        commercialPaymentCapabilities:
          type: object
          description: Defines a list of commercial (e-commerce and m-commerce) capabilities
            that the app is equipped to support.
          properties:
            acceptConsent:
              type: object
              description: Defines whether consumers can accept e/m-commerce consents
                within the app and, depending on the operating system, provides the
                universal (iOS) or app link (Android) to facilitate this process.
              properties:
                universalAppLink:
                  $ref: '#/components/schemas/UniversalAppLink'
        countryCodes:
          type: array
          description: List of codes of countries that the app is launched in (ISO
            3166-1 alpha-2).
          items:
            type: string
            minLength: 2
            maxLength: 2
            $ref: '#/components/schemas/CountryCode'
      example:
        name: app1
        id: 1d5c2379-86d4-4a09-ab4b-8ebd49d5ed00
        icon:
          type: image/png
          contentBase64: base64
        monochromaticIcon:
          type: image/png
          contentBase64: base64
        primaryColor: '#FFFFFF'
        links:
          deep: https://example.com/app1/deeplink
          web: https://website.example.com
          universal: https://example.com/app1/universallink
        countryCodes:
        - ES
    ConsumerPSPIntegrationParameters:
      type: object
      description: Information to be used by EPI to integrate with the consumer PSP.
      title: Consumer PSP integration parameters
      required:
      - type
      properties:
        type:
          type: string
          description: Type of integration parameter set. This property is a discriminator;
            its value must be `consumer-psp-integration-parameters`.
          const: consumer-psp-integration-parameters
          example: consumer-psp-integration-parameters
        baseUrl:
          type: string
          description: The base URL that EPI must use to send HTTP requests to the
            consumer PSP's API.
          minLength: 1
          maxLength: 255
          example: https://example.com
        excludeBaseUrlPathFromSignature:
          type: boolean
          description: Specifies whether the service provider's `baseUrl` path must
            be excluded from the API signature in requests to the service provider.
          default: false
          example: false
        countryCodes:
          type: array
          description: List of codes of countries that the consumer PSP does business
            with in the ISO 3166-1 alpha-2 code format.
          items:
            type: string
            minLength: 2
            maxLength: 2
            $ref: '#/components/schemas/CountryCode'
          minItems: 1
        notificationPreference:
          type: object
          description: The consumer PSP's preference for how EPI should send notifications
            about transactions.
          properties:
            language:
              description: The preferred language for notifications.
              $ref: '#/components/schemas/LanguageCode'
            speechPattern:
              $ref: '#/components/schemas/SpeechPattern'
        supportsStandaloneApp:
          type: boolean
          default: false
          description: '`true` if the consumer PSP supports the onboarding of consumers
            through the Wero app.'
          example: false
        apps:
          type: array
          description: |
            List of the consumer PSP's mobile banking apps.
          items:
            $ref: '#/components/schemas/AppData'
        redirectionLinks:
          description: Redirect links to the the consumer PSPs' mobile banking apps
            and website during onboarding, if the consumer PSP does _not_ support
            the standalone Wero digital wallet app.
          $ref: '#/components/schemas/OnboardingLinks'
        supportedRoutes:
          type: array
          description: |-
            List of the optional routes that the consumer PSP supports. This tells EPI central services what routes can be called. If the Wero digital standalone app is supported, for example, the consumer PSP must provide an endpoint call to validate the payment.
            **Note**: If the consumer PSP does not support a route, EPI central services will not call it.
          items:
            type: string
            enum:
            - PaymentValidation
            description: |-
              An optional route that the consumer PSP supports.
              The possible values are: - `PaymentValidation`: [Validate an initial P2P payment](ref:post-payment-validation)
            example: PaymentValidation
    TechnicalSPIntegrationParameters:
      type: object
      description: Information to be used by EPI to integrate with the technical service
        provider.
      title: Technical service provider integration parameters
      required:
      - type
      properties:
        type:
          type: string
          description: The type of integration parameter set. This property is a discriminator;
            its value must be `technical-sp-integration-parameters`.
          const: technical-sp-integration-parameters
          example: technical-sp-integration-parameters
        baseUrl:
          type: string
          description: The base URL that EPI must use to send HTTP requests to the
            TSP's API.
          minLength: 1
          maxLength: 255
          example: https://example.com
        excludeBaseUrlPathFromSignature:
          type: boolean
          description: Specifies whether the service provider's `baseUrl` path must
            be excluded from the API signature in requests to the service provider.
          default: false
          example: false
        countryCodes:
          type: array
          description: List of codes of countries that the TSP does business with  (ISO
            3166-1 alpha-2).
          items:
            type: string
            minLength: 2
            maxLength: 2
            $ref: '#/components/schemas/CountryCode'
          minItems: 1
    ServiceProviderDesignData:
      type: object
      title: Service Provider Design Data
      required:
      - icon
      description: This data is provided by the technical service provider (TSP) or
        payment service provider (PSP) during enrolment with EPI, or by the TSP during
        registration of a managed PSP.  The data is used by clients to display the
        correct corporate identity of the TSP or PSP. For example, on the Select your
        bank window of the Wero digital standalone application. For more information,
        see [Providing consumer PSP details and links for standalone apps](doc:providing-consumer-psp-details-and-links-for-standalone-apps).
      properties:
        icon:
          description: Logo, icon or other image that represents the TSP or PSP. Provide
            a square image with a resolution between 400x400 and 600x600 pixels in
            either JPG or PNG format.
          $ref: '#/components/schemas/ProfileImage'
        monochromaticIcon:
          description: Monochromatic logo, icon or other image that represents the
            TSP or PSP. The image can be used to provide distinct shapes and outlines
            instead of fine details and vibrant colours. Provide a logo a square image
            with a resolution between 400x400 and 600x600 pixels in in PNG format.
          $ref: '#/components/schemas/ProfileImage'
        primaryColor:
          type: string
          default: '#FFFFFF'
          pattern: ^#[0-9ABCDEFabcdef]{6}$|^rgb\(\d{1,3}, \d{1,3}, \d{1,3}\)$
          description: The primary brand colour as a CSS colour string. Used mainly
            for backgrounds.
          minLength: 1
          maxLength: 25
      example:
        icon:
          type: image/png
          contentBase64: base64
        monochromaticIcon:
          type: image/png
          contentBase64: base64
        primaryColor: '#FFFFFF'
    ServiceProviderResource:
      type: object
      title: Service provider
      description: |-
        Service providers can perform actions for themselves or on behalf of other service providers. For example, a TSP can perform actions on behalf of a consumer PSP.
        The roles of acceptor PSP and consumer PSP entail default scopes of the actions that can be performed. The addition of other actions can also be requested.
      properties:
        id:
          type: string
          description: The ID of the service provider.
          format: uuid
          example: 00000000-0000-0000-0000-000000009000
        name:
          type: string
          description: The name of the service provider.
          minLength: 1
          maxLength: 255
          example: My Consumer-Payment-Service-Provider
        businessIdentifierCode:
          description: The BIC of the service provider.
          $ref: '#/components/schemas/BIC'
        billing:
          $ref: '#/components/schemas/ServiceProviderBilling'
          deprecated: true
        contact:
          $ref: '#/components/schemas/ServiceProviderContact'
        roles:
          type: array
          description: The roles of the service provider.
          minItems: 1
          items:
            anyOf:
            - $ref: '#/components/schemas/AcceptorPSPRole'
            - $ref: '#/components/schemas/ConsumerPSPRole'
            - $ref: '#/components/schemas/TechnicalSPRole'
        publicKeys:
          type: array
          description: The public keys of the service provider.
          items:
            $ref: '#/components/schemas/ServiceProviderPublicKey'
        reconciliationReportEncryptionCertificate:
          type: string
          description: A certificate, in PEM format, that contains the public key
            that is used to encrypt the reconciliation report.
        scope:
          type: array
          description: The scope of the actions of the service provider.
          items:
            type: string
            description: The scope of the actions of the service provider.
            minLength: 1
            maxLength: 255
            example: payment:request
        status:
          type: object
          description: Status of the service provider.
          properties:
            value:
              $ref: '#/components/schemas/ServiceProviderStatus'
        groupId:
          type: string
          description: The group that the service provider belongs to. TSPs can use
            this parameter to group PSPs that they manage.
          minLength: 1
          maxLength: 255
          example: group-id
        externalId:
          type: string
          description: An external identifier of the service provider. TSPs can add  their
            own internal identifier of the PSPs they manage as a reference.
          minLength: 1
          maxLength: 255
          example: external-id
        managements:
          type: array
          description: The other service providers that access EPI central services
            on behalf of this service provider.
          items:
            $ref: '#/components/schemas/ServiceProviderManagement'
        integrationParameters:
          type: array
          description: The integration parameters of the service provider.
          items:
            anyOf:
            - $ref: '#/components/schemas/AcceptorPSPIntegrationParameters'
            - $ref: '#/components/schemas/ConsumerPSPIntegrationParameters'
            - $ref: '#/components/schemas/TechnicalSPIntegrationParameters'
        designData:
          $ref: '#/components/schemas/ServiceProviderDesignData'
        consumerPspDelegations:
          type: array
          description: The consumer PSP IDs that this service provider can act on
            behalf of.
          items:
            type: string
            description: The ID of the consumer PSP.
            format: uuid
            example: 00000000-0000-0000-0000-000000009000
        createdAt:
          type: string
          format: date-time
          description: 'Date and time at which the service provider was created. (Format:
            Timestamp)'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - id
      - name
      - roles
      - scope
      - status
      - createdAt
      - _links
      example:
        id: b47ee339-9575-4d08-9b7e-73b49097e823
        name: Test Service Provider
        businessIdentifierCode: DEUTDEFF
        billing:
          vatNumber: '123456789012'
          address:
            streetLine: Some street St 1
            additionalLine: Apartment 1, suite 3, floor 1
            postalCode: '48180'
            city: Madrid
            country: ES
            stateOrProvince: Madrid
          email: user@example.com
        contact:
          name: Alejandro
          phoneNumber: '+346569746'
          email: example-mail@gmail.com
        roles:
        - type: consumer-psp
          apiAccess: true
        scope:
        - wallet:provisioning
        - p2p:transferMoney
        - payment:request
        status:
          value: Active
        managements:
        - name: TSP Service Provider
          managerServiceProviderId: c9a084bc-e6f6-4361-9390-504fa3731897
        publicKeys:
        - kty: RSA
          use: sig
          alg: RS256
          kid: 74cf2532-c6c2-4586-acb3-6fce198acc5b
          n: vZl9LV2lmdaSn1CTfrpbIbkhuJZ4C-mb33JTSXGB9q7GuSW_eiFz5SUOK2p5JIXznabbazaywpYhyMBpw7tbnKSzBuQxRKQHPD-Li1hhV4abjr570hGmc0UyftpBWZz4_53-q6lp0hupi8getzDyfPiiDZvgyKIGHytYSvZCGeVHXzJQy6DNf2xyZxG8WwgKvpIcOi0FvlVDJgdlIQn3HGrW3xK1IJpHLzh_ucYDIhs4L864hdV2QzUZA7d_agbk7dbq7ZStZNF4J_KmbruouQ_edglZurKeh6xmiRcOqGfWqN-4gJXAT4gN6w_eslfkPAKRDOcyh4ig8GopQ6CD9w
          e: AQAB
        integrationParameters:
        - type: consumer-psp-integration-parameters
          baseUrl: https://example.com
          excludeBaseUrlPathFromSignature: false
          countryCodes:
          - ES
          notificationPreference:
            language: en
            speechPattern: Informal
          supportsStandaloneApp: true
          apps:
          - name: App 1
            id: 1d5c2379-86d4-4a09-ab4b-8ebd49d5ed00
            icon:
              type: image/png
              contentBase64: base64
            monochromaticIcon:
              type: image/png
              contentBase64: base64
            primaryColor: '#FFFFFF'
            links:
              deep: https://example.com/app1/deeplink
              web: https://website.example.com
              universal: https://example.com/app1/universallink
          supportedRoutes:
          - PaymentValidation
        designData:
          icon:
            type: image/png
            contentBase64: base64
          monochromaticIcon:
            type: image/png
            contentBase64: base64
          primaryColor: '#FFFFFF'
        createdAt: '2023-09-04T18:49:48.478358Z'
        _links:
          self:
            href: https://api.epi-services.eu/api/service-providers/b47ee339-9575-4d08-9b7e-73b49097e823
    ServiceProviderCollectionResource:
      type: object
      properties:
        _links:
          $ref: '#/components/schemas/PagedCollectionResourceLinks'
        _embedded:
          type: object
          properties:
            serviceProviders:
              type: array
              items:
                $ref: '#/components/schemas/ServiceProviderResource'
        page:
          $ref: '#/components/schemas/page'
      examples:
      - _links:
          self:
            href: https://api.epi-services.eu/api/service-providers?page=1&size=10&sort=%3Adesc
          first:
            href: https://api.epi-services.eu/api/service-providers?page=0&size=10&sort=%3Adesc
          next:
            href: https://api.epi-services.eu/api/service-providers?page=2&size=10&sort=%3Adesc
          last:
            href: https://api.epi-services.eu/api/service-providers?page=4&size=10&sort=%3Adesc
        _embedded:
          serviceProviders:
          - id: b47ee339-9575-4d08-9b7e-73b49097e823
            name: Test Service Provider
            billing:
              vatNumber: '123456789012'
              address:
                streetLine: Some street St 1
                additionalLine: Apartment 1, suite 3, floor 1
                postalCode: '48180'
                city: Madrid
                country: ES
                stateOrProvince: Madrid
              email: user@example.com
            contact:
              name: Alejandro
              phoneNumber: '+346569746'
              email: example-mail@gmail.com
            roles:
            - type: consumer-psp
              apiAccess: true
            scope:
            - wallet:provisioning
            - p2p:transferMoney
            - payment:request
            status:
              value: Active
            managements:
            - name: TSP Service Provider
              managerServiceProviderId: c9a084bc-e6f6-4361-9390-504fa3731897
            publicKeys:
            - kty: RSA
              use: sig
              alg: RS256
              kid: 74cf2532-c6c2-4586-acb3-6fce198acc5b
              n: vZl9LV2lmdaSn1CTfrpbIbkhuJZ4C-mb33JTSXGB9q7GuSW_eiFz5SUOK2p5JIXznabbazaywpYhyMBpw7tbnKSzBuQxRKQHPD-Li1hhV4abjr570hGmc0UyftpBWZz4_53-q6lp0hupi8getzDyfPiiDZvgyKIGHytYSvZCGeVHXzJQy6DNf2xyZxG8WwgKvpIcOi0FvlVDJgdlIQn3HGrW3xK1IJpHLzh_ucYDIhs4L864hdV2QzUZA7d_agbk7dbq7ZStZNF4J_KmbruouQ_edglZurKeh6xmiRcOqGfWqN-4gJXAT4gN6w_eslfkPAKRDOcyh4ig8GopQ6CD9w
              e: AQAB
            reconciliationReportEncryptionCertificate: '-----BEGIN CERTIFICATE-----
              MIICMzCCAZygAwIBAgIJALiPnVsvq8dsMA0GCSqGSIb3DQEBBQUAMFMxCzAJBgNV BAYTAlVTMQwwCgYDVQQIEwNmb28xDDAKBgNVBAcTA2ZvbzEMMAoGA1UEChMDZm9v
              MQwwCgYDVQQLEwNmb28xDDAKBgNVBAMTA2ZvbzAeFw0xMzAzMTkxNTQwMTlaFw0x ODAzMTgxNTQwMTlaMFMxCzAJBgNVBAYTAlVTMQwwCgYDVQQIEwNmb28xDDAKBgNV
              BAcTA2ZvbzEMMAoGA1UEChMDZm9vMQwwCgYDVQQLEwNmb28xDDAKBgNVBAMTA2Zv bzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAzdGfxi9CNbMf1UUcvDQh7MYB
              OveIHyc0E0KIbhjK5FkCBU4CiZrbfHagaW7ZEcN0tt3EvpbOMxxc/ZQU2WN/s/wP xph0pSfsfFsTKM4RhTWD2v4fgk+xZiKd1p0+L4hTtpwnEw0uXRVd0ki6muwV5y/P
              +5FHUeldq+pgTcgzuK8CAwEAAaMPMA0wCwYDVR0PBAQDAgLkMA0GCSqGSIb3DQEB BQUAA4GBAJiDAAtY0mQQeuxWdzLRzXmjvdSuL9GoyT3BF/jSnpxz5/58dba8pWen
              v3pj4P3w5DoOso0rzkZy2jEsEitlVM2mLSbQpMM+MUVQCQoiG6W9xuCFuxSrwPIS pAqEAuV4DNoxQKKWmhVv+J0ptMWD25Pnpxeq5sXzghfJnslJlQND
              -----END CERTIFICATE-----'
            integrationParameters:
            - type: consumer-psp-integration-parameters
              baseUrl: https://example.com
              excludeBaseUrlPathFromSignature: false
              countryCodes:
              - ES
              notificationPreference:
                language: en
                speechPattern: Informal
              supportsStandaloneApp: false
              redirectionLinks:
                deep: https://example.com/app1/deeplink
                web: https://website.example.com
              supportedRoutes:
              - PaymentValidation
            designData:
              icon:
                type: image/png
                contentBase64: base64
              monochromaticIcon:
                type: image/png
                contentBase64: base64
              primaryColor: '#FFFFFF'
            createdAt: '2023-09-04T18:49:48.478358Z'
            _links:
              self:
                href: https://api.epi-services.eu/api/service-providers/b47ee339-9575-4d08-9b7e-73b49097e823
        page:
          size: 1
          totalElements: 1
          totalPages: 1
          number: 0
          requestedPageSize: 10
          limitReached: false
    CreateServiceProviderRequest:
      type: object
      required:
      - name
      - roles
      properties:
        name:
          type: string
          description: The name of the payment service provider.
          minLength: 1
          maxLength: 255
          example: My payment service provider
        businessIdentifierCode:
          description: The BIC of the service provider.
          $ref: '#/components/schemas/BIC'
        billing:
          $ref: '#/components/schemas/ServiceProviderBilling'
          deprecated: true
        contact:
          $ref: '#/components/schemas/ServiceProviderContact'
        roles:
          type: array
          description: The roles of the payment service provider.  Each object can
            be an acceptor PSP or consumer PSP. If no role is provided, `roles` sets
            to `false` by default.
          minItems: 1
          items:
            type: object
            oneOf:
            - $ref: '#/components/schemas/AcceptorPSPRole'
            - $ref: '#/components/schemas/ConsumerPSPRole'
            example:
              type: consumer-psp
              apiAccess: true
        groupId:
          type: string
          description: The group that the payment service provider belongs to in accordance
            with the TSP's specifications. TSPs can use this parameter to group PSPs
            that they manage.
          minLength: 1
          maxLength: 255
          example: group-id
        externalId:
          type: string
          description: An external identifier of the service provider. TSPs can add  their
            own internal identifier of the PSPs they manage as a reference.
          minLength: 1
          maxLength: 255
          example: external-id
        managedScope:
          type: array
          description: |-
            The scope of the actions that the TSP can perform on behalf of the payment service provider. **Attention**: If `null`, the TSP can perform, by default, the entire scope of the actions that the consumer PSP or acceptor PSP would normally perform.

            Scope for actions that a consumer PSP would normally perform:
             - 'p2p:transferMoney' (actions relating to making person-to-person payments)
             - 'wallet:provisioning' (actions relating to wallet provisioning)

            Scope for actions that an acceptor PSP would normally perform:
             - 'consent:request' (actions relating to requesting consumers to consent to payment plans)
             - 'payment:request' (actions relating to requesting consumer PSPs to make payments)
          minItems: 1
          items:
            type: string
            description: The scope of TSP actions.
            example: payment:request
        integrationParameters:
          type: array
          description: The integration parameters of the payment service provider.
            For each role that is defined in the `roles` field, not more than one
            set of integration parameters can be specified.
          minItems: 1
          items:
            anyOf:
            - $ref: '#/components/schemas/AcceptorPSPIntegrationParameters'
            - $ref: '#/components/schemas/ConsumerPSPIntegrationParameters'
        designData:
          $ref: '#/components/schemas/ServiceProviderDesignData'
        status:
          type: object
          description: Status of the payment service provider.
          default:
            value: Active
          properties:
            value:
              $ref: '#/components/schemas/ServiceProviderStatus'
        reconciliationReportEncryptionCertificate:
          type: string
          description: A certificate, in PEM format, that contains the public key
            that is used to encrypt the reconciliation report. The certificate must
            be S/MIME compliant. The private key associated to this certificate must
            be at least 2048 bits. There are no additional requirements on the PKI
            so that self-signed certificates are accepted.
      example:
        name: Test Service Provider
        businessIdentifierCode: DEUTDEFF
        billing:
          vatNumber: '123456789012'
          address:
            streetLine: Some street St 1
            additionalLine: Apartment 1, suite 3, floor 1
            postalCode: '48180'
            city: Madrid
            country: ES
            stateOrProvince: Madrid
          email: user@example.com
        contact:
          name: Alejandro
          phoneNumber: '+346569746'
          email: example-mail@gmail.com
        roles:
        - type: consumer-psp
          apiAccess: false
        groupId: groupId
        managedScope:
        - wallet:provisioning
        - p2p:transferMoney
        status:
          value: Active
        integrationParameters:
        - type: consumer-psp-integration-parameters
          baseUrl: https://example.com
          excludeBaseUrlPathFromSignature: false
          countryCodes:
          - ES
          notificationPreference:
            language: en
            speechPattern: Formal
          supportsStandaloneApp: true
          apps:
          - name: app1
            id: 1d5c2379-86d4-4a09-ab4b-8ebd49d5ed00
            icon:
              type: image/png
              contentBase64: base64
            monochromaticIcon:
              type: image/png
              contentBase64: base64
            primaryColor: '#FFFFFF'
            links:
              deep: https://example.com/app1/deeplink
              web: https://website.example.com
              universal: https://example.com/app1/universallink
          supportedRoutes:
          - PaymentValidation
        designData:
          icon:
            type: image/png
            contentBase64: base64
          monochromaticIcon:
            type: image/png
            contentBase64: base64
          primaryColor: '#FFFFFF'
        reconciliationReportEncryptionCertificate: '-----BEGIN CERTIFICATE----- MIICMzCCAZygAwIBAgIJALiPnVsvq8dsMA0GCSqGSIb3DQEBBQUAMFMxCzAJBgNV
          BAYTAlVTMQwwCgYDVQQIEwNmb28xDDAKBgNVBAcTA2ZvbzEMMAoGA1UEChMDZm9v MQwwCgYDVQQLEwNmb28xDDAKBgNVBAMTA2ZvbzAeFw0xMzAzMTkxNTQwMTlaFw0x
          ODAzMTgxNTQwMTlaMFMxCzAJBgNVBAYTAlVTMQwwCgYDVQQIEwNmb28xDDAKBgNV BAcTA2ZvbzEMMAoGA1UEChMDZm9vMQwwCgYDVQQLEwNmb28xDDAKBgNVBAMTA2Zv
          bzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAzdGfxi9CNbMf1UUcvDQh7MYB OveIHyc0E0KIbhjK5FkCBU4CiZrbfHagaW7ZEcN0tt3EvpbOMxxc/ZQU2WN/s/wP
          xph0pSfsfFsTKM4RhTWD2v4fgk+xZiKd1p0+L4hTtpwnEw0uXRVd0ki6muwV5y/P +5FHUeldq+pgTcgzuK8CAwEAAaMPMA0wCwYDVR0PBAQDAgLkMA0GCSqGSIb3DQEB
          BQUAA4GBAJiDAAtY0mQQeuxWdzLRzXmjvdSuL9GoyT3BF/jSnpxz5/58dba8pWen v3pj4P3w5DoOso0rzkZy2jEsEitlVM2mLSbQpMM+MUVQCQoiG6W9xuCFuxSrwPIS
          pAqEAuV4DNoxQKKWmhVv+J0ptMWD25Pnpxeq5sXzghfJnslJlQND -----END CERTIFICATE-----'
    UpdateServiceProviderRequest:
      type: object
      required:
      - name
      - roles
      properties:
        name:
          type: string
          description: The name of the payment service provider.
          minLength: 1
          maxLength: 255
          example: My payment service provider
        businessIdentifierCode:
          description: The BIC of the service provider.
          $ref: '#/components/schemas/BIC'
        billing:
          $ref: '#/components/schemas/ServiceProviderBilling'
          deprecated: true
        contact:
          $ref: '#/components/schemas/ServiceProviderContact'
        roles:
          type: array
          description: The roles of the payment service provider (each object can
            be acceptor PSP or consumer PSP).
          minItems: 1
          items:
            type: object
            oneOf:
            - $ref: '#/components/schemas/AcceptorPSPRole'
            - $ref: '#/components/schemas/ConsumerPSPRole'
            example:
              type: consumer-psp
              apiAccess: true
        groupId:
          type: string
          description: The group that the payment service provider belongs to.  TSPs
            can use this parameter to group PSPs that they manage.
          minLength: 1
          maxLength: 255
          example: group-id
        externalId:
          type: string
          description: An external identifier of the service provider. TSPs can add  their
            own internal identifier of the PSPs they manage as a reference.
          minLength: 1
          maxLength: 255
          example: external-id
        managedScope:
          type: array
          description: |-
            The scope of the actions that the TSP can perform on behalf of the payment service provider. **Attention**: If `null`, the TSP can perform, by default, the entire scope of the actions that the consumer PSP or acceptor PSP would normally perform.

            Scope for actions that a consumer PSP would normally perform:
             - 'p2p:transferMoney' (actions relating to making person-to-person payments)
             - 'wallet:provisioning' (actions relating to wallet provisioning)

            Scope for actions that an acceptor PSP would normally perform:
             - 'consent:request' (actions relating to requesting consumers to consent to payment plans)
             - 'payment:request' (actions relating to requesting consumer PSPs to make payments)
          minItems: 1
          items:
            type: string
            description: The scope of PSP actions.
            example: payment:request
        integrationParameters:
          type: array
          description: The integration parameters of the payment service provider.
            For each role that is defined in the `roles` field, not more than one
            set of integration parameters can be specified.
          minItems: 1
          items:
            anyOf:
            - $ref: '#/components/schemas/AcceptorPSPIntegrationParameters'
            - $ref: '#/components/schemas/ConsumerPSPIntegrationParameters'
        designData:
          $ref: '#/components/schemas/ServiceProviderDesignData'
        status:
          type: object
          description: Status of the payment service provider.
          default:
            value: Active
          properties:
            value:
              $ref: '#/components/schemas/ServiceProviderStatus'
        reconciliationReportEncryptionCertificate:
          type: string
          description: A certificate, in PEM format, that contains the public key
            that is used to encrypt the reconciliation report. The certificate must
            be S/MIME compliant. The private key associated to this certificate must
            be at least 2048 bits. There are no additional requirements on the PKI
            so that self-signed certificates are accepted.
      example:
        name: Test Service Provider
        businessIdentifierCode: DEUTDEFF
        billing:
          vatNumber: '123456789012'
          address:
            streetLine: Some street St 1
            additionalLine: Apartment 1, suite 3, floor 1
            postalCode: '48180'
            city: Madrid
            country: ES
            stateOrProvince: Madrid
          email: user@example.com
        contact:
          name: Alejandro
          phoneNumber: '+346569746'
          email: example-mail@gmail.com
        roles:
        - type: consumer-psp
          apiAccess: false
        groupId: groupId
        managedScope:
        - wallet:provisioning
        - p2p:transferMoney
        status:
          value: Active
        integrationParameters:
        - type: consumer-psp-integration-parameters
          baseUrl: https://example.com
          excludeBaseUrlPathFromSignature: false
        designData:
          icon:
            type: image/png
            contentBase64: base64
          monochromaticIcon:
            type: image/png
            contentBase64: base64
          primaryColor: '#FFFFFF'
        reconciliationReportEncryptionCertificate: '-----BEGIN CERTIFICATE----- MIICMzCCAZygAwIBAgIJALiPnVsvq8dsMA0GCSqGSIb3DQEBBQUAMFMxCzAJBgNV
          BAYTAlVTMQwwCgYDVQQIEwNmb28xDDAKBgNVBAcTA2ZvbzEMMAoGA1UEChMDZm9v MQwwCgYDVQQLEwNmb28xDDAKBgNVBAMTA2ZvbzAeFw0xMzAzMTkxNTQwMTlaFw0x
          ODAzMTgxNTQwMTlaMFMxCzAJBgNVBAYTAlVTMQwwCgYDVQQIEwNmb28xDDAKBgNV BAcTA2ZvbzEMMAoGA1UEChMDZm9vMQwwCgYDVQQLEwNmb28xDDAKBgNVBAMTA2Zv
          bzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAzdGfxi9CNbMf1UUcvDQh7MYB OveIHyc0E0KIbhjK5FkCBU4CiZrbfHagaW7ZEcN0tt3EvpbOMxxc/ZQU2WN/s/wP
          xph0pSfsfFsTKM4RhTWD2v4fgk+xZiKd1p0+L4hTtpwnEw0uXRVd0ki6muwV5y/P +5FHUeldq+pgTcgzuK8CAwEAAaMPMA0wCwYDVR0PBAQDAgLkMA0GCSqGSIb3DQEB
          BQUAA4GBAJiDAAtY0mQQeuxWdzLRzXmjvdSuL9GoyT3BF/jSnpxz5/58dba8pWen v3pj4P3w5DoOso0rzkZy2jEsEitlVM2mLSbQpMM+MUVQCQoiG6W9xuCFuxSrwPIS
          pAqEAuV4DNoxQKKWmhVv+J0ptMWD25Pnpxeq5sXzghfJnslJlQND -----END CERTIFICATE-----'
    MergerStatus:
      description: |
        `Announced`:
        The initial state. The merger has been created and announced.
        The source and target consumer PSPs have been declared.
        A TSP can now declare changes to consumers and payment sources.

        `InProgress`:
        The merger has been started.
        The TSP cannot make any further changes.
        EPI central services is migrating all consumers from the source consumer PSP to the target consumer PSP.

        `Cancelled`:
        The merger is in a final state.
        The TSP cancelled the merger.
        A TSP can only cancel a merger if the merger's status is `Announced`.

        `Completed`:
        This is a final state.
        All consumers and payment sources have either been migrated or have been added to the error report with a description of the reason the migration failed.
      enum:
      - Announced
      - ExternalMergerStarted
      - ExternalMergerCompleted
      - InProgress
      - Cancelled
      - Completed
    MergerResource:
      type: object
      properties:
        id:
          type: string
          format: uuid
        sourceConsumerPspId:
          type: string
          format: uuid
        targetConsumerPspId:
          type: string
          format: uuid
        switchToTargetConsumerPspBaseUrlWhenInStatus:
          type: string
          enum:
          - Announced
          - ExternalMergerStarted
          - ExternalMergerCompleted
          - InProgress
        status:
          $ref: '#/components/schemas/MergerStatus'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            report:
              $ref: '#/components/schemas/link'
      required:
      - sourceConsumerPspId
      - targetConsumerPspId
      - status
      - id
      - _links
    CreateMergerRequest:
      type: object
      properties:
        sourceConsumerPspId:
          type: string
          format: uuid
          description: The ID of the consumer PSP whose resource will be migrated
            into the target consumer PSP.
        targetConsumerPspId:
          type: string
          format: uuid
          description: The ID of the consumer PSP to which the resources of the source
            consumer PSP will be migrated.
        switchToTargetConsumerPspBaseUrlWhenInStatus:
          description: |-
            Optional. Provide this field if you want to use the base URL of the target consumer PSP for all consumers of the source consumer PSP.
            The change will be in effect when the merger's status transitions to the given state.
            The change will be reverted if the merger is cancelled.
            The change will be in effect even for consumers who could not be migrated. A TSP is expected to create a new merger to resolve the conflicts.
          enum:
          - Announced
          - ExternalMergerStarted
          - ExternalMergerCompleted
          - InProgress
        externalMergerStart:
          type: string
          format: date-time
          example: '2023-05-03T10:38:49.475916359Z'
          description: The date and time at which the external merger is planned to
            start.
        externalMergerEnd:
          type: string
          format: date-time
          example: '2023-06-03T10:38:49.475916359Z'
          description: The date and time at which the external merger is planned to
            end.
      required:
      - sourceConsumerPspId
      - targetConsumerPspId
    ConsumerChangeWithExternalId:
      type: object
      title: A merger-related change to a consumer referenced by externalId
      properties:
        consumerIdentifierType:
          type: string
          enum:
          - externalId
        currentExternalId:
          type: string
          minLength: 1
          maxLength: 255
        newExternalId:
          type: string
          minLength: 1
          maxLength: 255
      required:
      - consumerIdentifierType
      - currentExternalId
      - newExternalId
    ConsumerChangeWithConsumerId:
      type: object
      title: A merger-related change to a consumer referenced by consumerId
      properties:
        consumerIdentifierType:
          type: string
          enum:
          - consumerId
        consumerId:
          type: string
          format: uuid
        newExternalId:
          type: string
          minLength: 1
          maxLength: 255
      required:
      - consumerIdentifierType
      - consumerId
      - newExternalId
    CreateMultipleConsumerChangesRequest:
      type: object
      properties:
        consumerChanges:
          type: array
          items:
            oneOf:
            - $ref: '#/components/schemas/ConsumerChangeWithExternalId'
            - $ref: '#/components/schemas/ConsumerChangeWithConsumerId'
            discriminator:
              propertyName: consumerIdentifierType
              mapping:
                externalId: '#/components/schemas/ConsumerChangeWithExternalId'
                consumerId: '#/components/schemas/ConsumerChangeWithConsumerId'
          minItems: 1
          maxItems: 1000
      required:
      - consumerChanges
    ConsumerChangesResource:
      type: object
      properties:
        consumerChanges:
          type: array
          items:
            type: object
            properties:
              consumerId:
                type: string
                format: uuid
              currentExternalId:
                type: string
              newExternalId:
                type: string
            required:
            - consumerId
            - currentExternalId
            - newExternalId
      required:
      - consumerChanges
    PaymentAccountChangeWithExternalId:
      type: object
      title: A merger-related change to a payment account referenced by externalId
      description: |
        Must contain a new external ID or a new account identifier or both.
      properties:
        type:
          type: string
          const: paymentAccountChangeWithExternalId
        currentExternalId:
          type: string
          minLength: 1
          maxLength: 255
        newExternalId:
          type: string
          minLength: 1
          maxLength: 255
        newAccountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
      required:
      - type
      - currentExternalId
    PaymentAccountChangeWithPaymentSourceId:
      type: object
      title: A merger-related change to a payment account referenced by payment source
        ID
      description: |
        Must contain a new external ID or a new account identifier or both.
      properties:
        type:
          type: string
          const: paymentAccountChangeWithPaymentSourceId
        paymentSourceId:
          type: string
          format: uuid
        newExternalId:
          type: string
          minLength: 1
          maxLength: 255
        newAccountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
      required:
      - type
      - paymentSourceId
    CreateMultiplePaymentSourceChangesRequest:
      type: object
      properties:
        paymentSourceChanges:
          type: array
          items:
            oneOf:
            - $ref: '#/components/schemas/PaymentAccountChangeWithExternalId'
            - $ref: '#/components/schemas/PaymentAccountChangeWithPaymentSourceId'
            discriminator:
              propertyName: type
              mapping:
                paymentAccountChangeWithExternalId: '#/components/schemas/PaymentAccountChangeWithExternalId'
                paymentAccountChangeWithPaymentSourceId: '#/components/schemas/PaymentAccountChangeWithPaymentSourceId'
          minItems: 1
          maxItems: 1000
      required:
      - paymentSourceChanges
    PaymentSourceChangesResource:
      type: object
      properties:
        paymentSourceChanges:
          title: A list of changes to payment sources that are part of a merger
          description: |
            A list of changes to payment sources that are part of a merger. Each change is a reference to a payment source with its current external ID and payment source ID. An entry will also contain a new external ID or a new account identifier or both.
          type: array
          items:
            type: object
            properties:
              paymentSourceId:
                type: string
                format: uuid
              currentExternalId:
                type: string
              newExternalId:
                type: string
              newAccountIdentifier:
                $ref: '#/components/schemas/AccountIdentifier'
            required:
            - paymentSourceId
            - currentExternalId
      required:
      - paymentSourceChanges
    UpdateMergerStatusRequest:
      type: object
      properties:
        status:
          description: 'The new status of the merger. This can only be set to `InProgress`. '
          enum:
          - ExternalMergerStarted
          - ExternalMergerCompleted
          - InProgress
      required:
      - status
    MergerReportResource:
      type: object
      properties:
        consumersMigrated:
          type: integer
          description: The number of consumers successfully migrated.
        paymentSourcesMigrated:
          type: integer
          description: The number of payment sources successfully migrated.
        walletsMigrated:
          type: integer
          description: The number of wallets successfully migrated.
        consumersWithConflict:
          type: integer
          description: The number of consumers that could not be migrated due to conflicts.
        paymentSourcesWithConflict:
          type: integer
          description: The number of payment sources that could not be migrated due
            to conflicts.
        consumersWithErrors:
          type: integer
          description: The number of consumers that encountered errors during migration.
        paymentSourcesWithErrors:
          type: integer
          description: The number of payment sources that encountered errors during
            migration.
        walletsWithErrors:
          type: integer
          description: The number of wallets that encountered errors during migration.
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            self:
              $ref: '#/components/schemas/link'
            consumerConflicts:
              $ref: '#/components/schemas/link'
            paymentSourceConflicts:
              $ref: '#/components/schemas/link'
            consumerErrors:
              $ref: '#/components/schemas/link'
            paymentSourceErrors:
              $ref: '#/components/schemas/link'
            walletErrors:
              $ref: '#/components/schemas/link'
          required:
          - self
          - consumerConflicts
          - paymentSourceConflicts
          - consumerErrors
          - paymentSourceErrors
          - walletErrors
      required:
      - consumersMigrated
      - paymentSourcesMigrated
      - walletsMigrated
      - consumersWithConflict
      - paymentSourcesWithConflict
      - consumersWithErrors
      - paymentSourcesWithErrors
      - walletsWithErrors
      - _links
    ConsumerConflictResource:
      type: object
      required:
      - consumerId
      - externalId
      - conflictReason
      properties:
        consumerId:
          type: string
          format: uuid
        externalId:
          type: string
        newExternalId:
          type: string
        conflictReason:
          enum:
          - ExternalIdInUse
          - IbanInUse
          - IbanAliasInUse
    PaymentSourceConflictResource:
      type: object
      required:
      - paymentSourceId
      - externalId
      - accountIdentifier
      - conflictReason
      properties:
        paymentSourceId:
          type: string
          format: uuid
        externalId:
          type: string
        newExternalId:
          type: string
        accountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
        newAccountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
        conflictReason:
          enum:
          - ExternalIdInUse
          - IbanInUse
          - IbanAliasInUse
    ConsumerErrorResource:
      type: object
      required:
      - consumerId
      - externalId
      - errorDetail
      properties:
        consumerId:
          type: string
          format: uuid
        externalId:
          type: string
        newExternalId:
          type: string
        errorDetail:
          type: string
    PaymentSourceErrorResource:
      type: object
      required:
      - paymentSourceId
      - externalId
      - accountIdentifier
      - errorDetail
      properties:
        paymentSourceId:
          type: string
          format: uuid
        externalId:
          type: string
        newExternalId:
          type: string
        accountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
        newAccountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
        errorDetail:
          type: string
    WalletErrorResource:
      type: object
      required:
      - walletId
      - errorDetail
      properties:
        walletId:
          type: string
          format: uuid
        errorDetail:
          type: string
    BillingMember:
      type: object
      properties:
        id:
          type: string
          format: uuid
        bankIdentifierCode:
          type: string
          format: uuid
        role:
          type: string
          enum:
          - Principal_Member
          - Associate_Member
          description: The role of the member in the billing scenario.
    MoneyHighPrecision:
      title: Money High Precision Format
      type: object
      properties:
        value:
          type: number
          format: double
          example: 0.12345678
          description: The amount of money with exactly 8 decimal places
        currency:
          type: string
          enum:
          - EUR
          description: The ISO currency codes
      description: ''
      examples:
      - value: 0.12345678
        currency: EUR
    InvoiceLineItem:
      type: object
      properties:
        paymentRole:
          type: string
          enum:
          - Sender
          - Receiver
          description: The role of the member in the payment.
        feeType:
          type: string
          enum:
          - schemeFee
          - transactionFee
          - queryFee
          - remunerationFee
          description: The type of fee that is invoiced.
        feeNetAmount:
          $ref: '#/components/schemas/MoneyHighPrecision'
      required:
      - feeType
      - paymentRole
      - feeNetAmount
    P2PFee:
      type: object
      properties:
        testTransaction:
          type: boolean
          description: A flag indicating whether the transaction is a test transaction.
        paymentRole:
          type: string
          enum:
          - Sender
          - Receiver
          description: The role of the member in the payment.
        paymentType:
          type: string
          enum:
          - P2P
          - P2Pro
          description: The type of payment that is invoiced.
        transactionStatus:
          type: string
          description: The status of the invoiced transaction.
        rateCard:
          type: string
          description: The rate card that is used for the invoiced transaction.
        feeType:
          type: string
          enum:
          - schemeFee
          - transactionFee
          - queryFee
          - remunerationFee
          description: The type of fee that is invoiced.
        transactionAmount:
          $ref: '#/components/schemas/MoneyHighPrecision'
        transactionAmountCharged:
          $ref: '#/components/schemas/MoneyHighPrecision'
        quantityOfTransactions:
          type: integer
          description: The number of transactions that are invoiced.
        feeGrossAmount:
          $ref: '#/components/schemas/MoneyHighPrecision'
        feeDiscountAmount:
          $ref: '#/components/schemas/MoneyHighPrecision'
        feeNetAmount:
          $ref: '#/components/schemas/MoneyHighPrecision'
      required:
      - feeType
      - paymentRole
      - paymentType
      - transactionStatus
      - rateCard
      - transactionAmount
      - transactionAmountCharged
      - quantityOfTransactions
      - feeGrossAmount
      - feeDiscountAmount
      - feeNetAmount
    BillingInformation:
      type: object
      examples: [
        ]
      properties:
        billingYear:
          type: number
          description: The calendar year of the invoice in `YYYY` format.
          minimum: 2024
        billingMonth:
          type: number
          description: The calendar month that is being invoiced, in `MM` format
          minimum: 1
          maximum: 12
        billingEntity:
          type: string
          description: The name of the entity issuing the invoice.
          example: EPI Company S.E.
        billedEntity:
          type: string
          description: The name of the entity that is being billed, which can be a
            principal member or associate member depending on the billing scenario.
          example: Customer Legal Name
        billedMemberId:
          type: string
          description: The EPI internal UUID for the member that is being invoiced.
          format: uuid
          example: 00000000-0000-0000-0000-000000000666
        member:
          $ref: '#/components/schemas/BillingMember'
          description: Information regarding the member.
        feeCalculationTimeStamp:
          type: string
        feeCalculationId:
          type: string
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            invoiceLineItems:
              type: array
              items:
                $ref: '#/components/schemas/InvoiceLineItem'
            p2pFees:
              type: array
              items:
                $ref: '#/components/schemas/P2PFee'
    BillingInformationCollectionResource:
      type: object
      properties:
        _links:
          $ref: '#/components/schemas/PagedCollectionResourceLinks'
        _embedded:
          type: object
          properties:
            billingInformations:
              type: array
              items:
                $ref: '#/components/schemas/BillingInformation'
        page:
          $ref: '#/components/schemas/page'
    TransactionType:
      type: string
      description: The type of the transaction. This enumeration is extensible; additional
        values may be accepted in the future.
      oneOf:
      - const: P2PPayment
        description: The consumer sent a P2P payment.
        title: P2PPayment
      - const: P2PRequest
        description: The consumer sent a P2P payment request.
        title: P2PRequest
      - type: string
        not:
          enum:
          - P2PPayment
          - P2PRequest
        description: Any other transaction type value.
        title: Any String
    TransactionDirection:
      type: string
      description: The direction of the money flow.
      enum:
      - Outgoing
      - Incoming
    TransactionCategory:
      type: object
      description: The category of the transaction.
      properties:
        type:
          $ref: '#/components/schemas/TransactionType'
        direction:
          $ref: '#/components/schemas/TransactionDirection'
    TransactionSchema:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The ID of the transaction.
          example: 00000000-0000-0000-0000-000000009000
        amount:
          $ref: '#/components/schemas/Money'
        category:
          $ref: '#/components/schemas/TransactionCategory'
        contact:
          description: The party receiving the money.
          type: object
          required:
          - name
          properties:
            name:
              description: The name of the party receiving the money. However, in
                the context of a Wero user sending money to a Paylib user, this will
                be a phone number.
              type: string
        createdAt:
          type: string
          format: date-time
          description: 'Date and time at which the transaction was created. (Format:
            Timestamp)'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - id
      - amount
      - category
      - contact
      - _links
    TransactionMessageSender:
      type: string
      description: The sender of the message.
      oneOf:
      - const: Consumer
        description: The user of this Wero digital wallet (origin).
      - const: Contact
        description: The other party in the transaction (destination).
    PaymentSourceStatus:
      description: The status of the payment source. This enumeration is extensible;
        additional values might be added.
      oneOf:
      - const: Active
        description: The payment source is active.
        title: Active
      - const: Blocked
        description: The payment source is blocked.
        title: Blocked
      - const: Closed
        description: The payment source is closed.
        title: Closed
      - type: string
        not:
          enum:
          - Active
          - Blocked
          - Closed
        description: Placeholder for a future reason, to be defined.
        title: Any String
    PaymentSourceResourcePaymentAccount:
      type: object
      required:
      - type
      - id
      - consumerPspId
      - externalId
      - currency
      - status
      - pro
      - displayDigits
      - _links
      properties:
        id:
          type: string
          format: uuid
          description: Payment source ID.
        type:
          type: string
          enum:
          - PaymentAccount
        consumerPspId:
          type: string
          format: uuid
          description: PSP ID of the payment source.
        externalId:
          type: string
          description: External ID of the payment source, provided by the consumer
            PSP. Uniquely identifies a payment source outside of the EPI context.
            For EPI to correlate payment sources across different wallet installations,
            consumer PSPs must provide the same external ID for a particular payment
            source across wallets.
        accountHolder:
          type: string
          description: Name of the account holder.
        accountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
        currency:
          $ref: '#/components/schemas/Currency'
        pro:
          type: boolean
          description: Indicates whether the payment account is a 'pro' account, for
            P2Pro payments.
        status:
          $ref: '#/components/schemas/PaymentSourceStatus'
        displayDigits:
          type: string
          description: The display digits of the account identifier. This field can
            be used for end-user display purposes, such as a masked IBAN.
        countryCode:
          $ref: '#/components/schemas/CountryCode'
        _links:
          type: object
          properties:
            self:
              $ref: '#/components/schemas/link'
      examples:
      - id: e369792d-ce10-4fb3-afbf-6a9632cb5156
        type: PaymentAccount
        consumerPspId: d6de77b0-e129-49ec-ae13-6ccec0c8c692
        externalId: a4912834-0e8b-41cb-a5ce-992bfa51279f
        accountHolder: John Doe
        accountIdentifier:
          type: IBAN
          iban: DE89370400440532013000
        currency: EUR
        status: Active
        displayDigits: DE89xxxxxxxxxxxxxx3000
        countryCode: DE
        pro: false
        _links:
          self:
            href: https://api.epi-services.eu/api/payment-sources/e369792d-ce10-4fb3-afbf-6a9632cb5156
    TransactionDetailsEmbeddedPaymentSourceResource:
      type: object
      description: ''
      oneOf:
      - $ref: '#/components/schemas/PaymentSourceResourcePaymentAccount'
      discriminator:
        propertyName: type
        mapping:
          PaymentAccount: '#/components/schemas/PaymentSourceResourcePaymentAccount'
    TransactionDetailsSchema:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The ID of the transaction.
          example: 00000000-0000-0000-0000-000000009000
        amount:
          $ref: '#/components/schemas/Money'
        category:
          $ref: '#/components/schemas/TransactionCategory'
        contact:
          description: The party receiving the money.
          type: object
          required:
          - name
          properties:
            name:
              description: The name of the party receiving the money. However, in
                the context of a Wero user sending money to a Paylib user, this will
                be a phone number.
              type: string
        paymentSourceId:
          type: string
          format: uuid
          description: The ID of the consumer's payment source that is linked to the
            transaction.
        referenceId:
          type: string
          description: The reference ID that identifies the transaction.
        messages:
          type: array
          description: The messages related to the transaction.
          minItems: 1
          items:
            type: object
            description: A message related to the transaction.
            required:
            - content
            - sentAt
            - sender
            - fromMe
            properties:
              sender:
                $ref: '#/components/schemas/TransactionMessageSender'
              content:
                type: string
                description: The content of the message.
                minLength: 1
                maxLength: 255
                example: This is a message
              sentAt:
                type: string
                format: date-time
                description: 'Date and time at which the message was sent. (Format:
                  Timestamp)'
              fromMe:
                type: boolean
                description: Whether the message was sent by the user of this Wero
                  digital wallet.
        createdAt:
          type: string
          format: date-time
          description: 'Date and time at which the transaction was created. (Format:
            Timestamp)'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          properties:
            paymentSource:
              $ref: '#/components/schemas/TransactionDetailsEmbeddedPaymentSourceResource'
      required:
      - id
      - amount
      - category
      - contact
      - _links
    VerifierHash:
      type: string
      description: |
        Represents a SHA256 hash of a random value. The binary representation of the hash value is encoded in base64. The
        random value must consist of at least 256 bits and be generated by a cryptographically-secure random source. This is
        the hashed counterpart of the verifier.

        Examples can be generated with:
        ```shell
        $ openssl rand 32 | openssl sha256 --binary | base64
        ```
      contentEncoding: base64
      example: ph6EN9uE1AEOooAMEPfwdCQTWbv/oebmt5ifV9KNTTM=
    ProvisioningStatus:
      type: object
      description: 'Current state of the wallet provisioning. '
      required:
      - state
      properties:
        state:
          type: string
          description: Current state of the wallet provisioning. This enumeration
            is extensible, meaning that additional values may be accepted in the future.
          oneOf:
          - const: Pending
            description: The provisioning has been started and is in a pending state.
            title: Pending
          - const: PaymentSourcesProvisioned
            description: The consumer PSP provided payment sources.
            title: PaymentSourcesProvisioned
          - const: Completed
            description: The provisioning was successfully completed.
            title: Completed
          - const: Failed
            description: The provisioning failed or was cancelled.
            title: Failed
          - type: string
            not:
              enum:
              - Pending
              - PaymentSourcesProvisioned
              - Completed
              - Failed
            description: Any other provisioning state value.
            title: Any String
        reason:
          description: The reason why the provisioning was cancelled. This reason
            is provided only if the state is 'Failed' and the failure was due to a
            cancellation. This enumeration is extensible, meaning that additional
            values may be accepted in the future.
          type: string
          oneOf:
          - const: ConsumerCancelled
            description: The consumer cancelled the provisioning.
            title: ConsumerCancelled
          - const: ScaFailed
            description: Strong Customer Authentication failed.
            title: ScaFailed
          - const: TCSNotAccepted
            description: Terms and Conditions were not accepted.
            title: TCSNotAccepted
          - const: NoAccounts
            description: No accounts are available.
            title: NoAccounts
          - const: SecurityConcerns
            description: Security risks detected.
            title: SecurityConcerns
          - const: TechnicalError
            description: A technical error occurred.
            title: TechnicalError
          - const: UnknownError
            description: An unknown error occurred.
            title: UnknownError
          - const: Expired
            description: The provisioning expired.
            title: Expired
          - const: VerifierMismatch
            description: |-
              The PKCE-like verifiers were not correct during provisioning process. The provisioning was cancelled
              for security reasons.
            title: VerifierMismatch
          - const: DuplicatedPaymentSource
            description: The payment source is already provisioned inside the wallet.
            title: DuplicatedPaymentSource
          - type: string
            not:
              enum:
              - ConsumerCancelled
              - ScaFailed
              - TCSNotAccepted
              - NoAccounts
              - SecurityConcerns
              - TechnicalError
              - UnknownError
              - Expired
              - VerifierMismatch
              - DuplicatedPaymentSource
            description: Any other cancellation reason value.
            title: Any String
    PaymentSourceResource:
      type: object
      description: ''
      oneOf:
      - $ref: '#/components/schemas/PaymentSourceResourcePaymentAccount'
      discriminator:
        propertyName: type
        mapping:
          PaymentAccount: '#/components/schemas/PaymentSourceResourcePaymentAccount'
    ConsumerPSPEmbeddedDetailsSchema:
      type: object
      properties:
        id:
          type: string
          description: Consumer PSP ID.
        name:
          type: string
          description: Consumer PSP name.
        countryCodeList:
          type: array
          description: List of codes of countries that the consumer PSP does business
            with in the ISO 3166-1 alpha-2 code format.
          items:
            $ref: '#/components/schemas/CountryCode'
        publicJwk:
          type: object
          description: Public key of the consumer psp, as a JWK.
          properties:
            kty:
              type: string
            n:
              type: string
            e:
              type: string
        redirectTemplate:
          type: string
          description: A URL template. The consumer is redirected to this URL to complete
            the provisioning of the wallet with means of payment. Must contain {walletId}
            and {provisioningId} as template fields.
        apps:
          type: array
          description: List of apps available for this consumer PSP.
          items:
            type: object
            description: Data about the App for this consumer PSP.
            properties:
              id:
                type: string
                format: uuid
                description: App ID.
              name:
                type: string
                description: App name.
              icon:
                $ref: '#/components/schemas/AppIcon'
              _links:
                type: object
                properties:
                  webRedirect:
                    $ref: '#/components/schemas/link'
                  deepRedirect:
                    $ref: '#/components/schemas/link'
                  universalRedirect:
                    $ref: '#/components/schemas/link'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            meta:
              $ref: '#/components/schemas/consumerPspMetadata'
      required:
      - id
      - name
      - countryCodeList
      - _embedded
    walletProvisioningSchema:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: UUID for finding/continuing the provisioning flow.
        consumerId:
          type: string
          format: uuid
          description: UUID of the consumer for whom this wallet is being provisioned.
        consumerPspId:
          type: string
          format: uuid
          description: UUID of the consumer PSP that is to provision the wallet.
        status:
          $ref: '#/components/schemas/ProvisioningStatus'
        paymentSources:
          type: array
          description: Consumer PSP's payment sources, for creating means of payment.
          items:
            $ref: '#/components/schemas/PaymentSourceResource'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            redirect:
              $ref: '#/components/schemas/link'
            provisionPaymentSources:
              $ref: '#/components/schemas/link'
              description: Link to the location where the consumer PSP must create
                the payment sources. This link is available only when the Wallet Provisioning
                resource still contains no information about any payment sources.
            cancellation:
              $ref: '#/components/schemas/link'
              description: Link to the location where the consumer PSP or consumer
                can cancel the provisioning.  This link is available only when the
                Wallet Provisioning resource still in a pending state.
            paymentMeans:
              $ref: '#/components/schemas/link'
              description: Link to the location of the payment means created during
                this enrolment.  This link is available only when the Wallet Provisioning
                resource is in a completed state.
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            consumerPsp:
              $ref: '#/components/schemas/ConsumerPSPEmbeddedDetailsSchema'
      examples:
      - id: ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85
        consumerId: 6f67424e-fa72-434a-a47a-d45443762ead
        consumerPspId: 00000000-0000-0000-0000-000000009002
        paymentSources:
        - type: PaymentAccount
          id: 2344f149-4a29-4191-bda8-ade602a460a0
          status: Active
          consumerPspId: 00000000-0000-0000-0000-000000009002
          externalId: 96a66fbe-79e3-41b1-ab4f-265a832f49c4
          accountIdentifier:
            type: IBAN
            iban: DE00112233000009769457
          pro: false
          currency: EUR
          displayDigits: DE89xxxxxxxxxxxxxx3000
          _links:
            self:
              href: https://spi.int.epi.engineering/api/wallets/6f67424e-fa72-434a-a47a-d45443762ead/provisionings/ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85/payment-sources/2344f149-4a29-4191-bda8-ade602a460a0
        status:
          state: Pending
        _links:
          self:
            href: https://spi.int.epi.engineering/api/wallets/6f67424e-fa72-434a-a47a-d45443762ead/provisionings/ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85
          redirect:
            href: https://app.weropay.eu/provisioning-done
          provisionPaymentSources:
            href: https://spi.int.epi.engineering/api/wallets/6f67424e-fa72-434a-a47a-d45443762ead/provisionings/ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85/provision-payment-sources
          cancellation:
            href: https://spi.int.epi.engineering/api/wallets/6f67424e-fa72-434a-a47a-d45443762ead/provisionings/ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85/cancellation
            name: cancelProvisioning
        _embedded: {
          }
      required:
      - id
      - consumerPspId
      - paymentSources
      - _links
      - status
      - _embedded
    Verifier:
      type: string
      description: |-
        Represents a random byte sequence. This is the plain-text counterpart of the verifier hash. The byte sequence must have at least 32 bytes and be created with a cryptographically-secure random number generator.
        This type is also referred to as the PKCE-like verifier.
        Examples can be generated with: ```shell $ openssl rand 32 | base64  ```
      contentEncoding: base64
      example: H8S6eMMhpylNP5TWF2+lU/f5TzqWb7OAdyNv0yFOeyY=
    WalletHostMobileSchema:
      type: object
      properties:
        type:
          type: string
          const: Mobile
        device:
          type: object
          properties:
            id:
              type: string
              format: uuid
              description: |-
                ID of the device where the wallet is installed.
                For iOS, you can use the `Identifier` for `Vendor`. For Android, you can use the `App Set Id`. For more information about iOS, see [Identifier for Vendor](https://developer.apple.com/documentation/uikit/uidevice/1620059-identifierforvendor). For more information about Android, see [App Set Id](https://developers.google.com/android/reference/com/google/android/gms/appset/AppSetIdInfo).
              example: 4c4256ad-4e32-4543-ac52-ea63d7e26cdb
            name:
              type: string
              description: A human-readable device name.
              example: Johnnys iPhone
              minLength: 1
            model:
              type: string
              description: A human-readable device model name.
              example: iPhone 12
              minLength: 1
            os:
              type: string
              description: The operating system of the device. This enumeration is
                extensible to accommodate future operating systems.
              example: iOS
              oneOf:
              - const: iOS
                title: iOS
              - const: Android
                title: Android
              - type: string
                not:
                  enum:
                  - iOS
                  - Android
                title: Any String
          required:
          - id
          - name
          - model
        app:
          type: object
          properties:
            id:
              type: string
              description: The ID of the app where the wallet is installed. For Android,
                use the ID of the package name. For iOS, use the bundle ID. For example,
                `eu.epicompany.wero.wallet` or `fr.mybank.mobilebanking`. This ID
                must not be changed when the app name is changed.
              minLength: 1
            name:
              type: string
              description: Human readable app name.
              example: MyBank Mobile Banking App Plus
              minLength: 1
          required:
          - id
          - name
      required:
      - type
      - device
      - app
    WalletHostBrowserSchema:
      type: object
      properties:
        type:
          type: string
          const: Browser
        device:
          type: object
          properties:
            id:
              type: string
              description: Identifier of the device or the user.
              example: 4c4256ad-4e32-4543-ac52-ea63d7e26cdb
              minLength: 1
              maxLength: 100
            name:
              type: string
              description: A human-readable browser name.
              example: Mozilla Firefox
              minLength: 1
              maxLength: 100
            version:
              type: string
              description: A human-readable browser version.
              example: '42.5'
              minLength: 1
              maxLength: 100
          required:
          - id
          - name
          - version
        app:
          type: object
          properties:
            id:
              type: string
              description: The ID of the app where the wallet is installed.
              minLength: 1
            name:
              type: string
              description: Human readable app name.
              example: MyBank Online Banking App Plus
              minLength: 1
          required:
          - id
          - name
      required:
      - type
      - device
      - app
    WalletHostSchema:
      title: The host creating the wallet
      type: object
      oneOf:
      - $ref: '#/components/schemas/WalletHostMobileSchema'
      - $ref: '#/components/schemas/WalletHostBrowserSchema'
      discriminator:
        propertyName: type
        mapping:
          Mobile: '#/components/schemas/WalletHostMobileSchema'
          Browser: '#/components/schemas/WalletHostBrowserSchema'
    WalletPublicKey:
      title: Public key of the wallet instance on the device.
      type: object
      description: Public key of a key pair for the wallet instance on the device.
        The key must be [unique to the wallet](doc:wallets-and-cryptography#uniqueness-of-public-keys).
        Represented as a JSON Web Key ([JWK](https://www.rfc-editor.org/rfc/rfc7517)).
      oneOf:
      - $ref: '#/components/schemas/RSAPublicJWK'
      - $ref: '#/components/schemas/EllipticCurvePublicJWK'
      discriminator:
        propertyName: kty
        mapping:
          RSA: '#/components/schemas/RSAPublicJWK'
          EC: '#/components/schemas/EllipticCurvePublicJWK'
    PaymentMeansPublicKey:
      title: Public key of the provisioned means of payment.
      type: object
      description: Public key of the individual means of payment. The key must be
        [unique to the means of payment](doc:wallets-and-cryptography#uniqueness-of-public-keys).
        Represented as JSON Web Key ([JWK](https://www.rfc-editor.org/rfc/rfc7517)).
        Consumer PSPs must create key pairs for each means of payment, even if the
        wallet app interacts only indirectly with EPI central services.
      oneOf:
      - $ref: '#/components/schemas/RSAPublicJWK'
      - $ref: '#/components/schemas/EllipticCurvePublicJWK'
      discriminator:
        propertyName: kty
        mapping:
          RSA: '#/components/schemas/RSAPublicJWK'
          EC: '#/components/schemas/EllipticCurvePublicJWK'
    PaymentSourceType:
      type: string
      description: |-
        > ❗️ This field is deprecated and will be removed after 31 Dec 2024. This field will be replaced by `_embedded.paymentSource.type`.

        Payment source type. This enumeration is extensible, meaning that additional values may be accepted in the future.
      deprecated: true
      oneOf:
      - const: PaymentAccount
        description: Payment source of type Payment Account.
        title: PaymentAccount
      - type: string
        not:
          enum:
          - PaymentAccount
        description: Any other payment source type value.
        title: Any String
    PaymentMeansSchema:
      type: object
      title: Wallet means of payment
      description: |-
        A means of payment (or payment means) is a digital representation of a consumer's payment source.

        In the process of provisioning a Wero digital wallet, the consumer PSP adds information about the consumer's payment sources to the Wallet Provisioning resource. Then, for each payment source, the Wero digital wallet creates a 'paymentMeans' resource, which is a sub-resource of the Wallet resource. The 'paymentMeans' resources contain the payment source information.

        When consumers consent to payments in their Wero digital wallets, they choose a means of payment, which indicates to the consumer PSP the payment source that the money is to come out of.
      properties:
        id:
          type: string
          format: uuid
          description: The ID of the means of payment.
        consumerPspId:
          type: string
          format: uuid
          description: ID of the consumer PSP that provisioned the means of payment.
        publicKey:
          $ref: '#/components/schemas/PaymentMeansPublicKey'
        paymentSourceId:
          type: string
          format: uuid
          description: ID of the corresponding payment source.
        paymentSourceType:
          $ref: '#/components/schemas/PaymentSourceType'
        consumerInformation:
          type: object
          description: Object containing information about the corresponding consumer.
          properties:
            consumerId:
              type: string
              format: uuid
              description: ID of the corresponding consumer.
            status:
              type: string
              description: The status of the corresponding consumer.
              oneOf:
              - const: Active
                description: The consumer is active.
                title: Active
              - const: Blocked
                description: The consumer is blocked.
                title: Blocked
              - const: PendingConfirmation
                description: The consumer is blocked and currently undergoing a screening
                  in the Wero standalone app.
                title: PendingConfirmation
              - type: string
                not:
                  enum:
                  - Active
                  - Blocked
                  - PendingConfirmation
                description: Placeholder for a future status, to be defined.
        _embedded:
          type: object
          description: Embedded related resources.
          properties:
            consumerPsp:
              $ref: '#/components/schemas/consumerPSPDetailsSchema'
            paymentSource:
              $ref: '#/components/schemas/PaymentSourceResource'
            paymentSourceProfile:
              type: object
              description: The payment source profile describes how the consumer's
                payment information is displayed to other consumers and includes the
                payment source proxies.
              properties:
                id:
                  type: string
                displayName:
                  type: string
                isDisplayNameObfuscated:
                  type: boolean
                  description: Indicates whether the consumer has chosen to display
                    only an obfuscated (pseudonymised/masked) version of their name,
                    instead of their full name, to other consumers in P2P transactions.
                    By default, only the obfuscated name is displayed.
                paymentSourceProxies:
                  type: array
                  items:
                    type: object
                    properties:
                      type:
                        type: string
                      id:
                        type: string
                      value:
                        type: string
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            self:
              $ref: '#/components/schemas/link'
      required:
      - id
      - _links
      - paymentSourceId
      - consumerPspId
      - publicKey
      - _embedded
    DeviceAttestationChallengeSchema:
      type: object
      title: Device Attestation Challenge
      description: In the device attestation process of a standalone app, the Wero
        wallet requests a challenge from EPI central services.  This challenge is
        used to bind an attestation to a single device.
      properties:
        value:
          type: string
          format: uuid
          description: Challenge value.
        createdAt:
          type: string
          description: Time at which the challenge was requested.
          format: date-time
          example: '2025-01-01T10:20:30.061200Z'
        nextChallengeNotBefore:
          type: string
          description: The next challenge can be requested after this time.
          format: date-time
          example: '2025-01-01T10:22:30.061200Z'
        expired:
          type: boolean
          default: false
          description: Indicates whether a challenge is still valid or a new one needs
            to be requested.
      required:
      - challenge
      - createdAt
      - nextChallengeNotBefore
      - expired
    DeviceAttestationSchema:
      type: object
      title: Device Attestation
      description: Before a consumer can use the Wero standalone digital app, the
        mobile device the app is installed needs to be attested.
      properties:
        verdict:
          type: object
          description: Object containing information about the device attestation
            process.
          properties:
            status:
              type: string
              description: The status of the attestation.
              oneOf:
              - const: Pending
                description: The wallet has requested a challenge. The device attestation
                  is still outstanding.
                title: Pending
              - const: Passed
                description: The device has been successfully attested.
                title: Passed
              - const: Failed
                description: The attestation of the device has failed.
                title: Failed
              - type: string
                not:
                  enum:
                  - Pending
                  - Passed
                  - Failed
                description: Placeholder for a future status, to be defined.
        _embedded:
          type: object
          description: Embedded related resources.
          properties:
            challenge:
              $ref: '#/components/schemas/DeviceAttestationChallengeSchema'
    WalletSchema:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique ID of the wallet.
        walletName:
          type: string
          description: Wallet name (inferred).
        host:
          $ref: '#/components/schemas/WalletHostSchema'
        consumerId:
          type: string
          format: uuid
          description: ID of the consumer who owns the wallet.
        walletPublicKey:
          $ref: '#/components/schemas/WalletPublicKey'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            paymentMeans:
              $ref: '#/components/schemas/link'
            provisionings:
              $ref: '#/components/schemas/link'
            notification:
              $ref: '#/components/schemas/link'
            challenge:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          description: Embedded, related resources.
          required:
          - paymentMeans
          properties:
            paymentMeans:
              type: array
              items:
                $ref: '#/components/schemas/PaymentMeansSchema'
            attestation:
              $ref: '#/components/schemas/DeviceAttestationSchema'
      required:
      - id
      - host
      - _links
      - walletName
      - _embedded
    ProvisioningResponseSchema_provisionings:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The UUID for finding and continuing the provisioning flow.
        consumerId:
          type: string
          format: uuid
          description: The UUID of the consumer for whom this wallet is being provisioned.
        consumerPspId:
          type: string
          format: uuid
          description: The UUID of the consumer PSP that the user selects to provision
            the wallet.
        status:
          $ref: '#/components/schemas/ProvisioningStatus'
        paymentSources:
          type: array
          description: The consumer PSP's payment sources for creating means of payment.
          items:
            $ref: '#/components/schemas/PaymentSourceResource'
        epiVerifier:
          $ref: '#/components/schemas/Verifier'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - self
          properties:
            self:
              $ref: '#/components/schemas/link'
            redirect:
              $ref: '#/components/schemas/link'
            provisionPaymentSources:
              $ref: '#/components/schemas/link'
              description: The link to the location where the consumer PSP must create
                the payment sources. This link is available only when the wallet provisioning
                resource still contains no information about any payment sources.
            cancellation:
              $ref: '#/components/schemas/link'
              description: The link to the location where the consumer PSP or consumer
                can cancel the provisioning. This link is available only when the
                wallet provisioning resource is still in a `pending` state.
            paymentMeans:
              $ref: '#/components/schemas/link'
              description: Link to the location of the payment means that is created
                during this enrolment. This link is available only when the wallet
                provisioning resource is in a `completed` state.
        _embedded:
          type: object
          description: Embedded, related resources.
          properties:
            consumerPsp:
              $ref: '#/components/schemas/ConsumerPSPEmbeddedDetailsSchema'
            wallet:
              $ref: '#/components/schemas/WalletSchema'
          required:
          - wallet
      examples:
      - id: ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85
        consumerId: 6f67424e-fa72-434a-a47a-d45443762ead
        consumerPspId: 00000000-0000-0000-0000-000000009002
        paymentSources:
        - type: PaymentAccount
          id: 2344f149-4a29-4191-bda8-ade602a460a0
          status: Active
          consumerPspId: 00000000-0000-0000-0000-000000009002
          externalId: 96a66fbe-79e3-41b1-ab4f-265a832f49c4
          accountIdentifier:
            type: IBAN
            iban: DE00112233000009769457
          pro: false
          currency: EUR
          displayDigits: DE00xxxxxxxxxxxxxx9457
          _links:
            self:
              href: https://api.epi-services.eu/api/wallets/2344f149-4a29-4191-bda8-ade602a460a0
        status:
          state: Pending
        epiVerifier: MWZjZWE2OWZhN2ZiZjUzNTRkMDgzZDAzODU0YzRlOTlkYTNlZTZiMzA5OGRhYzMwYjJjNDg2MWQ4NTg5NmZiZiAgLQo=
        _links:
          self:
            href: https://spi.int.epi.engineering/api/provisionings/ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85
          redirect:
            href: https://app.weropay.eu/provisioning-done
          provisionPaymentSources:
            href: https://spi.int.epi.engineering/api/provisionings/ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85/provision-payment-sources
          cancellation:
            href: https://spi.int.epi.engineering/api/provisionings/ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85/cancellation
            name: cancelProvisioning
        _embedded:
          wallet:
            id: 013ab34a-3fca-4187-8e73-56b4f0aa669d
            walletName: Tom's wallet
            host:
              type: Mobile
              device:
                id: 4c4256ad-4e32-4543-ac52-ea63d7e26cdb
                name: Tom's iPhone Max
                model: iPhone Max
              app:
                id: eu.epicompany.wero.wallet
                name: Wero Wallet App
            _links:
              self:
                href: https://api.epi-services.eu/api/wallets/013ab34a-3fca-4187-8e73-56b4f0aa669d
            _embedded:
              paymentMeans: [
                ]
      required:
      - id
      - consumerPspId
      - paymentSources
      - _links
      - status
      - _embedded
      description: The hash of `epiVerifier` binds the wallet provisioning process
        between EPI central services and the consumer PSP in a secure manner and is
        only known by the consumer PSP. If returned in the response, the consumer
        PSP must verify that the value of this field has the same SHA256-Hash as the
        `epiVerifierHash` that is submitted when [registering the wallet provisioning](ref:register-provisioning-process).
        If there is a mismatch of the hashes, immediately [cancel the provisioning
        resource](ref:put-provisionings-provisioningid-cancellation).
    CreatePaymentSourceRequest:
      type: object
      oneOf:
      - $ref: '#/components/schemas/CreatePaymentSourcePaymentAccountRequest'
      examples:
      - type: PaymentAccount
        externalId: '123456789'
        accountIdentifier:
          type: IBAN
          iban: NL02ABNA0123456789
        accountHolder: John Doe
        currency: EUR
        pro: false
        countryCode: NL
    CreateProvisionPaymentSourcesConsumerPspProfileRequest:
      type: object
      required:
      - externalId
      - consumerName
      properties:
        externalId:
          type: string
          description: External ID of a consumer, provided by the consumer PSP. Uniquely
            identifies a consumer outside of the EPI context. For EPI to correlate
            consumers across different wallet installations, consumer PSPs must provide
            the same external ID for a particular consumer across wallets.
        consumerName:
          type: object
          required:
          - firstName
          - lastName
          properties:
            firstName:
              type: string
              minLength: 1
              maxLength: 255
              description: The first name of the consumer, as is known to the consumer
                PSP.
            middleNames:
              type: string
              minLength: 1
              maxLength: 255
              description: The middle names of the consumer, as are known to the consumer
                PSP.
            lastName:
              type: string
              minLength: 1
              maxLength: 255
              description: The last name of the consumer, as is known to the consumer
                PSP.
          description: The full know-your-customer (KYC) name of the consumer, as
            is known to the consumer PSP.    If the `consumerName` is provided, EPI
            obfuscates by default the `displayName` that is shown to other consumers.
            However, the consumer can override the default and set the full `consumerName`
            as the `displayName`.
        dateOfBirth:
          type: string
          format: date
          description: |-
            The date of birth of the consumer, as is known to the consumer PSP. This information will be used for money-laundering checks and age verification.
            > ❗️This field is currently optional, but it will be required from the moment the first bank launches on the Wero standalone app.
        birthCountry:
          $ref: '#/components/schemas/CountryCode'
          description: |-
            Country code in ISO 3166-1 alpha-2 format of the consumer's birth country. If the country of birth no longer exists, the consumer PSP is required to update the record with the new country where the place of birth is now located. This information will be used for money-laundering checks and sanctions screening.
            > ❗️This field is currently optional, but it will be required from the moment the first bank launches on the Wero standalone app.
        nationality:
          $ref: '#/components/schemas/CountryCode'
          description: |-
            Country code in ISO 3166-1 alpha-2 format of the consumer's nationality. If the consumer has multiple nationalities, the consumer PSP must provide the primary. This information will be used for money-laundering checks and sanctions screening.
            > ❗️This field is currently optional, but it will be required from the moment the first bank launches on the Wero standalone app.
        residenceCountry:
          $ref: '#/components/schemas/CountryCode'
          description: |-
            Country code in ISO 3166-1 alpha-2 format of the consumer's residence country. If the consumer has multiple residences, the consumer PSP must provide the primary. This information will be used for money-laundering checks and sanctions screening.
            > ❗️This field is currently optional, but it will be required from the moment the first bank launches on the Wero standalone app.
        residenceCity:
          type: string
          description: |-
            The city of residence of the consumer, as is known to the consumer PSP. This information will be used for money-laundering checks and sanctions screening.
            > ❗️This field is currently optional, but it will be required from the moment the first bank launches on the Wero standalone app.
    PaymentSourceExternalIdPermissionRequest:
      type: object
      properties:
        externalId:
          type: string
          description: external ID of the payment source to be granted permission
            to.
        isOwner:
          type: boolean
          description: Is the owner of the payment source. false for e.g. beneficiaries.
      required:
      - externalId
      - isOwner
    ProvisionPaymentSourcesRequest_provisionings:
      type: object
      properties:
        paymentSources:
          type: array
          items:
            $ref: '#/components/schemas/CreatePaymentSourceRequest'
        consumerPspProfile:
          $ref: '#/components/schemas/CreateProvisionPaymentSourcesConsumerPspProfileRequest'
        paymentSourcePermissions:
          type: array
          minItems: 1
          uniqueItems: true
          items:
            $ref: '#/components/schemas/PaymentSourceExternalIdPermissionRequest'
        pspVerifierHash:
          $ref: '#/components/schemas/VerifierHash'
      required:
      - consumerPspProfile
      - paymentSourcePermissions
      - paymentSources
      - pspVerifierHash
      description: The `pspVerifierHash` is used as PKCE-like verifier during the
        wallet provisioning process. The consumer receives the plain-text verifier
        after the provisioning process completes.
    ProvisionPaymentSourcesResponse_provisionings:
      type: object
      properties:
        paymentSources:
          type: array
          description: Consumer PSP's payment sources, for creating means of payment.
          items:
            type: object
            oneOf:
            - $ref: '#/components/schemas/PaymentSourceResourcePaymentAccount'
            discriminator:
              propertyName: type
              mapping:
                PaymentAccount: '#/components/schemas/PaymentSourceResourcePaymentAccount'
        epiVerifier:
          $ref: '#/components/schemas/Verifier'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - consumerFraudRiskInformation
          properties:
            redirect:
              $ref: '#/components/schemas/link'
            consumerFraudRiskInformation:
              type: object
              properties:
                href:
                  type: string
                  format: uri
              description: Link to the consumer fraud risk information resource.
      required:
      - paymentSources
      - epiVerifier
      - _links
      description: |-
        The hash of `epiVerifier` binds the wallet provisioning process between EPI central services and the consumer PSP in a
        secure manner and is only known by the consumer PSP. If returned in the response, the consumer PSP must verify that the
        value of this field has the same SHA256-Hash as the `epiVerifierHash` that is submitted when [registering the wallet provisioning](ref:register-provisioning-process).
        If there is a mismatch of the hashes, immediately [cancel the provisioning resource](ref:put-provisionings-provisioningid-cancellation).
    CancelProvisioningRequest:
      type: object
      required:
      - reason
      properties:
        reason:
          description: The reason for cancelling wallet provisioning. This enumeration
            is extensible, meaning that additional values may be accepted in the future.
          oneOf:
          - const: ConsumerCancelled
            description: The consumer cancelled the provisioning.
            default: ConsumerCancelled
            title: ConsumerCancelled
          - const: ScaFailed
            description: Strong Customer Authentication failed.
            default: ScaFailed
            title: ScaFailed
          - const: TCSNotAccepted
            description: Terms and Conditions were not accepted.
            default: TCSNotAccepted
            title: TCSNotAccepted
          - const: NoAccounts
            description: No accounts are available.
            default: NoAccounts
            title: NoAccounts
          - const: Fraud
            description: Fraudulent activity detected.
            default: Fraud
            title: Fraud
          - const: MoneyLaundering
            description: Money laundering suspicion.
            default: MoneyLaundering
            title: MoneyLaundering
          - const: TechnicalError
            description: A technical error occurred.
            default: TechnicalError
            title: TechnicalError
          - const: UnknownError
            description: An unknown error occurred.
            default: UnknownError
            title: UnknownError
          - const: VerifierMismatch
            description: |-
              The PKCE-like verifiers were not correct during the wallet provisioning process. The wallet provisioning has
              been cancelled for security reasons.
            default: VerifierMismatch
            title: VerifierMismatch
          - type: string
            not:
              enum:
              - ConsumerCancelled
              - ScaFailed
              - TCSNotAccepted
              - NoAccounts
              - Fraud
              - MoneyLaundering
              - TechnicalError
              - UnknownError
              - VerifierMismatch
            description: Any other cancellation reason value.
            title: Any String
    CancelProvisioningResponse:
      type: object
      properties:
        redirect:
          description: The consumer is redirected to this URL for further steps after
            the cancellation. The link is to the standalone Wero digital wallet app
            or the mobile banking app, whichever one the consumer had initiated wallet
            provisioning from.
          $ref: '#/components/schemas/link'
    FraudRiskInformationResource:
      title: Fraud risk information resource
      description: HAL resource representation of fraud risk information about wallet
        provisioning (during wallet provisioning in the standalone app).
      type: object
      properties:
        fraudRiskInformation:
          type: object
          description: Contains information related to the fraud risk assessment of
            the consumer during wallet provisioning.
          properties:
            fraudScores:
              oneOf:
              - $ref: '#/components/schemas/ConsumerFraudScores'
              - $ref: '#/components/schemas/FraudScoreError'
              discriminator:
                propertyName: type
                mapping:
                  consumer-fraud-scores: '#/components/schemas/ConsumerFraudScores'
                  fraud-scores-error: '#/components/schemas/FraudScoreError'
              description: The fraud score for wallet provisioning.
            consumerDeviceTelemetry:
              $ref: '#/components/schemas/OutboundConsumerDeviceTelemetry'
              description: The consumer device telemetry for wallet provisioning.
                This device telemetry is gathered from the standalone Wero digital
                wallet app.
        _links:
          type: object
          description: HAL links to related resources.
          properties:
            provisioning:
              $ref: '#/components/schemas/link'
      required:
      - fraudRiskInformation
      - _links
      example:
        fraudRiskInformation:
          fraudScores:
            type: consumer-fraud-scores
            user:
              score: 10
              primaryRiskVector: AccountTakeover
          consumerDeviceTelemetry:
            deviceModel: iPhone12,1
            deviceScreenResolution: 828x1792
            deviceCellularProviders: Telekom, Vodafone
            deviceLocation: 37.7749,-122.4194
            deviceTimeZone: America/Los_Angeles
            deviceId: 6fc1c567-a4cd-45c5-9e44-c5a5b9a6f09a
            deviceOs: iOS
            deviceLanguage: en_US
            deviceTime: '2023-09-25T12:34:56Z'
            deviceIpAddress: 192.0.2.123
            clientIpAddress: 198.51.100.101
            deviceUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)
              AppleWebKit/605.1.15 ...
            clientUserAgent: Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)
              AppleWebKit/605.1.15 ...
        _links:
          provisioning:
            href: https://spi.int.epi.engineering/api/wallets/6f67424e-fa72-434a-a47a-d45443762ead/provisionings/ae6fa5c4-0ce1-4f72-a36a-6b55a2db3a85
    CreateWalletRequest:
      type: object
      properties:
        host:
          $ref: '#/components/schemas/WalletHostSchema'
      required:
      - host
    CreateConsumerPspWalletRequest:
      type: object
      properties:
        host:
          $ref: '#/components/schemas/WalletHostSchema'
        consumerId:
          type: string
          format: uuid
          description: ID of the consumer who owns the wallet.
      required:
      - host
      - consumerId
    PaymentSourceIdPermissionRequest:
      type: object
      properties:
        paymentSourceId:
          type: string
          format: uuid
          description: ID of the payment source to be granted permission to.
        isOwner:
          type: boolean
          description: Is the owner of the payment source.
      required:
      - paymentSourceId
      - isOwner
    CreateConsumerPspInitiatedWalletRequest:
      type: object
      properties:
        wallet:
          $ref: '#/components/schemas/CreateConsumerPspWalletRequest'
        paymentSourcePermissions:
          type: array
          items:
            $ref: '#/components/schemas/PaymentSourceIdPermissionRequest'
          minItems: 0
          description: Although this parameter is required, the minimum number of
            items is 0 (that is, when creating an empty wallet).
        paymentMeans:
          type: array
          items:
            type: object
            properties:
              paymentSourceId:
                type: string
              publicKey:
                $ref: '#/components/schemas/PaymentMeansPublicKey'
            required:
            - paymentSourceId
            - publicKey
          minItems: 0
          description: Although this parameter is required, the minimum number of
            items is 0 (that is, when creating an empty wallet).
      required:
      - wallet
      - paymentSourcePermissions
      - paymentMeans
    PaymentMeansResource:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: The `paymentMeansId` for retrieving and continuing the provisioning
            workflow.
        publicKey:
          $ref: '#/components/schemas/PaymentMeansPublicKey'
        consumerId:
          type: string
          format: uuid
          description: ID of the corresponding consumer.
        paymentSourceId:
          type: string
          format: uuid
          description: ID of the corresponding payment source.
        _links:
          type: object
          properties:
            self:
              $ref: '#/components/schemas/link'
        _embedded:
          type: object
          properties:
            paymentSource:
              $ref: '#/components/schemas/PaymentSourceResource'
      required:
      - id
      - paymentSourceId
      - publicKey
      - _links
      examples:
      - id: 0650d71b-b27c-4de0-a635-aea59639a43a
        publicKey:
          kty: RSA
          use: sig
          alg: RS256
          kid: 2c9b3e1a-8001-4c6f-95ae-2959d38d2222
          n: vZl9LV2lmdaSn1CTfrpbIbkhuJZ4C-mb33JTSXGB9q7GuSW_eiFz5SUOK2p5JIXznabbazaywpYhyMBpw7tbnKSzBuQxRKQHPD-Li1hhV4abjr570hGmc0UyftpBWZz4_53-q6lp0hupi8getzDyfPiiDZvgyKIGHytYSvZCGeVHXzJQy6DNf2xyZxG8WwgKvpIcOi0FvlVDJgdlIQn3HGrW3xK1IJpHLzh_ucYDIhs4L864hdV2QzUZA7d_agbk7dbq7ZStZNF4J_KmbruouQ_edglZurKeh6xmiRcOqGfWqN-4gJXAT4gN6w_eslfkPAKRDOcyh4ig8GopQ6CD9w
          e: AQAB
        paymentSourceId: cbc8b802-41f8-5335-ba12-241f8095b56c
        consumerId: dc36cb89-b6cb-4a33-b974-eb1a8733e1c7
        _links:
          self:
            href: https://api.epi-services.eu/api/wallets/dc36cb89-b6cb-4a33-b974-eb1a8733e1c7/payment-means/0650d71b-b27c-4de0-a635-aea59639a43a
    RemoveWalletRequest:
      title: RemoveWalletRequest
      type: object
      properties:
        reason:
          description: The reason for wallet removal. Although the reason being optional,
            it is recommended to provide it.
          oneOf:
          - const: ConsumerRequested
            description: The consumer has instructed the app or the consumer PSP to
              remove the wallet.
            default: ConsumerRequested
            title: Consumer Requested
          - const: ConsumerExited
            description: The consumer has been removed from the Wero payment system.
              The consumer-entity status has changed to `removed`.
            default: ConsumerExited
            title: Consumer Removed
          - const: LostOrStolenDevice
            description: The consumer's mobile device has been reported lost or stolen.
            default: LostOrStolenDevice
            title: Lost or Stolen Device
          - type: string
            not:
              enum:
              - ConsumerRequested
              - ConsumerExited
              - LostOrStolenDevice
            description: Placeholder for a future reason, to be defined.
            title: Any String
    Locale:
      title: Locale
      type: string
      description: The locale that is specified in the IETF BCP 47 language tag standard.
      example: de-DE
    CreateSinglePaymentMeansRequest:
      type: object
      required:
      - paymentSourceId
      - owner
      properties:
        paymentSourceId:
          type: string
          format: uuid
        owner:
          type: boolean
    ProvisionPaymentMeansRequest:
      type: object
      properties:
        provisioningId:
          type: string
          description: UUID for finding and continuing the provisioning flow.
        consumerId:
          type: string
          format: uuid
          description: UUID of the consumer that is associated with the wallet provisioning
            flow.
        paymentMeans:
          type: array
          description: List of the means of payment the wallet is provisioned with
            in this provisioning flow.
          items:
            type: object
            properties:
              paymentSourceId:
                type: string
                description: ID of the corresponding payment source in the provisioning
                  flow.
        verifiers:
          type: object
          description: Contains the verifiers for the provisioning flow.  The `pspVerifier`
            is currently optional but will become mandatory when all consumer PSPs
            have adapted the verified provisioning flow.
          properties:
            pspVerifier:
              $ref: '#/components/schemas/Verifier'
            userVerifier:
              $ref: '#/components/schemas/Verifier'
          required:
          - userVerifier
      required:
      - paymentMeans
      - provisioningId
    CreateProvisionPaymentSourcesRequest:
      type: object
      properties:
        paymentSources:
          type: array
          items:
            $ref: '#/components/schemas/CreatePaymentSourceRequest'
        consumerPspProfile:
          $ref: '#/components/schemas/CreateProvisionPaymentSourcesConsumerPspProfileRequest'
        paymentSourcePermissions:
          type: array
          minItems: 1
          uniqueItems: true
          items:
            $ref: '#/components/schemas/PaymentSourceExternalIdPermissionRequest'
      required:
      - consumerPspProfile
      - paymentSourcePermissions
      - paymentSources
    paymentSourcesProvisioningSchema:
      type: object
      properties:
        paymentSources:
          type: array
          description: Consumer PSP's payment sources, for creating means of payment.
          items:
            type: object
            oneOf:
            - $ref: '#/components/schemas/PaymentSourceResourcePaymentAccount'
            discriminator:
              propertyName: type
              mapping:
                PaymentAccount: '#/components/schemas/PaymentSourceResourcePaymentAccount'
        _links:
          type: object
          description: HAL links to related resources.
          required:
          - consumerFraudRiskInformation
          properties:
            redirect:
              $ref: '#/components/schemas/link'
            consumerFraudRiskInformation:
              type: object
              properties:
                href:
                  type: string
                  format: uri
              description: Link to the consumer fraud risk information resource.
      description: Response for provisioning of a wallet with payment sources.
      required:
      - paymentSources
      - _links
    UpdatePaymentSourcePaymentAccountRequest:
      type: object
      required:
      - type
      - accountIdentifier
      - currency
      - pro
      properties:
        type:
          type: string
          enum:
          - PaymentAccount
        accountHolder:
          type: string
          minLength: 1
          description: |-
            Name of the account holder.
            > ❗️This field is optional but will become required from June 2025 for accounts used in the Wero Standalone App.
        pro:
          type: boolean
          description: Indicates whether the payment account is a 'pro' account, for
            P2Pro payments.
        accountIdentifier:
          $ref: '#/components/schemas/AccountIdentifier'
        currency:
          $ref: '#/components/schemas/Currency'
        countryCode:
          $ref: '#/components/schemas/CountryCode'
          description: |-
            ISO 3166-1 alpha-2 country code of the country where the payment account is located.
            > ❗️This field is optional but will become required from June 2025.
      example:
        type: PaymentAccount
        accountHolder: John Doe
        pro: false
        accountIdentifier:
          type: IBAN
          iban: DE89370400440532013000
        currency: EUR
        countryCode: DE
    UpdatePaymentSourceRequest:
      type: object
      oneOf:
      - $ref: '#/components/schemas/UpdatePaymentSourcePaymentAccountRequest'
    BlockPaymentSourceRequest:
      title: BlockPaymentSourceRequest
      type: object
      properties:
        reason:
          description: The reason for blocking the payment source. This enumeration
            is extensible; additional values might be added.
          oneOf:
          - const: SuspectedFraudInOpeningAccount
            description: Suspected fraud in opening of the account, for example, using
              false information.
            default: SuspectedFraudInOpeningAccount
            title: Suspected Fraud In Opening Account
          - const: AccountTakeover
            description: The account has been taken over.
            default: AccountTakeover
            title: Account Takeover
          - const: FirstPartyFraud
            description: The fraud is committed by the consumer.
            default: FirstPartyFraud
            title: First-Party Fraud
          - const: ConfirmedMoneyLaundering
            description: Confirmed money laundering using the payment source.
            default: ConfirmedMoneyLaundering
            title: Confirmed Money Laundering
          - const: SuspectedMoneyLaundering
            description: Suspected money laundering using the payment source.
            default: SuspectedMoneyLaundering
            title: Suspected Money Laundering
          - const: MatchPEPOrNegativeLists
            description: Match found on politically-exposed-persons (PEPs) list or
              negative list.
            default: MatchPEPOrNegativeLists
            title: Match PEP Or Negative Lists
          - const: ScamSuspicion
            description: Suspected scam using the payment source.
            default: ScamSuspicion
            title: Scam Suspicion
          - const: ScamConfirmed
            description: Confirmed scam using the payment source.
            default: ScamConfirmed
            title: Scam Confirmed
          - const: FraudSuspicion
            description: Suspected fraud using the payment source.
            default: FraudSuspicion
            title: Fraud Suspicion
          - const: FraudConfirmed
            description: Confirmed fraud using the payment source.
            default: FraudConfirmed
            title: Fraud Confirmed
          - const: MisuseEPIP2PUseCase
            description: Misuse of the EPI P2P use case. For example, a P2P product
              used for P2Pro transactions.
            default: MisuseEPIP2PUseCase
            title: Misuse of EPI P2P Use Case
          - const: CriminalUseOfAccount
            description: Criminal use of the payment source. For example, for financing
              drugs or other illegal goods.
            default: CriminalUseOfAccount
            title: Criminal Use Of Account
          - const: Other
            description: Any other reason not covered by the defined values.
            default: Other
            title: Other
          - type: string
            not:
              enum:
              - SuspectedFraudInOpeningAccount
              - AccountTakeover
              - FirstPartyFraud
              - ConfirmedMoneyLaundering
              - SuspectedMoneyLaundering
              - MatchPEPOrNegativeLists
              - ScamSuspicion
              - ConfirmedScammer
              - ScamConfirmed
              - FraudSuspicion
              - FraudConfirmed
              - MisuseEPIP2PUseCase
              - CriminalUseOfAccount
              - Other
            description: Placeholder for a future reason, to be defined.
            title: Any String
      required:
      - reason
    QrCodeP2PEncodeSendRequest:
      type: object
      title: Share URL P2P encode send request
      description: >-
        This option facilitates the sharing of information so that another
        consumer can send a proposed amount of money.
      required:
        - action
        - paymentSourceProfileId
      properties:
        action:
          type: string
          description: Here, the action is always `send_money`.
          enum:
            - send_money
        paymentSourceProfileId:
          type: string
          format: uuid
          description: >-
            ID of the payment source profile. This is identical to
            paymentSourceId.
          minLength: 1
          maxLength: 255
        amount:
          type: integer
          format: int32
          description: Amount of money in the smallest sub-division of the currency.
          example: 3000
    QrCodeP2PEncodeShareRequest:
      type: object
      title: Share URL P2P encode share request
      description: >-
        This option facilitates the sharing of the consumer's contact details so
        that another consumer can send or request money.
      required:
        - action
        - paymentSourceProfileId
      properties:
        action:
          type: string
          description: Here, the action is always `share_contact`.
          enum:
            - share_contact
        paymentSourceProfileId:
          type: string
          format: uuid
          description: >-
            ID of the payment source profile. This is identical to
            paymentSourceId.
          minLength: 1
          maxLength: 255
  responses:
    errorResponse400:
      description: Bad Request - The request is malformed.
      content:
        application/problem+json:
          schema:
            oneOf:
            - $ref: '#/components/schemas/Problem'
            - $ref: '#/components/schemas/ConstraintViolationProblem'
          examples:
            generic:
              value:
                type: about:blank
                status: 400
                title: Bad Request
                callId: 00000000000000000000000000000000-0000000000000000
            ConstraintViolationProblem:
              value:
                callId: 599155e6261f6a280283f0594e17b83b-451143485fb6c492
                status: 400
                title: Constraint Violation
                type: /problem/constraint-violation
                violations:
                - field: .somefield
                  message: Must have valid format.
    errorResponse401:
      description: Unauthorized - The request is not authenticated.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            unauthorized:
              value:
                type: about:blank
                status: 401
                title: Unauthorized
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse403:
      description: Forbidden - The specified resource does not belong to the authenticated
        caller.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            forbidden:
              value:
                type: about:blank
                status: 403
                title: Forbidden
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse500:
      description: Internal Server Error - The server encountered an unexpected condition
        that prevented it from fulfilling the request.
      headers:
        Retry-After:
          $ref: '#/components/headers/RetryAfter'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            default:
              value:
                type: about:blank
                status: 500
                title: Internal Server Error
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse502:
      description: Bad Gateway - The server was acting as a gateway or proxy and received
        an invalid response from the upstream server.
      headers:
        Retry-After:
          $ref: '#/components/headers/RetryAfter'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            default:
              value:
                type: about:blank
                status: 502
                title: Bad Gateway
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse503:
      description: Service Unavailable - The server is currently unable to handle
        the request due to a temporary overload or scheduled maintenance.
      headers:
        Retry-After:
          $ref: '#/components/headers/RetryAfter'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            default:
              value:
                type: about:blank
                status: 503
                title: Service Unavailable
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse409:
      description: Conflict - The request could not be completed due to a conflict
        with the current state of the resource.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            conflict:
              value:
                type: about:blank
                status: 409
                title: Conflict
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse404:
      description: Not Found - The specified resource does not exist, for example,
        when the resource has never existed or when the resource has been deleted.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            not-found:
              value:
                type: about:blank
                status: 404
                title: Not Found
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse410:
      description: Gone - The specified resource is no longer available, for example,
        when the resource has been deleted or has expired.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            default:
              value:
                type: about:blank
                status: 410
                title: Gone
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse415:
      description: |-
        Unsupported Media Type - The request is not in a supported format.
        Ensure that the `Content-Type` header is set to `application/json` (or a compatible format).
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            default:
              value:
                type: about:blank
                status: 415
                title: Unsupported Media Type
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse422:
      description: |-
        Unprocessable Entity - The request was well formed but was not followed due to semantic errors.
        For example:
          - When a reference is not found or is not accessible
          - When a resource is not in a state that allows the requested operation
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            default:
              value:
                type: about:blank
                status: 422
                title: Unprocessable Entity
                callId: 00000000000000000000000000000000-0000000000000000
    errorResponse429:
      description: Too Many Requests
      headers:
        Retry-After:
          $ref: '#/components/headers/RetryAfter'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            default:
              value:
                type: about:blank
                status: 429
                title: Too Many Requests
                callId: 00000000000000000000000000000000-0000000000000000
    ConsumerWriteConflictProblem:
      description: 'Conflict - Another operation is already in progress for this consumer. '
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            ConsumerWriteConflict:
              description: Another write operation is already in progress for this
                consumer.
              value:
                type: /problem/consumer/write-conflict
                status: 409
                title: Conflict
                detail: Another operation was in progress on this consumer. Please
                  try again later.
                callId: 00000000000000000000000000000000-0000000000000000
    UnprocessableContentForPaymentListRetrieval:
      description: 'Unprocessable Entity - The request was well formed but was not
        followed due to semantic errors. For example:  - The payee is a Paylib user
        whose contact cannot be found'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            paylibContactNotFound:
              $ref: '#/components/examples/PaylibContactNotFoundProblem'
    UnprocessableContentForPaymentCreation:
      description: 'The payment cannot be processed for one of the following reasons:
        - The payment source of the payer or payee is not active - The payee is a
        Paylib user that cannot be found - The payee is a Paylib user whose contact
        cannot be found - The payee is a Paylib user whose IBAN cannot be resolved
        - The payee is a Paylib user whose Paylib context data cannot be retrieved
        - The payment is suspected of fraud and has been blocked - The payee is blocked
        by the payer - The payment results in a cross-border payment to a wallet-less
        payee Problems related to "blocked" reasons must have a generic description
        to prevent the consumer from understanding that they are blocked.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            payeePaymentSourceIsInactive:
              $ref: '#/components/examples/PayeePaymentSourceInactiveProblem'
            payerPaymentSourceIsInactive:
              $ref: '#/components/examples/PayerPaymentSourceInactiveProblem'
            paylibPayeeNotFound:
              $ref: '#/components/examples/PaylibPayeeNotFoundProblem'
            contactNotFound:
              $ref: '#/components/examples/ContactNotFoundProblem'
            paymentDetectedAsFraud:
              $ref: '#/components/examples/PaymentUnavailable001Problem'
            payeeBlockedByConsumer:
              $ref: '#/components/examples/PaymentUnavailable002Problem'
            transactionPayeeIsPayer:
              $ref: '#/components/examples/PayeeIsPayerProblem'
            crossBorderPaymentToWalletLessPayee:
              $ref: '#/components/examples/CrossBorderP2PPaymentToWalletLessPayee'
            paylibContactNotFound:
              $ref: '#/components/examples/PaylibContactNotFoundProblem'
            paylibIbanNotFound:
              $ref: '#/components/examples/PaylibIbanNotFoundProblem'
            paylibContextNotFound:
              $ref: '#/components/examples/PaylibContextNotFoundProblem'
    UnprocessableContentForPaymentRetrieval:
      description: 'Unprocessable Entity - The request was well formed but was not
        followed due to semantic errors. For example:  - The payee is a Paylib user
        whose contact cannot be found - The payee is a Paylib user whose IBAN cannot
        be resolved - The payee is a Paylib user whose Paylib context data cannot
        be retrieved'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            paylibContactNotFound:
              $ref: '#/components/examples/PaylibContactNotFoundProblem'
            paylibIbanNotFound:
              $ref: '#/components/examples/PaylibIbanNotFoundProblem'
            paylibContextNotFound:
              $ref: '#/components/examples/PaylibContextNotFoundProblem'
    UnprocessableContentForPaymentApproval:
      description: |-
        One of the following situations applies:
         - The P2P payment is not in the 'Initial' state, so the payer cannot approve it.
         - The consumer PSP has rejected the payment.
         - The payment has failed.
         - The payment source of the payer and payee have the same account identifier.
         - The payment source of the payer or payee is not active.
         - The payee is a Paylib user whose contact cannot be found
         - The payee is a Paylib user whose IBAN cannot be resolved
         - The payee is a Paylib user whose Paylib context data cannot be retrieved

        If the error is of type '/problem/p2p-payment/psp-rejected-payment/*', the 'detail' field contains the message that the payer's PSP provided.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            pspFailed:
              value:
                type: /problem/p2p-payment/payment-failed
                status: 422
                title: Payment failed
                callId: 00000000000000000000000000000000-0000000000000000
            wrongStatus:
              value:
                type: about:blank
                status: 422
                title: Illegal state
                detail: The payer cannot approve the P2P payment because the payment
                  is in the 'Failed' state.
                callId: 00000000000000000000000000000000-0000000000000000
            pspSecurityConcern:
              value:
                type: /problem/p2p-payment/psp-rejected-payment/security-concern
                status: 422
                title: Payment rejected
                detail: The payer's PSP rejected the P2P payment due to security concerns.
                callId: 00000000000000000000000000000000-0000000000000000
            pspInsufficientFunds:
              value:
                type: /problem/p2p-payment/psp-rejected-payment/insufficient-funds
                status: 422
                title: Payment rejected
                detail: The payer's account does not have enough money for the P2P
                  payment.
                callId: 00000000000000000000000000000000-0000000000000000
            pspTransferLimitReached:
              value:
                type: /problem/p2p-payment/psp-rejected-payment/transfer-limit-reached
                status: 422
                title: Payment rejected
                detail: The payer has reached their daily transfer limit and cannot
                  make further payments today.
                callId: 00000000000000000000000000000000-0000000000000000
            pspUnspecified:
              value:
                type: /problem/p2p-payment/psp-rejected-payment/unspecified
                status: 422
                title: Payment rejected
                detail: The payer's PSP rejected the P2P payment.
                callId: 00000000000000000000000000000000-0000000000000000
            transactionPayeeIsPayer:
              $ref: '#/components/examples/PayeeIsPayerProblem'
            payeePaymentSourceIsInactive:
              $ref: '#/components/examples/PayeePaymentSourceInactiveProblem'
            payerPaymentSourceIsInactive:
              $ref: '#/components/examples/PayerPaymentSourceInactiveProblem'
            paylibPayeeNotFound:
              $ref: '#/components/examples/PaylibPayeeNotFoundProblem'
            paylibContactNotFound:
              $ref: '#/components/examples/PaylibContactNotFoundProblem'
            paylibIbanNotFound:
              $ref: '#/components/examples/PaylibIbanNotFoundProblem'
            paylibContextNotFound:
              $ref: '#/components/examples/PaylibContextNotFoundProblem'
    UnprocessableContentForPaymentFraudRiskInformation:
      description: 'Unprocessable Entity - The request was well formed but was not
        followed due to semantic errors. For example:  - The payee is a Paylib user
        whose IBAN cannot be resolved - The payee is a Paylib user whose Paylib context
        data cannot be retrieved'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            paylibIbanNotFound:
              $ref: '#/components/examples/PaylibIbanNotFoundProblem'
            paylibContextNotFound:
              $ref: '#/components/examples/PaylibContextNotFoundProblem'
    UnprocessableContentForPaymentDatasetRetrieval:
      description: 'Unprocessable Entity - The request was well formed but was not
        followed due to semantic errors. For example:  - The payee is a Paylib user
        whose contact cannot be found - The payee is a Paylib user whose IBAN cannot
        be resolved - The payee is a Paylib user whose Paylib context data cannot
        be retrieved'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            paylibContactNotFound:
              $ref: '#/components/examples/PaylibContactNotFoundProblem'
            paylibIbanNotFound:
              $ref: '#/components/examples/PaylibIbanNotFoundProblem'
            paylibContextNotFound:
              $ref: '#/components/examples/PaylibContextNotFoundProblem'
    UnprocessableContentForRequestCreation:
      description: |-
        One of the following situations applies:
         - The payee and payer are the same consumer, so the P2P request cannot be created.
         - The payment source of the payer and payee have the same account identifier.
         - The payment source of the payer or payee is not active.
         - The payer cannot accept requests.
         - The payer has no wallet and can therefore not accept a P2P request.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            transactionPayeeIsPayer:
              $ref: '#/components/examples/PayeeIsPayerProblem'
            payeePaymentSourceIsInactive:
              $ref: '#/components/examples/PayeePaymentSourceInactiveProblem'
            payerPaymentSourceIsInactive:
              $ref: '#/components/examples/PayerPaymentSourceInactiveProblem'
            payerCannotAcceptRequests:
              $ref: '#/components/examples/PayerCannotAcceptRequestsProblem'
            walletlessPayer:
              $ref: '#/components/examples/WalletlessPayerProblem'
    P2PRequestExpired:
      description: Gone - The resource has expired.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            P2PRequestExpired:
              value:
                type: /problem/p2p-request/expired
                status: 410
                title: P2P request expired
                detail: P2P request with ID 0000000000000000 expired at 2023-01-10T10:23:44Z
                callId: 00000000000000000000000000000000-0000000000000000
    UnprocessableContentForRequestApproval:
      description: |-
        One of the following situations applies:
         - The payee and payer are the same, so the payer cannot approve the P2P request.
         - The payment source of the payer is not active.
         - The payment is suspected of fraud and has been blocked
         - The payee is blocked by the payer
         - The payee request results in a cross-border payment and the payee is wallet less
        Problems related to "blocked" reasons must have a generic description to prevent the consumer from understanding that they are blocked.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            transactionPayeeIsPayer:
              $ref: '#/components/examples/PayeeIsPayerProblem'
            payerPaymentSourceIsInactive:
              $ref: '#/components/examples/PayerPaymentSourceInactiveProblem'
            paymentDetectedAsFraud:
              $ref: '#/components/examples/PaymentUnavailable001Problem'
            payeeBlockedByPayer:
              $ref: '#/components/examples/PaymentUnavailable002Problem'
            crossBorderPaymentToWalletLessPayee:
              $ref: '#/components/examples/CrossBorderP2PPaymentToWalletLessPayee'
    UnprocessableContentForOpenRequestPaymentsRetrieval:
      description: 'Unprocessable Entity - The request was well formed but was not
        followed due to semantic errors. For example:  - The payee is a Paylib user
        whose contact cannot be found - The payee is a Paylib user whose IBAN can
        not be resolved - The payee is a Paylib user whose Paylib context data cannot
        be retrieved'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            paylibContactNotFound:
              $ref: '#/components/examples/PaylibContactNotFoundProblem'
            paylibIbanNotFound:
              $ref: '#/components/examples/PaylibIbanNotFoundProblem'
            paylibContextNotFound:
              $ref: '#/components/examples/PaylibContextNotFoundProblem'
    ProvisioningCancelledProblem:
      description: Gone - The specified resource is no longer available.
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            ProvisioningCancelledProblem:
              value:
                type: /problem/provisioning/completed
                status: 410
                title: Provisioning is not active anymore
                callId: 00000000000000000000000000000000-0000000000000000
  headers:
    RetryAfter:
      description: If provided, this header indicates the number of seconds after
        which the client can retry the request.
      required: false
      schema:
        type: integer
        format: int32
    RateLimitRemaining:
      schema:
        type: integer
      description: The number of remaining requests left within the time window.
      example: 1
    RateLimitReset:
      schema:
        type: integer
      description: The unix-time at which the usage will be reset.
      example: 1711119635
  parameters:
    acceptorId:
      name: acceptorId
      in: path
      description: ID of the acceptor that EPI central services provide when creating
        the acceptor resource.
      required: true
      schema:
        type: string
        format: uuid
    shopId:
      name: shopId
      in: path
      description: The ID of the shop sub-resource.
      required: true
      schema:
        type: string
        format: uuid
    page:
      name: page
      description: The page to be retrieved. If not specified, the default value is
        `0`.
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
    size:
      name: size
      description: The maximum number of items to be returned for each page. If not
        specified, the default value is `100`.
      in: query
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 100
    activityId:
      name: activityId
      description: The ID of the activity.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    brandId:
      name: brandId
      description: The brand ID.
      in: path
      required: true
      schema:
        type: string
        format: uuid
        example: ddffc0cf-63ee-4752-855c-607a0e7c6e52
    bankId:
      name: bankId
      description: The bank ID.
      in: path
      required: true
      schema:
        type: string
        format: uuid
        example: 123e4567-e89b-12d3-a456-426614174000
    appId:
      name: appId
      description: The app ID.
      in: path
      required: true
      schema:
        type: string
        format: uuid
        example: ddffc0cf-63ee-4752-855c-607a0e7c6e52
    consentId:
      name: consentId
      in: path
      description: The wallet uses the ID of the P2P payment resource. The acceptor
        PSP uses the ID of the consent resource.
      required: true
      schema:
        type: string
        format: uuid
    consumerId:
      name: consumerId
      description: ID of the consumer resource that is created as a result of the
        create a consumer endpoint call.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    contactBlockId:
      name: contactBlockId
      in: path
      description: The contact block ID.
      required: true
      schema:
        type: string
        format: uuid
    contactItemId:
      name: contactItemId
      in: path
      description: The contact item ID.
      required: true
      schema:
        type: string
        format: uuid
    paymentSourceProfileId:
      name: paymentSourceProfileId
      description: ID of the payment source profile. This is identical to paymentSourceId.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    proxyId:
      name: proxyId
      description: ID of the proxy resource
      in: path
      required: true
      schema:
        type: string
        format: uuid
    pspProfileId:
      name: pspProfileId
      description: ID of the PSP profile resource.
      in: path
      required: true
      schema:
        type: string
    easyCheckoutProfileId:
      name: easyCheckoutProfileId
      in: path
      description: The `easyCheckoutProfile` ID.
      required: true
      schema:
        type: string
        format: uuid
    p2pOpenRequestId:
      name: p2pOpenRequestId
      description: ID of the P2P open request. This is the technical ID of the resource,
        not the public one.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    consumerPspId:
      name: consumerPspId
      in: path
      description: The consumer PSP ID.
      required: true
      schema:
        type: string
        format: uuid
    PreDisputeStatusInQuery:
      name: status
      in: query
      description: |-
        Filter by the status of the pre-dispute.

         This query parameter accepts multiple values in the following format: `status=Initiated&status=Closed`
      required: false
      schema:
        $ref: '#/components/schemas/DisputeStatus'
      explode: true
    PreDisputeReasonInQuery:
      name: reason
      in: query
      description: |-
        Filter by the reason for the pre-dispute.
        This query parameter accepts multiple values in the following format: `reason=GoodsNotReceived&reason=GoodsNotAsDescribed`
      required: false
      schema:
        $ref: '#/components/schemas/PreDisputeReason'
      explode: true
    DisputeIdInPath:
      name: disputeId
      description: The ID of the dispute.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    FileNameInPath:
      name: fileName
      description: The name of the file to be downloaded.
      in: path
      required: true
      schema:
        type: string
    Idempotency-Key:
      name: Idempotency-Key
      in: header
      schema:
        type: string
        format: uuid
        example: 1f29c6c9-592d-40b2-8e5c-6398d64fccee
      description: Client-generated key to enable safe resending of request.
      required: false
    p2pPaymentId:
      name: p2pPaymentId
      description: The ID of the P2P payment.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    p2pRequestId:
      name: p2pRequestId
      description: The P2P request ID.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    paymentRequestId:
      name: paymentRequestId
      description: The payment request ID.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    captureId:
      name: captureId
      description: The capture ID.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    refundId:
      name: refundId
      description: The refund ID.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    proxyHash:
      name: proxyHash
      description: The proxy hash.
      in: path
      required: true
      schema:
        type: string
        minLength: 44
        maxLength: 44
    routingAdviceId:
      name: routingAdviceId
      in: path
      description: The ID of the routing advice resource.
      required: true
      schema:
        type: string
        format: uuid
      examples:
        valid:
          value: 5a09f821-f0a0-40ea-b3db-52e52bc52b8d
          summary: A valid routing advice id
    serviceProviderId:
      name: serviceProviderId
      description: The ID of the service provider.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    pagination-page:
      name: page
      description: The page number that is to be retrieved.  If not specified, the
        default value is `0`.
      in: query
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
      examples:
        get-mergers:
          value: 1
    pagination-size:
      name: size
      description: The maximum number of items to return per page. If not specified,
        the default value is `10`.
      in: query
      required: false
      schema:
        type: integer
        minimum: 10
        maximum: 100
        default: 10
      examples:
        get-mergers:
          value: 20
    mergerId:
      name: mergerId
      description: The ID of the bank merger.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    billedMemberId:
      schema:
        type: string
        format: uuid
      name: billedMemberId
      in: path
      required: true
      description: The member ID of the member that is being invoiced.
      examples:
        valid:
          value: b39d974d-9bf2-4319-b817-e4dd85f3f4e5
          summary: A valid billed member Id
    billingYear:
      name: year
      schema:
        type: string
        pattern: 20[0-9]{2}
      in: path
      required: true
      description: The calendar year of the invoice in `YYYY` format.
    billingMonth:
      schema:
        type: string
        minimum: 1
        maximum: 12
      name: month
      in: path
      required: true
      description: The calendar month that is being invoiced, in `MM` format
    PaymentSourceIdQuery:
      name: paymentSourceId
      in: query
      required: false
      schema:
        type: string
      description: Matches all transactions that were created with the given `paymentSourceId`.
    TransactionIdPath:
      name: transactionId
      description: The ID of the transaction.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    provisioningId:
      $ref: '#/components/parameters/provisioningID'
    provisioningID:
      name: provisioningId
      description: The ID of the provisioning.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    walletId:
      name: walletId
      description: The ID of the wallet.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    paymentMeansId:
      name: paymentMeansId
      description: The ID of the payment means.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    query:
      name: query
      in: query
      schema:
        type: string
      description: The type of query to be executed. Example query `?query=byProvisioningId&query=byProvisioningId&provisioningId=`
        and build as necessary.
    provisioningIDQuery:
      name: provisioningId
      description: The ID of the provisioning.
      in: query
      required: false
      schema:
        type: string
        format: uuid
    PaymentSourceIdPath:
      name: paymentSourceId
      description: The ID of the payment source.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    ContextUomCode:
      name: Context-Uom-Code
      in: header
      description: According CAM0303 standard. It represents the entity the user is
        belonging to.
      required: true
      schema:
        type: string
    CorrelationId:
      name: CorrelationId
      in: header
      description: Correlation header to be set in a request and retrieved in the
        relevant response.
      required: true
      schema:
        type: string
    ExternalId:
      name: ExternalId
      in: header
      description: Consumer's external id, used to correlate various API calls related
        to this consumer.
      required: true
      schema:
        type: string
    ConsumerIdOpt:
      name: ConsumerId
      in: header
      description: 'EPI Consumer Id (format UUID v4). This header is optional: add
        it only if you want to access the resource as a Consumer'
      required: false
      schema:
        type: string
    ConsumerIdReq:
      name: ConsumerId
      in: header
      description: EPI Consumer Id (format UUID v4)
      required: true
      schema:
        type: string
  examples:
    ConsumerPSPIsBeingMergedProblem:
      value:
        type: /problem/consumer-psp/consumer-psp-is-being-merged
        status: 422
        title: Consumer PSP is being merged
        detail: PSP with ID 00000000-00000000-00000000-00000000 is currently being
          merged with another PSP.
        callId: 00000000000000000000000000000000-0000000000000000
    allPaymentStatuses:
      value: Initial,Canceled,Approved,Accepted,Rejected,Settled,Failed,Expired
      summary: A comma-separated list of all possible values at once.
    PaylibContactNotFoundProblem:
      value:
        type: /problem/paylib/payee/not-found
        status: 422
        title: Payee not found
        detail: Payee could not be found by proxy hash in Paylib directory
        callId: 00000000000000000000000000000000-0000000000000000
    PayeePaymentSourceInactiveProblem:
      value:
        type: /problem/payment-source/payee-inactive
        status: 422
        title: Payment Source Not Active
        callId: 00000000000000000000000000000000-0000000000000000
    PayerPaymentSourceInactiveProblem:
      value:
        type: /problem/payment-source/payer-inactive
        status: 422
        title: Payment Source Not Active
        callId: 00000000000000000000000000000000-0000000000000000
    PaylibPayeeNotFoundProblem:
      value:
        type: /problem/paylib/payee/not-found
        status: 422
        title: Paylib payee not found
        callId: 00000000000000000000000000000000-0000000000000000
    ContactNotFoundProblem:
      value:
        type: about:blank
        status: 422
        title: Paylib payee not found
        callId: 00000000000000000000000000000000-0000000000000000
    PaymentUnavailable001Problem:
      value:
        type: /problem/p2p-payment/unavailable/001
        status: 422
        title: Payment unavailable
        callId: 00000000000000000000000000000000-0000000000000000
    PaymentUnavailable002Problem:
      value:
        type: /problem/p2p-payment/unavailable/002
        status: 422
        title: Recipient unavailable
        callId: 00000000000000000000000000000000-0000000000000000
    PayeeIsPayerProblem:
      value:
        type: /problem/transaction/payee-is-payer
        status: 422
        title: The payee cannot be the payer
        callId: 00000000000000000000000000000000-0000000000000000
    CrossBorderP2PPaymentToWalletLessPayee:
      value:
        type: /problem/p2p-payment/cross-border-to-wallet-less
        status: 422
        title: Payee unavailable
        callId: 00000000000000000000000000000000-0000000000000000
    PaylibIbanNotFoundProblem:
      value:
        type: /problem/paylib/payee/iban-not-found
        status: 422
        title: IBAN not found
        detail: IBAN of Paylib payee could not be found
        callId: 00000000000000000000000000000000-0000000000000000
    PaylibContextNotFoundProblem:
      value:
        type: /problem/paylib/payee/context-not-found
        status: 422
        title: Paylib Context not found
        detail: Paylib context of payment could not be found
        callId: 00000000000000000000000000000000-0000000000000000
    allRequestStatuses:
      value: Pending,Rejected,Approved,Canceled,Expired
      summary: A comma-separated list of all possible values at once.
    PayerCannotAcceptRequestsProblem:
      value:
        type: /problem/p2p-request/payer-cannot-accept-requests
        status: 422
        title: Payer cannot accept requests
        callId: 00000000000000000000000000000000-0000000000000000
    WalletlessPayerProblem:
      value:
        type: /problem/p2p-request/walletless-payer
        status: 422
        title: Payer has no wallet
        detail: The payer has no wallet, so the P2P request cannot be created.
        callId: 00000000000000000000000000000000-0000000000000000
    createdRoutingAdvice:
      value:
        id: 5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
        amount:
          euroCents: 1999
        orderReferenceId: '2206600275931757'
        acceptor:
          name: acceptor
          shop:
            name: shop
        issuerId: ABNANL2A
        routingAdviceCallbackUrl: https://api.acceptor-psp.com/updates
        _links:
          self:
            href: https://checked.local.epi.rocks/api/rsm/routing-advice/5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
          landingPage:
            href: https://pay.local.epi.rocks/5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
    existingRoutingAdvice:
      value:
        id: 5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
        amount:
          euroCents: 1999
        orderReferenceId: '2206600275931757'
        acceptor:
          name: acceptor
          shop:
            name: shop
        issuerId: ABNANL2A
        returnUrl: https://shopping.com/order?orderId=45029ac2-b22a-4121-b7d7-e90ae0e307f3
        routingAdviceCallbackUrl: https://api.acceptor-psp.com/updates
        advice: WERO
        _links:
          self:
            href: https://checked.local.epi.rocks/api/rsm/routing-advice/5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
          landingPage:
            href: https://pay.local.epi.rocks/5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
          redirectUrl:
            href: https://pay.local.epi.rocks/5f7c8ca7-581a-43cb-ba27-08409c1cfb4b
x-readme:
  explorer-enabled: false
